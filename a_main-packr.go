// Code generated by github.com/gobuffalo/packr. DO NOT EDIT.

package main

import "github.com/gobuffalo/packr"

// You can use the "packr clean" command to clean up this,
// and any other packr generated files.
func init() {
		packr.PackJSONBytes("builtin", "fast/collection.tpl", "\"Ly8gR2VuZXJhdGVkIGZyb20ge3suVGVtcGxhdGVGaWxlfX0gd2l0aCBUeXBlPXt7LlR5cGV9fQovLyBvcHRpb25zOiBDb21wYXJhYmxlOnt7LkNvbXBhcmFibGV9fSBOdW1lcmljOnt7Lk51bWVyaWN9fSBPcmRlcmVkOnt7Lk9yZGVyZWR9fSBTdHJpbmdlcjp7ey5TdHJpbmdlcn19IE11dGFibGU6YWx3YXlzCi8vIGJ5IHJ1bnRlbXBsYXRlIHt7LkFwcFZlcnNpb259fQovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pvaGFuYnJhbmRob3JzdC9ydW50ZW1wbGF0ZS9ibG9iL21hc3Rlci9CVUlMVElOLm1kCgpwYWNrYWdlIHt7LlBhY2thZ2V9fQoKe3tpZiAuSGFzSW1wb3J0fX0KaW1wb3J0ICgKCXt7LkltcG9ydH19CikKCnt7ZW5kIC19fQovLyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TaXplciBkZWZpbmVzIGFuIGludGVyZmFjZSBmb3Igc2l6aW5nIG1ldGhvZHMgb24ge3suVHlwZX19IGNvbGxlY3Rpb25zLgp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNpemVyIGludGVyZmFjZSB7CgkvLyBJc0VtcHR5IHRlc3RzIHdoZXRoZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiBpcyBlbXB0eS4KCUlzRW1wdHkoKSBib29sCgoJLy8gTm9uRW1wdHkgdGVzdHMgd2hldGhlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Db2xsZWN0aW9uIGlzIGVtcHR5LgoJTm9uRW1wdHkoKSBib29sCgoJLy8gU2l6ZSByZXR1cm5zIHRoZSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIGxpc3QgLSBhbiBhbGlhcyBvZiBMZW4oKS4KCVNpemUoKSBpbnQKfQp7ey0gaWYgLlN0cmluZ2VyfX0KCi8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1rU3RyaW5nZXIgZGVmaW5lcyBhbiBpbnRlcmZhY2UgZm9yIHN0cmluZ2VyIG1ldGhvZHMgb24ge3suVHlwZX19IGNvbGxlY3Rpb25zLgp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1rU3RyaW5nZXIgaW50ZXJmYWNlIHsKCS8vIFN0cmluZyBpbXBsZW1lbnRzIHRoZSBTdHJpbmdlciBpbnRlcmZhY2UgdG8gcmVuZGVyIHRoZSBsaXN0IGFzIGEgY29tbWEtc2VwYXJhdGVkIHN0cmluZyBlbmNsb3NlZAoJLy8gaW4gc3F1YXJlIGJyYWNrZXRzLgoJU3RyaW5nKCkgc3RyaW5nCgoJLy8gTWtTdHJpbmcgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcgdXNpbmcgYSBzdXBwbGllZCBzZXBhcmF0b3IuIE5vIGVuY2xvc2luZyBtYXJrcyBhcmUgYWRkZWQuCglNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcKCgkvLyBNa1N0cmluZzMgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcsIHVzaW5nIHRoZSBwcmVmaXgsIHNlcGFyYXRvciBhbmQgc3VmZml4IHN1cHBsaWVkLgoJTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcKCgkvLyBpbXBsZW1lbnRzIGpzb24uTWFyc2hhbGVyIGludGVyZmFjZSB7CglNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKQoKCS8vIGltcGxlbWVudHMganNvbi5Vbm1hcnNoYWxlciBpbnRlcmZhY2UgewoJVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IKCgkvLyBTdHJpbmdMaXN0IGdldHMgYSBsaXN0IG9mIHN0cmluZ3MgdGhhdCBkZXBpY3RzIGFsbCB0aGUgZWxlbWVudHMuCglTdHJpbmdMaXN0KCkgW11zdHJpbmcKfQp7ey0gZW5kfX0KCi8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUNvbGxlY3Rpb24gZGVmaW5lcyBhbiBpbnRlcmZhY2UgZm9yIGNvbW1vbiBjb2xsZWN0aW9uIG1ldGhvZHMgb24ge3suVHlwZX19Lgp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUNvbGxlY3Rpb24gaW50ZXJmYWNlIHsKCXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNpemVyCnt7LSBpZiAuU3RyaW5nZXJ9fQoJe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TWtTdHJpbmdlcgp7ey0gZW5kfX0KCgkvLyBJc1NlcXVlbmNlIHJldHVybnMgdHJ1ZSBmb3IgbGlzdHMgYW5kIHF1ZXVlcy4KCUlzU2VxdWVuY2UoKSBib29sCgoJLy8gSXNTZXQgcmV0dXJucyBmYWxzZSBmb3IgbGlzdHMgYW5kIHF1ZXVlcy4KCUlzU2V0KCkgYm9vbAp7ey0gaWYgLlRvTGlzdH19CgoJLy8gVG9MaXN0IHJldHVybnMgYSBzaGFsbG93IGNvcHkgYXMgYSBsaXN0LgoJVG9MaXN0KCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QKe3stIGVuZH19Cnt7LSBpZiAuVG9TZXR9fQoKCS8vIFRvU2V0IHJldHVybnMgYSBzaGFsbG93IGNvcHkgYXMgYSBzZXQuCglUb1NldCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQKe3stIGVuZH19CgoJLy8gVG9TbGljZSByZXR1cm5zIGEgc2hhbGxvdyBjb3B5IGFzIGEgcGxhaW4gc2xpY2UuCglUb1NsaWNlKCkgW117ey5UeXBlfX0KCgkvLyBUb0ludGVyZmFjZVNsaWNlIHJldHVybnMgYSBzaGFsbG93IGNvcHkgYXMgYSBzbGljZSBvZiBhcmJpdHJhcnkgdHlwZS4KCVRvSW50ZXJmYWNlU2xpY2UoKSBbXWludGVyZmFjZXt9CgoJLy8gRXhpc3RzIHZlcmlmaWVzIHRoYXQgb25lIG9yIG1vcmUgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgoJRXhpc3RzKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIGJvb2wKCgkvLyBGb3JhbGwgdmVyaWZpZXMgdGhhdCBhbGwgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgoJRm9yYWxsKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIGJvb2wKCgkvLyBGb3JlYWNoIGl0ZXJhdGVzIG92ZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiBhbmQgZXhlY3V0ZXMgdGhlIGZ1bmN0aW9uIGYgYWdhaW5zdCBlYWNoIGVsZW1lbnQuCglGb3JlYWNoKGYgZnVuYyh7ey5UeXBlfX0pKQoKCS8vIEZpbmQgcmV0dXJucyB0aGUgZmlyc3Qge3suVHlwZX19IHRoYXQgcmV0dXJucyB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCgkvLyBGYWxzZSBpcyByZXR1cm5lZCBpZiBub25lIG1hdGNoLgoJRmluZChwIGZ1bmMoe3suVHlwZX19KSBib29sKSAoe3suVHlwZX19LCBib29sKQp7ey0gcmFuZ2UgLk1hcFRvfX0KCgkvLyBNYXBUb3t7LlV9fSByZXR1cm5zIGEgbmV3IFtde3sufX0gYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCBmdW5jdGlvbiBmLgoJLy8gVGhlIHJlc3VsdGluZyBzbGljZSBpcyB0aGUgc2FtZSBzaXplIGFzIHRoZSBjb2xsZWN0aW9uLiBUaGUgY29sbGVjdGlvbiBpcyBub3QgbW9kaWZpZWQuCglNYXBUb3t7LlV9fShmIGZ1bmMoe3skLlR5cGV9fSkge3sufX0pIFtde3sufX0Ke3stIGVuZH19Cnt7LSByYW5nZSAuTWFwVG99fQoKCS8vIEZsYXRNYXB7ey5VfX0gcmV0dXJucyBhIG5ldyBbXXt7Ln19IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggZnVuY3Rpb24gZgoJLy8gdGhhdCByZXR1cm5zIHplcm8gb3IgbW9yZSBpdGVtcyBpbiBhIHNsaWNlLiBUaGUgcmVzdWx0aW5nIGxpc3QgbWF5IGhhdmUgYSBkaWZmZXJlbnQgc2l6ZSB0byB0aGUKCS8vIGNvbGxlY3Rpb24uIFRoZSBjb2xsZWN0aW9uIGlzIG5vdCBtb2RpZmllZC4KCUZsYXRNYXBUb3t7LlV9fShmIGZ1bmMoe3skLlR5cGV9fSkgW117ey59fSkgW117ey59fQp7ey0gZW5kfX0KCgkvLyBTZW5kIHJldHVybnMgYSBjaGFubmVsIHRoYXQgd2lsbCBzZW5kIGFsbCB0aGUgZWxlbWVudHMgaW4gb3JkZXIuIENhbiBiZSB1c2VkIHdpdGggdGhlIHBsdW1iaW5nIGNvZGUsIGZvciBleGFtcGxlLgoJLy8gQSBnb3JvdXRpbmUgaXMgY3JlYXRlZCB0byBzZW5kIHRoZSBlbGVtZW50czsgdGhpcyBvbmx5IHRlcm1pbmF0ZXMgd2hlbiBhbGwgdGhlIGVsZW1lbnRzIGhhdmUgYmVlbiBjb25zdW1lZAoJU2VuZCgpIDwtY2hhbiB7ey5UeXBlfX0KCgkvLyBDb3VudEJ5IGdpdmVzIHRoZSBudW1iZXIgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiB0aGF0IHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCglDb3VudEJ5KHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIGludAp7ey0gaWYgLkNvbXBhcmFibGV9fQoKCS8vIENvbnRhaW5zIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGl0ZW0gaXMgYWxyZWFkeSBpbiB0aGUgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRydWUgaWYgc28uCglDb250YWlucyh2IHt7LlR5cGV9fSkgYm9vbAoKCS8vIENvbnRhaW5zQWxsIGRldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gaXRlbXMgYXJlIGFsbCBpbiB0aGUgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRydWUgaWYgc28uCglDb250YWluc0FsbCh2IC4uLnt7LlR5cGV9fSkgYm9vbAp7ey0gZW5kfX0KCgkvLyBDbGVhciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uCglDbGVhcigpCgoJLy8gQWRkIGFkZHMgaXRlbXMgdG8gdGhlIGN1cnJlbnQgY29sbGVjdGlvbi4KCUFkZChtb3JlIC4uLnt7LlR5cGV9fSkKe3stIGlmIC5PcmRlcmVkfX0KCgkvLyBNaW4gcmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZSBvZiBhbGwgdGhlIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgoJTWluKCkge3suVHlwZS5OYW1lfX0KCgkvLyBNYXggcmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZSBvZiBhbGwgdGhlIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgoJTWF4KCkge3suVHlwZS5OYW1lfX0Ke3stIGVuZH19CgoJLy8gTWluQnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUNvbGxlY3Rpb24gY29udGFpbmluZyB0aGUgbWluaW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cwoJLy8gdXNpbmcgYSBwYXNzZWQgZnVuYyBkZWZpbmluZyDigJhsZXNz4oCZLiBJbiB0aGUgY2FzZSBvZiBtdWx0aXBsZSBpdGVtcyBiZWluZyBlcXVhbGx5IG1pbmltYWwsIHRoZSBmaXJzdCBzdWNoCgkvLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgoJTWluQnkobGVzcyBmdW5jKHt7LlR5cGV9fSwge3suVHlwZX19KSBib29sKSB7ey5UeXBlfX0KCgkvLyBNYXhCeSByZXR1cm5zIGFuIGVsZW1lbnQgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiBjb250YWluaW5nIHRoZSBtYXhpbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCgkvLyB1c2luZyBhIHBhc3NlZCBmdW5jIGRlZmluaW5nIOKAmGxlc3PigJkuIEluIHRoZSBjYXNlIG9mIG11bHRpcGxlIGl0ZW1zIGJlaW5nIGVxdWFsbHkgbWF4aW1hbCwgdGhlIGZpcnN0IHN1Y2gKCS8vIGVsZW1lbnQgaXMgcmV0dXJuZWQuIFBhbmljcyBpZiB0aGVyZSBhcmUgbm8gZWxlbWVudHMuCglNYXhCeShsZXNzIGZ1bmMoe3suVHlwZX19LCB7ey5UeXBlfX0pIGJvb2wpIHt7LlR5cGV9fQp7ey0gaWYgLk51bWVyaWN9fQoKCS8vIFN1bSByZXR1cm5zIHRoZSBzdW0gb2YgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgY29sbGVjdGlvbi4KCVN1bSgpIHt7LlR5cGUuTmFtZX19Cnt7LSBlbmR9fQp9Cg==\"")
		packr.PackJSONBytes("builtin", "fast/list.tpl", "\"Ly8gQW4gZW5jYXBzdWxhdGVkIFtde3suVHlwZX19LgovLyBOb3QgdGhyZWFkLXNhZmUuCi8vCi8vIEdlbmVyYXRlZCBmcm9tIHt7LlRlbXBsYXRlRmlsZX19IHdpdGggVHlwZT17ey5UeXBlfX0KLy8gb3B0aW9uczogQ29tcGFyYWJsZTp7ey5Db21wYXJhYmxlfX0gTnVtZXJpYzp7ey5OdW1lcmljfX0gT3JkZXJlZDp7ey5PcmRlcmVkfX0gU3RyaW5nZXI6e3suU3RyaW5nZXJ9fQovLyBHb2JFbmNvZGU6e3suR29iRW5jb2RlfX0gTXV0YWJsZTphbHdheXMgVG9MaXN0OmFsd2F5cyBUb1NldDp7ey5Ub1NldH19IE1hcFRvOnt7Lk1hcFRvfX0KLy8gYnkgcnVudGVtcGxhdGUge3suQXBwVmVyc2lvbn19Ci8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vam9oYW5icmFuZGhvcnN0L3J1bnRlbXBsYXRlL2Jsb2IvbWFzdGVyL0JVSUxUSU4ubWQKCnBhY2thZ2Uge3suUGFja2FnZX19CgppbXBvcnQgKAp7ey0gaWYgb3IgLlN0cmluZ2VyIC5Hb2JFbmNvZGV9fQoJImJ5dGVzIgp7ey0gZW5kfX0Ke3stIGlmIC5Hb2JFbmNvZGV9fQoJImVuY29kaW5nL2dvYiIKe3stIGVuZH19Cnt7LSBpZiAuU3RyaW5nZXJ9fQoJImVuY29kaW5nL2pzb24iCgkiZm10Igp7ey0gZW5kfX0KCSJtYXRoL3JhbmQiCgkic29ydCIKe3stIGlmIC5IYXNJbXBvcnR9fQoJe3suSW1wb3J0fX0Ke3stIGVuZH19CikKCi8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29udGFpbnMgYSBzbGljZSBvZiB0eXBlIHt7LlR5cGV9fS4KLy8gSXQgZW5jYXBzdWxhdGVzIHRoZSBzbGljZSBhbmQgcHJvdmlkZXMgbWV0aG9kcyB0byBhY2Nlc3Mgb3IgbXV0YXRlIGl0LgovLwovLyBMaXN0IHZhbHVlcyBmb2xsb3cgYSBzaW1pbGFyIHBhdHRlcm4gdG8gU2NhbGEgTGlzdHMgYW5kIExpbmVhclNlcXMgaW4gcGFydGljdWxhci4KLy8gRm9yIGNvbXBhcmlzb24gd2l0aCBTY2FsYSwgc2VlIGUuZy4gaHR0cDovL3d3dy5zY2FsYS1sYW5nLm9yZy9hcGkvMi4xMS43LyNzY2FsYS5jb2xsZWN0aW9uLkxpbmVhclNlcQp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3Qgc3RydWN0IHsKCW0gW117ey5UeXBlfX0KfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBtYWtlcyBhbiBlbXB0eSBsaXN0IHdpdGggYm90aCBsZW5ndGggYW5kIGNhcGFjaXR5IGluaXRpYWxpc2VkLgpmdW5jIE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KGxlbmd0aCwgY2FwYWNpdHkgaW50KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXR1cm4gJnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3R7CgkJbTogbWFrZShbXXt7LlR5cGV9fSwgbGVuZ3RoLCBjYXBhY2l0eSksCgl9Cn0KCi8vIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29uc3RydWN0cyBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIHN1cHBsaWVkIHZhbHVlcywgaWYgYW55LgpmdW5jIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QodmFsdWVzIC4uLnt7LlR5cGV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJbGlzdCA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdChsZW4odmFsdWVzKSwgbGVuKHZhbHVlcykpCgljb3B5KGxpc3QubSwgdmFsdWVzKQoJcmV0dXJuIGxpc3QKfQoKLy8gQ29udmVydHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29uc3RydWN0cyBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIHN1cHBsaWVkIHZhbHVlcywgaWYgYW55LgovLyBUaGUgcmV0dXJuZWQgYm9vbGVhbiB3aWxsIGJlIGZhbHNlIGlmIGFueSBvZiB0aGUgdmFsdWVzIGNvdWxkIG5vdCBiZSBjb252ZXJ0ZWQgY29ycmVjdGx5LgovLyBUaGUgcmV0dXJuZWQgbGlzdCB3aWxsIGNvbnRhaW4gYWxsIHRoZSB2YWx1ZXMgdGhhdCB3ZXJlIGNvcnJlY3RseSBjb252ZXJ0ZWQuCmZ1bmMgQ29udmVydHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QodmFsdWVzIC4uLmludGVyZmFjZXt9KSAoKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QsIGJvb2wpIHsKCWxpc3QgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKHZhbHVlcykpCgoJZm9yIF8sIGkgOj0gcmFuZ2UgdmFsdWVzIHsKCQlzd2l0Y2ggaiA6PSBpLih0eXBlKSB7Cnt7LSBpZiAuTnVtZXJpY319CgkJY2FzZSBpbnQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqaW50OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlIGludDg6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqaW50ODoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSBpbnQxNjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlICppbnQxNjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSBpbnQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlICppbnQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSBpbnQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlICppbnQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSB1aW50OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgKnVpbnQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgdWludDg6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqdWludDg6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgdWludDE2OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgKnVpbnQxNjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSB1aW50MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqdWludDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlIHVpbnQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlICp1aW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgZmxvYXQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlICpmbG9hdDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlIGZsb2F0NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqZmxvYXQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCnt7LSBlbHNlfX0KCQl7ey0gaWYgLlR5cGUuSXNQdHJ9fQoJCWNhc2Uge3suVHlwZS5OYW1lfX06CgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sICZqKQoJCWNhc2UgKnt7LlR5cGUuTmFtZX19OgoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCBqKQoJCXt7LSBlbHNlfX0KCQljYXNlIHt7LlR5cGV9fToKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwgaikKCQljYXNlICp7ey5UeXBlfX06CgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sICpqKQoJCXt7LSBlbmR9fQp7ey0gZW5kfX0KCQl9Cgl9CgoJcmV0dXJuIGxpc3QsIGxlbihsaXN0Lm0pID09IGxlbih2YWx1ZXMpCn0KCi8vIEJ1aWxke3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdEZyb21DaGFuIGNvbnN0cnVjdHMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBmcm9tIGEgY2hhbm5lbCB0aGF0IHN1cHBsaWVzCi8vIGEgc2VxdWVuY2Ugb2YgdmFsdWVzIHVudGlsIGl0IGlzIGNsb3NlZC4gVGhlIGZ1bmN0aW9uIGRvZXNuJ3QgcmV0dXJuIHVudGlsIHRoZW4uCmZ1bmMgQnVpbGR7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0RnJvbUNoYW4oc291cmNlIDwtY2hhbiB7ey5UeXBlfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWxpc3QgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCWZvciB2IDo9IHJhbmdlIHNvdXJjZSB7CgkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwgdikKCX0KCXJldHVybiBsaXN0Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gSXNTZXF1ZW5jZSByZXR1cm5zIHRydWUgZm9yIGxpc3RzIGFuZCBxdWV1ZXMuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIElzU2VxdWVuY2UoKSBib29sIHsKCXJldHVybiB0cnVlCn0KCi8vIElzU2V0IHJldHVybnMgZmFsc2UgZm9yIGxpc3RzIG9yIHF1ZXVlcy4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgSXNTZXQoKSBib29sIHsKCXJldHVybiBmYWxzZQp9CgovLyBzbGljZSByZXR1cm5zIHRoZSBpbnRlcm5hbCBlbGVtZW50cyBvZiB0aGUgY3VycmVudCBsaXN0LiBUaGlzIGlzIGEgc2VhbSBmb3IgdGVzdGluZyBldGMuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIHNsaWNlKCkgW117ey5UeXBlfX0gewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCXJldHVybiBsaXN0Lm0KfQoKLy8gVG9MaXN0IHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBsaXN0IGFzIGEgbGlzdCwgd2hpY2ggaXMgYW4gaWRlbnRpdHkgb3BlcmF0aW9uIGluIHRoaXMgY2FzZS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgVG9MaXN0KCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJcmV0dXJuIGxpc3QKfQp7ey0gaWYgLlRvU2V0fX0KCi8vIFRvU2V0IHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBsaXN0IGFzIGEgc2V0LiBUaGUgcmV0dXJuZWQgc2V0IGlzIGEgc2hhbGxvdwovLyBjb3B5OyB0aGUgbGlzdCBpcyBub3QgYWx0ZXJlZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgVG9TZXQoKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmV0dXJuIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldChsaXN0Lm0uLi4pCn0Ke3stIGVuZH19CgovLyBUb1NsaWNlIHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBjdXJyZW50IGxpc3QgYXMgYSBzbGljZS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgVG9TbGljZSgpIFtde3suVHlwZX19IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcyA6PSBtYWtlKFtde3suVHlwZX19LCBsZW4obGlzdC5tKSwgbGVuKGxpc3QubSkpCgljb3B5KHMsIGxpc3QubSkKCXJldHVybiBzCn0KCi8vIFRvSW50ZXJmYWNlU2xpY2UgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgdGhlIGN1cnJlbnQgbGlzdCBhcyBhIHNsaWNlIG9mIGFyYml0cmFyeSB0eXBlLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUb0ludGVyZmFjZVNsaWNlKCkgW11pbnRlcmZhY2V7fSB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXMgOj0gbWFrZShbXWludGVyZmFjZXt9LCAwLCBsZW4obGlzdC5tKSkKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJcyA9IGFwcGVuZChzLCB2KQoJfQoJcmV0dXJuIHMKfQoKLy8gQ2xvbmUgcmV0dXJucyBhIHNoYWxsb3cgY29weSBvZiB0aGUgbGlzdC4gSXQgZG9lcyBub3QgY2xvbmUgdGhlIHVuZGVybHlpbmcgZWxlbWVudHMuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIENsb25lKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXR1cm4gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdChsaXN0Lm0uLi4pCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gR2V0IGdldHMgdGhlIHNwZWNpZmllZCBlbGVtZW50IGluIHRoZSBsaXN0LgovLyBQYW5pY3MgaWYgdGhlIGluZGV4IGlzIG91dCBvZiByYW5nZSBvciB0aGUgbGlzdCBpcyBuaWwuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEdldChpIGludCkge3suVHlwZX19IHsKCglyZXR1cm4gbGlzdC5tW2ldCn0KCi8vIEhlYWQgZ2V0cyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgbGlzdC4gSGVhZCBwbHVzIFRhaWwgaW5jbHVkZSB0aGUgd2hvbGUgbGlzdC4gSGVhZCBpcyB0aGUgb3Bwb3NpdGUgb2YgTGFzdC4KLy8gUGFuaWNzIGlmIGxpc3QgaXMgZW1wdHkgb3IgbmlsLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBIZWFkKCkge3suVHlwZX19IHsKCglyZXR1cm4gbGlzdC5tWzBdCn0KCi8vIEhlYWRPcHRpb24gZ2V0cyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgbGlzdCwgaWYgcG9zc2libGUuCi8vIE90aGVyd2lzZSByZXR1cm5zIHt7aWYgLlR5cGUuSXNQdHJ9fW5pbHt7ZWxzZX19dGhlIHplcm8gdmFsdWV7e2VuZH19LgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBIZWFkT3B0aW9uKCkge3suVHlwZX19IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4ge3suVHlwZS5aZXJvfX0KCX0KCglpZiBsZW4obGlzdC5tKSA9PSAwIHsKCQlyZXR1cm4ge3suVHlwZS5aZXJvfX0KCX0KCXJldHVybiBsaXN0Lm1bMF0KfQoKLy8gTGFzdCBnZXRzIHRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlIGxpc3QuIEluaXQgcGx1cyBMYXN0IGluY2x1ZGUgdGhlIHdob2xlIGxpc3QuIExhc3QgaXMgdGhlIG9wcG9zaXRlIG9mIEhlYWQuCi8vIFBhbmljcyBpZiBsaXN0IGlzIGVtcHR5IG9yIG5pbC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTGFzdCgpIHt7LlR5cGV9fSB7CgoJcmV0dXJuIGxpc3QubVtsZW4obGlzdC5tKS0xXQp9CgovLyBMYXN0T3B0aW9uIGdldHMgdGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgbGlzdCwgaWYgcG9zc2libGUuCi8vIE90aGVyd2lzZSByZXR1cm5zIHt7aWYgLlR5cGUuSXNQdHJ9fW5pbHt7ZWxzZX19dGhlIHplcm8gdmFsdWV7e2VuZH19LgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBMYXN0T3B0aW9uKCkge3suVHlwZX19IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4ge3suVHlwZS5aZXJvfX0KCX0KCglpZiBsZW4obGlzdC5tKSA9PSAwIHsKCQlyZXR1cm4ge3suVHlwZS5aZXJvfX0KCX0KCXJldHVybiBsaXN0Lm1bbGVuKGxpc3QubSktMV0KfQoKLy8gVGFpbCBnZXRzIGV2ZXJ5dGhpbmcgZXhjZXB0IHRoZSBoZWFkLiBIZWFkIHBsdXMgVGFpbCBpbmNsdWRlIHRoZSB3aG9sZSBsaXN0LiBUYWlsIGlzIHRoZSBvcHBvc2l0ZSBvZiBJbml0LgovLyBQYW5pY3MgaWYgbGlzdCBpcyBlbXB0eSBvciBuaWwuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFRhaWwoKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CgoJcmVzdWx0IDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIDApCglyZXN1bHQubSA9IGxpc3QubVsxOl0KCXJldHVybiByZXN1bHQKfQoKLy8gSW5pdCBnZXRzIGV2ZXJ5dGhpbmcgZXhjZXB0IHRoZSBsYXN0LiBJbml0IHBsdXMgTGFzdCBpbmNsdWRlIHRoZSB3aG9sZSBsaXN0LiBJbml0IGlzIHRoZSBvcHBvc2l0ZSBvZiBUYWlsLgovLyBQYW5pY3MgaWYgbGlzdCBpcyBlbXB0eSBvciBuaWwuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEluaXQoKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CgoJcmVzdWx0IDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIDApCglyZXN1bHQubSA9IGxpc3QubVs6bGVuKGxpc3QubSktMV0KCXJldHVybiByZXN1bHQKfQoKLy8gSXNFbXB0eSB0ZXN0cyB3aGV0aGVyIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgaXMgZW1wdHkuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIElzRW1wdHkoKSBib29sIHsKCXJldHVybiBsaXN0LlNpemUoKSA9PSAwCn0KCi8vIE5vbkVtcHR5IHRlc3RzIHdoZXRoZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBpcyBlbXB0eS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTm9uRW1wdHkoKSBib29sIHsKCXJldHVybiBsaXN0LlNpemUoKSA+IDAKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBTaXplIHJldHVybnMgdGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgbGlzdCAtIGFuIGFsaWFzIG9mIExlbigpLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTaXplKCkgaW50IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gMAoJfQoKCXJldHVybiBsZW4obGlzdC5tKQp9CgovLyBMZW4gcmV0dXJucyB0aGUgbnVtYmVyIG9mIGl0ZW1zIGluIHRoZSBsaXN0IC0gYW4gYWxpYXMgb2YgU2l6ZSgpLgovLyBUaGlzIGlzIG9uZSBvZiB0aGUgdGhyZWUgbWV0aG9kcyBpbiB0aGUgc3RhbmRhcmQgc29ydC5JbnRlcmZhY2UuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIExlbigpIGludCB7CglyZXR1cm4gbGlzdC5TaXplKCkKfQoKLy8gU3dhcCBleGNoYW5nZXMgdHdvIGVsZW1lbnRzLCB3aGljaCBpcyBuZWNlc3NhcnkgZHVyaW5nIHNvcnRpbmcgZXRjLgovLyBUaGlzIGlzIG9uZSBvZiB0aGUgdGhyZWUgbWV0aG9kcyBpbiB0aGUgc3RhbmRhcmQgc29ydC5JbnRlcmZhY2UuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFN3YXAoaSwgaiBpbnQpIHsKCglsaXN0Lm1baV0sIGxpc3QubVtqXSA9IGxpc3QubVtqXSwgbGlzdC5tW2ldCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQp7ey0gaWYgLkNvbXBhcmFibGV9fQoKLy8gQ29udGFpbnMgZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gaXRlbSBpcyBhbHJlYWR5IGluIHRoZSBsaXN0LCByZXR1cm5pbmcgdHJ1ZSBpZiBzby4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgQ29udGFpbnModiB7ey5UeXBlfX0pIGJvb2wgewoJcmV0dXJuIGxpc3QuRXhpc3RzKGZ1bmMoeCB7ey5UeXBlfX0pIGJvb2wgewoJCXJldHVybiB7ey5UeXBlLlN0YXJ9fXYgPT0ge3suVHlwZS5TdGFyfX14Cgl9KQp9CgovLyBDb250YWluc0FsbCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGdpdmVuIGl0ZW1zIGFyZSBhbGwgaW4gdGhlIGxpc3QsIHJldHVybmluZyB0cnVlIGlmIHNvLgovLyBUaGlzIGlzIHBvdGVudGlhbGx5IGEgc2xvdyBtZXRob2QgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgcmFyZWx5LgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBDb250YWluc0FsbChpIC4uLnt7LlR5cGV9fSkgYm9vbCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIGxlbihpKSA9PSAwCgl9CgoJZm9yIF8sIHYgOj0gcmFuZ2UgaSB7CgkJaWYgIWxpc3QuQ29udGFpbnModikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9Cnt7LSBlbmR9fQoKLy8gRXhpc3RzIHZlcmlmaWVzIHRoYXQgb25lIG9yIG1vcmUgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBFeGlzdHMocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBwKHYpIHsKCQkJcmV0dXJuIHRydWUKCQl9Cgl9CglyZXR1cm4gZmFsc2UKfQoKLy8gRm9yYWxsIHZlcmlmaWVzIHRoYXQgYWxsIGVsZW1lbnRzIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgcmV0dXJuIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRm9yYWxsKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIGJvb2wgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiB0cnVlCgl9CgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiAhcCh2KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0KCi8vIEZvcmVhY2ggaXRlcmF0ZXMgb3ZlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGFuZCBleGVjdXRlcyBmdW5jdGlvbiBmIGFnYWluc3QgZWFjaCBlbGVtZW50LgovLyBUaGUgZnVuY3Rpb24gY2FuIHNhZmVseSBhbHRlciB0aGUgdmFsdWVzIHZpYSBzaWRlLWVmZmVjdHMuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEZvcmVhY2goZiBmdW5jKHt7LlR5cGV9fSkpIHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4KCX0KCglmb3IgXywgdiA6PSByYW5nZSBsaXN0Lm0gewoJCWYodikKCX0KfQoKLy8gU2VuZCByZXR1cm5zIGEgY2hhbm5lbCB0aGF0IHdpbGwgc2VuZCBhbGwgdGhlIGVsZW1lbnRzIGluIG9yZGVyLgovLyBBIGdvcm91dGluZSBpcyBjcmVhdGVkIHRvIHNlbmQgdGhlIGVsZW1lbnRzOyB0aGlzIG9ubHkgdGVybWluYXRlcyB3aGVuIGFsbCB0aGUgZWxlbWVudHMKLy8gaGF2ZSBiZWVuIGNvbnN1bWVkLiBUaGUgY2hhbm5lbCB3aWxsIGJlIGNsb3NlZCB3aGVuIGFsbCB0aGUgZWxlbWVudHMgaGF2ZSBiZWVuIHNlbnQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFNlbmQoKSA8LWNoYW4ge3suVHlwZX19IHsKCWNoIDo9IG1ha2UoY2hhbiB7ey5UeXBlfX0pCglnbyBmdW5jKCkgewoJCWlmIGxpc3QgIT0gbmlsIHsKCgkJCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJCQljaCA8LSB2CgkJCX0KCQl9CgkJY2xvc2UoY2gpCgl9KCkKCXJldHVybiBjaAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFJldmVyc2UgcmV0dXJucyBhIGNvcHkgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB3aXRoIGFsbCBlbGVtZW50cyBpbiB0aGUgcmV2ZXJzZSBvcmRlci4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBSZXZlcnNlKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCgluIDo9IGxlbihsaXN0Lm0pCglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QobiwgbikKCWxhc3QgOj0gbiAtIDEKCWZvciBpLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJcmVzdWx0Lm1bbGFzdC1pXSA9IHYKCX0KCXJldHVybiByZXN1bHQKfQoKLy8gRG9SZXZlcnNlIGFsdGVycyBhIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3Qgd2l0aCBhbGwgZWxlbWVudHMgaW4gdGhlIHJldmVyc2Ugb3JkZXIuCi8vIFVubGlrZSBSZXZlcnNlLCBpdCBkb2VzIG5vdCBhbGxvY2F0ZSBuZXcgbWVtb3J5LgovLwovLyBUaGUgbGlzdCBpcyBtb2RpZmllZCBhbmQgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERvUmV2ZXJzZSgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJbWlkIDo9IChsZW4obGlzdC5tKSArIDEpIC8gMgoJbGFzdCA6PSBsZW4obGlzdC5tKSAtIDEKCWZvciBpIDo9IDA7IGkgPCBtaWQ7IGkrKyB7CgkJciA6PSBsYXN0IC0gaQoJCWlmIGkgIT0gciB7CgkJCWxpc3QubVtpXSwgbGlzdC5tW3JdID0gbGlzdC5tW3JdLCBsaXN0Lm1baV0KCQl9Cgl9CglyZXR1cm4gbGlzdAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFNodWZmbGUgcmV0dXJucyBhIHNodWZmbGVkIGNvcHkgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCwgdXNpbmcgYSB2ZXJzaW9uIG9mIHRoZSBGaXNoZXItWWF0ZXMgc2h1ZmZsZS4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTaHVmZmxlKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXR1cm4gbGlzdC5DbG9uZSgpLmRvU2h1ZmZsZSgpCn0KCi8vIERvU2h1ZmZsZSByZXR1cm5zIGEgc2h1ZmZsZWQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCwgdXNpbmcgYSB2ZXJzaW9uIG9mIHRoZSBGaXNoZXItWWF0ZXMgc2h1ZmZsZS4KLy8KLy8gVGhlIGxpc3QgaXMgbW9kaWZpZWQgYW5kIHRoZSBtb2RpZmllZCBsaXN0IGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBEb1NodWZmbGUoKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJldHVybiBsaXN0LmRvU2h1ZmZsZSgpCn0KCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIGRvU2h1ZmZsZSgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCW4gOj0gbGVuKGxpc3QubSkKCWZvciBpIDo9IDA7IGkgPCBuOyBpKysgewoJCXIgOj0gaSArIHJhbmQuSW50bihuLWkpCgkJbGlzdC5tW2ldLCBsaXN0Lm1bcl0gPSBsaXN0Lm1bcl0sIGxpc3QubVtpXQoJfQoJcmV0dXJuIGxpc3QKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBDbGVhciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIENsZWFyKCkgewoJaWYgbGlzdCAhPSBuaWwgewoJCWxpc3QubSA9IGxpc3QubVs6XQoJfQp9CgovLyBBZGQgYWRkcyBpdGVtcyB0byB0aGUgY3VycmVudCBsaXN0LiBUaGlzIGlzIGEgc3lub255bSBmb3IgQXBwZW5kLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBBZGQobW9yZSAuLi57ey5UeXBlfX0pIHsKCWxpc3QuQXBwZW5kKG1vcmUuLi4pCn0KCi8vIEFwcGVuZCBhZGRzIGl0ZW1zIHRvIHRoZSBjdXJyZW50IGxpc3QuCi8vIElmIHRoZSBsaXN0IGlzIG5pbCwgYSBuZXcgbGlzdCBpcyBhbGxvY2F0ZWQgYW5kIHJldHVybmVkLiBPdGhlcndpc2UgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEFwcGVuZChtb3JlIC4uLnt7LlR5cGV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCWlmIGxlbihtb3JlKSA9PSAwIHsKCQkJcmV0dXJuIG5pbAoJCX0KCQlsaXN0ID0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKG1vcmUpKQoJfQoKCXJldHVybiBsaXN0LmRvQXBwZW5kKG1vcmUuLi4pCn0KCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIGRvQXBwZW5kKG1vcmUgLi4ue3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCBtb3JlLi4uKQoJcmV0dXJuIGxpc3QKfQoKLy8gRG9JbnNlcnRBdCBtb2RpZmllcyBhIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgYnkgaW5zZXJ0aW5nIGVsZW1lbnRzIGF0IGEgZ2l2ZW4gaW5kZXguCi8vIFRoaXMgaXMgYSBnZW5lcmFsaXNlZCB2ZXJzaW9uIG9mIEFwcGVuZC4KLy8KLy8gSWYgdGhlIGxpc3QgaXMgbmlsLCBhIG5ldyBsaXN0IGlzIGFsbG9jYXRlZCBhbmQgcmV0dXJuZWQuIE90aGVyd2lzZSB0aGUgbW9kaWZpZWQgbGlzdCBpcyByZXR1cm5lZC4KLy8gUGFuaWNzIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgcmFuZ2UuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERvSW5zZXJ0QXQoaW5kZXggaW50LCBtb3JlIC4uLnt7LlR5cGV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCWlmIGxlbihtb3JlKSA9PSAwIHsKCQkJcmV0dXJuIG5pbAoJCX0KCQlsaXN0ID0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKG1vcmUpKQoJCXJldHVybiBsaXN0LmRvSW5zZXJ0QXQoaW5kZXgsIG1vcmUuLi4pCgl9CgoJcmV0dXJuIGxpc3QuZG9JbnNlcnRBdChpbmRleCwgbW9yZS4uLikKfQoKZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgZG9JbnNlcnRBdChpbmRleCBpbnQsIG1vcmUgLi4ue3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsZW4obW9yZSkgPT0gMCB7CgkJcmV0dXJuIGxpc3QKCX0KCglpZiBpbmRleCA9PSBsZW4obGlzdC5tKSB7CgkJLy8gYXBwZW5kaW5nIGlzIGFuIGVhc3kgc3BlY2lhbCBjYXNlCgkJcmV0dXJuIGxpc3QuZG9BcHBlbmQobW9yZS4uLikKCX0KCgluZXdsaXN0IDo9IG1ha2UoW117ey5UeXBlfX0sIDAsIGxlbihsaXN0Lm0pK2xlbihtb3JlKSkKCglpZiBpbmRleCAhPSAwIHsKCQluZXdsaXN0ID0gYXBwZW5kKG5ld2xpc3QsIGxpc3QubVs6aW5kZXhdLi4uKQoJfQoKCW5ld2xpc3QgPSBhcHBlbmQobmV3bGlzdCwgbW9yZS4uLikKCgluZXdsaXN0ID0gYXBwZW5kKG5ld2xpc3QsIGxpc3QubVtpbmRleDpdLi4uKQoKCWxpc3QubSA9IG5ld2xpc3QKCXJldHVybiBsaXN0Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gRG9EZWxldGVGaXJzdCBtb2RpZmllcyBhIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgYnkgZGVsZXRpbmcgbiBlbGVtZW50cyBmcm9tIHRoZSBzdGFydCBvZgovLyB0aGUgbGlzdC4KLy8KLy8gSWYgdGhlIGxpc3QgaXMgbmlsLCBhIG5ldyBsaXN0IGlzIGFsbG9jYXRlZCBhbmQgcmV0dXJuZWQuIE90aGVyd2lzZSB0aGUgbW9kaWZpZWQgbGlzdCBpcyByZXR1cm5lZC4KLy8gUGFuaWNzIGlmIG4gaXMgbGFyZ2UgZW5vdWdoIHRvIHRha2UgdGhlIGluZGV4IG91dCBvZiByYW5nZS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRG9EZWxldGVGaXJzdChuIGludCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJcmV0dXJuIGxpc3QuZG9EZWxldGVBdCgwLCBuKQp9CgovLyBEb0RlbGV0ZUxhc3QgbW9kaWZpZXMgYSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGJ5IGRlbGV0aW5nIG4gZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mCi8vIHRoZSBsaXN0LgovLwovLyBUaGUgbGlzdCBpcyBtb2RpZmllZCBhbmQgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCi8vIFBhbmljcyBpZiBuIGlzIGxhcmdlIGVub3VnaCB0byB0YWtlIHRoZSBpbmRleCBvdXQgb2YgcmFuZ2UuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERvRGVsZXRlTGFzdChuIGludCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJcmV0dXJuIGxpc3QuZG9EZWxldGVBdChsZW4obGlzdC5tKS1uLCBuKQp9CgovLyBEb0RlbGV0ZUF0IG1vZGlmaWVzIGEge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBieSBkZWxldGluZyBuIGVsZW1lbnRzIGZyb20gYSBnaXZlbiBpbmRleC4KLy8KLy8gVGhlIGxpc3QgaXMgbW9kaWZpZWQgYW5kIHRoZSBtb2RpZmllZCBsaXN0IGlzIHJldHVybmVkLgovLyBQYW5pY3MgaWYgdGhlIGluZGV4IGlzIG91dCBvZiByYW5nZSBvciBuIGlzIGxhcmdlIGVub3VnaCB0byB0YWtlIHRoZSBpbmRleCBvdXQgb2YgcmFuZ2UuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERvRGVsZXRlQXQoaW5kZXgsIG4gaW50KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXR1cm4gbGlzdC5kb0RlbGV0ZUF0KGluZGV4LCBuKQp9CgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBkb0RlbGV0ZUF0KGluZGV4LCBuIGludCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbiA9PSAwIHsKCQlyZXR1cm4gbGlzdAoJfQoKCW5ld2xpc3QgOj0gbWFrZShbXXt7LlR5cGV9fSwgMCwgbGVuKGxpc3QubSktbikKCglpZiBpbmRleCAhPSAwIHsKCQluZXdsaXN0ID0gYXBwZW5kKG5ld2xpc3QsIGxpc3QubVs6aW5kZXhdLi4uKQoJfQoKCWluZGV4ICs9IG4KCglpZiBpbmRleCAhPSBsZW4obGlzdC5tKSB7CgkJbmV3bGlzdCA9IGFwcGVuZChuZXdsaXN0LCBsaXN0Lm1baW5kZXg6XS4uLikKCX0KCglsaXN0Lm0gPSBuZXdsaXN0CglyZXR1cm4gbGlzdAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIERvS2VlcFdoZXJlIG1vZGlmaWVzIGEge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBieSByZXRhaW5pbmcgb25seSB0aG9zZSBlbGVtZW50cyB0aGF0IG1hdGNoCi8vIHRoZSBwcmVkaWNhdGUgcC4gVGhpcyBpcyB2ZXJ5IHNpbWlsYXIgdG8gRmlsdGVyIGJ1dCBhbHRlcnMgdGhlIGxpc3QgaW4gcGxhY2UuCi8vCi8vIFRoZSBsaXN0IGlzIG1vZGlmaWVkIGFuZCB0aGUgbW9kaWZpZWQgbGlzdCBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRG9LZWVwV2hlcmUocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXR1cm4gbGlzdC5kb0tlZXBXaGVyZShwKQp9CgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBkb0tlZXBXaGVyZShwIGZ1bmMoe3suVHlwZX19KSBib29sKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXN1bHQgOj0gbWFrZShbXXt7LlR5cGV9fSwgMCwgbGVuKGxpc3QubSkpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBwKHYpIHsKCQkJcmVzdWx0ID0gYXBwZW5kKHJlc3VsdCwgdikKCQl9Cgl9CgoJbGlzdC5tID0gcmVzdWx0CglyZXR1cm4gbGlzdAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFRha2UgcmV0dXJucyBhIHNsaWNlIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29udGFpbmluZyB0aGUgbGVhZGluZyBuIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgbGlzdC4KLy8gSWYgbiBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNpemUgb2YgdGhlIGxpc3QsIHRoZSB3aG9sZSBvcmlnaW5hbCBsaXN0IGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUYWtlKG4gaW50KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWlmIG4gPj0gbGVuKGxpc3QubSkgewoJCXJldHVybiBsaXN0Cgl9CgoJcmVzdWx0IDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIDApCglyZXN1bHQubSA9IGxpc3QubVswOm5dCglyZXR1cm4gcmVzdWx0Cn0KCi8vIERyb3AgcmV0dXJucyBhIHNsaWNlIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3Qgd2l0aG91dCB0aGUgbGVhZGluZyBuIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgbGlzdC4KLy8gSWYgbiBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNpemUgb2YgdGhlIGxpc3QsIGFuIGVtcHR5IGxpc3QgaXMgcmV0dXJuZWQuCi8vCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBtb2RpZmllZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRHJvcChuIGludCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgfHwgbiA9PSAwIHsKCQlyZXR1cm4gbGlzdAoJfQoKCWlmIG4gPj0gbGVuKGxpc3QubSkgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCXJlc3VsdC5tID0gbGlzdC5tW246XQoJcmV0dXJuIHJlc3VsdAp9CgovLyBUYWtlTGFzdCByZXR1cm5zIGEgc2xpY2Ugb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBjb250YWluaW5nIHRoZSB0cmFpbGluZyBuIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgbGlzdC4KLy8gSWYgbiBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNpemUgb2YgdGhlIGxpc3QsIHRoZSB3aG9sZSBvcmlnaW5hbCBsaXN0IGlzIHJldHVybmVkLgovLwovLyBUaGUgb3JpZ2luYWwgbGlzdCBpcyBub3QgbW9kaWZpZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFRha2VMYXN0KG4gaW50KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWwgOj0gbGVuKGxpc3QubSkKCWlmIG4gPj0gbCB7CgkJcmV0dXJuIGxpc3QKCX0KCglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCXJlc3VsdC5tID0gbGlzdC5tW2wtbjpdCglyZXR1cm4gcmVzdWx0Cn0KCi8vIERyb3BMYXN0IHJldHVybnMgYSBzbGljZSBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHdpdGhvdXQgdGhlIHRyYWlsaW5nIG4gZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBsaXN0LgovLyBJZiBuIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgc2l6ZSBvZiB0aGUgbGlzdCwgYW4gZW1wdHkgbGlzdCBpcyByZXR1cm5lZC4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBEcm9wTGFzdChuIGludCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgfHwgbiA9PSAwIHsKCQlyZXR1cm4gbGlzdAoJfQoKCWwgOj0gbGVuKGxpc3QubSkKCWlmIG4gPj0gbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCAwKQoJcmVzdWx0Lm0gPSBsaXN0Lm1bOmwtbl0KCXJldHVybiByZXN1bHQKfQoKLy8gVGFrZVdoaWxlIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBjb250YWluaW5nIHRoZSBsZWFkaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgbGlzdC4gV2hpbHN0IHRoZQovLyBwcmVkaWNhdGUgcCByZXR1cm5zIHRydWUsIGVsZW1lbnRzIGFyZSBhZGRlZCB0byB0aGUgcmVzdWx0LiBPbmNlIHByZWRpY2F0ZSBwIHJldHVybnMgZmFsc2UsIGFsbCByZW1haW5pbmcKLy8gZWxlbWVudHMgYXJlIGV4Y2x1ZGVkLgovLwovLyBUaGUgb3JpZ2luYWwgbGlzdCBpcyBub3QgbW9kaWZpZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFRha2VXaGlsZShwIGZ1bmMoe3suVHlwZX19KSBib29sKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCAwKQoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBwKHYpIHsKCQkJcmVzdWx0Lm0gPSBhcHBlbmQocmVzdWx0Lm0sIHYpCgkJfSBlbHNlIHsKCQkJcmV0dXJuIHJlc3VsdAoJCX0KCX0KCXJldHVybiByZXN1bHQKfQoKLy8gRHJvcFdoaWxlIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBjb250YWluaW5nIHRoZSB0cmFpbGluZyBlbGVtZW50cyBvZiB0aGUgc291cmNlIGxpc3QuIFdoaWxzdCB0aGUKLy8gcHJlZGljYXRlIHAgcmV0dXJucyB0cnVlLCBlbGVtZW50cyBhcmUgZXhjbHVkZWQgZnJvbSB0aGUgcmVzdWx0LiBPbmNlIHByZWRpY2F0ZSBwIHJldHVybnMgZmFsc2UsIGFsbCByZW1haW5pbmcKLy8gZWxlbWVudHMgYXJlIGFkZGVkLgovLwovLyBUaGUgb3JpZ2luYWwgbGlzdCBpcyBub3QgbW9kaWZpZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERyb3BXaGlsZShwIGZ1bmMoe3suVHlwZX19KSBib29sKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCAwKQoJYWRkaW5nIDo9IGZhbHNlCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBhZGRpbmcgfHwgIXAodikgewoJCQlhZGRpbmcgPSB0cnVlCgkJCXJlc3VsdC5tID0gYXBwZW5kKHJlc3VsdC5tLCB2KQoJCX0KCX0KCglyZXR1cm4gcmVzdWx0Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gRmluZCByZXR1cm5zIHRoZSBmaXJzdCB7ey5UeXBlLk5hbWV9fSB0aGF0IHJldHVybnMgdHJ1ZSBmb3IgcHJlZGljYXRlIHAuCi8vIEZhbHNlIGlzIHJldHVybmVkIGlmIG5vbmUgbWF0Y2guCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEZpbmQocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKHt7LlR5cGV9fSwgYm9vbCkgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiB7ey5UeXBlLlplcm99fSwgZmFsc2UKCX0KCglmb3IgXywgdiA6PSByYW5nZSBsaXN0Lm0gewoJCWlmIHAodikgewoJCQlyZXR1cm4gdiwgdHJ1ZQoJCX0KCX0Ke3stIGlmIC5UeXBlLklzUHRyfX0KCglyZXR1cm4gbmlsLCBmYWxzZQp7ey0gZWxzZX19CgoJdmFyIGVtcHR5IHt7LlR5cGV9fQoJcmV0dXJuIGVtcHR5LCBmYWxzZQp7ey0gZW5kfX0KfQoKLy8gRmlsdGVyIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB3aG9zZSBlbGVtZW50cyByZXR1cm4gdHJ1ZSBmb3IgcHJlZGljYXRlIHAuCi8vCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBtb2RpZmllZC4gU2VlIGFsc28gRG9LZWVwV2hlcmUgKHdoaWNoIGRvZXMgbW9kaWZ5IHRoZSBvcmlnaW5hbCBsaXN0KS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRmlsdGVyKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIGxlbihsaXN0Lm0pKQoKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJaWYgcCh2KSB7CgkJCXJlc3VsdC5tID0gYXBwZW5kKHJlc3VsdC5tLCB2KQoJCX0KCX0KCglyZXR1cm4gcmVzdWx0Cn0KCi8vIFBhcnRpdGlvbiByZXR1cm5zIHR3byBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdHMgd2hvc2UgZWxlbWVudHMgcmV0dXJuIHRydWUgb3IgZmFsc2UgZm9yIHRoZSBwcmVkaWNhdGUsIHAuCi8vIFRoZSBmaXJzdCByZXN1bHQgY29uc2lzdHMgb2YgYWxsIGVsZW1lbnRzIHRoYXQgc2F0aXNmeSB0aGUgcHJlZGljYXRlIGFuZCB0aGUgc2Vjb25kIHJlc3VsdCBjb25zaXN0cyBvZgovLyBhbGwgZWxlbWVudHMgdGhhdCBkb24ndC4gVGhlIHJlbGF0aXZlIG9yZGVyIG9mIHRoZSBlbGVtZW50cyBpbiB0aGUgcmVzdWx0cyBpcyB0aGUgc2FtZSBhcyBpbiB0aGUKLy8gb3JpZ2luYWwgbGlzdC4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFBhcnRpdGlvbihwIGZ1bmMoe3suVHlwZX19KSBib29sKSAoKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QsICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbCwgbmlsCgl9CgoJbWF0Y2hpbmcgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKGxpc3QubSkpCglvdGhlcnMgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKGxpc3QubSkpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBwKHYpIHsKCQkJbWF0Y2hpbmcubSA9IGFwcGVuZChtYXRjaGluZy5tLCB2KQoJCX0gZWxzZSB7CgkJCW90aGVycy5tID0gYXBwZW5kKG90aGVycy5tLCB2KQoJCX0KCX0KCglyZXR1cm4gbWF0Y2hpbmcsIG90aGVycwp9CgovLyBNYXAgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggZnVuY3Rpb24gZi4KLy8gVGhlIHJlc3VsdGluZyBsaXN0IGlzIHRoZSBzYW1lIHNpemUgYXMgdGhlIG9yaWdpbmFsIGxpc3QuCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBNYXAoZiBmdW5jKHt7LlR5cGV9fSkge3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdChsZW4obGlzdC5tKSwgbGVuKGxpc3QubSkpCgoJZm9yIGksIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlyZXN1bHQubVtpXSA9IGYodikKCX0KCglyZXR1cm4gcmVzdWx0Cn0Ke3stIHJhbmdlIC5NYXBUb319CgovLyBNYXBUb3t7LlV9fSByZXR1cm5zIGEgbmV3IFtde3sufX0gYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCBmdW5jdGlvbiBmLgovLyBUaGUgcmVzdWx0aW5nIHNsaWNlIGlzIHRoZSBzYW1lIHNpemUgYXMgdGhlIGxpc3QuCi8vIFRoZSBsaXN0IGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChsaXN0ICp7eyQuUHJlZml4LlV9fXt7JC5UeXBlLlV9fUxpc3QpIE1hcFRve3suVX19KGYgZnVuYyh7eyQuVHlwZX19KSB7ey59fSkgW117ey59fSB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBtYWtlKFtde3sufX0sIGxlbihsaXN0Lm0pKQoKCWZvciBpLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJcmVzdWx0W2ldID0gZih2KQoJfQoKCXJldHVybiByZXN1bHQKfQp7ey0gZW5kfX0KCi8vIEZsYXRNYXAgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggZnVuY3Rpb24gZiB0aGF0Ci8vIHJldHVybnMgemVybyBvciBtb3JlIGl0ZW1zIGluIGEgc2xpY2UuIFRoZSByZXN1bHRpbmcgbGlzdCBtYXkgaGF2ZSBhIGRpZmZlcmVudCBzaXplIHRvIHRoZSBvcmlnaW5hbCBsaXN0LgovLyBUaGUgb3JpZ2luYWwgbGlzdCBpcyBub3QgbW9kaWZpZWQuCi8vCi8vIFRoaXMgaXMgYSBkb21haW4tdG8tcmFuZ2UgbWFwcGluZyBmdW5jdGlvbi4gRm9yIGJlc3Bva2UgdHJhbnNmb3JtYXRpb25zIHRvIG90aGVyIHR5cGVzLCBjb3B5IGFuZCBtb2RpZnkKLy8gdGhpcyBtZXRob2QgYXBwcm9wcmlhdGVseS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRmxhdE1hcChmIGZ1bmMoe3suVHlwZX19KSBbXXt7LlR5cGV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKGxpc3QubSkpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlyZXN1bHQubSA9IGFwcGVuZChyZXN1bHQubSwgZih2KS4uLikKCX0KCglyZXR1cm4gcmVzdWx0Cn0Ke3stIHJhbmdlIC5NYXBUb319CgovLyBGbGF0TWFwVG97ey5VfX0gcmV0dXJucyBhIG5ldyBbXXt7Ln19IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggZnVuY3Rpb24gZiB0aGF0Ci8vIHJldHVybnMgemVybyBvciBtb3JlIGl0ZW1zIGluIGEgc2xpY2UuIFRoZSByZXN1bHRpbmcgc2xpY2UgbWF5IGhhdmUgYSBkaWZmZXJlbnQgc2l6ZSB0byB0aGUgbGlzdC4KLy8gVGhlIGxpc3QgaXMgbm90IG1vZGlmaWVkLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKGxpc3QgKnt7JC5QcmVmaXguVX19e3skLlR5cGUuVX19TGlzdCkgRmxhdE1hcFRve3suVX19KGYgZnVuYyh7eyQuVHlwZX19KSBbXXt7Ln19KSBbXXt7Ln19IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IG1ha2UoW117ey59fSwgMCwgbGVuKGxpc3QubSkpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlyZXN1bHQgPSBhcHBlbmQocmVzdWx0LCBmKHYpLi4uKQoJfQoKCXJldHVybiByZXN1bHQKfQp7ey0gZW5kfX0KCi8vIENvdW50QnkgZ2l2ZXMgdGhlIG51bWJlciBlbGVtZW50cyBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHRoYXQgcmV0dXJuIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgQ291bnRCeShwIGZ1bmMoe3suVHlwZX19KSBib29sKSAocmVzdWx0IGludCkgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiAwCgl9CgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBwKHYpIHsKCQkJcmVzdWx0KysKCQl9Cgl9CglyZXR1cm4gcmVzdWx0Cn0KCi8vIE1pbkJ5IHJldHVybnMgYW4gZWxlbWVudCBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGNvbnRhaW5pbmcgdGhlIG1pbmltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMKLy8gdXNpbmcgYSBwYXNzZWQgZnVuYyBkZWZpbmluZyDigJhsZXNz4oCZLiBJbiB0aGUgY2FzZSBvZiBtdWx0aXBsZSBpdGVtcyBiZWluZyBlcXVhbGx5IG1pbmltYWwsIHRoZSBmaXJzdCBzdWNoCi8vIGVsZW1lbnQgaXMgcmV0dXJuZWQuIFBhbmljcyBpZiB0aGVyZSBhcmUgbm8gZWxlbWVudHMuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIE1pbkJ5KGxlc3MgZnVuYyh7ey5UeXBlfX0sIHt7LlR5cGV9fSkgYm9vbCkge3suVHlwZX19IHsKCglsIDo9IGxlbihsaXN0Lm0pCglpZiBsID09IDAgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtaW5pbXVtIG9mIGFuIGVtcHR5IGxpc3QuIikKCX0KCgltIDo9IDAKCWZvciBpIDo9IDE7IGkgPCBsOyBpKysgewoJCWlmIGxlc3MobGlzdC5tW2ldLCBsaXN0Lm1bbV0pIHsKCQkJbSA9IGkKCQl9Cgl9CgoJcmV0dXJuIGxpc3QubVttXQp9CgovLyBNYXhCeSByZXR1cm5zIGFuIGVsZW1lbnQgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBjb250YWluaW5nIHRoZSBtYXhpbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCi8vIHVzaW5nIGEgcGFzc2VkIGZ1bmMgZGVmaW5pbmcg4oCYbGVzc+KAmS4gSW4gdGhlIGNhc2Ugb2YgbXVsdGlwbGUgaXRlbXMgYmVpbmcgZXF1YWxseSBtYXhpbWFsLCB0aGUgZmlyc3Qgc3VjaAovLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBNYXhCeShsZXNzIGZ1bmMoe3suVHlwZX19LCB7ey5UeXBlfX0pIGJvb2wpIHt7LlR5cGV9fSB7CgoJbCA6PSBsZW4obGlzdC5tKQoJaWYgbCA9PSAwIHsKCQlwYW5pYygiQ2Fubm90IGRldGVybWluZSB0aGUgbWF4aW11bSBvZiBhbiBlbXB0eSBsaXN0LiIpCgl9CgoJbSA6PSAwCglmb3IgaSA6PSAxOyBpIDwgbDsgaSsrIHsKCQlpZiBsZXNzKGxpc3QubVttXSwgbGlzdC5tW2ldKSB7CgkJCW0gPSBpCgkJfQoJfQoKCXJldHVybiBsaXN0Lm1bbV0KfQoKLy8gRGlzdGluY3RCeSByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3Qgd2hvc2UgZWxlbWVudHMgYXJlIHVuaXF1ZSwgd2hlcmUgZXF1YWxpdHkgaXMgZGVmaW5lZCBieSB0aGUgZXF1YWwgZnVuY3Rpb24uCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERpc3RpbmN0QnkoZXF1YWwgZnVuYyh7ey5UeXBlfX0sIHt7LlR5cGV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKGxpc3QubSkpCk91dGVyOgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlmb3IgXywgciA6PSByYW5nZSByZXN1bHQubSB7CgkJCWlmIGVxdWFsKHYsIHIpIHsKCQkJCWNvbnRpbnVlIE91dGVyCgkJCX0KCQl9CgkJcmVzdWx0Lm0gPSBhcHBlbmQocmVzdWx0Lm0sIHYpCgl9CglyZXR1cm4gcmVzdWx0Cn0KCi8vIEluZGV4V2hlcmUgZmluZHMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBlbGVtZW50IHNhdGlzZnlpbmcgcHJlZGljYXRlIHAuIElmIG5vbmUgZXhpc3RzLCAtMSBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgSW5kZXhXaGVyZShwIGZ1bmMoe3suVHlwZX19KSBib29sKSBpbnQgewoJcmV0dXJuIGxpc3QuSW5kZXhXaGVyZTIocCwgMCkKfQoKLy8gSW5kZXhXaGVyZTIgZmluZHMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBlbGVtZW50IHNhdGlzZnlpbmcgcHJlZGljYXRlIHAgYXQgb3IgYWZ0ZXIgc29tZSBzdGFydCBpbmRleC4KLy8gSWYgbm9uZSBleGlzdHMsIC0xIGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBJbmRleFdoZXJlMihwIGZ1bmMoe3suVHlwZX19KSBib29sLCBmcm9tIGludCkgaW50IHsKCglmb3IgaSwgdiA6PSByYW5nZSBsaXN0Lm0gewoJCWlmIGkgPj0gZnJvbSAmJiBwKHYpIHsKCQkJcmV0dXJuIGkKCQl9Cgl9CglyZXR1cm4gLTEKfQoKLy8gTGFzdEluZGV4V2hlcmUgZmluZHMgdGhlIGluZGV4IG9mIHRoZSBsYXN0IGVsZW1lbnQgc2F0aXNmeWluZyBwcmVkaWNhdGUgcC4KLy8gSWYgbm9uZSBleGlzdHMsIC0xIGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBMYXN0SW5kZXhXaGVyZShwIGZ1bmMoe3suVHlwZX19KSBib29sKSBpbnQgewoJcmV0dXJuIGxpc3QuTGFzdEluZGV4V2hlcmUyKHAsIC0xKQp9CgovLyBMYXN0SW5kZXhXaGVyZTIgZmluZHMgdGhlIGluZGV4IG9mIHRoZSBsYXN0IGVsZW1lbnQgc2F0aXNmeWluZyBwcmVkaWNhdGUgcCBhdCBvciBiZWZvcmUgc29tZSBzdGFydCBpbmRleC4KLy8gSWYgbm9uZSBleGlzdHMsIC0xIGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBMYXN0SW5kZXhXaGVyZTIocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCwgYmVmb3JlIGludCkgaW50IHsKCglpZiBiZWZvcmUgPCAwIHsKCQliZWZvcmUgPSBsZW4obGlzdC5tKQoJfQoJZm9yIGkgOj0gbGVuKGxpc3QubSkgLSAxOyBpID49IDA7IGktLSB7CgkJdiA6PSBsaXN0Lm1baV0KCQlpZiBpIDw9IGJlZm9yZSAmJiBwKHYpIHsKCQkJcmV0dXJuIGkKCQl9Cgl9CglyZXR1cm4gLTEKfQp7ey0gaWYgLkNvbXBhcmFibGV9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIFRoZXNlIG1ldGhvZHMgYXJlIGluY2x1ZGVkIHdoZW4ge3suVHlwZS5OYW1lfX0gaXMgY29tcGFyYWJsZS4KCi8vIEVxdWFscyBkZXRlcm1pbmVzIGlmIHR3byBsaXN0cyBhcmUgZXF1YWwgdG8gZWFjaCBvdGhlci4KLy8gSWYgdGhleSBib3RoIGFyZSB0aGUgc2FtZSBzaXplIGFuZCBoYXZlIHRoZSBzYW1lIGl0ZW1zIGluIHRoZSBzYW1lIG9yZGVyLCB0aGV5IGFyZSBjb25zaWRlcmVkIGVxdWFsLgovLyBPcmRlciBvZiBpdGVtcyBpcyBub3QgcmVsZXZlbnQgZm9yIHNldHMgdG8gYmUgZXF1YWwuCi8vIE5pbCBsaXN0cyBhcmUgY29uc2lkZXJlZCB0byBiZSBlbXB0eS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRXF1YWxzKG90aGVyICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBib29sIHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlpZiBvdGhlciA9PSBuaWwgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCQlyZXR1cm4gbGVuKG90aGVyLm0pID09IDAKCX0KCglpZiBvdGhlciA9PSBuaWwgewoJCXJldHVybiBsZW4obGlzdC5tKSA9PSAwCgl9CgoJaWYgbGVuKGxpc3QubSkgIT0gbGVuKG90aGVyLm0pIHsKCQlyZXR1cm4gZmFsc2UKCX0KCglmb3IgaSwgdiA6PSByYW5nZSBsaXN0Lm0gewoJCWlmIHYgIT0gb3RoZXIubVtpXSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCglyZXR1cm4gdHJ1ZQp9Cnt7LSBlbmR9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgp0eXBlIHNvcnRhYmxle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBzdHJ1Y3QgewoJbGVzcyBmdW5jKGksIGoge3suVHlwZX19KSBib29sCgltICAgIFtde3suVHlwZX19Cn0KCmZ1bmMgKHNsIHNvcnRhYmxle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTGVzcyhpLCBqIGludCkgYm9vbCB7CglyZXR1cm4gc2wubGVzcyhzbC5tW2ldLCBzbC5tW2pdKQp9CgpmdW5jIChzbCBzb3J0YWJsZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIExlbigpIGludCB7CglyZXR1cm4gbGVuKHNsLm0pCn0KCmZ1bmMgKHNsIHNvcnRhYmxle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU3dhcChpLCBqIGludCkgewoJc2wubVtpXSwgc2wubVtqXSA9IHNsLm1bal0sIHNsLm1baV0KfQoKLy8gU29ydEJ5IGFsdGVycyB0aGUgbGlzdCBzbyB0aGF0IHRoZSBlbGVtZW50cyBhcmUgc29ydGVkIGJ5IGEgc3BlY2lmaWVkIG9yZGVyaW5nLgovLyBTb3J0aW5nIGhhcHBlbnMgaW4tcGxhY2U7IHRoZSBtb2RpZmllZCBsaXN0IGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTb3J0QnkobGVzcyBmdW5jKGksIGoge3suVHlwZX19KSBib29sKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXNvcnQuU29ydChzb3J0YWJsZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3R7bGVzcywgbGlzdC5tfSkKCXJldHVybiBsaXN0Cn0KCi8vIFN0YWJsZVNvcnRCeSBhbHRlcnMgdGhlIGxpc3Qgc28gdGhhdCB0aGUgZWxlbWVudHMgYXJlIHNvcnRlZCBieSBhIHNwZWNpZmllZCBvcmRlcmluZy4KLy8gU29ydGluZyBoYXBwZW5zIGluLXBsYWNlOyB0aGUgbW9kaWZpZWQgbGlzdCBpcyByZXR1cm5lZC4KLy8gVGhlIGFsZ29yaXRobSBrZWVwcyB0aGUgb3JpZ2luYWwgb3JkZXIgb2YgZXF1YWwgZWxlbWVudHMuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFN0YWJsZVNvcnRCeShsZXNzIGZ1bmMoaSwgaiB7ey5UeXBlfX0pIGJvb2wpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJc29ydC5TdGFibGUoc29ydGFibGV7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0e2xlc3MsIGxpc3QubX0pCglyZXR1cm4gbGlzdAp9Cnt7LSBpZiAuT3JkZXJlZH19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gVGhlc2UgbWV0aG9kcyBhcmUgaW5jbHVkZWQgd2hlbiB7ey5UeXBlLk5hbWV9fSBpcyBvcmRlcmVkLgoKLy8gU29ydGVkIGFsdGVycyB0aGUgbGlzdCBzbyB0aGF0IHRoZSBlbGVtZW50cyBhcmUgc29ydGVkIGJ5IHRoZWlyIG5hdHVyYWwgb3JkZXJpbmcuCi8vIFNvcnRpbmcgaGFwcGVucyBpbi1wbGFjZTsgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFNvcnRlZCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCXJldHVybiBsaXN0LlNvcnRCeShmdW5jKGEsIGIge3suVHlwZX19KSBib29sIHsKCQlyZXR1cm4ge3suVHlwZS5TdGFyfX1hIDwge3suVHlwZS5TdGFyfX1iCgl9KQp9CgovLyBTdGFibGVTb3J0ZWQgYWx0ZXJzIHRoZSBsaXN0IHNvIHRoYXQgdGhlIGVsZW1lbnRzIGFyZSBzb3J0ZWQgYnkgdGhlaXIgbmF0dXJhbCBvcmRlcmluZy4KLy8gU29ydGluZyBoYXBwZW5zIGluLXBsYWNlOyB0aGUgbW9kaWZpZWQgbGlzdCBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU3RhYmxlU29ydGVkKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJcmV0dXJuIGxpc3QuU3RhYmxlU29ydEJ5KGZ1bmMoYSwgYiB7ey5UeXBlfX0pIGJvb2wgewoJCXJldHVybiB7ey5UeXBlLlN0YXJ9fWEgPCB7ey5UeXBlLlN0YXJ9fWIKCX0pCn0KCi8vIE1pbiByZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIG1pbmltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMuCi8vIFBhbmljcyBpZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTWluKCkge3suVHlwZS5OYW1lfX0gewoKCWwgOj0gbGVuKGxpc3QubSkKCWlmIGwgPT0gMCB7CgkJcGFuaWMoIkNhbm5vdCBkZXRlcm1pbmUgdGhlIG1pbmltdW0gb2YgYW4gZW1wdHkgbGlzdC4iKQoJfQoKCXYgOj0gbGlzdC5tWzBdCgltIDo9IHt7LlR5cGUuU3Rhcn19dgoJZm9yIGkgOj0gMTsgaSA8IGw7IGkrKyB7CgkJdiA6PSBsaXN0Lm1baV0KCQlpZiB7ey5UeXBlLlN0YXJ9fXYgPCBtIHsKCQkJbSA9IHt7LlR5cGUuU3Rhcn19dgoJCX0KCX0KCXJldHVybiBtCn0KCi8vIE1heCByZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIG1heGltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMuCi8vIFBhbmljcyBpZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTWF4KCkgKHJlc3VsdCB7ey5UeXBlLk5hbWV9fSkgewoKCWwgOj0gbGVuKGxpc3QubSkKCWlmIGwgPT0gMCB7CgkJcGFuaWMoIkNhbm5vdCBkZXRlcm1pbmUgdGhlIG1heGltdW0gb2YgYW4gZW1wdHkgbGlzdC4iKQoJfQoKCXYgOj0gbGlzdC5tWzBdCgltIDo9IHt7LlR5cGUuU3Rhcn19dgoJZm9yIGkgOj0gMTsgaSA8IGw7IGkrKyB7CgkJdiA6PSBsaXN0Lm1baV0KCQlpZiB7ey5UeXBlLlN0YXJ9fXYgPiBtIHsKCQkJbSA9IHt7LlR5cGUuU3Rhcn19dgoJCX0KCX0KCXJldHVybiBtCn0Ke3stIGVuZH19Cnt7LSBpZiAuTnVtZXJpY319CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gVGhlc2UgbWV0aG9kcyBhcmUgaW5jbHVkZWQgd2hlbiB7ey5UeXBlLk5hbWV9fSBpcyBudW1lcmljLgoKLy8gU3VtIHJldHVybnMgdGhlIHN1bSBvZiBhbGwgdGhlIGVsZW1lbnRzIGluIHRoZSBsaXN0LgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTdW0oKSB7ey5UeXBlLk5hbWV9fSB7CgoJc3VtIDo9IHt7LlR5cGUuTmFtZX19KDApCglmb3IgXywgdiA6PSByYW5nZSBsaXN0Lm0gewoJCXN1bSA9IHN1bSArIHt7LlR5cGUuU3Rhcn19dgoJfQoJcmV0dXJuIHN1bQp9Cnt7LSBlbmR9fQp7ey0gaWYgLlN0cmluZ2VyfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gU3RyaW5nTGlzdCBnZXRzIGEgbGlzdCBvZiBzdHJpbmdzIHRoYXQgZGVwaWN0cyBhbGwgdGhlIGVsZW1lbnRzLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTdHJpbmdMaXN0KCkgW11zdHJpbmcgewp7ey0gaWYgZXEgLlR5cGUuU3RyaW5nICJzdHJpbmcifX0KCXJldHVybiBsaXN0LlRvU2xpY2UoKQp7ey0gZWxzZX19CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXN0cmluZ3MgOj0gbWFrZShbXXN0cmluZywgbGVuKGxpc3QubSkpCglmb3IgaSwgdiA6PSByYW5nZSBsaXN0Lm0gewoJCXN0cmluZ3NbaV0gPSBmbXQuU3ByaW50ZigiJXYiLCB2KQoJfQoJcmV0dXJuIHN0cmluZ3MKe3stIGVuZH19Cn0KCi8vIFN0cmluZyBpbXBsZW1lbnRzIHRoZSBTdHJpbmdlciBpbnRlcmZhY2UgdG8gcmVuZGVyIHRoZSBsaXN0IGFzIGEgY29tbWEtc2VwYXJhdGVkIHN0cmluZyBlbmNsb3NlZCBpbiBzcXVhcmUgYnJhY2tldHMuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFN0cmluZygpIHN0cmluZyB7CglyZXR1cm4gbGlzdC5Na1N0cmluZzMoIlsiLCAiLCAiLCAiXSIpCn0KCi8vIE1rU3RyaW5nIGNvbmNhdGVuYXRlcyB0aGUgdmFsdWVzIGFzIGEgc3RyaW5nIHVzaW5nIGEgc3VwcGxpZWQgc2VwYXJhdG9yLiBObyBlbmNsb3NpbmcgbWFya3MgYXJlIGFkZGVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcgewoJcmV0dXJuIGxpc3QuTWtTdHJpbmczKCIiLCBzZXAsICIiKQp9CgovLyBNa1N0cmluZzMgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcsIHVzaW5nIHRoZSBwcmVmaXgsIHNlcGFyYXRvciBhbmQgc3VmZml4IHN1cHBsaWVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBNa1N0cmluZzMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpIHN0cmluZyB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuICIiCgl9CgoJcmV0dXJuIGxpc3QubWtTdHJpbmczQnl0ZXMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlcikuU3RyaW5nKCkKfQoKZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBta1N0cmluZzNCeXRlcyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgKmJ5dGVzLkJ1ZmZlciB7CgliIDo9ICZieXRlcy5CdWZmZXJ7fQoJYi5Xcml0ZVN0cmluZyhiZWZvcmUpCglzZXAgOj0gIiIKCglmb3IgXywgdiA6PSByYW5nZSBsaXN0Lm0gewoJCWIuV3JpdGVTdHJpbmcoc2VwKQoJCWIuV3JpdGVTdHJpbmcoZm10LlNwcmludGYoIiV2IiwgdikpCgkJc2VwID0gYmV0d2VlbgoJfQoJYi5Xcml0ZVN0cmluZyhhZnRlcikKCXJldHVybiBiCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gVW5tYXJzaGFsSlNPTiBpbXBsZW1lbnRzIEpTT04gZGVjb2RpbmcgZm9yIHRoaXMgbGlzdCB0eXBlLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBVbm1hcnNoYWxKU09OKGIgW11ieXRlKSBlcnJvciB7CgoJcmV0dXJuIGpzb24uVW5tYXJzaGFsKGIsICZsaXN0Lm0pCn0KCi8vIE1hcnNoYWxKU09OIGltcGxlbWVudHMgSlNPTiBlbmNvZGluZyBmb3IgdGhpcyBsaXN0IHR5cGUuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikgewoKCWJ1ZiwgZXJyIDo9IGpzb24uTWFyc2hhbChsaXN0Lm0pCglyZXR1cm4gYnVmLCBlcnIKfQp7ey0gZW5kfX0Ke3stIGlmIC5Hb2JFbmNvZGV9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBHb2JEZWNvZGUgaW1wbGVtZW50cyAnZ29iJyBkZWNvZGluZyBmb3IgdGhpcyBsaXN0IHR5cGUuCi8vIFlvdSBtdXN0IHJlZ2lzdGVyIHt7LlR5cGUuTmFtZX19IHdpdGggdGhlICdnb2InIHBhY2thZ2UgYmVmb3JlIHRoaXMgbWV0aG9kIGlzIHVzZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEdvYkRlY29kZShiIFtdYnl0ZSkgZXJyb3IgewoKCWJ1ZiA6PSBieXRlcy5OZXdCdWZmZXIoYikKCXJldHVybiBnb2IuTmV3RGVjb2RlcihidWYpLkRlY29kZSgmbGlzdC5tKQp9CgovLyBHb2JFbmNvZGUgaW1wbGVtZW50cyAnZ29iJyBlbmNvZGluZyBmb3IgdGhpcyBsaXN0IHR5cGUuCi8vIFlvdSBtdXN0IHJlZ2lzdGVyIHt7LlR5cGUuTmFtZX19IHdpdGggdGhlICdnb2InIHBhY2thZ2UgYmVmb3JlIHRoaXMgbWV0aG9kIGlzIHVzZWQuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgR29iRW5jb2RlKCkgKFtdYnl0ZSwgZXJyb3IpIHsKCglidWYgOj0gJmJ5dGVzLkJ1ZmZlcnt9CgllcnIgOj0gZ29iLk5ld0VuY29kZXIoYnVmKS5FbmNvZGUobGlzdC5tKQoJcmV0dXJuIGJ1Zi5CeXRlcygpLCBlcnIKfQp7ey0gZW5kfX0K\"")
		packr.PackJSONBytes("builtin", "fast/map.tpl", "\"Ly8gQW4gZW5jYXBzdWxhdGVkIG1hcFt7ey5LZXkuTmFtZX19XXt7LlR5cGV9fS4KLy97e2lmIC5LZXkuSXNQdHJ9fSBOb3RlIHRoYXQgdGhlIGFwaSB1c2VzIHt7LktleX19IGJ1dCB0aGUgbWFwIHVzZXMge3suS2V5Lk5hbWV9fSBrZXlzLnt7ZW5kfX0KLy8gTm90IHRocmVhZC1zYWZlLgovLwovLyBHZW5lcmF0ZWQgZnJvbSB7ey5UZW1wbGF0ZUZpbGV9fSB3aXRoIEtleT17ey5LZXl9fSBUeXBlPXt7LlR5cGV9fQovLyBvcHRpb25zOiBDb21wYXJhYmxlOnt7LkNvbXBhcmFibGV9fSBTdHJpbmdlcjp7ey5TdHJpbmdlcn19IEtleUxpc3Q6e3suS2V5TGlzdH19IFZhbHVlTGlzdDp7ey5WYWx1ZUxpc3R9fSBNdXRhYmxlOmFsd2F5cwovLyBieSBydW50ZW1wbGF0ZSB7ey5BcHBWZXJzaW9ufX0KLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qb2hhbmJyYW5kaG9yc3QvcnVudGVtcGxhdGUvYmxvYi9tYXN0ZXIvQlVJTFRJTi5tZAoKcGFja2FnZSB7ey5QYWNrYWdlfX0KCmltcG9ydCAoCnt7LSBpZiBvciAuU3RyaW5nZXIgLkdvYkVuY29kZX19CgkiYnl0ZXMiCnt7LSBlbmR9fQp7ey0gaWYgLkdvYkVuY29kZX19CgkiZW5jb2RpbmcvZ29iIgp7ey0gZW5kfX0Ke3stIGlmIGFuZCAuU3RyaW5nZXIgKGVxIC5LZXkuU3RyaW5nICJzdHJpbmciKX19CgkiZW5jb2RpbmcvanNvbiIKe3stIGVuZH19CgkiZm10Igp7ey0gaWYgLkhhc0ltcG9ydH19Cgl7ey5JbXBvcnR9fQp7e2VuZH19CikKCi8vIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgaXMgdGhlIHByaW1hcnkgdHlwZSB0aGF0IHJlcHJlc2VudHMgYSB0aHJlYWQtc2FmZSBtYXAKdHlwZSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwIHN0cnVjdCB7CgltIG1hcFt7ey5LZXkuTmFtZX19XXt7LlR5cGV9fQp9CgovLyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUgcmVwcmVzZW50cyBhIGtleS92YWx1ZSBwYWlyLgp0eXBlIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZSBzdHJ1Y3QgewoJS2V5IHt7LktleX19CglWYWwge3suVHlwZX19Cn0KCi8vIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgY2FuIGJlIHVzZWQgYXMgYSBidWlsZGVyIGZvciB1bm1vZGlmaWFibGUgbWFwcy4KdHlwZSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzIFtde3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlCgovLyBBcHBlbmQxIGFkZHMgb25lIGl0ZW0uCmZ1bmMgKHRzIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMpIEFwcGVuZDEoayB7ey5LZXl9fSwgdiB7ey5UeXBlfX0pIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgewoJcmV0dXJuIGFwcGVuZCh0cywge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle2ssIHZ9KQp9CgovLyBBcHBlbmQyIGFkZHMgdHdvIGl0ZW1zLgpmdW5jICh0cyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzKSBBcHBlbmQyKGsxIHt7LktleX19LCB2MSB7ey5UeXBlfX0sIGsyIHt7LktleX19LCB2MiB7ey5UeXBlfX0pIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgewoJcmV0dXJuIGFwcGVuZCh0cywge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle2sxLCB2MX0sIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXtrMiwgdjJ9KQp9CgovLyBBcHBlbmQzIGFkZHMgdGhyZWUgaXRlbXMuCmZ1bmMgKHRzIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMpIEFwcGVuZDMoazEge3suS2V5fX0sIHYxIHt7LlR5cGV9fSwgazIge3suS2V5fX0sIHYyIHt7LlR5cGV9fSwgazMge3suS2V5fX0sIHYzIHt7LlR5cGV9fSkge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlcyB7CglyZXR1cm4gYXBwZW5kKHRzLCB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGV7azEsIHYxfSwge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle2syLCB2Mn0sIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXtrMywgdjN9KQp9CgovLyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19WmlwIGlzIHVzZWQgd2l0aCB0aGUgVmFsdWVzIG1ldGhvZCB0byB6aXAgKGkuZS4gaW50ZXJsZWF2ZSkgYSBzbGljZSBvZgovLyBrZXlzIHdpdGggYSBzbGljZSBvZiB2YWx1ZXMuIFRoZXNlIGNhbiB0aGVuIGJlIHBhc3NlZCBpbiB0byB0aGUgTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcAovLyBjb25zdHJ1Y3RvciBmdW5jdGlvbi4KZnVuYyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19WmlwKGtleXMgLi4ue3suS2V5fX0pIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgewoJdHMgOj0gbWFrZSh7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzLCBsZW4oa2V5cykpCglmb3IgaSwgayA6PSByYW5nZSBrZXlzIHsKCQl0c1tpXS5LZXkgPSBrCgl9CglyZXR1cm4gdHMKfQoKLy8gVmFsdWVzIHNldHMgdGhlIHZhbHVlcyBpbiBhIHR1cGxlIHNsaWNlLiBVc2UgdGhpcyB3aXRoIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1aaXAuCmZ1bmMgKHRzIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMpIFZhbHVlcyh2YWx1ZXMgLi4ue3suVHlwZX19KSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzIHsKCWlmIGxlbih0cykgIT0gbGVuKHZhbHVlcykgewoJCXBhbmljKGZtdC5FcnJvcmYoIk1pc21hdGNoZWQgJWQga2V5cyBhbmQgJWQgdmFsdWVzIiwgbGVuKHRzKSwgbGVuKHZhbHVlcykpKQoJfQoJZm9yIGksIHYgOj0gcmFuZ2UgdmFsdWVzIHsKCQl0c1tpXS5WYWwgPSB2Cgl9CglyZXR1cm4gdHMKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpmdW5jIG5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCB7CglyZXR1cm4gJnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXB7CgkJbTogbWFrZShtYXBbe3suS2V5Lk5hbWV9fV17ey5UeXBlfX0pLAoJfQp9CgovLyBOZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwMSBjcmVhdGVzIGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIGEgbWFwIGNvbnRhaW5pbmcgb25lIGl0ZW0uCmZ1bmMgTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcDEoayB7ey5LZXl9fSwgdiB7ey5UeXBlfX0pICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwIHsKCW1tIDo9IG5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKQoJbW0ubVt7ey5LZXkuU3Rhcn19a10gPSB2CglyZXR1cm4gbW0KfQoKLy8gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCBjcmVhdGVzIGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIGEgbWFwLCBvcHRpb25hbGx5IGNvbnRhaW5pbmcgc29tZSBpdGVtcy4KZnVuYyBOZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKGt2IC4uLnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZSkgKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgewoJbW0gOj0gbmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCgpCglmb3IgXywgdCA6PSByYW5nZSBrdiB7CgkJbW0ubVt7ey5LZXkuU3Rhcn19dC5LZXldID0gdC5WYWwKCX0KCXJldHVybiBtbQp9CgovLyBLZXlzIHJldHVybnMgdGhlIGtleXMgb2YgdGhlIGN1cnJlbnQgbWFwIGFzIGEgc2xpY2UuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBLZXlzKCkge3tpZiAuS2V5TGlzdH19e3suS2V5TGlzdH19e3tlbHNlfX1bXXt7LktleX19e3tlbmR9fSB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglzIDo9IG1ha2Uoe3tpZiAuS2V5TGlzdH19e3suS2V5TGlzdH19e3tlbHNlfX1bXXt7LktleX19e3tlbmR9fSwgMCwgbGVuKG1tLm0pKQoJZm9yIGsgOj0gcmFuZ2UgbW0ubSB7CgkJcyA9IGFwcGVuZChzLCB7ey5LZXkuQW1wfX1rKQoJfQoKCXJldHVybiBzCn0KCi8vIFZhbHVlcyByZXR1cm5zIHRoZSB2YWx1ZXMgb2YgdGhlIGN1cnJlbnQgbWFwIGFzIGEgc2xpY2UuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBWYWx1ZXMoKSB7e2lmIC5WYWx1ZUxpc3R9fXt7LlZhbHVlTGlzdH19e3tlbHNlfX1bXXt7LlR5cGV9fXt7ZW5kfX0gewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcyA6PSBtYWtlKHt7aWYgLlZhbHVlTGlzdH19e3suVmFsdWVMaXN0fX17e2Vsc2V9fVtde3suVHlwZX19e3tlbmR9fSwgMCwgbGVuKG1tLm0pKQoJZm9yIF8sIHYgOj0gcmFuZ2UgbW0ubSB7CgkJcyA9IGFwcGVuZChzLCB2KQoJfQoKCXJldHVybiBzCn0KCi8vIHNsaWNlIHJldHVybnMgdGhlIGludGVybmFsIGVsZW1lbnRzIG9mIHRoZSBtYXAuIFRoaXMgaXMgYSBzZWFtIGZvciB0ZXN0aW5nIGV0Yy4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIHNsaWNlKCkgW117ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUgewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcyA6PSBtYWtlKFtde3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlLCAwLCBsZW4obW0ubSkpCglmb3IgaywgdiA6PSByYW5nZSBtbS5tIHsKCQlzID0gYXBwZW5kKHMsIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXsoe3suS2V5LkFtcH19ayksIHZ9KQoJfQoKCXJldHVybiBzCn0KCi8vIFRvU2xpY2UgcmV0dXJucyB0aGUga2V5L3ZhbHVlIHBhaXJzIGFzIGEgc2xpY2UKZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIFRvU2xpY2UoKSBbXXt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZSB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXR1cm4gbW0uc2xpY2UoKQp9CgovLyBHZXQgcmV0dXJucyBvbmUgb2YgdGhlIGl0ZW1zIGluIHRoZSBtYXAsIGlmIHByZXNlbnQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBHZXQoayB7ey5LZXl9fSkgKHt7LlR5cGV9fSwgYm9vbCkgewoKCXYsIGZvdW5kIDo9IG1tLm1be3suS2V5LlN0YXJ9fWtdCglyZXR1cm4gdiwgZm91bmQKfQoKLy8gUHV0IGFkZHMgYW4gaXRlbSB0byB0aGUgY3VycmVudCBtYXAsIHJlcGxhY2luZyBhbnkgcHJpb3IgdmFsdWUuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBQdXQoayB7ey5LZXl9fSwgdiB7ey5UeXBlfX0pIGJvb2wgewoKCV8sIGZvdW5kIDo9IG1tLm1be3suS2V5LlN0YXJ9fWtdCgltbS5tW3t7LktleS5TdGFyfX1rXSA9IHYKCXJldHVybiAhZm91bmQgLy9GYWxzZSBpZiBpdCBleGlzdGVkIGFscmVhZHkKfQoKLy8gQ29udGFpbnNLZXkgZGV0ZXJtaW5lcyBpZiBhIGdpdmVuIGl0ZW0gaXMgYWxyZWFkeSBpbiB0aGUgbWFwLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgQ29udGFpbnNLZXkoayB7ey5LZXl9fSkgYm9vbCB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBmYWxzZQoJfQoKCV8sIGZvdW5kIDo9IG1tLm1be3suS2V5LlN0YXJ9fWtdCglyZXR1cm4gZm91bmQKfQoKLy8gQ29udGFpbnNBbGxLZXlzIGRldGVybWluZXMgaWYgdGhlIGdpdmVuIGl0ZW1zIGFyZSBhbGwgaW4gdGhlIG1hcC4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIENvbnRhaW5zQWxsS2V5cyhrayAuLi57ey5LZXl9fSkgYm9vbCB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBsZW4oa2spID09IDAKCX0KCglmb3IgXywgayA6PSByYW5nZSBrayB7CgkJaWYgIW1tLkNvbnRhaW5zS2V5KGspIHsKCQkJcmV0dXJuIGZhbHNlCgkJfQoJfQoJcmV0dXJuIHRydWUKfQoKLy8gQ2xlYXIgY2xlYXJzIHRoZSBlbnRpcmUgbWFwLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgQ2xlYXIoKSB7CglpZiBtbSAhPSBuaWwgewoKCQltbS5tID0gbWFrZShtYXBbe3suS2V5Lk5hbWV9fV17ey5UeXBlfX0pCgl9Cn0KCi8vIFJlbW92ZSBhIHNpbmdsZSBpdGVtIGZyb20gdGhlIG1hcC4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIFJlbW92ZShrIHt7LktleX19KSB7CglpZiBtbSAhPSBuaWwgewoKCQlkZWxldGUobW0ubSwge3suS2V5LlN0YXJ9fWspCgl9Cn0KCi8vIFBvcCByZW1vdmVzIGEgc2luZ2xlIGl0ZW0gZnJvbSB0aGUgbWFwLCByZXR1cm5pbmcgdGhlIHZhbHVlIHByZXNlbnQgcHJpb3IgdG8gcmVtb3ZhbC4KLy8gVGhlIGJvb2xlYW4gcmVzdWx0IGlzIHRydWUgb25seSBpZiB0aGUga2V5IGhhZCBiZWVuIHByZXNlbnQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBQb3AoayB7ey5LZXl9fSkgKHt7LlR5cGV9fSwgYm9vbCkgewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4ge3suVHlwZS5aZXJvfX0sIGZhbHNlCgl9CgoJdiwgZm91bmQgOj0gbW0ubVt7ey5LZXkuU3Rhcn19a10KCWRlbGV0ZShtbS5tLCB7ey5LZXkuU3Rhcn19aykKCXJldHVybiB2LCBmb3VuZAp9CgovLyBTaXplIHJldHVybnMgaG93IG1hbnkgaXRlbXMgYXJlIGN1cnJlbnRseSBpbiB0aGUgbWFwLiBUaGlzIGlzIGEgc3lub255bSBmb3IgTGVuLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgU2l6ZSgpIGludCB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiAwCgl9CgoJcmV0dXJuIGxlbihtbS5tKQp9CgovLyBJc0VtcHR5IHJldHVybnMgdHJ1ZSBpZiB0aGUgbWFwIGlzIGVtcHR5LgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgSXNFbXB0eSgpIGJvb2wgewoJcmV0dXJuIG1tLlNpemUoKSA9PSAwCn0KCi8vIE5vbkVtcHR5IHJldHVybnMgdHJ1ZSBpZiB0aGUgbWFwIGlzIG5vdCBlbXB0eS4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIE5vbkVtcHR5KCkgYm9vbCB7CglyZXR1cm4gbW0uU2l6ZSgpID4gMAp9CgovLyBEcm9wV2hlcmUgYXBwbGllcyBhIHByZWRpY2F0ZSBmdW5jdGlvbiB0byBldmVyeSBlbGVtZW50IGluIHRoZSBtYXAuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRydWUsCi8vIHRoZSBlbGVtZW50IGlzIGRyb3BwZWQgZnJvbSB0aGUgbWFwLgovLyBUaGlzIGlzIHNpbWlsYXIgdG8gRmlsdGVyIGV4Y2VwdCB0aGF0IHRoZSBtYXAgaXMgbW9kaWZpZWQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBEcm9wV2hlcmUoZm4gZnVuYyh7ey5LZXl9fSwge3suVHlwZX19KSBib29sKSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzIHsKCglyZW1vdmVkIDo9IG1ha2Uoe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlcywgMCkKCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCWlmIGZuKHt7LktleS5BbXB9fWssIHYpIHsKCQkJcmVtb3ZlZCA9IGFwcGVuZChyZW1vdmVkLCB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGV7KHt7LktleS5BbXB9fWspLCB2fSkKCQkJZGVsZXRlKG1tLm0sIGspCgkJfQoJfQoJcmV0dXJuIHJlbW92ZWQKfQoKLy8gRm9yZWFjaCBhcHBsaWVzIHRoZSBmdW5jdGlvbiBmIHRvIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hcC4KLy8gVGhlIGZ1bmN0aW9uIGNhbiBzYWZlbHkgYWx0ZXIgdGhlIHZhbHVlcyB2aWEgc2lkZS1lZmZlY3RzLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgRm9yZWFjaChmIGZ1bmMoe3suS2V5fX0sIHt7LlR5cGV9fSkpIHsKCWlmIG1tICE9IG5pbCB7CgoJCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCQlmKHt7LktleS5BbXB9fWssIHYpCgkJfQoJfQp9CgovLyBGb3JhbGwgYXBwbGllcyB0aGUgcHJlZGljYXRlIHAgdG8gZXZlcnkgZWxlbWVudCBpbiB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBmYWxzZSwKLy8gdGhlIGl0ZXJhdGlvbiB0ZXJtaW5hdGVzIGVhcmx5LiBUaGUgcmV0dXJuZWQgdmFsdWUgaXMgdHJ1ZSBpZiBhbGwgZWxlbWVudHMgd2VyZSB2aXNpdGVkLAovLyBvciBmYWxzZSBpZiBhbiBlYXJseSByZXR1cm4gb2NjdXJyZWQuCi8vCi8vIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBjYW4gYWxzbyBiZSB1c2VkIHNpbXBseSBhcyBhIHdheSB0byB2aXNpdCBldmVyeSBlbGVtZW50IHVzaW5nIGEgZnVuY3Rpb24KLy8gd2l0aCBzb21lIHNpZGUtZWZmZWN0czsgc3VjaCBhIGZ1bmN0aW9uIG11c3QgYWx3YXlzIHJldHVybiB0cnVlLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgRm9yYWxsKHAgZnVuYyh7ey5LZXl9fSwge3suVHlwZX19KSBib29sKSBib29sIHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIHRydWUKCX0KCglmb3IgaywgdiA6PSByYW5nZSBtbS5tIHsKCQlpZiAhcCh7ey5LZXkuQW1wfX1rLCB2KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCglyZXR1cm4gdHJ1ZQp9CgovLyBFeGlzdHMgYXBwbGllcyB0aGUgcHJlZGljYXRlIHAgdG8gZXZlcnkgZWxlbWVudCBpbiB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyB0cnVlLAovLyB0aGUgaXRlcmF0aW9uIHRlcm1pbmF0ZXMgZWFybHkuIFRoZSByZXR1cm5lZCB2YWx1ZSBpcyB0cnVlIGlmIGFuIGVhcmx5IHJldHVybiBvY2N1cnJlZC4KLy8gb3IgZmFsc2UgaWYgYWxsIGVsZW1lbnRzIHdlcmUgdmlzaXRlZCB3aXRob3V0IGZpbmRpbmcgYSBtYXRjaC4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEV4aXN0cyhwIGZ1bmMoe3suS2V5fX0sIHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBmYWxzZQoJfQoKCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCWlmIHAoe3suS2V5LkFtcH19aywgdikgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCX0KCglyZXR1cm4gZmFsc2UKfQoKLy8gRmluZCByZXR1cm5zIHRoZSBmaXJzdCB7ey5UeXBlfX0gdGhhdCByZXR1cm5zIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4KLy8gRmFsc2UgaXMgcmV0dXJuZWQgaWYgbm9uZSBtYXRjaC4KLy8gVGhlIG9yaWdpbmFsIG1hcCBpcyBub3QgbW9kaWZpZWQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBGaW5kKHAgZnVuYyh7ey5LZXl9fSwge3suVHlwZX19KSBib29sKSAoe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlLCBib29sKSB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGV7fSwgZmFsc2UKCX0KCglmb3IgaywgdiA6PSByYW5nZSBtbS5tIHsKCQlpZiBwKHt7LktleS5BbXB9fWssIHYpIHsKCQkJcmV0dXJuIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXsoe3suS2V5LkFtcH19ayksIHZ9LCB0cnVlCgkJfQoJfQoKCXJldHVybiB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGV7fSwgZmFsc2UKfQoKLy8gRmlsdGVyIGFwcGxpZXMgdGhlIHByZWRpY2F0ZSBwIHRvIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hcCBhbmQgcmV0dXJucyBhIGNvcGllZCBtYXAgY29udGFpbmluZwovLyBvbmx5IHRoZSBlbGVtZW50cyBmb3Igd2hpY2ggdGhlIHByZWRpY2F0ZSByZXR1cm5lZCB0cnVlLgovLyBUaGUgb3JpZ2luYWwgbWFwIGlzIG5vdCBtb2RpZmllZC4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEZpbHRlcihwIGZ1bmMoe3suS2V5fX0sIHt7LlR5cGV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKQoKCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCWlmIHAoe3suS2V5LkFtcH19aywgdikgewoJCQlyZXN1bHQubVtrXSA9IHYKCQl9Cgl9CgoJcmV0dXJuIHJlc3VsdAp9CgovLyBQYXJ0aXRpb24gYXBwbGllcyB0aGUgcHJlZGljYXRlIHAgdG8gZXZlcnkgZWxlbWVudCBpbiB0aGUgbWFwLiBJdCBkaXZpZGVzIHRoZSBtYXAgaW50byB0d28gY29waWVkIG1hcHMsCi8vIHRoZSBmaXJzdCBjb250YWluaW5nIGFsbCB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIHRoZSBwcmVkaWNhdGUgcmV0dXJuZWQgdHJ1ZSwgYW5kIHRoZSBzZWNvbmQgY29udGFpbmluZyBhbGwKLy8gdGhlIG90aGVycy4KLy8gVGhlIG9yaWdpbmFsIG1hcCBpcyBub3QgbW9kaWZpZWQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBQYXJ0aXRpb24ocCBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pIGJvb2wpIChtYXRjaGluZyAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCwgb3RoZXJzICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBuaWwsIG5pbAoJfQoKCW1hdGNoaW5nID0gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCgpCglvdGhlcnMgPSBOZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKCkKCglmb3IgaywgdiA6PSByYW5nZSBtbS5tIHsKCQlpZiBwKHt7LktleS5BbXB9fWssIHYpIHsKCQkJbWF0Y2hpbmcubVtrXSA9IHYKCQl9IGVsc2UgewoJCQlvdGhlcnMubVtrXSA9IHYKCQl9Cgl9CglyZXR1cm4KfQoKLy8gTWFwIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TWFwIGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggdGhlIGZ1bmN0aW9uIGYuCi8vIFRoZSBvcmlnaW5hbCBtYXAgaXMgbm90IG1vZGlmaWVkLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBNYXAoZiBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pICh7ey5LZXl9fSwge3suVHlwZX19KSkgKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKQoKCWZvciBrMSwgdjEgOj0gcmFuZ2UgbW0ubSB7CgkJazIsIHYyIDo9IGYoe3suS2V5LkFtcH19azEsIHYxKQoJCXJlc3VsdC5tW3t7LktleS5TdGFyfX1rMl0gPSB2MgoJfQoKCXJldHVybiByZXN1bHQKfQoKLy8gRmxhdE1hcCByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1hcCBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIHRoZSBmdW5jdGlvbiBmIHRoYXQKLy8gcmV0dXJucyB6ZXJvIG9yIG1vcmUgaXRlbXMgaW4gYSBzbGljZS4gVGhlIHJlc3VsdGluZyBtYXAgbWF5IGhhdmUgYSBkaWZmZXJlbnQgc2l6ZSB0byB0aGUgb3JpZ2luYWwgbWFwLgovLyBUaGUgb3JpZ2luYWwgbWFwIGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgRmxhdE1hcChmIGZ1bmMoe3suS2V5fX0sIHt7LlR5cGV9fSkgW117ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUpICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwIHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBOZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKCkKCglmb3IgazEsIHYxIDo9IHJhbmdlIG1tLm0gewoJCXRzIDo9IGYoe3suS2V5LkFtcH19azEsIHYxKQoJCWZvciBfLCB0IDo9IHJhbmdlIHRzIHsKCQkJcmVzdWx0Lm1be3suS2V5LlN0YXJ9fXQuS2V5XSA9IHQuVmFsCgkJfQoJfQoKCXJldHVybiByZXN1bHQKfQp7ey0gaWYgLkNvbXBhcmFibGV9fQoKLy8gRXF1YWxzIGRldGVybWluZXMgaWYgdHdvIG1hcHMgYXJlIGVxdWFsIHRvIGVhY2ggb3RoZXIuCi8vIElmIHRoZXkgYm90aCBhcmUgdGhlIHNhbWUgc2l6ZSBhbmQgaGF2ZSB0aGUgc2FtZSBpdGVtcyB0aGV5IGFyZSBjb25zaWRlcmVkIGVxdWFsLgovLyBPcmRlciBvZiBpdGVtcyBpcyBub3QgcmVsZXZlbnQgZm9yIG1hcHMgdG8gYmUgZXF1YWwuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBFcXVhbHMob3RoZXIgKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIGJvb2wgewoJaWYgbW0gPT0gbmlsIHx8IG90aGVyID09IG5pbCB7CgkJcmV0dXJuIG1tLklzRW1wdHkoKSAmJiBvdGhlci5Jc0VtcHR5KCkKCX0KCglpZiBtbS5TaXplKCkgIT0gb3RoZXIuU2l6ZSgpIHsKCQlyZXR1cm4gZmFsc2UKCX0KCWZvciBrLCB2MSA6PSByYW5nZSBtbS5tIHsKCQl2MiwgZm91bmQgOj0gb3RoZXIubVtrXQoJCWlmICFmb3VuZCB8fCB7ey5UeXBlLlN0YXJ9fXYxICE9IHt7LlR5cGUuU3Rhcn19djIgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9Cnt7LSBlbmR9fQoKLy8gQ2xvbmUgcmV0dXJucyBhIHNoYWxsb3cgY29weSBvZiB0aGUgbWFwLiBJdCBkb2VzIG5vdCBjbG9uZSB0aGUgdW5kZXJseWluZyBlbGVtZW50cy4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIENsb25lKCkgKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKQoKCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCXJlc3VsdC5tW2tdID0gdgoJfQoJcmV0dXJuIHJlc3VsdAp9Cnt7LSBpZiAuU3RyaW5nZXJ9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgU3RyaW5nKCkgc3RyaW5nIHsKCXJldHVybiBtbS5Na1N0cmluZzMoIlsiLCAiLCAiLCAiXSIpCn0KCi8vIGltcGxlbWVudHMgZW5jb2RpbmcuTWFyc2hhbGVyIGludGVyZmFjZSB7Ci8vZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIE1hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpIHsKLy8JcmV0dXJuIG1tLm1rU3RyaW5nM0J5dGVzKCJ7XCIiLCAiXCIsIFwiIiwgIlwifSIpLkJ5dGVzKCksIG5pbAovL30KCi8vIE1rU3RyaW5nIGNvbmNhdGVuYXRlcyB0aGUgbWFwIGtleS92YWx1ZXMgYXMgYSBzdHJpbmcgdXNpbmcgYSBzdXBwbGllZCBzZXBhcmF0b3IuIE5vIGVuY2xvc2luZyBtYXJrcyBhcmUgYWRkZWQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcgewoJcmV0dXJuIG1tLk1rU3RyaW5nMygiIiwgc2VwLCAiIikKfQoKLy8gTWtTdHJpbmczIGNvbmNhdGVuYXRlcyB0aGUgbWFwIGtleS92YWx1ZXMgYXMgYSBzdHJpbmcsIHVzaW5nIHRoZSBwcmVmaXgsIHNlcGFyYXRvciBhbmQgc3VmZml4IHN1cHBsaWVkLgp7ey0gaWYgLkhhc0tleVNsaWNlfX0KLy8gVGhlIG1hcCBlbnRyaWVzIGFyZSBzb3J0ZWQgYnkgdGhlaXIga2V5cy57ey0gZW5kfX0KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nIHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuICIiCgl9CglyZXR1cm4gbW0ubWtTdHJpbmczQnl0ZXMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlcikuU3RyaW5nKCkKfQoKZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIG1rU3RyaW5nM0J5dGVzKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSAqYnl0ZXMuQnVmZmVyIHsKCWIgOj0gJmJ5dGVzLkJ1ZmZlcnt9CgliLldyaXRlU3RyaW5nKGJlZm9yZSkKCXNlcCA6PSAiIgp7e2lmIC5IYXNLZXlMaXN0fX0KCWtleXMgOj0gbWFrZSh7ey5LZXlMaXN0fX0sIDAsIGxlbihtbS5tKSkKCWZvciBrLCBfIDo9IHJhbmdlIG1tLm0gewoJCWtleXMgID0gYXBwZW5kKGtleXMsIGspCgl9CglrZXlzLlNvcnRlZCgpCgoJZm9yIF8sIGsgOj0gcmFuZ2Uga2V5cyB7CgkJdiA6PSBtbS5tW2tdCgkJYi5Xcml0ZVN0cmluZyhzZXApCgkJYi5Xcml0ZVN0cmluZyhmbXQuU3ByaW50ZigiJXY6JXYiLCBrLCB2KSkKCQlzZXAgPSBiZXR3ZWVuCgl9Cnt7ZWxzZX19Cglmb3IgaywgdiA6PSByYW5nZSBtbS5tIHsKCQliLldyaXRlU3RyaW5nKHNlcCkKCQliLldyaXRlU3RyaW5nKGZtdC5TcHJpbnRmKCIldjoldiIsIGssIHYpKQoJCXNlcCA9IGJldHdlZW4KCX0Ke3tlbmR9fQoJYi5Xcml0ZVN0cmluZyhhZnRlcikKCXJldHVybiBiCn0Ke3stIGlmIGVxIC5LZXkuU3RyaW5nICJzdHJpbmcifX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gVW5tYXJzaGFsSlNPTiBpbXBsZW1lbnRzIEpTT04gZGVjb2RpbmcgZm9yIHRoaXMgbWFwIHR5cGUuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBVbm1hcnNoYWxKU09OKGIgW11ieXRlKSBlcnJvciB7CgoJYnVmIDo9IGJ5dGVzLk5ld0J1ZmZlcihiKQoJcmV0dXJuIGpzb24uTmV3RGVjb2RlcihidWYpLkRlY29kZSgmbW0ubSkKfQoKLy8gTWFyc2hhbEpTT04gaW1wbGVtZW50cyBKU09OIGVuY29kaW5nIGZvciB0aGlzIG1hcCB0eXBlLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikgewoKCXJldHVybiBqc29uLk1hcnNoYWwobW0ubSkKfQp7ey0gZW5kfX0Ke3stIGVuZH19Cnt7LSBpZiAuR29iRW5jb2RlfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gR29iRGVjb2RlIGltcGxlbWVudHMgJ2dvYicgZGVjb2RpbmcgZm9yIHRoaXMgbWFwIHR5cGUuCi8vIFlvdSBtdXN0IHJlZ2lzdGVyIHt7LlR5cGUuTmFtZX19IHdpdGggdGhlICdnb2InIHBhY2thZ2UgYmVmb3JlIHRoaXMgbWV0aG9kIGlzIHVzZWQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBHb2JEZWNvZGUoYiBbXWJ5dGUpIGVycm9yIHsKCglidWYgOj0gYnl0ZXMuTmV3QnVmZmVyKGIpCglyZXR1cm4gZ29iLk5ld0RlY29kZXIoYnVmKS5EZWNvZGUoJm1tLm0pCn0KCi8vIEdvYkVuY29kZSBpbXBsZW1lbnRzICdnb2InIGVuY29kaW5nIGZvciB0aGlzIGxpc3QgdHlwZS4KLy8gWW91IG11c3QgcmVnaXN0ZXIge3suVHlwZS5OYW1lfX0gd2l0aCB0aGUgJ2dvYicgcGFja2FnZSBiZWZvcmUgdGhpcyBtZXRob2QgaXMgdXNlZC4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEdvYkVuY29kZSgpIChbXWJ5dGUsIGVycm9yKSB7CgoJYnVmIDo9ICZieXRlcy5CdWZmZXJ7fQoJZXJyIDo9IGdvYi5OZXdFbmNvZGVyKGJ1ZikuRW5jb2RlKG1tLm0pCglyZXR1cm4gYnVmLkJ5dGVzKCksIGVycgp9Cnt7LSBlbmR9fQo=\"")
		packr.PackJSONBytes("builtin", "fast/queue.tpl", "\"Ly8gQSBxdWV1ZSBvciBmaWZvIHRoYXQgaG9sZHMge3suVHlwZX19LCBpbXBsZW1lbnRlZCB2aWEgYSByaW5nIGJ1ZmZlci4gVW5saWtlIHRoZSBsaXN0IGNvbGxlY3Rpb25zLCB0aGVzZQovLyBoYXZlIGEgZml4ZWQgc2l6ZSAoYWx0aG91Z2ggdGhpcyBjYW4gYmUgY2hhbmdlZCB3aGVuIG5lZWRlZCkuIEZvciBtdXRhYmxlIGNvbGxlY3Rpb24gdGhhdCBuZWVkIGZyZXF1ZW50Ci8vIGFwcGVuZGluZywgdGhlIGZpeGVkIHNpemUgaXMgYSBiZW5lZml0IGJlY2F1c2UgdGhlIG1lbW9yeSBmb290cHJpbnQgaXMgY29uc3RyYWluZWQuIEhvd2V2ZXIsIHRoaXMgaXMKLy8gbm90IHVzYWJsZSB1bmxlc3MgdGhlIHJhdGUgb2YgcmVtb3ZpbmcgaXRlbXMgZnJvbSB0aGUgcXVldWUgaXMsIG92ZXIgdGltZSwgdGhlIHNhbWUgYXMgdGhlIHJhdGUgb2YgYWRkaXRpb24uCi8vIEZvciBzaW1pbGFyIHJlYXNvbnMsIHRoZXJlIGlzIG5vIGltbXV0YWJsZSB2YXJpYW50IG9mIGEgcXVldWUuCi8vCi8vIFRoZSBxdWV1ZSBwcm92aWRlcyBhIG1ldGhvZCB0byBzb3J0IGl0cyBlbGVtZW50cy4KLy8KLy8gTm90IHRocmVhZC1zYWZlLgovLwovLyBHZW5lcmF0ZWQgZnJvbSB7ey5UZW1wbGF0ZUZpbGV9fSB3aXRoIFR5cGU9e3suVHlwZX19Ci8vIG9wdGlvbnM6IENvbXBhcmFibGU6e3suQ29tcGFyYWJsZX19IE51bWVyaWM6e3suTnVtZXJpY319IE9yZGVyZWQ6e3suT3JkZXJlZH19IFNvcnRlZDp7ey5Tb3J0ZWR9fSBTdHJpbmdlcjp7ey5TdHJpbmdlcn19Ci8vIFRvTGlzdDp7ey5Ub0xpc3R9fSBUb1NldDp7ey5Ub1NldH19Ci8vIGJ5IHJ1bnRlbXBsYXRlIHt7LkFwcFZlcnNpb259fQovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pvaGFuYnJhbmRob3JzdC9ydW50ZW1wbGF0ZS9ibG9iL21hc3Rlci9CVUlMVElOLm1kCgpwYWNrYWdlIHt7LlBhY2thZ2V9fQoKaW1wb3J0ICgKe3stIGlmIG9yIC5TdHJpbmdlciAuR29iRW5jb2RlfX0KCSJieXRlcyIKe3stIGVuZH19Cnt7LSBpZiAuU3RyaW5nZXJ9fQoJImVuY29kaW5nL2pzb24iCgkiZm10Igp7ey0gZW5kfX0KCSJzb3J0Igp7ey0gaWYgLkhhc0ltcG9ydH19Cgl7ey5JbXBvcnR9fQp7ey0gZW5kfX0KKQoKLy8ge3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgaXMgYSByaW5nIGJ1ZmZlciBjb250YWluaW5nIGEgc2xpY2Ugb2YgdHlwZSB7ey5UeXBlfX0uIEl0IGlzIG9wdGltaXNlZAovLyBmb3IgRklGTyBvcGVyYXRpb25zLgp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHN0cnVjdCB7CgltICAgICAgICAgW117ey5UeXBlfX0KCXJlYWQgICAgICBpbnQKCXdyaXRlICAgICBpbnQKCWxlbmd0aCAgICBpbnQKCWNhcGFjaXR5ICBpbnQKCW92ZXJ3cml0ZSBib29sCglsZXNzICAgICAgZnVuYyhpLCBqIHt7LlR5cGV9fSkgYm9vbAp9CgovLyBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSByZXR1cm5zIGEgbmV3IHF1ZXVlIG9mIHt7LlR5cGV9fS4gVGhlIGJlaGF2aW91ciB3aGVuIGFkZGluZwovLyB0byB0aGUgcXVldWUgZGVwZW5kcyBvbiBvdmVyd3JpdGUuIElmIHRydWUsIHRoZSBwdXNoIG9wZXJhdGlvbiBvdmVyd3JpdGVzIG9sZGVzdCB2YWx1ZXMgdXAgdG8KLy8gdGhlIHNwYWNlIGF2YWlsYWJsZSwgd2hlbiB0aGUgcXVldWUgaXMgZnVsbC4gT3RoZXJ3aXNlLCBpdCByZWZ1c2VzIHRvIG92ZXJmaWxsIHRoZSBxdWV1ZS4KZnVuYyBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZShjYXBhY2l0eSBpbnQsIG92ZXJ3cml0ZSBib29sKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgewoJcmV0dXJuIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNvcnRlZFF1ZXVlKGNhcGFjaXR5LCBvdmVyd3JpdGUsIG5pbCkKfQoKLy8gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U29ydGVkUXVldWUgcmV0dXJucyBhIG5ldyBxdWV1ZSBvZiB7ey5UeXBlfX0uIFRoZSBiZWhhdmlvdXIgd2hlbiBhZGRpbmcKLy8gdG8gdGhlIHF1ZXVlIGRlcGVuZHMgb24gb3ZlcndyaXRlLiBJZiB0cnVlLCB0aGUgcHVzaCBvcGVyYXRpb24gb3ZlcndyaXRlcyBvbGRlc3QgdmFsdWVzIHVwIHRvCi8vIHRoZSBzcGFjZSBhdmFpbGFibGUsIHdoZW4gdGhlIHF1ZXVlIGlzIGZ1bGwuIE90aGVyd2lzZSwgaXQgcmVmdXNlcyB0byBvdmVyZmlsbCB0aGUgcXVldWUuCi8vIElmIHRoZSAnbGVzcycgY29tcGFyaXNvbiBmdW5jdGlvbiBpcyBub3QgbmlsLCBlbGVtZW50cyBjYW4gYmUgZWFzaWx5IHNvcnRlZC4KZnVuYyBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Tb3J0ZWRRdWV1ZShjYXBhY2l0eSBpbnQsIG92ZXJ3cml0ZSBib29sLCBsZXNzIGZ1bmMoaSwgaiB7ey5UeXBlfX0pIGJvb2wpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSB7CglyZXR1cm4gJnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlewoJCW06ICAgICAgICAgbWFrZShbXXt7LlR5cGV9fSwgY2FwYWNpdHkpLAoJCXJlYWQ6ICAgICAgMCwKCQl3cml0ZTogICAgIDAsCgkJbGVuZ3RoOiAgICAwLAoJCWNhcGFjaXR5OiAgY2FwYWNpdHksCgkJb3ZlcndyaXRlOiBvdmVyd3JpdGUsCgkJbGVzczogICAgICBsZXNzLAoJfQp9CgovLyBCdWlsZHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlRnJvbUNoYW4gY29uc3RydWN0cyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSBmcm9tIGEgY2hhbm5lbCB0aGF0IHN1cHBsaWVzCi8vIGEgc2VxdWVuY2Ugb2YgdmFsdWVzIHVudGlsIGl0IGlzIGNsb3NlZC4gVGhlIGZ1bmN0aW9uIGRvZXNuJ3QgcmV0dXJuIHVudGlsIHRoZW4uCmZ1bmMgQnVpbGR7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZUZyb21DaGFuKHNvdXJjZSA8LWNoYW4ge3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgewoJcXVldWUgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUoMCwgZmFsc2UpCglmb3IgdiA6PSByYW5nZSBzb3VyY2UgewoJCXF1ZXVlLm0gPSBhcHBlbmQocXVldWUubSwgdikKCX0KCXF1ZXVlLmxlbmd0aCA9IGxlbihxdWV1ZS5tKQoJcXVldWUuY2FwYWNpdHkgPSBjYXAocXVldWUubSkKCXJldHVybiBxdWV1ZQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFJlYWxsb2NhdGUgYWRqdXN0cyB0aGUgYWxsb2NhdGVkIGNhcGFjaXR5IG9mIHRoZSBxdWV1ZSBhbmQgYWxsb3dzIHRoZSBvdmVyd3JpdGluZyBiZWhhdmlvdXIgdG8gYmUgY2hhbmdlZC4KLy8KLy8gSWYgdGhlIG5ldyBxdWV1ZSBjYXBhY2l0eSBpcyBkaWZmZXJlbnQgdG8gdGhlIGN1cnJlbnQgY2FwYWNpdHksIHRoZSBxdWV1ZSBpcyByZS1hbGxvY2F0ZWQgdG8gdGhlIG5ldwovLyBjYXBhY2l0eS4gSWYgdGhpcyBpcyBsZXNzIHRoYW4gdGhlIGN1cnJlbnQgbnVtYmVyIG9mIGVsZW1lbnRzLCB0aGUgb2xkZXN0IGl0ZW1zIGluIHRoZSBxdWV1ZSBhcmUKLy8gZGlzY2FyZGVkIHNvIHRoYXQgdGhlIHJlbWFpbmluZyBkYXRhIGNhbiBmaXQgaW4gdGhlIG5ldyBzcGFjZSBhdmFpbGFibGUuCi8vCi8vIElmIHRoZSBuZXcgcXVldWUgY2FwYWNpdHkgaXMgdGhlIHNhbWUgYXMgdGhlIGN1cnJlbnQgY2FwYWNpdHksIHRoZSBxdWV1ZSBpcyBub3QgYWx0ZXJlZCBleGNlcHQgZm9yIGFkb3B0aW5nCi8vIHRoZSBuZXcgb3ZlcndyaXRlIGZsYWcncyB2YWx1ZS4gVGhlcmVmb3JlIHRoaXMgaXMgdGhlIG1lYW5zIHRvIGNoYW5nZSB0aGUgb3ZlcndyaXRpbmcgYmVoYXZpb3VyLgovLwovLyBSZWFsbG9jYXRlIGFkanVzdHMgdGhlIHN0b3JhZ2Ugc3BhY2UgYnV0IGRvZXMgbm90IGNsb25lIHRoZSB1bmRlcmx5aW5nIGVsZW1lbnRzLgovLwovLyBUaGUgcXVldWUgbXVzdCBub3QgYmUgbmlsLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFJlYWxsb2NhdGUoY2FwYWNpdHkgaW50LCBvdmVyd3JpdGUgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHsKCWlmIGNhcGFjaXR5IDwgMSB7CgkJcGFuaWMoImNhcGFjaXR5IG11c3QgYmUgYXQgbGVhc3QgMSIpCgl9CgoJcmV0dXJuIHF1ZXVlLmRvUmVhbGxvY2F0ZShjYXBhY2l0eSwgb3ZlcndyaXRlKQp9CgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIGRvUmVhbGxvY2F0ZShjYXBhY2l0eSBpbnQsIG92ZXJ3cml0ZSBib29sKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgewoJcXVldWUub3ZlcndyaXRlID0gb3ZlcndyaXRlCgoJaWYgY2FwYWNpdHkgPCBxdWV1ZS5sZW5ndGggewoJCS8vIGV4aXN0aW5nIGRhdGEgaXMgdG9vIGJpZyBhbmQgaGFzIHRvIGJlIHRyaW1tZWQgdG8gZml0CgkJbiA6PSBxdWV1ZS5sZW5ndGggLSBjYXBhY2l0eQoJCXF1ZXVlLnJlYWQgPSAocXVldWUucmVhZCArIG4pICUgcXVldWUuY2FwYWNpdHkKCQlxdWV1ZS5sZW5ndGggLT0gbgoJfQoKCWlmIGNhcGFjaXR5ICE9IHF1ZXVlLmNhcGFjaXR5IHsKCQlvbGRMZW5ndGggOj0gcXVldWUubGVuZ3RoCgkJcXVldWUubSA9IHF1ZXVlLnRvU2xpY2UobWFrZShbXXt7LlR5cGV9fSwgY2FwYWNpdHkpKQoJCWlmIG9sZExlbmd0aCA+IGxlbihxdWV1ZS5tKSB7CgkJCW9sZExlbmd0aCA9IGxlbihxdWV1ZS5tKQoJCX0KCQlxdWV1ZS5yZWFkID0gMAoJCXF1ZXVlLndyaXRlID0gb2xkTGVuZ3RoCgkJcXVldWUubGVuZ3RoID0gb2xkTGVuZ3RoCgkJcXVldWUuY2FwYWNpdHkgPSBjYXBhY2l0eQoJfQoKCXJldHVybiBxdWV1ZQp9CgovLyBTcGFjZSByZXR1cm5zIHRoZSBzcGFjZSBhdmFpbGFibGUgaW4gdGhlIHF1ZXVlLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFNwYWNlKCkgaW50IHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIDAKCX0KCXJldHVybiBxdWV1ZS5jYXBhY2l0eSAtIHF1ZXVlLmxlbmd0aAp9CgovLyBDYXAgZ2V0cyB0aGUgY2FwYWNpdHkgb2YgdGhpcyBxdWV1ZS4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBDYXAoKSBpbnQgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gMAoJfQoJcmV0dXJuIHF1ZXVlLmNhcGFjaXR5Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gSXNTZXF1ZW5jZSByZXR1cm5zIHRydWUgZm9yIG9yZGVyZWQgbGlzdHMgYW5kIHF1ZXVlcy4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBJc1NlcXVlbmNlKCkgYm9vbCB7CglyZXR1cm4gdHJ1ZQp9CgovLyBJc1NldCByZXR1cm5zIGZhbHNlIGZvciBsaXN0cyBvciBxdWV1ZXMuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgSXNTZXQoKSBib29sIHsKCXJldHVybiBmYWxzZQp9Cgp7ey0gaWYgLlRvTGlzdH19CgovLyBUb0xpc3QgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgdGhlIHF1ZXVlIGFzIGEgbGlzdC4gVGhlIHJldHVybmVkIGxpc3QgaXMgYSBzaGFsbG93Ci8vIGNvcHk7IHRoZSBxdWV1ZSBpcyBub3QgYWx0ZXJlZC4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBUb0xpc3QoKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglsaXN0IDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KHF1ZXVlLmxlbmd0aCwgcXVldWUubGVuZ3RoKQoJcXVldWUudG9TbGljZShsaXN0Lm0pCglyZXR1cm4gbGlzdAp9Cnt7LSBlbmR9fQp7ey0gaWYgLlRvU2V0fX0KCi8vIFRvU2V0IHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBxdWV1ZSBhcyBhIHNldC4gVGhlIHJldHVybmVkIHNldCBpcyBhIHNoYWxsb3cKLy8gY29weTsgdGhlIHF1ZXVlIGlzIG5vdCBhbHRlcmVkLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFRvU2V0KCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglzbGljZSA6PSBxdWV1ZS50b1NsaWNlKG1ha2UoW117ey5UeXBlfX0sIHF1ZXVlLmxlbmd0aCkpCglyZXR1cm4gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KHNsaWNlLi4uKQp9Cnt7LSBlbmR9fQoKLy8gVG9TbGljZSByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgcXVldWUgYXMgYSBzbGljZS4gVGhlIHF1ZXVlIGlzIG5vdCBhbHRlcmVkLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFRvU2xpY2UoKSBbXXt7LlR5cGV9fSB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXR1cm4gcXVldWUudG9TbGljZShtYWtlKFtde3suVHlwZX19LCBxdWV1ZS5sZW5ndGgpKQp9CgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIHRvU2xpY2UocyBbXXt7LlR5cGV9fSkgW117ey5UeXBlfX0gewoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWNvcHkocywgZnJvbnQpCglpZiBsZW4oYmFjaykgPiAwICYmIGxlbihzKSA+PSBsZW4oZnJvbnQpIHsKCQljb3B5KHNbbGVuKGZyb250KTpdLCBiYWNrKQoJfQoJcmV0dXJuIHMKfQoKLy8gVG9JbnRlcmZhY2VTbGljZSByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgcXVldWUgYXMgYSBzbGljZSBvZiBhcmJpdHJhcnkgdHlwZS4KLy8gVGhlIHF1ZXVlIGlzIG5vdCBhbHRlcmVkLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFRvSW50ZXJmYWNlU2xpY2UoKSBbXWludGVyZmFjZXt9IHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglzIDo9IG1ha2UoW11pbnRlcmZhY2V7fSwgMCwgcXVldWUubGVuZ3RoKQoJZm9yIF8sIHYgOj0gcmFuZ2UgZnJvbnQgewoJCXMgPSBhcHBlbmQocywgdikKCX0KCglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlzID0gYXBwZW5kKHMsIHYpCgl9CgoJcmV0dXJuIHMKfQoKLy8gQ2xvbmUgcmV0dXJucyBhIHNoYWxsb3cgY29weSBvZiB0aGUgcXVldWUuIEl0IGRvZXMgbm90IGNsb25lIHRoZSB1bmRlcmx5aW5nIGVsZW1lbnRzLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIENsb25lKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWJ1ZmZlciA6PSBxdWV1ZS50b1NsaWNlKG1ha2UoW117ey5UeXBlfX0sIHF1ZXVlLmNhcGFjaXR5KSkKCXJldHVybiBxdWV1ZS5kb0Nsb25lKGJ1ZmZlcls6cXVldWUubGVuZ3RoXSkKfQoKZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBkb0Nsb25lKGJ1ZmZlciBbXXt7LlR5cGV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHsKCXcgOj0gMAoJaWYgbGVuKGJ1ZmZlcikgPCBjYXAoYnVmZmVyKSB7CgkJdyA9IGxlbihidWZmZXIpCgl9CglyZXR1cm4gJnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlewoJCW06ICAgICAgICAgYnVmZmVyLAoJCXJlYWQ6ICAgICAgMCwKCQl3cml0ZTogICAgIHcsCgkJbGVuZ3RoOiAgICBsZW4oYnVmZmVyKSwKCQljYXBhY2l0eTogIGNhcChidWZmZXIpLAoJCW92ZXJ3cml0ZTogcXVldWUub3ZlcndyaXRlLAoJCWxlc3M6ICAgICAgcXVldWUubGVzcywKCX0KfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBHZXQgZ2V0cyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgaW4gdGhlIHF1ZXVlLgovLyBQYW5pY3MgaWYgdGhlIGluZGV4IGlzIG91dCBvZiByYW5nZSBvciB0aGUgcXVldWUgaXMgbmlsLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIEdldChpIGludCkge3suVHlwZX19IHsKCglyaSA6PSAocXVldWUucmVhZCArIGkpICUgcXVldWUuY2FwYWNpdHkKCXJldHVybiBxdWV1ZS5tW3JpXQp9CgovLyBIZWFkIGdldHMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHF1ZXVlLiBIZWFkIGlzIHRoZSBvcHBvc2l0ZSBvZiBMYXN0LgovLyBQYW5pY3MgaWYgcXVldWUgaXMgZW1wdHkgb3IgbmlsLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIEhlYWQoKSB7ey5UeXBlfX0gewoKCXJldHVybiBxdWV1ZS5tW3F1ZXVlLnJlYWRdCn0KCi8vIEhlYWRPcHRpb24gcmV0dXJucyB0aGUgb2xkZXN0IGl0ZW0gaW4gdGhlIHF1ZXVlIHdpdGhvdXQgcmVtb3ZpbmcgaXQuIElmIHRoZSBxdWV1ZQovLyBpcyBuaWwgb3IgZW1wdHksIGl0IHJldHVybnMge3tpZiAuVHlwZS5Jc1B0cn19bmlse3tlbHNlfX10aGUgemVybyB2YWx1ZXt7ZW5kfX0gaW5zdGVhZC4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBIZWFkT3B0aW9uKCkge3suVHlwZX19IHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIHt7LlR5cGUuWmVyb319Cgl9CgoJaWYgcXVldWUubGVuZ3RoID09IDAgewoJCXJldHVybiB7ey5UeXBlLlplcm99fQoJfQoKCXJldHVybiBxdWV1ZS5tW3F1ZXVlLnJlYWRdCn0KCi8vIExhc3QgZ2V0cyB0aGUgdGhlIG5ld2VzdCBpdGVtIGluIHRoZSBxdWV1ZSAoaS5lLiBsYXN0IGVsZW1lbnQgcHVzaGVkKSB3aXRob3V0IHJlbW92aW5nIGl0LgovLyBMYXN0IGlzIHRoZSBvcHBvc2l0ZSBvZiBIZWFkLgovLyBQYW5pY3MgaWYgcXVldWUgaXMgZW1wdHkgb3IgbmlsLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIExhc3QoKSB7ey5UeXBlfX0gewoKCWkgOj0gcXVldWUud3JpdGUgLSAxCglpZiBpIDwgMCB7CgkJaSA9IHF1ZXVlLmNhcGFjaXR5IC0gMQoJfQoKCXJldHVybiBxdWV1ZS5tW2ldCn0KCi8vIExhc3RPcHRpb24gcmV0dXJucyB0aGUgbmV3ZXN0IGl0ZW0gaW4gdGhlIHF1ZXVlIHdpdGhvdXQgcmVtb3ZpbmcgaXQuIElmIHRoZSBxdWV1ZQovLyBpcyBuaWwgZW1wdHksIGl0IHJldHVybnMge3tpZiAuVHlwZS5Jc1B0cn19bmlse3tlbHNlfX10aGUgemVybyB2YWx1ZXt7ZW5kfX0gaW5zdGVhZC4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBMYXN0T3B0aW9uKCkge3suVHlwZX19IHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIHt7LlR5cGUuWmVyb319Cgl9CgoJaWYgcXVldWUubGVuZ3RoID09IDAgewoJCXJldHVybiB7ey5UeXBlLlplcm99fQoJfQoKCWkgOj0gcXVldWUud3JpdGUgLSAxCglpZiBpIDwgMCB7CgkJaSA9IHF1ZXVlLmNhcGFjaXR5IC0gMQoJfQoKCXJldHVybiBxdWV1ZS5tW2ldCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gSXNPdmVyd3JpdGluZyByZXR1cm5zIHRydWUgaWYgdGhlIHF1ZXVlIGlzIG92ZXJ3cml0aW5nLCBmYWxzZSBpZiByZWZ1c2luZy4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBJc092ZXJ3cml0aW5nKCkgYm9vbCB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBmYWxzZQoJfQoJcmV0dXJuIHF1ZXVlLm92ZXJ3cml0ZQp9CgovLyBJc0Z1bGwgcmV0dXJucyB0cnVlIGlmIHRoZSBxdWV1ZSBpcyBmdWxsLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIElzRnVsbCgpIGJvb2wgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gZmFsc2UKCX0KCXJldHVybiBxdWV1ZS5sZW5ndGggPT0gcXVldWUuY2FwYWNpdHkKfQoKLy8gSXNFbXB0eSByZXR1cm5zIHRydWUgaWYgdGhlIHF1ZXVlIGlzIGVtcHR5LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIElzRW1wdHkoKSBib29sIHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIHRydWUKCX0KCXJldHVybiBxdWV1ZS5sZW5ndGggPT0gMAp9CgovLyBOb25FbXB0eSByZXR1cm5zIHRydWUgaWYgdGhlIHF1ZXVlIGlzIG5vdCBlbXB0eS4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBOb25FbXB0eSgpIGJvb2wgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gZmFsc2UKCX0KCXJldHVybiBxdWV1ZS5sZW5ndGggPiAwCn0KCi8vIFNpemUgZ2V0cyB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGN1cnJlbnRseSBpbiB0aGlzIHF1ZXVlLiBUaGlzIGlzIGFuIGFsaWFzIGZvciBMZW4uCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgU2l6ZSgpIGludCB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiAwCgl9CglyZXR1cm4gcXVldWUubGVuZ3RoCn0KCi8vIExlbiBnZXRzIHRoZSBjdXJyZW50IGxlbmd0aCBvZiB0aGlzIHF1ZXVlLiBUaGlzIGlzIGFuIGFsaWFzIGZvciBTaXplLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIExlbigpIGludCB7CglyZXR1cm4gcXVldWUuU2l6ZSgpCn0KCi8vIFN3YXAgc3dhcHMgdGhlIGVsZW1lbnRzIHdpdGggaW5kZXhlcyBpIGFuZCBqLgovLyBUaGUgcXVldWUgbXVzdCBub3QgYmUgZW1wdHkuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgU3dhcChpLCBqIGludCkgewoJcmkgOj0gKHF1ZXVlLnJlYWQgKyBpKSAlIHF1ZXVlLmNhcGFjaXR5CglyaiA6PSAocXVldWUucmVhZCArIGopICUgcXVldWUuY2FwYWNpdHkKCXF1ZXVlLm1bcmldLCBxdWV1ZS5tW3JqXSA9IHF1ZXVlLm1bcmpdLCBxdWV1ZS5tW3JpXQp9CgovLyBMZXNzIHJlcG9ydHMgd2hldGhlciB0aGUgZWxlbWVudCB3aXRoIGluZGV4IGkgc2hvdWxkIHNvcnQgYmVmb3JlIHRoZSBlbGVtZW50IHdpdGggaW5kZXggai4KLy8gVGhlIHF1ZXVlIG11c3QgaGF2ZSBiZWVuIGNyZWF0ZWQgd2l0aCBhIG5vbi1uaWwgJ2xlc3MnIGNvbXBhcmlzb24gZnVuY3Rpb24gYW5kIGl0IG11c3Qgbm90Ci8vIGJlIGVtcHR5LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIExlc3MoaSwgaiBpbnQpIGJvb2wgewoJcmkgOj0gKHF1ZXVlLnJlYWQgKyBpKSAlIHF1ZXVlLmNhcGFjaXR5CglyaiA6PSAocXVldWUucmVhZCArIGopICUgcXVldWUuY2FwYWNpdHkKCXJldHVybiBxdWV1ZS5sZXNzKHF1ZXVlLm1bcmldLCBxdWV1ZS5tW3JqXSkKfQoKLy8gU29ydCBzb3J0cyB0aGUgcXVldWUgdXNpbmcgdGhlICdsZXNzJyBjb21wYXJpc29uIGZ1bmN0aW9uLCB3aGljaCBtdXN0IG5vdCBiZSBuaWwuCi8vIFRoaXMgZnVuY3Rpb24gd2lsbCBwYW5pYyBpZiB0aGUgY29sbGVjdGlvbiB3YXMgY3JlYXRlZCB3aXRoIGEgbmlsICdsZXNzJyBmdW5jdGlvbgovLyAoc2VlIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNvcnRlZFF1ZXVlKS4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBTb3J0KCkgewoJc29ydC5Tb3J0KHF1ZXVlKQp9CgovLyBTdGFibGVTb3J0IHNvcnRzIHRoZSBxdWV1ZSB1c2luZyB0aGUgJ2xlc3MnIGNvbXBhcmlzb24gZnVuY3Rpb24sIHdoaWNoIG11c3Qgbm90IGJlIG5pbC4KLy8gVGhlIHJlc3VsdCBpcyBzdGFibGUgc28gdGhhdCByZXBlYXRlZCBjYWxscyB3aWxsIG5vdCBhcmJpdHJhcmlseSBzd2FwIGVxdWFsIGl0ZW1zLgovLyBUaGlzIGZ1bmN0aW9uIHdpbGwgcGFuaWMgaWYgdGhlIGNvbGxlY3Rpb24gd2FzIGNyZWF0ZWQgd2l0aCBhIG5pbCAnbGVzcycgZnVuY3Rpb24KLy8gKHNlZSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Tb3J0ZWRRdWV1ZSkuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgU3RhYmxlU29ydCgpIHsKCXNvcnQuU3RhYmxlKHF1ZXVlKQp9CgovLyBmcm9udEFuZEJhY2sgZ2V0cyB0aGUgZnJvbnQgYW5kIGJhY2sgcG9ydGlvbnMgb2YgdGhlIHF1ZXVlLiBUaGUgZnJvbnQgcG9ydGlvbiBzdGFydHMKLy8gZnJvbSB0aGUgcmVhZCBpbmRleC4gVGhlIGJhY2sgcG9ydGlvbiBlbmRzIGF0IHRoZSB3cml0ZSBpbmRleC4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBmcm9udEFuZEJhY2soKSAoW117ey5UeXBlfX0sIFtde3suVHlwZX19KSB7CglpZiBxdWV1ZSA9PSBuaWwgfHwgcXVldWUubGVuZ3RoID09IDAgewoJCXJldHVybiBuaWwsIG5pbAoJfQoJaWYgcXVldWUud3JpdGUgPiBxdWV1ZS5yZWFkIHsKCQlyZXR1cm4gcXVldWUubVtxdWV1ZS5yZWFkOnF1ZXVlLndyaXRlXSwgbmlsCgl9CglyZXR1cm4gcXVldWUubVtxdWV1ZS5yZWFkOl0sIHF1ZXVlLm1bOnF1ZXVlLndyaXRlXQp9CgovLyBpbmRleGVzIGdldHMgdGhlIGluZGV4ZXMgZm9yIHRoZSBmcm9udCBhbmQgYmFjayBwb3J0aW9ucyBvZiB0aGUgcXVldWUuIFRoZSBmcm9udAovLyBwb3J0aW9uIHN0YXJ0cyBmcm9tIHRoZSByZWFkIGluZGV4LiBUaGUgYmFjayBwb3J0aW9uIGVuZHMgYXQgdGhlIHdyaXRlIGluZGV4LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIGluZGV4ZXMoKSBbXWludCB7CglpZiBxdWV1ZSA9PSBuaWwgfHwgcXVldWUubGVuZ3RoID09IDAgewoJCXJldHVybiBuaWwKCX0KCWlmIHF1ZXVlLndyaXRlID4gcXVldWUucmVhZCB7CgkJcmV0dXJuIFtdaW50e3F1ZXVlLnJlYWQsIHF1ZXVlLndyaXRlfQoJfQoJcmV0dXJuIFtdaW50e3F1ZXVlLnJlYWQsIHF1ZXVlLmNhcGFjaXR5LCAwLCBxdWV1ZS53cml0ZX0KfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBDbGVhciB0aGUgZW50aXJlIHF1ZXVlLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIENsZWFyKCkgewoJaWYgcXVldWUgIT0gbmlsIHsKCQlxdWV1ZS5yZWFkID0gMAoJCXF1ZXVlLndyaXRlID0gMAoJCXF1ZXVlLmxlbmd0aCA9IDAKCX0KfQoKLy8gQWRkIGFkZHMgaXRlbXMgdG8gdGhlIHF1ZXVlLiBUaGlzIGlzIGEgc3lub255bSBmb3IgUHVzaC4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBBZGQobW9yZSAuLi57ey5UeXBlfX0pIHsKCXF1ZXVlLlB1c2gobW9yZS4uLikKfQoKLy8gUHVzaCBhcHBlbmRzIGl0ZW1zIHRvIHRoZSBlbmQgb2YgdGhlIHF1ZXVlLiBJZiB0aGUgcXVldWUgZG9lcyBub3QgaGF2ZSBlbm91Z2ggc3BhY2UsCi8vIG1vcmUgd2lsbCBiZSBhbGxvY2F0ZWQ6IGhvdyB0aGlzIGhhcHBlbnMgZGVwZW5kcyBvbiB0aGUgb3ZlcndyaXRpbmcgbW9kZS4KLy8KLy8gV2hlbiBvdmVyd3JpdGluZywgdGhlIG9sZGVzdCBpdGVtcyBhcmUgb3ZlcndyaXR0ZW4gd2l0aCB0aGUgbmV3IGRhdGE7IGl0IGV4cGFuZHMgdGhlIHF1ZXVlCi8vIG9ubHkgaWYgdGhlcmUgaXMgc3RpbGwgbm90IGVub3VnaCBzcGFjZS4KLy8KLy8gT3RoZXJ3aXNlLCB0aGUgcXVldWUgbWlnaHQgYmUgcmVhbGxvY2F0ZWQgaWYgbmVjZXNzYXJ5LCBlbnN1cmluZyB0aGF0IGFsbCB0aGUgZGF0YSBpcyBwdXNoZWQKLy8gd2l0aG91dCBhbnkgb2xkZXIgaXRlbXMgYmVpbmcgYWZmZWN0ZWQuCi8vCi8vIFRoZSBtb2RpZmllZCBxdWV1ZSBpcyByZXR1cm5lZC4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBQdXNoKGl0ZW1zIC4uLnt7LlR5cGV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHsKCgluIDo9IHF1ZXVlLmNhcGFjaXR5CglpZiBxdWV1ZS5vdmVyd3JpdGUgJiYgbGVuKGl0ZW1zKSA+IHF1ZXVlLmNhcGFjaXR5IHsKCQluID0gbGVuKGl0ZW1zKQoJCS8vIG5vIHJvdW5kaW5nIGluIHRoaXMgY2FzZSBiZWNhdXNlIHRoZSBvbGQgaXRlbXMgYXJlIGV4cGVjdGVkIHRvIGJlIG92ZXJ3cml0dGVuCgoJfSBlbHNlIGlmICFxdWV1ZS5vdmVyd3JpdGUgJiYgbGVuKGl0ZW1zKSA+IChxdWV1ZS5jYXBhY2l0eSAtIHF1ZXVlLmxlbmd0aCkgewoJCW4gPSBsZW4oaXRlbXMpICsgcXVldWUubGVuZ3RoCgkJLy8gcm91bmRlZCB1cCB0byBtdWx0aXBsZSBvZiAxMjggdG8gcmVkdWNlIHJlcGVhdGVkIHJlYWxsb2NhdGlvbgoJCW4gPSAoKG4gKyAxMjcpIC8gMTI4KSAqIDEyOAoJfQoKCWlmIG4gPiBxdWV1ZS5jYXBhY2l0eSB7CgkJcXVldWUgPSBxdWV1ZS5kb1JlYWxsb2NhdGUobiwgcXVldWUub3ZlcndyaXRlKQoJfQoKCW92ZXJmbG93IDo9IHF1ZXVlLmRvUHVzaChpdGVtcy4uLikKCglpZiBsZW4ob3ZlcmZsb3cpID4gMCB7CgkJcGFuaWMobGVuKG92ZXJmbG93KSkKCX0KCglyZXR1cm4gcXVldWUKfQoKLy8gT2ZmZXIgYXBwZW5kcyBhcyBtYW55IGl0ZW1zIHRvIHRoZSBlbmQgb2YgdGhlIHF1ZXVlIGFzIGl0IGNhbi4KLy8gSWYgdGhlIHF1ZXVlIGlzIGFscmVhZHkgZnVsbCwgd2hhdCBoYXBwZW5zIGRlcGVuZHMgb24gd2hldGhlciB0aGUgcXVldWUgaXMgY29uZmlndXJlZAovLyB0byBvdmVyd3JpdGUuIElmIGl0IGlzLCB0aGUgb2xkZXN0IGl0ZW1zIHdpbGwgYmUgb3ZlcndyaXR0ZW4uIE90aGVyd2lzZSwgaXQgd2lsbCBiZQovLyBmaWxsZWQgdG8gY2FwYWNpdHkgYW5kIGFueSB1bndyaXR0ZW4gaXRlbXMgYXJlIHJldHVybmVkLgovLwovLyBJZiB0aGUgY2FwYWNpdHkgaXMgdG9vIHNtYWxsIGZvciB0aGUgbnVtYmVyIG9mIGl0ZW1zLCB0aGUgZXhjZXNzIGl0ZW1zIGFyZSByZXR1cm5lZC4KLy8gVGhlIHF1ZXVlIGNhcGFjaXR5IGlzIG5ldmVyIGFsdGVyZWQuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgT2ZmZXIoaXRlbXMgLi4ue3suVHlwZX19KSBbXXt7LlR5cGV9fSB7CglyZXR1cm4gcXVldWUuZG9QdXNoKGl0ZW1zLi4uKQp9CgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIGRvUHVzaChpdGVtcyAuLi57ey5UeXBlfX0pIFtde3suVHlwZX19IHsKCW4gOj0gbGVuKGl0ZW1zKQoKCXNwYWNlIDo9IHF1ZXVlLmNhcGFjaXR5IC0gcXVldWUubGVuZ3RoCglvdmVyd3JpdHRlbiA6PSBuIC0gc3BhY2UKCglpZiBxdWV1ZS5vdmVyd3JpdGUgewoJCXNwYWNlID0gcXVldWUuY2FwYWNpdHkKCX0KCglpZiBzcGFjZSA8IG4gewoJCS8vIHRoZXJlIGlzIHRvbyBsaXR0bGUgc3BhY2U7IHJlamVjdCBzdXJwbHVzIGVsZW1lbnRzCgkJc3VycGx1cyA6PSBpdGVtc1tzcGFjZTpdCgkJcXVldWUuZG9QdXNoKGl0ZW1zWzpzcGFjZV0uLi4pCgkJcmV0dXJuIHN1cnBsdXMKCX0KCglpZiBuIDw9IHF1ZXVlLmNhcGFjaXR5IC0gcXVldWUud3JpdGUgewoJCS8vIGVhc3kgY2FzZTogZW5vdWdoIHNwYWNlIGF0IGVuZCBmb3IgYWxsIGl0ZW1zCgkJY29weShxdWV1ZS5tW3F1ZXVlLndyaXRlOl0sIGl0ZW1zKQoJCXF1ZXVlLndyaXRlID0gKHF1ZXVlLndyaXRlICsgbikgJSBxdWV1ZS5jYXBhY2l0eQoJCXF1ZXVlLmxlbmd0aCArPSBuCgkJcmV0dXJuIG5pbAoJfQoKCS8vIG5vdCB5ZXQgZnVsbAoJZW5kIDo9IHF1ZXVlLmNhcGFjaXR5IC0gcXVldWUud3JpdGUKCWNvcHkocXVldWUubVtxdWV1ZS53cml0ZTpdLCBpdGVtc1s6ZW5kXSkKCWNvcHkocXVldWUubSwgaXRlbXNbZW5kOl0pCglxdWV1ZS53cml0ZSA9IG4gLSBlbmQKCXF1ZXVlLmxlbmd0aCArPSBuCglpZiBxdWV1ZS5sZW5ndGggPiBxdWV1ZS5jYXBhY2l0eSB7CgkJcXVldWUubGVuZ3RoID0gcXVldWUuY2FwYWNpdHkKCX0KCWlmIG92ZXJ3cml0dGVuID4gMCB7CgkJcXVldWUucmVhZCA9IChxdWV1ZS5yZWFkICsgb3ZlcndyaXR0ZW4pICUgcXVldWUuY2FwYWNpdHkKCX0KCXJldHVybiBuaWwKfQoKLy8gUG9wMSByZW1vdmVzIGFuZCByZXR1cm5zIHRoZSBvbGRlc3QgaXRlbSBmcm9tIHRoZSBxdWV1ZS4gSWYgdGhlIHF1ZXVlIGlzCi8vIGVtcHR5LCBpdCByZXR1cm5zIHt7aWYgLlR5cGUuSXNQdHJ9fW5pbHt7ZWxzZX19dGhlIHplcm8gdmFsdWV7e2VuZH19IGluc3RlYWQuCi8vIFRoZSBib29sZWFuIGlzIHRydWUgb25seSBpZiB0aGUgZWxlbWVudCB3YXMgYXZhaWxhYmxlLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFBvcDEoKSAoe3suVHlwZX19LCBib29sKSB7CgoJaWYgcXVldWUubGVuZ3RoID09IDAgewoJCXJldHVybiB7ey5UeXBlLlplcm99fSwgZmFsc2UKCX0KCgl2IDo9IHF1ZXVlLm1bcXVldWUucmVhZF0KCXF1ZXVlLnJlYWQgPSAocXVldWUucmVhZCArIDEpICUgcXVldWUuY2FwYWNpdHkKCXF1ZXVlLmxlbmd0aC0tCgoJcmV0dXJuIHYsIHRydWUKfQoKLy8gUG9wIHJlbW92ZXMgYW5kIHJldHVybnMgdGhlIG9sZGVzdCBpdGVtcyBmcm9tIHRoZSBxdWV1ZS4gSWYgdGhlIHF1ZXVlIGlzCi8vIGVtcHR5LCBpdCByZXR1cm5zIGEgbmlsIHNsaWNlLiBJZiBuIGlzIGxhcmdlciB0aGFuIHRoZSBjdXJyZW50IHF1ZXVlIGxlbmd0aCwKLy8gaXQgcmV0dXJucyBhbGwgdGhlIGF2YWlsYWJsZSBlbGVtZW50cywgc28gaW4gdGhpcyBjYXNlIHRoZSByZXR1cm5lZCBzbGljZQovLyB3aWxsIGJlIHNob3J0ZXIgdGhhbiBuLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFBvcChuIGludCkgW117ey5UeXBlfX0gewoJcmV0dXJuIHF1ZXVlLmRvUG9wKG4pCn0KCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgZG9Qb3AobiBpbnQpIFtde3suVHlwZX19IHsKCWlmIHF1ZXVlLmxlbmd0aCA9PSAwIHsKCQlyZXR1cm4gbmlsCgl9CgoJaWYgbiA+IHF1ZXVlLmxlbmd0aCB7CgkJbiA9IHF1ZXVlLmxlbmd0aAoJfQoKCXMgOj0gbWFrZShbXXt7LlR5cGV9fSwgbikKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCgkvLyBub3RlIHRoZSBsZW5ndGggY29waWVkIGlzIHdoaWNoZXZlciBpcyBzaG9ydGVyCgljb3B5KHMsIGZyb250KQoJaWYgbiA+IGxlbihmcm9udCkgewoJCWNvcHkoc1tsZW4oZnJvbnQpOl0sIGJhY2spCgl9CgoJcXVldWUucmVhZCA9IChxdWV1ZS5yZWFkICsgbikgJSBxdWV1ZS5jYXBhY2l0eQoJcXVldWUubGVuZ3RoIC09IG4KCglyZXR1cm4gcwp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0Ke3stIGlmIC5Db21wYXJhYmxlfX0KCi8vIENvbnRhaW5zIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGl0ZW0gaXMgYWxyZWFkeSBpbiB0aGUgcXVldWUsIHJldHVybmluZyB0cnVlIGlmIHNvLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIENvbnRhaW5zKHYge3suVHlwZX19KSBib29sIHsKCXJldHVybiBxdWV1ZS5FeGlzdHMoZnVuYyh4IHt7LlR5cGV9fSkgYm9vbCB7CgkJcmV0dXJuIHt7LlR5cGUuU3Rhcn19eCA9PSB7ey5UeXBlLlN0YXJ9fXYKCX0pCn0KCi8vIENvbnRhaW5zQWxsIGRldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gaXRlbXMgYXJlIGFsbCBpbiB0aGUgcXVldWUsIHJldHVybmluZyB0cnVlIGlmIHNvLgovLyBUaGlzIGlzIHBvdGVudGlhbGx5IGEgc2xvdyBtZXRob2QgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgcmFyZWx5LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIENvbnRhaW5zQWxsKGkgLi4ue3suVHlwZX19KSBib29sIHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIGxlbihpKSA9PSAwCgl9CgoJZm9yIF8sIHYgOj0gcmFuZ2UgaSB7CgkJaWYgIXF1ZXVlLkNvbnRhaW5zKHYpIHsKCQkJcmV0dXJuIGZhbHNlCgkJfQoJfQoJcmV0dXJuIHRydWUKfQp7ey0gZW5kfX0KCi8vIEV4aXN0cyB2ZXJpZmllcyB0aGF0IG9uZSBvciBtb3JlIGVsZW1lbnRzIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCi8vIFRoZSBmdW5jdGlvbiBzaG91bGQgbm90IGFsdGVyIHRoZSB2YWx1ZXMgdmlhIHNpZGUtZWZmZWN0cy4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBFeGlzdHMocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBmYWxzZQoJfQoKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJaWYgcCh2KSB7CgkJCXJldHVybiB0cnVlCgkJfQoJfQoJZm9yIF8sIHYgOj0gcmFuZ2UgYmFjayB7CgkJaWYgcCh2KSB7CgkJCXJldHVybiB0cnVlCgkJfQoJfQoJcmV0dXJuIGZhbHNlCn0KCi8vIEZvcmFsbCB2ZXJpZmllcyB0aGF0IGFsbCBlbGVtZW50cyBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgovLyBUaGUgZnVuY3Rpb24gc2hvdWxkIG5vdCBhbHRlciB0aGUgdmFsdWVzIHZpYSBzaWRlLWVmZmVjdHMuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgRm9yYWxsKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIGJvb2wgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gdHJ1ZQoJfQoKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJaWYgIXAodikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlpZiAhcCh2KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0KCi8vIEZvcmVhY2ggaXRlcmF0ZXMgb3ZlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSBhbmQgZXhlY3V0ZXMgZnVuY3Rpb24gZiBhZ2FpbnN0IGVhY2ggZWxlbWVudC4KLy8gVGhlIGZ1bmN0aW9uIGNhbiBzYWZlbHkgYWx0ZXIgdGhlIHZhbHVlcyB2aWEgc2lkZS1lZmZlY3RzLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIEZvcmVhY2goZiBmdW5jKHt7LlR5cGV9fSkpIHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuCgl9CgoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWZvciBfLCB2IDo9IHJhbmdlIGZyb250IHsKCQlmKHYpCgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlmKHYpCgl9Cn0KCi8vIFNlbmQgcmV0dXJucyBhIGNoYW5uZWwgdGhhdCB3aWxsIHNlbmQgYWxsIHRoZSBlbGVtZW50cyBpbiBvcmRlci4KLy8gQSBnb3JvdXRpbmUgaXMgY3JlYXRlZCB0byBzZW5kIHRoZSBlbGVtZW50czsgdGhpcyBvbmx5IHRlcm1pbmF0ZXMgd2hlbiBhbGwgdGhlIGVsZW1lbnRzCi8vIGhhdmUgYmVlbiBjb25zdW1lZC4gVGhlIGNoYW5uZWwgd2lsbCBiZSBjbG9zZWQgd2hlbiBhbGwgdGhlIGVsZW1lbnRzIGhhdmUgYmVlbiBzZW50LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFNlbmQoKSA8LWNoYW4ge3suVHlwZX19IHsKCWNoIDo9IG1ha2UoY2hhbiB7ey5UeXBlfX0pCglnbyBmdW5jKCkgewoJCWlmIHF1ZXVlICE9IG5pbCB7CgoJCQlmcm9udCwgYmFjayA6PSBxdWV1ZS5mcm9udEFuZEJhY2soKQoJCQlmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJCQljaCA8LSB2CgkJCX0KCQkJZm9yIF8sIHYgOj0gcmFuZ2UgYmFjayB7CgkJCQljaCA8LSB2CgkJCX0KCQl9CgkJY2xvc2UoY2gpCgl9KCkKCXJldHVybiBjaAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIERvS2VlcFdoZXJlIG1vZGlmaWVzIGEge3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgYnkgcmV0YWluaW5nIG9ubHkgdGhvc2UgZWxlbWVudHMgdGhhdCBtYXRjaAovLyB0aGUgcHJlZGljYXRlIHAuIFRoaXMgaXMgdmVyeSBzaW1pbGFyIHRvIEZpbHRlciBidXQgYWx0ZXJzIHRoZSBxdWV1ZSBpbiBwbGFjZS4KLy8KLy8gVGhlIHF1ZXVlIGlzIG1vZGlmaWVkIGFuZCB0aGUgbW9kaWZpZWQgcXVldWUgaXMgcmV0dXJuZWQuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgRG9LZWVwV2hlcmUocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWlmIHF1ZXVlLmxlbmd0aCA9PSAwIHsKCQlyZXR1cm4gcXVldWUKCX0KCglyZXR1cm4gcXVldWUuZG9LZWVwV2hlcmUocCkKfQoKZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBkb0tlZXBXaGVyZShwIGZ1bmMoe3suVHlwZX19KSBib29sKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgewoJbGFzdCA6PSBxdWV1ZS5jYXBhY2l0eQoKCWlmIHF1ZXVlLndyaXRlID4gcXVldWUucmVhZCB7CgkJLy8gb25seSBuZWVkIHRvIHByb2Nlc3MgdGhlIGZyb250IG9mIHRoZSBxdWV1ZQoJCWxhc3QgPSBxdWV1ZS53cml0ZQoJfQoKCXIgOj0gcXVldWUucmVhZAoJdyA6PSByCgluIDo9IDAKCgkvLyAxc3QgbG9vcDogZnJvbnQgb2YgcXVldWUgKGZyb20gcXVldWUucmVhZCkKCWZvciByIDwgbGFzdCB7CgkJaWYgcChxdWV1ZS5tW3JdKSB7CgkJCWlmIHcgIT0gciB7CgkJCQlxdWV1ZS5tW3ddID0gcXVldWUubVtyXQoJCQl9CgkJCXcrKwoJCQluKysKCQl9CgkJcisrCgl9CgoJdyA9IHcgJSBxdWV1ZS5jYXBhY2l0eQoKCWlmIHF1ZXVlLndyaXRlID4gcXVldWUucmVhZCB7CgkJLy8gb25seSBuZWVkZWQgdG8gcHJvY2VzcyB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlCgkJcXVldWUud3JpdGUgPSB3CgkJcXVldWUubGVuZ3RoID0gbgoJCXJldHVybiBxdWV1ZQoJfQoKCS8vIDJuZCBsb29wOiBiYWNrIG9mIHF1ZXVlIChmcm9tIDAgdG8gcXVldWUud3JpdGUpCglyID0gMAoJZm9yIHIgPCBxdWV1ZS53cml0ZSB7CgkJaWYgcChxdWV1ZS5tW3JdKSB7CgkJCWlmIHcgIT0gciB7CgkJCQlxdWV1ZS5tW3ddID0gcXVldWUubVtyXQoJCQl9CgkJCXcgPSAodyArIDEpICUgcXVldWUuY2FwYWNpdHkKCQkJbisrCgkJfQoJCXIrKwoJfQoKCXF1ZXVlLndyaXRlID0gdwoJcXVldWUubGVuZ3RoID0gbgoKCXJldHVybiBxdWV1ZQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEZpbmQgcmV0dXJucyB0aGUgZmlyc3Qge3suVHlwZX19IHRoYXQgcmV0dXJucyB0cnVlIGZvciBwcmVkaWNhdGUgcC4KLy8gRmFsc2UgaXMgcmV0dXJuZWQgaWYgbm9uZSBtYXRjaC4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBGaW5kKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpICh7ey5UeXBlfX0sIGJvb2wpIHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIHt7LlR5cGUuWmVyb319LCBmYWxzZQoJfQoKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJaWYgcCh2KSB7CgkJCXJldHVybiB2LCB0cnVlCgkJfQoJfQoJZm9yIF8sIHYgOj0gcmFuZ2UgYmFjayB7CgkJaWYgcCh2KSB7CgkJCXJldHVybiB2LCB0cnVlCgkJfQoJfQp7ey0gaWYgLlR5cGVJc1B0cn19CgoJcmV0dXJuIG5pbCwgZmFsc2UKe3stIGVsc2V9fQoKCXZhciBlbXB0eSB7ey5UeXBlfX0KCXJldHVybiBlbXB0eSwgZmFsc2UKe3stIGVuZH19Cn0KCi8vIEZpbHRlciByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHdob3NlIGVsZW1lbnRzIHJldHVybiB0cnVlIGZvciBwcmVkaWNhdGUgcC4KLy8KLy8gVGhlIG9yaWdpbmFsIHF1ZXVlIGlzIG5vdCBtb2RpZmllZC4gU2VlIGFsc28gRG9LZWVwV2hlcmUgKHdoaWNoIGRvZXMgbW9kaWZ5IHRoZSBvcmlnaW5hbCBxdWV1ZSkuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgRmlsdGVyKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U29ydGVkUXVldWUocXVldWUubGVuZ3RoLCBxdWV1ZS5vdmVyd3JpdGUsIHF1ZXVlLmxlc3MpCglpIDo9IDAKCglmcm9udCwgYmFjayA6PSBxdWV1ZS5mcm9udEFuZEJhY2soKQoJZm9yIF8sIHYgOj0gcmFuZ2UgZnJvbnQgewoJCWlmIHAodikgewoJCQlyZXN1bHQubVtpXSA9IHYKCQkJaSsrCgkJfQoJfQoJZm9yIF8sIHYgOj0gcmFuZ2UgYmFjayB7CgkJaWYgcCh2KSB7CgkJCXJlc3VsdC5tW2ldID0gdgoJCQlpKysKCQl9Cgl9CglyZXN1bHQubGVuZ3RoID0gaQoJcmVzdWx0LndyaXRlID0gaQoKCXJldHVybiByZXN1bHQKfQoKLy8gUGFydGl0aW9uIHJldHVybnMgdHdvIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZXMgd2hvc2UgZWxlbWVudHMgcmV0dXJuIHRydWUgb3IgZmFsc2UgZm9yIHRoZSBwcmVkaWNhdGUsIHAuCi8vIFRoZSBmaXJzdCByZXN1bHQgY29uc2lzdHMgb2YgYWxsIGVsZW1lbnRzIHRoYXQgc2F0aXNmeSB0aGUgcHJlZGljYXRlIGFuZCB0aGUgc2Vjb25kIHJlc3VsdCBjb25zaXN0cyBvZgovLyBhbGwgZWxlbWVudHMgdGhhdCBkb24ndC4gVGhlIHJlbGF0aXZlIG9yZGVyIG9mIHRoZSBlbGVtZW50cyBpbiB0aGUgcmVzdWx0cyBpcyB0aGUgc2FtZSBhcyBpbiB0aGUKLy8gb3JpZ2luYWwgcXVldWUuCi8vCi8vIFRoZSBvcmlnaW5hbCBxdWV1ZSBpcyBub3QgbW9kaWZpZWQKZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBQYXJ0aXRpb24ocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKCp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSwgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBuaWwsIG5pbAoJfQoKCW1hdGNoaW5nIDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNvcnRlZFF1ZXVlKHF1ZXVlLmxlbmd0aCwgcXVldWUub3ZlcndyaXRlLCBxdWV1ZS5sZXNzKQoJb3RoZXJzIDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNvcnRlZFF1ZXVlKHF1ZXVlLmxlbmd0aCwgcXVldWUub3ZlcndyaXRlLCBxdWV1ZS5sZXNzKQoJbSwgbyA6PSAwLCAwCgoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWZvciBfLCB2IDo9IHJhbmdlIGZyb250IHsKCQlpZiBwKHYpIHsKCQkJbWF0Y2hpbmcubVttXSA9IHYKCQkJbSsrCgkJfSBlbHNlIHsKCQkJb3RoZXJzLm1bb10gPSB2CgkJCW8rKwoJCX0KCX0KCWZvciBfLCB2IDo9IHJhbmdlIGJhY2sgewoJCWlmIHAodikgewoJCQltYXRjaGluZy5tW21dID0gdgoJCQltKysKCQl9IGVsc2UgewoJCQlvdGhlcnMubVtvXSA9IHYKCQkJbysrCgkJfQoJfQoJbWF0Y2hpbmcubGVuZ3RoID0gbQoJbWF0Y2hpbmcud3JpdGUgPSBtCglvdGhlcnMubGVuZ3RoID0gbwoJb3RoZXJzLndyaXRlID0gbwoKCXJldHVybiBtYXRjaGluZywgb3RoZXJzCn0KCi8vIE1hcCByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggZnVuY3Rpb24gZi4KLy8gVGhlIHJlc3VsdGluZyBxdWV1ZSBpcyB0aGUgc2FtZSBzaXplIGFzIHRoZSBvcmlnaW5hbCBxdWV1ZS4KLy8gVGhlIG9yaWdpbmFsIHF1ZXVlIGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIE1hcChmIGZ1bmMoe3suVHlwZX19KSB7ey5UeXBlfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglzbGljZSA6PSBtYWtlKFtde3suVHlwZX19LCBxdWV1ZS5sZW5ndGgpCglpIDo9IDAKCglmcm9udCwgYmFjayA6PSBxdWV1ZS5mcm9udEFuZEJhY2soKQoJZm9yIF8sIHYgOj0gcmFuZ2UgZnJvbnQgewoJCXNsaWNlW2ldID0gZih2KQoJCWkrKwoJfQoJZm9yIF8sIHYgOj0gcmFuZ2UgYmFjayB7CgkJc2xpY2VbaV0gPSBmKHYpCgkJaSsrCgl9CgoJcmV0dXJuIHF1ZXVlLmRvQ2xvbmUoc2xpY2UpCn0Ke3stIHJhbmdlIC5NYXBUb319CgovLyBNYXBUb3t7LlV9fSByZXR1cm5zIGEgbmV3IFtde3sufX0gYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCBmdW5jdGlvbiBmLgovLyBUaGUgcmVzdWx0aW5nIHNsaWNlIGlzIHRoZSBzYW1lIHNpemUgYXMgdGhlIHF1ZXVlLgovLyBUaGUgcXVldWUgaXMgbm90IG1vZGlmaWVkLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKHF1ZXVlICp7eyQuUHJlZml4LlV9fXt7JC5UeXBlLlV9fVF1ZXVlKSBNYXBUb3t7LlV9fShmIGZ1bmMoe3skLlR5cGV9fSkge3sufX0pIFtde3sufX0gewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IG1ha2UoW117ey59fSwgMCwgcXVldWUubGVuZ3RoKQoKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJcmVzdWx0ID0gYXBwZW5kKHJlc3VsdCwgZih2KSkKCX0KCWZvciBfLCB2IDo9IHJhbmdlIGJhY2sgewoJCXJlc3VsdCA9IGFwcGVuZChyZXN1bHQsIGYodikpCgl9CgoJcmV0dXJuIHJlc3VsdAp9Cnt7LSBlbmR9fQoKLy8gRmxhdE1hcCByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggZnVuY3Rpb24gZiB0aGF0Ci8vIHJldHVybnMgemVybyBvciBtb3JlIGl0ZW1zIGluIGEgc2xpY2UuIFRoZSByZXN1bHRpbmcgcXVldWUgbWF5IGhhdmUgYSBkaWZmZXJlbnQgc2l6ZSB0byB0aGUgb3JpZ2luYWwgcXVldWUuCi8vIFRoZSBvcmlnaW5hbCBxdWV1ZSBpcyBub3QgbW9kaWZpZWQuCi8vCi8vIFRoaXMgaXMgYSBkb21haW4tdG8tcmFuZ2UgbWFwcGluZyBmdW5jdGlvbi4gRm9yIGJlc3Bva2UgdHJhbnNmb3JtYXRpb25zIHRvIG90aGVyIHR5cGVzLCBjb3B5IGFuZCBtb2RpZnkKLy8gdGhpcyBtZXRob2QgYXBwcm9wcmlhdGVseS4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBGbGF0TWFwKGYgZnVuYyh7ey5UeXBlfX0pIFtde3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJc2xpY2UgOj0gbWFrZShbXXt7LlR5cGV9fSwgMCwgcXVldWUubGVuZ3RoKQoKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJc2xpY2UgPSBhcHBlbmQoc2xpY2UsIGYodikuLi4pCgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlzbGljZSA9IGFwcGVuZChzbGljZSwgZih2KS4uLikKCX0KCglyZXR1cm4gcXVldWUuZG9DbG9uZShzbGljZSkKfQp7ey0gcmFuZ2UgLk1hcFRvfX0KCi8vIEZsYXRNYXBUb3t7LlV9fSByZXR1cm5zIGEgbmV3IFtde3sufX0gYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCBmdW5jdGlvbiBmIHRoYXQKLy8gcmV0dXJucyB6ZXJvIG9yIG1vcmUgaXRlbXMgaW4gYSBzbGljZS4gVGhlIHJlc3VsdGluZyBzbGljZSBtYXkgaGF2ZSBhIGRpZmZlcmVudCBzaXplIHRvIHRoZSBxdWV1ZS4KLy8gVGhlIHF1ZXVlIGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChxdWV1ZSAqe3skLlByZWZpeC5VfX17eyQuVHlwZS5VfX1RdWV1ZSkgRmxhdE1hcFRve3suVX19KGYgZnVuYyh7eyQuVHlwZX19KSBbXXt7Ln19KSBbXXt7Ln19IHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBtYWtlKFtde3sufX0sIDAsIDMyKQoKCWZvciBfLCB2IDo9IHJhbmdlIHF1ZXVlLm0gewoJCXJlc3VsdCA9IGFwcGVuZChyZXN1bHQsIGYodikuLi4pCgl9CgoJcmV0dXJuIHJlc3VsdAp9Cnt7LSBlbmR9fQoKLy8gQ291bnRCeSBnaXZlcyB0aGUgbnVtYmVyIGVsZW1lbnRzIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHRoYXQgcmV0dXJuIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBDb3VudEJ5KHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIChyZXN1bHQgaW50KSB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiAwCgl9CgoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWZvciBfLCB2IDo9IHJhbmdlIGZyb250IHsKCQlpZiBwKHYpIHsKCQkJcmVzdWx0KysKCQl9Cgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlpZiBwKHYpIHsKCQkJcmVzdWx0KysKCQl9Cgl9CglyZXR1cm4KfQoKLy8gTWluQnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIGNvbnRhaW5pbmcgdGhlIG1pbmltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMKLy8gdXNpbmcgYSBwYXNzZWQgZnVuYyBkZWZpbmluZyDigJhsZXNz4oCZLiBJbiB0aGUgY2FzZSBvZiBtdWx0aXBsZSBpdGVtcyBiZWluZyBlcXVhbGx5IG1pbmltYWwsIHRoZSBmaXJzdCBzdWNoCi8vIGVsZW1lbnQgaXMgcmV0dXJuZWQuIFBhbmljcyBpZiB0aGVyZSBhcmUgbm8gZWxlbWVudHMuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgTWluQnkobGVzcyBmdW5jKHt7LlR5cGV9fSwge3suVHlwZX19KSBib29sKSB7ey5UeXBlfX0gewoKCWlmIHF1ZXVlLmxlbmd0aCA9PSAwIHsKCQlwYW5pYygiQ2Fubm90IGRldGVybWluZSB0aGUgbWluaW11bSBvZiBhbiBlbXB0eSBxdWV1ZS4iKQoJfQoKCWluZGV4ZXMgOj0gcXVldWUuaW5kZXhlcygpCgltIDo9IGluZGV4ZXNbMF0KCWZvciBsZW4oaW5kZXhlcykgPiAxIHsKCQlmIDo9IGluZGV4ZXNbMF0KCQlmb3IgaSA6PSBmOyBpIDwgaW5kZXhlc1sxXTsgaSsrIHsKCQkJaWYgaSAhPSBtIHsKCQkJCWlmIGxlc3MocXVldWUubVtpXSwgcXVldWUubVttXSkgewoJCQkJCW0gPSBpCgkJCQl9CgkJCX0KCQl9CgkJaW5kZXhlcyA9IGluZGV4ZXNbMjpdCgl9CglyZXR1cm4gcXVldWUubVttXQp9CgovLyBNYXhCeSByZXR1cm5zIGFuIGVsZW1lbnQgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgY29udGFpbmluZyB0aGUgbWF4aW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cwovLyB1c2luZyBhIHBhc3NlZCBmdW5jIGRlZmluaW5nIOKAmGxlc3PigJkuIEluIHRoZSBjYXNlIG9mIG11bHRpcGxlIGl0ZW1zIGJlaW5nIGVxdWFsbHkgbWF4aW1hbCwgdGhlIGZpcnN0IHN1Y2gKLy8gZWxlbWVudCBpcyByZXR1cm5lZC4gUGFuaWNzIGlmIHRoZXJlIGFyZSBubyBlbGVtZW50cy4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBNYXhCeShsZXNzIGZ1bmMoe3suVHlwZX19LCB7ey5UeXBlfX0pIGJvb2wpIHt7LlR5cGV9fSB7CgoJaWYgcXVldWUubGVuZ3RoID09IDAgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtYXhpbXVtIG9mIGFuIGVtcHR5IHF1ZXVlLiIpCgl9CgoJaW5kZXhlcyA6PSBxdWV1ZS5pbmRleGVzKCkKCW0gOj0gaW5kZXhlc1swXQoJZm9yIGxlbihpbmRleGVzKSA+IDEgewoJCWYgOj0gaW5kZXhlc1swXQoJCWZvciBpIDo9IGY7IGkgPCBpbmRleGVzWzFdOyBpKysgewoJCQlpZiBpICE9IG0gewoJCQkJaWYgbGVzcyhxdWV1ZS5tW21dLCBxdWV1ZS5tW2ldKSB7CgkJCQkJbSA9IGkKCQkJCX0KCQkJfQoJCX0KCQlpbmRleGVzID0gaW5kZXhlc1syOl0KCX0KCXJldHVybiBxdWV1ZS5tW21dCn0Ke3stIGlmIC5Db21wYXJhYmxlfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBUaGVzZSBtZXRob2RzIGFyZSBpbmNsdWRlZCB3aGVuIHt7LlR5cGUuTmFtZX19IGlzIGNvbXBhcmFibGUuCgovLyBFcXVhbHMgZGV0ZXJtaW5lcyBpZiB0d28gcXVldWVzIGFyZSBlcXVhbCB0byBlYWNoIG90aGVyLgovLyBJZiB0aGV5IGJvdGggYXJlIHRoZSBzYW1lIHNpemUgYW5kIGhhdmUgdGhlIHNhbWUgaXRlbXMgdGhleSBhcmUgY29uc2lkZXJlZCBlcXVhbC4KLy8gT3JkZXIgb2YgaXRlbXMgaXMgbm90IHJlbGV2ZW50IGZvciBzZXRzIHRvIGJlIGVxdWFsLgovLyBOaWwgcXVldWVzIGFyZSBjb25zaWRlcmVkIHRvIGJlIGVtcHR5LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIEVxdWFscyhvdGhlciAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIGJvb2wgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlpZiBvdGhlciA9PSBuaWwgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCQlyZXR1cm4gb3RoZXIubGVuZ3RoID09IDAKCX0KCglpZiBvdGhlciA9PSBuaWwgewoJCXJldHVybiBxdWV1ZS5sZW5ndGggPT0gMAoJfQoKCWlmIHF1ZXVlLmxlbmd0aCAhPSBvdGhlci5sZW5ndGggewoJCXJldHVybiBmYWxzZQoJfQoKCWZvciBpIDo9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKyB7CgkJcWkgOj0gKHF1ZXVlLnJlYWQgKyBpKSAlIHF1ZXVlLmNhcGFjaXR5CgkJb2kgOj0gKG90aGVyLnJlYWQgKyBpKSAlIHF1ZXVlLmNhcGFjaXR5CgkJaWYgcXVldWUubVtxaV0gIT0gb3RoZXIubVtvaV0gewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CgoJcmV0dXJuIHRydWUKfQp7ey0gZW5kfX0Ke3stIGlmIC5PcmRlcmVkfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBUaGVzZSBtZXRob2RzIGFyZSBpbmNsdWRlZCB3aGVuIHt7LlR5cGUuTmFtZX19IGlzIG9yZGVyZWQuCgovLyBNaW4gcmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBjb250YWluaW5nIHRoZSBtaW5pbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzLgovLyBQYW5pY3MgaWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgTWluKCkge3suVHlwZS5OYW1lfX0gewoKCWlmIHF1ZXVlLmxlbmd0aCA9PSAwIHsKCQlwYW5pYygiQ2Fubm90IGRldGVybWluZSB0aGUgbWluaW11bSBvZiBhbiBlbXB0eSBxdWV1ZS4iKQoJfQoKCXogOj0gcXVldWUubVtxdWV1ZS5yZWFkXQoJbSA6PSB7ey5UeXBlLlN0YXJ9fXoKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJaWYge3suVHlwZS5TdGFyfX12IDwgbSB7CgkJCW0gPSB7ey5UeXBlLlN0YXJ9fXYKCQl9Cgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlpZiB7ey5UeXBlLlN0YXJ9fXYgPCBtIHsKCQkJbSA9IHt7LlR5cGUuU3Rhcn19dgoJCX0KCX0KCXJldHVybiBtCn0KCi8vIE1heCByZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIG1heGltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMuCi8vIFBhbmljcyBpZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBNYXgoKSAocmVzdWx0IHt7LlR5cGUuTmFtZX19KSB7CgoJaWYgcXVldWUubGVuZ3RoID09IDAgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtYXhpbXVtIG9mIGFuIGVtcHR5IHF1ZXVlLiIpCgl9CgoJeiA6PSBxdWV1ZS5tW3F1ZXVlLnJlYWRdCgltIDo9IHt7LlR5cGUuU3Rhcn19egoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWZvciBfLCB2IDo9IHJhbmdlIGZyb250IHsKCQlpZiB7ey5UeXBlLlN0YXJ9fXYgPiBtIHsKCQkJbSA9IHt7LlR5cGUuU3Rhcn19dgoJCX0KCX0KCWZvciBfLCB2IDo9IHJhbmdlIGJhY2sgewoJCWlmIHt7LlR5cGUuU3Rhcn19diA+IG0gewoJCQltID0ge3suVHlwZS5TdGFyfX12CgkJfQoJfQoJcmV0dXJuIG0KfQp7ey0gZW5kfX0Ke3stIGlmIC5OdW1lcmljfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBUaGVzZSBtZXRob2RzIGFyZSBpbmNsdWRlZCB3aGVuIHt7LlR5cGUuTmFtZX19IGlzIG51bWVyaWMuCgovLyBTdW0gcmV0dXJucyB0aGUgc3VtIG9mIGFsbCB0aGUgZWxlbWVudHMgaW4gdGhlIHF1ZXVlLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFN1bSgpIHt7LlR5cGUuTmFtZX19IHsKCglzdW0gOj0ge3suVHlwZS5OYW1lfX0oMCkKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJc3VtID0gc3VtICsge3suVHlwZS5TdGFyfX12Cgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlzdW0gPSBzdW0gKyB7ey5UeXBlLlN0YXJ9fXYKCX0KCXJldHVybiBzdW0KfQp7ey0gZW5kfX0Ke3stIGlmIC5TdHJpbmdlcn19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFN0cmluZ0xpc3QgZ2V0cyBhIGxpc3Qgb2Ygc3RyaW5ncyB0aGF0IGRlcGljdHMgYWxsIHRoZSBlbGVtZW50cy4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBTdHJpbmdMaXN0KCkgW11zdHJpbmcgewp7ey0gaWYgZXEgLlR5cGUuU3RyaW5nICJzdHJpbmcifX0KCXJldHVybiBxdWV1ZS5Ub1NsaWNlKCkKe3stIGVsc2V9fQoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJc3RyaW5ncyA6PSBtYWtlKFtdc3RyaW5nLCBxdWV1ZS5sZW5ndGgpCglpIDo9IDAKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJc3RyaW5nc1tpXSA9IGZtdC5TcHJpbnRmKCIldiIsIHYpCgkJaSsrCgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlzdHJpbmdzW2ldID0gZm10LlNwcmludGYoIiV2IiwgdikKCQlpKysKCX0KCXJldHVybiBzdHJpbmdzCnt7LSBlbmR9fQp9CgovLyBTdHJpbmcgaW1wbGVtZW50cyB0aGUgU3RyaW5nZXIgaW50ZXJmYWNlIHRvIHJlbmRlciB0aGUgcXVldWUgYXMgYSBjb21tYS1zZXBhcmF0ZWQgc3RyaW5nIGVuY2xvc2VkIGluIHNxdWFyZSBicmFja2V0cy4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBTdHJpbmcoKSBzdHJpbmcgewoJcmV0dXJuIHF1ZXVlLk1rU3RyaW5nMygiWyIsICIsICIsICJdIikKfQoKLy8gTWtTdHJpbmcgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcgdXNpbmcgYSBzdXBwbGllZCBzZXBhcmF0b3IuIE5vIGVuY2xvc2luZyBtYXJrcyBhcmUgYWRkZWQuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgTWtTdHJpbmcoc2VwIHN0cmluZykgc3RyaW5nIHsKCXJldHVybiBxdWV1ZS5Na1N0cmluZzMoIiIsIHNlcCwgIiIpCn0KCi8vIE1rU3RyaW5nMyBjb25jYXRlbmF0ZXMgdGhlIHZhbHVlcyBhcyBhIHN0cmluZywgdXNpbmcgdGhlIHByZWZpeCwgc2VwYXJhdG9yIGFuZCBzdWZmaXggc3VwcGxpZWQuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gIiIKCX0KCglyZXR1cm4gcXVldWUubWtTdHJpbmczQnl0ZXMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlcikuU3RyaW5nKCkKfQoKZnVuYyAocXVldWUge3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIG1rU3RyaW5nM0J5dGVzKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSAqYnl0ZXMuQnVmZmVyIHsKCWIgOj0gJmJ5dGVzLkJ1ZmZlcnt9CgliLldyaXRlU3RyaW5nKGJlZm9yZSkKCXNlcCA6PSAiIgoKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJYi5Xcml0ZVN0cmluZyhzZXApCgkJYi5Xcml0ZVN0cmluZyhmbXQuU3ByaW50ZigiJXYiLCB2KSkKCQlzZXAgPSBiZXR3ZWVuCgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQliLldyaXRlU3RyaW5nKHNlcCkKCQliLldyaXRlU3RyaW5nKGZtdC5TcHJpbnRmKCIldiIsIHYpKQoJCXNlcCA9IGJldHdlZW4KCX0KCWIuV3JpdGVTdHJpbmcoYWZ0ZXIpCglyZXR1cm4gYgp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFVubWFyc2hhbEpTT04gaW1wbGVtZW50cyBKU09OIGRlY29kaW5nIGZvciB0aGlzIHF1ZXVlIHR5cGUuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IgewoKCXJldHVybiBqc29uLlVubWFyc2hhbChiLCAmcXVldWUubSkKfQoKLy8gTWFyc2hhbEpTT04gaW1wbGVtZW50cyBKU09OIGVuY29kaW5nIGZvciB0aGlzIHF1ZXVlIHR5cGUuCmZ1bmMgKHF1ZXVlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKSB7CgoJYnVmLCBlcnIgOj0ganNvbi5NYXJzaGFsKHF1ZXVlLm0pCglyZXR1cm4gYnVmLCBlcnIKfQp7ey0gZW5kfX0K\"")
		packr.PackJSONBytes("builtin", "fast/set.tpl", "\"Ly8gQW4gZW5jYXBzdWxhdGVkIG1hcFt7ey5UeXBlfX1dc3RydWN0e30gdXNlZCBhcyBhIHNldC4KLy97e2lmIC5UeXBlLklzUHRyfX0gTm90ZSB0aGF0IHRoZSBhcGkgdXNlcyB7ey5UeXBlfX0gYnV0IHRoZSBzZXQgdXNlcyB7ey5LZXkuTmFtZX19IGtleXMue3tlbmR9fQovLyBOb3QgdGhyZWFkLXNhZmUuCi8vCi8vIEdlbmVyYXRlZCBmcm9tIHt7LlRlbXBsYXRlRmlsZX19IHdpdGggVHlwZT17ey5UeXBlfX0KLy8gb3B0aW9uczogQ29tcGFyYWJsZTphbHdheXMgTnVtZXJpYzp7ey5OdW1lcmljfX0gT3JkZXJlZDp7ey5PcmRlcmVkfX0gU3RyaW5nZXI6e3suU3RyaW5nZXJ9fSBUb0xpc3Q6e3suVG9MaXN0fX0KLy8gYnkgcnVudGVtcGxhdGUge3suQXBwVmVyc2lvbn19Ci8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vam9oYW5icmFuZGhvcnN0L3J1bnRlbXBsYXRlL2Jsb2IvbWFzdGVyL0JVSUxUSU4ubWQKCnBhY2thZ2Uge3suUGFja2FnZX19CgppbXBvcnQgKAp7ey0gaWYgb3IgLlN0cmluZ2VyIC5Hb2JFbmNvZGV9fQoJImJ5dGVzIgp7ey0gZW5kfX0Ke3stIGlmIC5Hb2JFbmNvZGV9fQoJImVuY29kaW5nL2dvYiIKe3stIGVuZH19Cnt7LSBpZiAuU3RyaW5nZXJ9fQoJImVuY29kaW5nL2pzb24iCgkiZm10Igp7ey0gZW5kfX0Ke3stIGlmIC5IYXNJbXBvcnR9fQoJe3suSW1wb3J0fX0Ke3tlbmR9fQopCgovLyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgaXMgdGhlIHByaW1hcnkgdHlwZSB0aGF0IHJlcHJlc2VudHMgYSBzZXQuCnR5cGUge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHN0cnVjdCB7CgltIG1hcFt7ey5UeXBlLk5hbWV9fV1zdHJ1Y3R7fQp9CgovLyBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgY3JlYXRlcyBhbmQgcmV0dXJucyBhIHJlZmVyZW5jZSB0byBhbiBlbXB0eSBzZXQuCmZ1bmMgTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KHZhbHVlcyAuLi57ey5UeXBlfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJc2V0IDo9ICZ7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXR7CgkJbTogbWFrZShtYXBbe3suVHlwZS5OYW1lfX1dc3RydWN0e30pLAoJfQoJZm9yIF8sIGkgOj0gcmFuZ2UgdmFsdWVzIHsKCQlzZXQubVt7ey5UeXBlLlN0YXJ9fWldID0gc3RydWN0e317fQoJfQoJcmV0dXJuIHNldAp9CgovLyBDb252ZXJ0e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IGNvbnN0cnVjdHMgYSBuZXcgc2V0IGNvbnRhaW5pbmcgdGhlIHN1cHBsaWVkIHZhbHVlcywgaWYgYW55LgovLyBUaGUgcmV0dXJuZWQgYm9vbGVhbiB3aWxsIGJlIGZhbHNlIGlmIGFueSBvZiB0aGUgdmFsdWVzIGNvdWxkIG5vdCBiZSBjb252ZXJ0ZWQgY29ycmVjdGx5LgovLyBUaGUgcmV0dXJuZWQgc2V0IHdpbGwgY29udGFpbiBhbGwgdGhlIHZhbHVlcyB0aGF0IHdlcmUgY29ycmVjdGx5IGNvbnZlcnRlZC4KZnVuYyBDb252ZXJ0e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKCp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQsIGJvb2wpIHsKCXNldCA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoKCWZvciBfLCBpIDo9IHJhbmdlIHZhbHVlcyB7CgkJc3dpdGNoIGogOj0gaS4odHlwZSkgewp7ey0gaWYgLk51bWVyaWN9fQoJCWNhc2UgaW50OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKmludDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSBpbnQ4OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKmludDg6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgaW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqaW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgaW50MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqaW50MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgaW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqaW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgdWludDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlICp1aW50OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlIHVpbnQ4OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKnVpbnQ4OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlIHVpbnQxNjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlICp1aW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgdWludDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKnVpbnQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSB1aW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqdWludDY0OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlIGZsb2F0MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqZmxvYXQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSBmbG9hdDY0OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKmZsb2F0NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQp7ey0gZWxzZX19CgkJY2FzZSB7ey5UeXBlLk5hbWV9fToKCQkJc2V0Lm1bal0gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqe3suVHlwZS5OYW1lfX06CgkJCXNldC5tWypqXSA9IHN0cnVjdHt9e30Ke3stIGVuZH19CgkJfQoJfQoKCXJldHVybiBzZXQsIGxlbihzZXQubSkgPT0gbGVuKHZhbHVlcykKfQoKLy8gQnVpbGR7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXRGcm9tQ2hhbiBjb25zdHJ1Y3RzIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBmcm9tIGEgY2hhbm5lbCB0aGF0IHN1cHBsaWVzCi8vIGEgc2VxdWVuY2Ugb2YgdmFsdWVzIHVudGlsIGl0IGlzIGNsb3NlZC4gVGhlIGZ1bmN0aW9uIGRvZXNuJ3QgcmV0dXJuIHVudGlsIHRoZW4uCmZ1bmMgQnVpbGR7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXRGcm9tQ2hhbihzb3VyY2UgPC1jaGFuIHt7LlR5cGV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglzZXQgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KCkKCWZvciB2IDo9IHJhbmdlIHNvdXJjZSB7CgkJc2V0Lm1be3suVHlwZS5TdGFyfX12XSA9IHN0cnVjdHt9e30KCX0KCXJldHVybiBzZXQKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBJc1NlcXVlbmNlIHJldHVybnMgdHJ1ZSBmb3IgbGlzdHMgYW5kIHF1ZXVlcy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIElzU2VxdWVuY2UoKSBib29sIHsKCXJldHVybiBmYWxzZQp9CgovLyBJc1NldCByZXR1cm5zIGZhbHNlIGZvciBsaXN0cyBvciBxdWV1ZXMuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBJc1NldCgpIGJvb2wgewoJcmV0dXJuIHRydWUKfQp7ey0gaWYgLlRvTGlzdH19CgovLyBUb0xpc3QgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgdGhlIHNldCBhcyBhIGxpc3QuIFRoZSByZXR1cm5lZCBsaXN0IGlzIGEgc2hhbGxvdwovLyBjb3B5OyB0aGUgc2V0IGlzIG5vdCBhbHRlcmVkLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgVG9MaXN0KCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJldHVybiAme3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdHsKCQltOiBzZXQuc2xpY2UoKSwKCX0KfQp7ey0gZW5kfX0KCi8vIFRvU2V0IHJldHVybnMgdGhlIHNldDsgdGhpcyBpcyBhbiBpZGVudGl0eSBvcGVyYXRpb24gaW4gdGhpcyBjYXNlLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgVG9TZXQoKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHsKCXJldHVybiBzZXQKfQoKLy8gc2xpY2UgcmV0dXJucyB0aGUgaW50ZXJuYWwgZWxlbWVudHMgb2YgdGhlIGN1cnJlbnQgc2V0LiBUaGlzIGlzIGEgc2VhbSBmb3IgdGVzdGluZyBldGMuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBzbGljZSgpIFtde3suVHlwZX19IHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglzIDo9IG1ha2UoW117ey5UeXBlfX0sIDAsIGxlbihzZXQubSkpCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJcyA9IGFwcGVuZChzLCB7ey5UeXBlLkFtcH19dikKCX0KCXJldHVybiBzCn0KCi8vIFRvU2xpY2UgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgdGhlIGN1cnJlbnQgc2V0IGFzIGEgc2xpY2UuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBUb1NsaWNlKCkgW117ey5UeXBlfX0gewoKCXJldHVybiBzZXQuc2xpY2UoKQp9CgovLyBUb0ludGVyZmFjZVNsaWNlIHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBjdXJyZW50IHNldCBhcyBhIHNsaWNlIG9mIGFyYml0cmFyeSB0eXBlLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgVG9JbnRlcmZhY2VTbGljZSgpIFtdaW50ZXJmYWNle30gewoKCXMgOj0gbWFrZShbXWludGVyZmFjZXt9LCAwLCBsZW4oc2V0Lm0pKQoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCXMgPSBhcHBlbmQocywgdikKCX0KCXJldHVybiBzCn0KCi8vIENsb25lIHJldHVybnMgYSBzaGFsbG93IGNvcHkgb2YgdGhlIHNldC4gSXQgZG9lcyBub3QgY2xvbmUgdGhlIHVuZGVybHlpbmcgZWxlbWVudHMuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBDbG9uZSgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWNsb25lZFNldCA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQljbG9uZWRTZXQuZG9BZGQodikKCX0KCXJldHVybiBjbG9uZWRTZXQKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBJc0VtcHR5IHJldHVybnMgdHJ1ZSBpZiB0aGUgc2V0IGlzIGVtcHR5LgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgSXNFbXB0eSgpIGJvb2wgewoJcmV0dXJuIHNldC5TaXplKCkgPT0gMAp9CgovLyBOb25FbXB0eSByZXR1cm5zIHRydWUgaWYgdGhlIHNldCBpcyBub3QgZW1wdHkuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBOb25FbXB0eSgpIGJvb2wgewoJcmV0dXJuIHNldC5TaXplKCkgPiAwCn0KCi8vIFNpemUgcmV0dXJucyBob3cgbWFueSBpdGVtcyBhcmUgY3VycmVudGx5IGluIHRoZSBzZXQuIFRoaXMgaXMgYSBzeW5vbnltIGZvciBDYXJkaW5hbGl0eS4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFNpemUoKSBpbnQgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIDAKCX0KCglyZXR1cm4gbGVuKHNldC5tKQp9CgovLyBDYXJkaW5hbGl0eSByZXR1cm5zIGhvdyBtYW55IGl0ZW1zIGFyZSBjdXJyZW50bHkgaW4gdGhlIHNldC4gVGhpcyBpcyBhIHN5bm9ueW0gZm9yIFNpemUuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBDYXJkaW5hbGl0eSgpIGludCB7CglyZXR1cm4gc2V0LlNpemUoKQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEFkZCBhZGRzIGl0ZW1zIHRvIHRoZSBjdXJyZW50IHNldC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEFkZChtb3JlIC4uLnt7LlR5cGV9fSkgewoKCWZvciBfLCB2IDo9IHJhbmdlIG1vcmUgewoJCXNldC5kb0FkZCh7ey5UeXBlLlN0YXJ9fXYpCgl9Cn0KCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBkb0FkZChpIHt7LlR5cGUuTmFtZX19KSB7CglzZXQubVtpXSA9IHN0cnVjdHt9e30KfQoKLy8gQ29udGFpbnMgZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gaXRlbSBpcyBhbHJlYWR5IGluIHRoZSBzZXQsIHJldHVybmluZyB0cnVlIGlmIHNvLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgQ29udGFpbnMoaSB7ey5UeXBlfX0pIGJvb2wgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJXywgZm91bmQgOj0gc2V0Lm1be3suVHlwZS5TdGFyfX1pXQoJcmV0dXJuIGZvdW5kCn0KCi8vIENvbnRhaW5zQWxsIGRldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gaXRlbXMgYXJlIGFsbCBpbiB0aGUgc2V0LCByZXR1cm5pbmcgdHJ1ZSBpZiBzby4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIENvbnRhaW5zQWxsKGkgLi4ue3suVHlwZX19KSBib29sIHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBmYWxzZQoJfQoKCWZvciBfLCB2IDo9IHJhbmdlIGkgewoJCWlmICFzZXQuQ29udGFpbnModikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIElzU3Vic2V0IGRldGVybWluZXMgd2hldGhlciBldmVyeSBpdGVtIGluIHRoZSBvdGhlciBzZXQgaXMgaW4gdGhpcyBzZXQsIHJldHVybmluZyB0cnVlIGlmIHNvLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgSXNTdWJzZXQob3RoZXIgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgYm9vbCB7CglpZiBzZXQuSXNFbXB0eSgpIHsKCQlyZXR1cm4gIW90aGVyLklzRW1wdHkoKQoJfQoKCWlmIG90aGVyLklzRW1wdHkoKSB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmICFvdGhlci5Db250YWlucyh7ey5UeXBlLkFtcH19dikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9CgovLyBJc1N1cGVyc2V0IGRldGVybWluZXMgd2hldGhlciBldmVyeSBpdGVtIG9mIHRoaXMgc2V0IGlzIGluIHRoZSBvdGhlciBzZXQsIHJldHVybmluZyB0cnVlIGlmIHNvLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgSXNTdXBlcnNldChvdGhlciAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBib29sIHsKCXJldHVybiBvdGhlci5Jc1N1YnNldChzZXQpCn0KCi8vIFVuaW9uIHJldHVybnMgYSBuZXcgc2V0IHdpdGggYWxsIGl0ZW1zIGluIGJvdGggc2V0cy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFVuaW9uKG90aGVyICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG90aGVyCgl9CgoJaWYgb3RoZXIgPT0gbmlsIHsKCQlyZXR1cm4gc2V0Cgl9CgoJdW5pb25lZFNldCA6PSBzZXQuQ2xvbmUoKQoKCWZvciB2IDo9IHJhbmdlIG90aGVyLm0gewoJCXVuaW9uZWRTZXQuZG9BZGQodikKCX0KCglyZXR1cm4gdW5pb25lZFNldAp9CgovLyBJbnRlcnNlY3QgcmV0dXJucyBhIG5ldyBzZXQgd2l0aCBpdGVtcyB0aGF0IGV4aXN0IG9ubHkgaW4gYm90aCBzZXRzLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgSW50ZXJzZWN0KG90aGVyICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJaWYgc2V0ID09IG5pbCB8fCBvdGhlciA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglpbnRlcnNlY3Rpb24gOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KCkKCgkvLyBsb29wIG92ZXIgc21hbGxlciBzZXQKCWlmIHNldC5TaXplKCkgPCBvdGhlci5TaXplKCkgewoJCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQkJaWYgb3RoZXIuQ29udGFpbnMoe3suVHlwZS5BbXB9fXYpIHsKCQkJCWludGVyc2VjdGlvbi5kb0FkZCh2KQoJCQl9CgkJfQoJfSBlbHNlIHsKCQlmb3IgdiA6PSByYW5nZSBvdGhlci5tIHsKCQkJaWYgc2V0LkNvbnRhaW5zKHt7LlR5cGUuQW1wfX12KSB7CgkJCQlpbnRlcnNlY3Rpb24uZG9BZGQodikKCQkJfQoJCX0KCX0KCglyZXR1cm4gaW50ZXJzZWN0aW9uCn0KCi8vIERpZmZlcmVuY2UgcmV0dXJucyBhIG5ldyBzZXQgd2l0aCBpdGVtcyBpbiB0aGUgY3VycmVudCBzZXQgYnV0IG5vdCBpbiB0aGUgb3RoZXIgc2V0CmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBEaWZmZXJlbmNlKG90aGVyICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWlmIG90aGVyID09IG5pbCB7CgkJcmV0dXJuIHNldAoJfQoKCWRpZmZlcmVuY2VkU2V0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmICFvdGhlci5Db250YWlucyh7ey5UeXBlLkFtcH19dikgewoJCQlkaWZmZXJlbmNlZFNldC5kb0FkZCh2KQoJCX0KCX0KCglyZXR1cm4gZGlmZmVyZW5jZWRTZXQKfQoKLy8gU3ltbWV0cmljRGlmZmVyZW5jZSByZXR1cm5zIGEgbmV3IHNldCB3aXRoIGl0ZW1zIGluIHRoZSBjdXJyZW50IHNldCBvciB0aGUgb3RoZXIgc2V0IGJ1dCBub3QgaW4gYm90aC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFN5bW1ldHJpY0RpZmZlcmVuY2Uob3RoZXIgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglhRGlmZiA6PSBzZXQuRGlmZmVyZW5jZShvdGhlcikKCWJEaWZmIDo9IG90aGVyLkRpZmZlcmVuY2Uoc2V0KQoJcmV0dXJuIGFEaWZmLlVuaW9uKGJEaWZmKQp9CgovLyBDbGVhciB0aGUgZW50aXJlIHNldC4gQXRlcndhcmRzLCBpdCB3aWxsIGJlIGFuIGVtcHR5IHNldC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIENsZWFyKCkgewoJaWYgc2V0ICE9IG5pbCB7CgoJCXNldC5tID0gbWFrZShtYXBbe3suVHlwZS5OYW1lfX1dc3RydWN0e30pCgl9Cn0KCi8vIFJlbW92ZSBhIHNpbmdsZSBpdGVtIGZyb20gdGhlIHNldC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFJlbW92ZShpIHt7LlR5cGV9fSkgewoKCWRlbGV0ZShzZXQubSwge3suVHlwZS5TdGFyfX1pKQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFNlbmQgcmV0dXJucyBhIGNoYW5uZWwgdGhhdCB3aWxsIHNlbmQgYWxsIHRoZSBlbGVtZW50cyBpbiBvcmRlci4KLy8gQSBnb3JvdXRpbmUgaXMgY3JlYXRlZCB0byBzZW5kIHRoZSBlbGVtZW50czsgdGhpcyBvbmx5IHRlcm1pbmF0ZXMgd2hlbiBhbGwgdGhlIGVsZW1lbnRzIGhhdmUgYmVlbiBjb25zdW1lZApmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgU2VuZCgpIDwtY2hhbiB7ey5UeXBlfX0gewoJY2ggOj0gbWFrZShjaGFuIHt7LlR5cGV9fSkKCWdvIGZ1bmMoKSB7CgkJaWYgc2V0ICE9IG5pbCB7CgoJCQlmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJCQljaCA8LSB7ey5UeXBlLkFtcH19dgoJCQl9CgkJfQoJCWNsb3NlKGNoKQoJfSgpCgoJcmV0dXJuIGNoCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gRm9yYWxsIGFwcGxpZXMgYSBwcmVkaWNhdGUgZnVuY3Rpb24gcCB0byBldmVyeSBlbGVtZW50IGluIHRoZSBzZXQuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGZhbHNlLAovLyB0aGUgaXRlcmF0aW9uIHRlcm1pbmF0ZXMgZWFybHkuIFRoZSByZXR1cm5lZCB2YWx1ZSBpcyB0cnVlIGlmIGFsbCBlbGVtZW50cyB3ZXJlIHZpc2l0ZWQsCi8vIG9yIGZhbHNlIGlmIGFuIGVhcmx5IHJldHVybiBvY2N1cnJlZC4KLy8KLy8gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGNhbiBhbHNvIGJlIHVzZWQgc2ltcGx5IGFzIGEgd2F5IHRvIHZpc2l0IGV2ZXJ5IGVsZW1lbnQgdXNpbmcgYSBmdW5jdGlvbgovLyB3aXRoIHNvbWUgc2lkZS1lZmZlY3RzOyBzdWNoIGEgZnVuY3Rpb24gbXVzdCBhbHdheXMgcmV0dXJuIHRydWUuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBGb3JhbGwocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gdHJ1ZQoJfQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlpZiAhcCh7ey5UeXBlLkFtcH19dikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9CgovLyBFeGlzdHMgYXBwbGllcyBhIHByZWRpY2F0ZSBwIHRvIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIHNldC4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSwKLy8gdGhlIGl0ZXJhdGlvbiB0ZXJtaW5hdGVzIGVhcmx5LiBUaGUgcmV0dXJuZWQgdmFsdWUgaXMgdHJ1ZSBpZiBhbiBlYXJseSByZXR1cm4gb2NjdXJyZWQuCi8vIG9yIGZhbHNlIGlmIGFsbCBlbGVtZW50cyB3ZXJlIHZpc2l0ZWQgd2l0aG91dCBmaW5kaW5nIGEgbWF0Y2guCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBFeGlzdHMocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gZmFsc2UKCX0KCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgcCh7ey5UeXBlLkFtcH19dikgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCX0KCXJldHVybiBmYWxzZQp9CgovLyBGb3JlYWNoIGl0ZXJhdGVzIG92ZXIgdGhlIHNldCBhbmQgZXhlY3V0ZXMgdGhlIGZ1bmN0aW9uIGYgYWdhaW5zdCBlYWNoIGVsZW1lbnQuCi8vIFRoZSBmdW5jdGlvbiBjYW4gc2FmZWx5IGFsdGVyIHRoZSB2YWx1ZXMgdmlhIHNpZGUtZWZmZWN0cy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEZvcmVhY2goZiBmdW5jKHt7LlR5cGV9fSkpIHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybgoJfQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlmKHt7LlR5cGUuQW1wfX12KQoJfQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEZpbmQgcmV0dXJucyB0aGUgZmlyc3Qge3suVHlwZS5OYW1lfX0gdGhhdCByZXR1cm5zIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4gSWYgdGhlcmUgYXJlIG1hbnkgbWF0Y2hlcwovLyBvbmUgaXMgYXJidHJhcmlseSBjaG9zZW4uIEZhbHNlIGlzIHJldHVybmVkIGlmIG5vbmUgbWF0Y2guCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBGaW5kKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpICh7ey5UeXBlfX0sIGJvb2wpIHsKCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgcCh7ey5UeXBlLkFtcH19dikgewoJCQlyZXR1cm4ge3suVHlwZS5BbXB9fXYsIHRydWUKCQl9Cgl9Cnt7LSBpZiAuVHlwZS5Jc1B0cn19CgoJcmV0dXJuIG5pbCwgZmFsc2UKe3stIGVsc2V9fQoKCXZhciBlbXB0eSB7ey5UeXBlLk5hbWV9fQoJcmV0dXJuIGVtcHR5LCBmYWxzZQp7ey0gZW5kfX0KfQoKLy8gRmlsdGVyIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHdob3NlIGVsZW1lbnRzIHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCi8vCi8vIFRoZSBvcmlnaW5hbCBzZXQgaXMgbm90IG1vZGlmaWVkCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBGaWx0ZXIocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmIHAoe3suVHlwZS5BbXB9fXYpIHsKCQkJcmVzdWx0LmRvQWRkKHYpCgkJfQoJfQoJcmV0dXJuIHJlc3VsdAp9CgovLyBQYXJ0aXRpb24gcmV0dXJucyB0d28gbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldHMgd2hvc2UgZWxlbWVudHMgcmV0dXJuIHRydWUgb3IgZmFsc2UgZm9yIHRoZSBwcmVkaWNhdGUsIHAuCi8vIFRoZSBmaXJzdCByZXN1bHQgY29uc2lzdHMgb2YgYWxsIGVsZW1lbnRzIHRoYXQgc2F0aXNmeSB0aGUgcHJlZGljYXRlIGFuZCB0aGUgc2Vjb25kIHJlc3VsdCBjb25zaXN0cyBvZgovLyBhbGwgZWxlbWVudHMgdGhhdCBkb24ndC4gVGhlIHJlbGF0aXZlIG9yZGVyIG9mIHRoZSBlbGVtZW50cyBpbiB0aGUgcmVzdWx0cyBpcyB0aGUgc2FtZSBhcyBpbiB0aGUKLy8gb3JpZ2luYWwgbGlzdC4KLy8KLy8gVGhlIG9yaWdpbmFsIHNldCBpcyBub3QgbW9kaWZpZWQKZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFBhcnRpdGlvbihwIGZ1bmMoe3suVHlwZX19KSBib29sKSAoKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCwgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbCwgbmlsCgl9CgoJbWF0Y2hpbmcgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KCkKCW90aGVycyA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlpZiBwKHt7LlR5cGUuQW1wfX12KSB7CgkJCW1hdGNoaW5nLmRvQWRkKHYpCgkJfSBlbHNlIHsKCQkJb3RoZXJzLmRvQWRkKHYpCgkJfQoJfQoJcmV0dXJuIG1hdGNoaW5nLCBvdGhlcnMKfQoKLy8gTWFwIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggYSBmdW5jdGlvbiBmLgovLyBUaGUgb3JpZ2luYWwgc2V0IGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgTWFwKGYgZnVuYyh7ey5UeXBlfX0pIHt7LlR5cGV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWsgOj0gZih7ey5UeXBlLkFtcH19dikKCQlyZXN1bHQubVt7ey5UeXBlLlN0YXJ9fWtdID0gc3RydWN0e317fQoJfQoKCXJldHVybiByZXN1bHQKfQp7ey0gcmFuZ2UgLk1hcFRvfX0KCi8vIE1hcFRve3suVX19IHJldHVybnMgYSBuZXcgW117ey59fSBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIGZ1bmN0aW9uIGYuCi8vIFRoZSByZXN1bHRpbmcgc2xpY2UgaXMgdGhlIHNhbWUgc2l6ZSBhcyB0aGUgc2V0LgovLyBUaGUgc2V0IGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChzZXQgKnt7JC5QcmVmaXguVX19e3skLlR5cGUuVX19U2V0KSBNYXBUb3t7LlV9fShmIGZ1bmMoe3skLlR5cGV9fSkge3sufX0pIFtde3sufX0gewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBtYWtlKFtde3sufX0sIDAsIGxlbihzZXQubSkpCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCXJlc3VsdCA9IGFwcGVuZChyZXN1bHQsIGYoe3skLlR5cGUuQW1wfX12KSkKCX0KCglyZXR1cm4gcmVzdWx0Cn0Ke3stIGVuZH19CgovLyBGbGF0TWFwIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggYSBmdW5jdGlvbiBmIHRoYXQKLy8gcmV0dXJucyB6ZXJvIG9yIG1vcmUgaXRlbXMgaW4gYSBzbGljZS4gVGhlIHJlc3VsdGluZyBzZXQgbWF5IGhhdmUgYSBkaWZmZXJlbnQgc2l6ZSB0byB0aGUgb3JpZ2luYWwgc2V0LgovLyBUaGUgb3JpZ2luYWwgc2V0IGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgRmxhdE1hcChmIGZ1bmMoe3suVHlwZX19KSBbXXt7LlR5cGV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWZvciBfLCB4IDo9IHJhbmdlIGYoe3suVHlwZS5BbXB9fXYpIHsKCQkJcmVzdWx0Lm1be3suVHlwZS5TdGFyfX14XSA9IHN0cnVjdHt9e30KCQl9Cgl9CgoJcmV0dXJuIHJlc3VsdAp9Cnt7LSByYW5nZSAuTWFwVG99fQoKLy8gRmxhdE1hcFRve3suVX19IHJldHVybnMgYSBuZXcgW117ey59fSBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIGZ1bmN0aW9uIGYgdGhhdAovLyByZXR1cm5zIHplcm8gb3IgbW9yZSBpdGVtcyBpbiBhIHNsaWNlLiBUaGUgcmVzdWx0aW5nIHNsaWNlIG1heSBoYXZlIGEgZGlmZmVyZW50IHNpemUgdG8gdGhlIHNldC4KLy8gVGhlIHNldCBpcyBub3QgbW9kaWZpZWQuCi8vCi8vIFRoaXMgaXMgYSBkb21haW4tdG8tcmFuZ2UgbWFwcGluZyBmdW5jdGlvbi4gRm9yIGJlc3Bva2UgdHJhbnNmb3JtYXRpb25zIHRvIG90aGVyIHR5cGVzLCBjb3B5IGFuZCBtb2RpZnkKLy8gdGhpcyBtZXRob2QgYXBwcm9wcmlhdGVseS4KZnVuYyAoc2V0ICp7eyQuUHJlZml4LlV9fXt7JC5UeXBlLlV9fVNldCkgRmxhdE1hcFRve3suVX19KGYgZnVuYyh7eyQuVHlwZX19KSBbXXt7Ln19KSBbXXt7Ln19IHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gbWFrZShbXXt7Ln19LCAwLCBsZW4oc2V0Lm0pKQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlyZXN1bHQgPSBhcHBlbmQocmVzdWx0LCBmKHt7JC5UeXBlLkFtcH19dikuLi4pCgl9CgoJcmV0dXJuIHJlc3VsdAp9Cnt7LSBlbmR9fQoKLy8gQ291bnRCeSBnaXZlcyB0aGUgbnVtYmVyIGVsZW1lbnRzIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB0aGF0IHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBDb3VudEJ5KHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIChyZXN1bHQgaW50KSB7CgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmIHAoe3suVHlwZS5BbXB9fXYpIHsKCQkJcmVzdWx0KysKCQl9Cgl9CglyZXR1cm4KfQp7ey0gaWYgLk9yZGVyZWR9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIFRoZXNlIG1ldGhvZHMgYXJlIGluY2x1ZGVkIHdoZW4ge3suVHlwZS5OYW1lfX0gaXMgb3JkZXJlZC4KCi8vIE1pbiByZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIG1pbmltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMuCi8vIFBhbmljcyBpZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1pbigpIHt7LlR5cGUuTmFtZX19IHsKCgl2YXIgbSB7ey5UeXBlLk5hbWV9fQoJZmlyc3QgOj0gdHJ1ZQoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmIGZpcnN0IHsKCQkJbSA9IHYKCQkJZmlyc3QgPSBmYWxzZQoJCX0gZWxzZSBpZiB2IDwgbSB7CgkJCW0gPSB2CgkJfQoJfQoJcmV0dXJuIG0KfQoKLy8gTWF4IHJldHVybnMgdGhlIGZpcnN0IGVsZW1lbnQgY29udGFpbmluZyB0aGUgbWF4aW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cy4KLy8gUGFuaWNzIGlmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5LgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgTWF4KCkgKHJlc3VsdCB7ey5UeXBlLk5hbWV9fSkgewoKCXZhciBtIHt7LlR5cGUuTmFtZX19CglmaXJzdCA6PSB0cnVlCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgZmlyc3QgewoJCQltID0gdgoJCQlmaXJzdCA9IGZhbHNlCgkJfSBlbHNlIGlmIHYgPiBtIHsKCQkJbSA9IHYKCQl9Cgl9CglyZXR1cm4gbQp9Cnt7LSBlbmR9fQoKLy8gTWluQnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBjb250YWluaW5nIHRoZSBtaW5pbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCi8vIHVzaW5nIGEgcGFzc2VkIGZ1bmMgZGVmaW5pbmcg4oCYbGVzc+KAmS4gSW4gdGhlIGNhc2Ugb2YgbXVsdGlwbGUgaXRlbXMgYmVpbmcgZXF1YWxseSBtaW5pbWFsLCB0aGUgZmlyc3Qgc3VjaAovLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgTWluQnkobGVzcyBmdW5jKHt7LlR5cGV9fSwge3suVHlwZX19KSBib29sKSB7ey5UeXBlfX0gewoJaWYgc2V0LklzRW1wdHkoKSB7CgkJcGFuaWMoIkNhbm5vdCBkZXRlcm1pbmUgdGhlIG1pbmltdW0gb2YgYW4gZW1wdHkgc2V0LiIpCgl9CgoJdmFyIG0ge3suVHlwZS5OYW1lfX0KCWZpcnN0IDo9IHRydWUKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlpZiBmaXJzdCB7CgkJCW0gPSB2CgkJCWZpcnN0ID0gZmFsc2UKCQl9IGVsc2UgaWYgbGVzcyh7ey5UeXBlLkFtcH19diwge3suVHlwZS5BbXB9fW0pIHsKCQkJbSA9IHYKCQl9Cgl9CglyZXR1cm4ge3suVHlwZS5BbXB9fW0KfQoKLy8gTWF4QnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBjb250YWluaW5nIHRoZSBtYXhpbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCi8vIHVzaW5nIGEgcGFzc2VkIGZ1bmMgZGVmaW5pbmcg4oCYbGVzc+KAmS4gSW4gdGhlIGNhc2Ugb2YgbXVsdGlwbGUgaXRlbXMgYmVpbmcgZXF1YWxseSBtYXhpbWFsLCB0aGUgZmlyc3Qgc3VjaAovLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgTWF4QnkobGVzcyBmdW5jKHt7LlR5cGV9fSwge3suVHlwZX19KSBib29sKSB7ey5UeXBlfX0gewoJaWYgc2V0LklzRW1wdHkoKSB7CgkJcGFuaWMoIkNhbm5vdCBkZXRlcm1pbmUgdGhlIG1pbmltdW0gb2YgYW4gZW1wdHkgc2V0LiIpCgl9CgoJdmFyIG0ge3suVHlwZS5OYW1lfX0KCWZpcnN0IDo9IHRydWUKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlpZiBmaXJzdCB7CgkJCW0gPSB2CgkJCWZpcnN0ID0gZmFsc2UKCQl9IGVsc2UgaWYgbGVzcyh7ey5UeXBlLkFtcH19bSwge3suVHlwZS5BbXB9fXYpIHsKCQkJbSA9IHYKCQl9Cgl9CglyZXR1cm4ge3suVHlwZS5BbXB9fW0KfQp7ey0gaWYgLk51bWVyaWN9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIFRoZXNlIG1ldGhvZHMgYXJlIGluY2x1ZGVkIHdoZW4ge3suVHlwZS5OYW1lfX0gaXMgbnVtZXJpYy4KCi8vIFN1bSByZXR1cm5zIHRoZSBzdW0gb2YgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgc2V0LgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgU3VtKCkge3suVHlwZS5OYW1lfX0gewoKCXN1bSA6PSB7ey5UeXBlLk5hbWV9fSgwKQoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCXN1bSA9IHN1bSArIHYKCX0KCXJldHVybiBzdW0KfQp7ey0gZW5kfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gRXF1YWxzIGRldGVybWluZXMgd2hldGhlciB0d28gc2V0cyBhcmUgZXF1YWwgdG8gZWFjaCBvdGhlciwgcmV0dXJuaW5nIHRydWUgaWYgc28uCi8vIElmIHRoZXkgYm90aCBhcmUgdGhlIHNhbWUgc2l6ZSBhbmQgaGF2ZSB0aGUgc2FtZSBpdGVtcyB0aGV5IGFyZSBjb25zaWRlcmVkIGVxdWFsLgovLyBPcmRlciBvZiBpdGVtcyBpcyBub3QgcmVsZXZlbnQgZm9yIHNldHMgdG8gYmUgZXF1YWwuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBFcXVhbHMob3RoZXIgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgYm9vbCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gb3RoZXIgPT0gbmlsIHx8IG90aGVyLklzRW1wdHkoKQoJfQoKCWlmIG90aGVyID09IG5pbCB7CgkJcmV0dXJuIHNldC5Jc0VtcHR5KCkKCX0KCglpZiBzZXQuU2l6ZSgpICE9IG90aGVyLlNpemUoKSB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmICFvdGhlci5Db250YWlucyh7ey5UeXBlLkFtcH19dikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CgoJcmV0dXJuIHRydWUKfQp7ey0gaWYgLlN0cmluZ2VyfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gU3RyaW5nU2V0IGdldHMgYSBsaXN0IG9mIHN0cmluZ3MgdGhhdCBkZXBpY3RzIGFsbCB0aGUgZWxlbWVudHMuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBTdHJpbmdMaXN0KCkgW11zdHJpbmcgewoKCXN0cmluZ3MgOj0gbWFrZShbXXN0cmluZywgbGVuKHNldC5tKSkKCWkgOj0gMAoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCXN0cmluZ3NbaV0gPSBmbXQuU3ByaW50ZigiJXYiLCB2KQoJCWkrKwoJfQoJcmV0dXJuIHN0cmluZ3MKfQoKLy8gU3RyaW5nIGltcGxlbWVudHMgdGhlIFN0cmluZ2VyIGludGVyZmFjZSB0byByZW5kZXIgdGhlIHNldCBhcyBhIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmcgZW5jbG9zZWQgaW4gc3F1YXJlIGJyYWNrZXRzLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgU3RyaW5nKCkgc3RyaW5nIHsKCXJldHVybiBzZXQuTWtTdHJpbmczKCJbIiwgIiwgIiwgIl0iKQp9CgovLyBNa1N0cmluZyBjb25jYXRlbmF0ZXMgdGhlIHZhbHVlcyBhcyBhIHN0cmluZyB1c2luZyBhIHN1cHBsaWVkIHNlcGFyYXRvci4gTm8gZW5jbG9zaW5nIG1hcmtzIGFyZSBhZGRlZC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZyB7CglyZXR1cm4gc2V0Lk1rU3RyaW5nMygiIiwgc2VwLCAiIikKfQoKLy8gTWtTdHJpbmczIGNvbmNhdGVuYXRlcyB0aGUgdmFsdWVzIGFzIGEgc3RyaW5nLCB1c2luZyB0aGUgcHJlZml4LCBzZXBhcmF0b3IgYW5kIHN1ZmZpeCBzdXBwbGllZC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nIHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiAiIgoJfQoJcmV0dXJuIHNldC5ta1N0cmluZzNCeXRlcyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyKS5TdHJpbmcoKQp9CgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgbWtTdHJpbmczQnl0ZXMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpICpieXRlcy5CdWZmZXIgewoJYiA6PSAmYnl0ZXMuQnVmZmVye30KCWIuV3JpdGVTdHJpbmcoYmVmb3JlKQoJc2VwIDo9ICIiCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWIuV3JpdGVTdHJpbmcoc2VwKQoJCWIuV3JpdGVTdHJpbmcoZm10LlNwcmludGYoIiV2IiwgdikpCgkJc2VwID0gYmV0d2VlbgoJfQoJYi5Xcml0ZVN0cmluZyhhZnRlcikKCXJldHVybiBiCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gVW5tYXJzaGFsSlNPTiBpbXBsZW1lbnRzIEpTT04gZGVjb2RpbmcgZm9yIHRoaXMgc2V0IHR5cGUuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBVbm1hcnNoYWxKU09OKGIgW11ieXRlKSBlcnJvciB7CgoJdmFsdWVzIDo9IG1ha2UoW117ey5UeXBlfX0sIDApCgllcnIgOj0ganNvbi5Vbm1hcnNoYWwoYiwgJnZhbHVlcykKCWlmIGVyciAhPSBuaWwgewoJCXJldHVybiBlcnIKCX0KCglzMiA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQodmFsdWVzLi4uKQoJKnNldCA9ICpzMgoJcmV0dXJuIG5pbAp9CgovLyBNYXJzaGFsSlNPTiBpbXBsZW1lbnRzIEpTT04gZW5jb2RpbmcgZm9yIHRoaXMgc2V0IHR5cGUuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKSB7CgoJYnVmLCBlcnIgOj0ganNvbi5NYXJzaGFsKHNldC5Ub1NsaWNlKCkpCglyZXR1cm4gYnVmLCBlcnIKfQoKLy8gU3RyaW5nTWFwIHJlbmRlcnMgdGhlIHNldCBhcyBhIG1hcCBvZiBzdHJpbmdzLiBUaGUgdmFsdWUgb2YgZWFjaCBpdGVtIGluIHRoZSBzZXQgYmVjb21lcyBzdHJpbmdpZmllZCBhcyBhIGtleSBpbiB0aGUKLy8gcmVzdWx0aW5nIG1hcC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFN0cmluZ01hcCgpIG1hcFtzdHJpbmddYm9vbCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJc3RyaW5ncyA6PSBtYWtlKG1hcFtzdHJpbmddYm9vbCkKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlzdHJpbmdzW2ZtdC5TcHJpbnRmKCIldiIsIHYpXSA9IHRydWUKCX0KCXJldHVybiBzdHJpbmdzCn0Ke3stIGVuZH19Cnt7LSBpZiAuR29iRW5jb2RlfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gR29iRGVjb2RlIGltcGxlbWVudHMgJ2dvYicgZGVjb2RpbmcgZm9yIHRoaXMgc2V0IHR5cGUuCi8vIFlvdSBtdXN0IHJlZ2lzdGVyIHt7LlR5cGV9fSB3aXRoIHRoZSAnZ29iJyBwYWNrYWdlIGJlZm9yZSB0aGlzIG1ldGhvZCBpcyB1c2VkLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgR29iRGVjb2RlKGIgW11ieXRlKSBlcnJvciB7CgoJYnVmIDo9IGJ5dGVzLk5ld0J1ZmZlcihiKQoJcmV0dXJuIGdvYi5OZXdEZWNvZGVyKGJ1ZikuRGVjb2RlKCZzZXQubSkKfQoKLy8gR29iRW5jb2RlIGltcGxlbWVudHMgJ2dvYicgZW5jb2RpbmcgZm9yIHRoaXMgbGlzdCB0eXBlLgovLyBZb3UgbXVzdCByZWdpc3RlciB7ey5UeXBlfX0gd2l0aCB0aGUgJ2dvYicgcGFja2FnZSBiZWZvcmUgdGhpcyBtZXRob2QgaXMgdXNlZC4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgR29iRW5jb2RlKCkgKFtdYnl0ZSwgZXJyb3IpIHsKCglidWYgOj0gJmJ5dGVzLkJ1ZmZlcnt9CgllcnIgOj0gZ29iLk5ld0VuY29kZXIoYnVmKS5FbmNvZGUoc2V0Lm0pCglyZXR1cm4gYnVmLkJ5dGVzKCksIGVycgp9Cnt7LSBlbmR9fQo=\"")
		packr.PackJSONBytes("builtin", "immutable/collection.tpl", "\"Ly8gR2VuZXJhdGVkIGZyb20ge3suVGVtcGxhdGVGaWxlfX0gd2l0aCBUeXBlPXt7LlR5cGUuTmFtZX19Ci8vIG9wdGlvbnM6IENvbXBhcmFibGU6e3suQ29tcGFyYWJsZX19IE51bWVyaWM6e3suTnVtZXJpY319IE9yZGVyZWQ6e3suT3JkZXJlZH19IFN0cmluZ2VyOnt7LlN0cmluZ2VyfX0gTXV0YWJsZTpkaXNhYmxlZAovLyBieSBydW50ZW1wbGF0ZSB7ey5BcHBWZXJzaW9ufX0KLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qb2hhbmJyYW5kaG9yc3QvcnVudGVtcGxhdGUvYmxvYi9tYXN0ZXIvQlVJTFRJTi5tZAoKcGFja2FnZSB7ey5QYWNrYWdlfX0KCnt7aWYgLkhhc0ltcG9ydH19CmltcG9ydCAoCgl7ey5JbXBvcnR9fQopCgp7e2VuZCAtfX0KLy8ge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2l6ZXIgZGVmaW5lcyBhbiBpbnRlcmZhY2UgZm9yIHNpemluZyBtZXRob2RzIG9uIHt7LlR5cGUuTmFtZX19IGNvbGxlY3Rpb25zLgp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNpemVyIGludGVyZmFjZSB7CgkvLyBJc0VtcHR5IHRlc3RzIHdoZXRoZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiBpcyBlbXB0eS4KCUlzRW1wdHkoKSBib29sCgoJLy8gTm9uRW1wdHkgdGVzdHMgd2hldGhlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Db2xsZWN0aW9uIGlzIGVtcHR5LgoJTm9uRW1wdHkoKSBib29sCgoJLy8gU2l6ZSByZXR1cm5zIHRoZSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIGxpc3QgLSBhbiBhbGlhcyBvZiBMZW4oKS4KCVNpemUoKSBpbnQKfQp7ey0gaWYgLlN0cmluZ2VyfX0KCi8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1rU3RyaW5nZXIgZGVmaW5lcyBhbiBpbnRlcmZhY2UgZm9yIHN0cmluZ2VyIG1ldGhvZHMgb24ge3suVHlwZS5OYW1lfX0gY29sbGVjdGlvbnMuCnR5cGUge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TWtTdHJpbmdlciBpbnRlcmZhY2UgewoJLy8gU3RyaW5nIGltcGxlbWVudHMgdGhlIFN0cmluZ2VyIGludGVyZmFjZSB0byByZW5kZXIgdGhlIGxpc3QgYXMgYSBjb21tYS1zZXBhcmF0ZWQgc3RyaW5nIGVuY2xvc2VkCgkvLyBpbiBzcXVhcmUgYnJhY2tldHMuCglTdHJpbmcoKSBzdHJpbmcKCgkvLyBNa1N0cmluZyBjb25jYXRlbmF0ZXMgdGhlIHZhbHVlcyBhcyBhIHN0cmluZyB1c2luZyBhIHN1cHBsaWVkIHNlcGFyYXRvci4gTm8gZW5jbG9zaW5nIG1hcmtzIGFyZSBhZGRlZC4KCU1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZwoKCS8vIE1rU3RyaW5nMyBjb25jYXRlbmF0ZXMgdGhlIHZhbHVlcyBhcyBhIHN0cmluZywgdXNpbmcgdGhlIHByZWZpeCwgc2VwYXJhdG9yIGFuZCBzdWZmaXggc3VwcGxpZWQuCglNa1N0cmluZzMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpIHN0cmluZwoKCS8vIGltcGxlbWVudHMganNvbi5NYXJzaGFsZXIgaW50ZXJmYWNlIHsKCU1hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpCgoJLy8gU3RyaW5nTGlzdCBnZXRzIGEgbGlzdCBvZiBzdHJpbmdzIHRoYXQgZGVwaWN0cyBhbGwgdGhlIGVsZW1lbnRzLgoJU3RyaW5nTGlzdCgpIFtdc3RyaW5nCn0Ke3stIGVuZH19CgovLyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Db2xsZWN0aW9uIGRlZmluZXMgYW4gaW50ZXJmYWNlIGZvciBjb21tb24gY29sbGVjdGlvbiBtZXRob2RzIG9uIHt7LlR5cGUuTmFtZX19Lgp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUNvbGxlY3Rpb24gaW50ZXJmYWNlIHsKCXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNpemVyCnt7LSBpZiAuU3RyaW5nZXJ9fQoJe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TWtTdHJpbmdlcgp7ey0gZW5kfX0KCgkvLyBJc1NlcXVlbmNlIHJldHVybnMgdHJ1ZSBmb3IgbGlzdHMgYW5kIHF1ZXVlcy4KCUlzU2VxdWVuY2UoKSBib29sCgoJLy8gSXNTZXQgcmV0dXJucyBmYWxzZSBmb3IgbGlzdHMgYW5kIHF1ZXVlcy4KCUlzU2V0KCkgYm9vbAp7ey0gaWYgLlRvTGlzdH19CgoJLy8gVG9MaXN0IHJldHVybnMgYSBzaGFsbG93IGNvcHkgYXMgYSBsaXN0LgoJVG9MaXN0KCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QKe3stIGVuZH19Cnt7LSBpZiAuVG9TZXR9fQoKCS8vIFRvU2V0IHJldHVybnMgYSBzaGFsbG93IGNvcHkgYXMgYSBzZXQuCglUb1NldCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQKe3stIGVuZH19CgoJLy8gVG9TbGljZSByZXR1cm5zIGEgc2hhbGxvdyBjb3B5IGFzIGEgcGxhaW4gc2xpY2UuCglUb1NsaWNlKCkgW117ey5UeXBlLk5hbWV9fQoKCS8vIFRvSW50ZXJmYWNlU2xpY2UgcmV0dXJucyBhIHNoYWxsb3cgY29weSBhcyBhIHNsaWNlIG9mIGFyYml0cmFyeSB0eXBlLgoJVG9JbnRlcmZhY2VTbGljZSgpIFtdaW50ZXJmYWNle30KCgkvLyBFeGlzdHMgdmVyaWZpZXMgdGhhdCBvbmUgb3IgbW9yZSBlbGVtZW50cyBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Db2xsZWN0aW9uIHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCglFeGlzdHMocCBmdW5jKHt7LlR5cGUuTmFtZX19KSBib29sKSBib29sCgoJLy8gRm9yYWxsIHZlcmlmaWVzIHRoYXQgYWxsIGVsZW1lbnRzIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUNvbGxlY3Rpb24gcmV0dXJuIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4KCUZvcmFsbChwIGZ1bmMoe3suVHlwZS5OYW1lfX0pIGJvb2wpIGJvb2wKCgkvLyBGb3JlYWNoIGl0ZXJhdGVzIG92ZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiBhbmQgZXhlY3V0ZXMgdGhlIGZ1bmN0aW9uIGYgYWdhaW5zdCBlYWNoIGVsZW1lbnQuCglGb3JlYWNoKGYgZnVuYyh7ey5UeXBlLk5hbWV9fSkpCgoJLy8gRmluZCByZXR1cm5zIHRoZSBmaXJzdCB7ey5UeXBlLk5hbWV9fSB0aGF0IHJldHVybnMgdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgoJLy8gRmFsc2UgaXMgcmV0dXJuZWQgaWYgbm9uZSBtYXRjaC4KCUZpbmQocCBmdW5jKHt7LlR5cGUuTmFtZX19KSBib29sKSAoe3suVHlwZS5OYW1lfX0sIGJvb2wpCgoJLy8gU2VuZCByZXR1cm5zIGEgY2hhbm5lbCB0aGF0IHdpbGwgc2VuZCBhbGwgdGhlIGVsZW1lbnRzIGluIG9yZGVyLiBDYW4gYmUgdXNlZCB3aXRoIHRoZSBwbHVtYmluZyBjb2RlLCBmb3IgZXhhbXBsZS4KCS8vIEEgZ29yb3V0aW5lIGlzIGNyZWF0ZWQgdG8gc2VuZCB0aGUgZWxlbWVudHM7IHRoaXMgb25seSB0ZXJtaW5hdGVzIHdoZW4gYWxsIHRoZSBlbGVtZW50cyBoYXZlIGJlZW4gY29uc3VtZWQKCVNlbmQoKSA8LWNoYW4ge3suVHlwZS5OYW1lfX0KCgkvLyBDb3VudEJ5IGdpdmVzIHRoZSBudW1iZXIgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiB0aGF0IHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCglDb3VudEJ5KHAgZnVuYyh7ey5UeXBlLk5hbWV9fSkgYm9vbCkgaW50Cnt7LSBpZiAuQ29tcGFyYWJsZX19CgoJLy8gQ29udGFpbnMgZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gaXRlbSBpcyBhbHJlYWR5IGluIHRoZSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgdHJ1ZSBpZiBzby4KCUNvbnRhaW5zKHYge3suVHlwZS5OYW1lfX0pIGJvb2wKCgkvLyBDb250YWluc0FsbCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGdpdmVuIGl0ZW1zIGFyZSBhbGwgaW4gdGhlIGNvbGxlY3Rpb24sIHJldHVybmluZyB0cnVlIGlmIHNvLgoJQ29udGFpbnNBbGwodiAuLi57ey5UeXBlLk5hbWV9fSkgYm9vbAp7ey0gZW5kfX0Ke3stIGlmIC5PcmRlcmVkfX0KCgkvLyBNaW4gcmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZSBvZiBhbGwgdGhlIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgoJTWluKCkge3suVHlwZS5OYW1lfX0KCgkvLyBNYXggcmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZSBvZiBhbGwgdGhlIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgoJTWF4KCkge3suVHlwZS5OYW1lfX0Ke3stIGVuZH19CgoJLy8gTWluQnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUNvbGxlY3Rpb24gY29udGFpbmluZyB0aGUgbWluaW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cwoJLy8gdXNpbmcgYSBwYXNzZWQgZnVuYyBkZWZpbmluZyDigJhsZXNz4oCZLiBJbiB0aGUgY2FzZSBvZiBtdWx0aXBsZSBpdGVtcyBiZWluZyBlcXVhbGx5IG1pbmltYWwsIHRoZSBmaXJzdCBzdWNoCgkvLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgoJTWluQnkobGVzcyBmdW5jKHt7LlR5cGUuTmFtZX19LCB7ey5UeXBlLk5hbWV9fSkgYm9vbCkge3suVHlwZS5OYW1lfX0KCgkvLyBNYXhCeSByZXR1cm5zIGFuIGVsZW1lbnQgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiBjb250YWluaW5nIHRoZSBtYXhpbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCgkvLyB1c2luZyBhIHBhc3NlZCBmdW5jIGRlZmluaW5nIOKAmGxlc3PigJkuIEluIHRoZSBjYXNlIG9mIG11bHRpcGxlIGl0ZW1zIGJlaW5nIGVxdWFsbHkgbWF4aW1hbCwgdGhlIGZpcnN0IHN1Y2gKCS8vIGVsZW1lbnQgaXMgcmV0dXJuZWQuIFBhbmljcyBpZiB0aGVyZSBhcmUgbm8gZWxlbWVudHMuCglNYXhCeShsZXNzIGZ1bmMoe3suVHlwZS5OYW1lfX0sIHt7LlR5cGUuTmFtZX19KSBib29sKSB7ey5UeXBlLk5hbWV9fQp7ey0gaWYgLk51bWVyaWN9fQoKCS8vIFN1bSByZXR1cm5zIHRoZSBzdW0gb2YgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgY29sbGVjdGlvbi4KCVN1bSgpIHt7LlR5cGUuTmFtZX19Cnt7LSBlbmR9fQp9Cg==\"")
		packr.PackJSONBytes("builtin", "immutable/list.tpl", "\"Ly8gQW4gZW5jYXBzdWxhdGVkIGltbXV0YWJsZSBbXXt7LlR5cGUuTmFtZX19LgovLyBUaHJlYWQtc2FmZS4KLy97e2lmIC5UeXBlLklzUHRyfX0KLy8gV2FybmluZzogVEhJUyBDT0xMRUNUSU9OIElTIE5PVCBERVNJR05FRCBUTyBCRSBVU0VEIFdJVEggUE9JTlRFUiBUWVBFUy4KLy97e2VuZH19Ci8vCi8vIEdlbmVyYXRlZCBmcm9tIHt7LlRlbXBsYXRlRmlsZX19IHdpdGggVHlwZT17ey5UeXBlLk5hbWV9fQovLyBvcHRpb25zOiBDb21wYXJhYmxlOnt7LkNvbXBhcmFibGV9fSBOdW1lcmljOnt7Lk51bWVyaWN9fSBPcmRlcmVkOnt7Lk9yZGVyZWR9fSBTdHJpbmdlcjp7ey5TdHJpbmdlcn19IEdvYkVuY29kZTp7ey5Hb2JFbmNvZGV9fSBNdXRhYmxlOmRpc2FibGVkCi8vIGJ5IHJ1bnRlbXBsYXRlIHt7LkFwcFZlcnNpb259fQovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pvaGFuYnJhbmRob3JzdC9ydW50ZW1wbGF0ZS9ibG9iL21hc3Rlci9CVUlMVElOLm1kCgpwYWNrYWdlIHt7LlBhY2thZ2V9fQoKaW1wb3J0ICgKe3stIGlmIG9yIC5TdHJpbmdlciAuR29iRW5jb2RlfX0KCSJieXRlcyIKe3stIGVuZH19Cnt7LSBpZiAuR29iRW5jb2RlfX0KCSJlbmNvZGluZy9nb2IiCnt7LSBlbmR9fQp7ey0gaWYgLlN0cmluZ2VyfX0KCSJlbmNvZGluZy9qc29uIgoJImZtdCIKe3stIGVuZH19CgkibWF0aC9yYW5kIgoJInNvcnQiCnt7LSBpZiAuSGFzSW1wb3J0fX0KCXt7LkltcG9ydH19Cnt7LSBlbmR9fQopCgovLyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGNvbnRhaW5zIGEgc2xpY2Ugb2YgdHlwZSB7ey5UeXBlLk5hbWV9fS4gSXQgaXMgZGVzaWduZWQKLy8gdG8gYmUgaW1tdXRhYmxlIC0gaWRlYWwgZm9yIHJhY2UtZnJlZSByZWZlcmVuY2UgbGlzdHMgZXRjLgovLyBJdCBlbmNhcHN1bGF0ZXMgdGhlIHNsaWNlIGFuZCBwcm92aWRlcyBtZXRob2RzIHRvIGFjY2VzcyBpdC4KLy8gSW1wb3J0YW50bHksICpub25lIG9mIGl0cyBtZXRob2RzIGV2ZXIgbXV0YXRlIGEgbGlzdCo7IHRoZXkgbWVyZWx5IHJldHVybiBuZXcgbGlzdHMgd2hlcmUgcmVxdWlyZWQuCi8vCi8vIExpc3QgdmFsdWVzIGZvbGxvdyBhIHNpbWlsYXIgcGF0dGVybiB0byBTY2FsYSBMaXN0cyBhbmQgTGluZWFyU2VxcyBpbiBwYXJ0aWN1bGFyLgovLyBGb3IgY29tcGFyaXNvbiB3aXRoIFNjYWxhLCBzZWUgZS5nLiBodHRwOi8vd3d3LnNjYWxhLWxhbmcub3JnL2FwaS8yLjExLjcvI3NjYWxhLmNvbGxlY3Rpb24uTGluZWFyU2VxCnR5cGUge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBzdHJ1Y3QgewoJbSBbXXt7LlR5cGUuTmFtZX19Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZnVuYyBuZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KGxlbmd0aCwgY2FwYWNpdHkgaW50KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXR1cm4gJnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJCW06IG1ha2UoW117ey5UeXBlLk5hbWV9fSwgbGVuZ3RoLCBjYXBhY2l0eSksCgl9Cn0KCi8vIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29uc3RydWN0cyBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIHN1cHBsaWVkIHZhbHVlcywgaWYgYW55LgpmdW5jIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QodmFsdWVzIC4uLnt7LlR5cGUuTmFtZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglsaXN0IDo9IG5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QobGVuKHZhbHVlcyksIGxlbih2YWx1ZXMpKQoJY29weShsaXN0Lm0sIHZhbHVlcykKCXJldHVybiBsaXN0Cn0KCi8vIENvbnZlcnR7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGNvbnN0cnVjdHMgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBzdXBwbGllZCB2YWx1ZXMsIGlmIGFueS4KLy8gVGhlIHJldHVybmVkIGJvb2xlYW4gd2lsbCBiZSBmYWxzZSBpZiBhbnkgb2YgdGhlIHZhbHVlcyBjb3VsZCBub3QgYmUgY29udmVydGVkIGNvcnJlY3RseS4KLy8gVGhlIHJldHVybmVkIGxpc3Qgd2lsbCBjb250YWluIGFsbCB0aGUgdmFsdWVzIHRoYXQgd2VyZSBjb3JyZWN0bHkgY29udmVydGVkLgpmdW5jIENvbnZlcnR7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKCp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0LCBib29sKSB7CglsaXN0IDo9IG5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKHZhbHVlcykpCgoJZm9yIF8sIGkgOj0gcmFuZ2UgdmFsdWVzIHsKCQlzd2l0Y2ggaiA6PSBpLih0eXBlKSB7Cnt7LSBpZiAuTnVtZXJpY319CgkJY2FzZSBpbnQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqaW50OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlIGludDg6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqaW50ODoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSBpbnQxNjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlICppbnQxNjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSBpbnQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlICppbnQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSBpbnQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlICppbnQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSB1aW50OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgKnVpbnQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgdWludDg6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqdWludDg6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgdWludDE2OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgKnVpbnQxNjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSB1aW50MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqdWludDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlIHVpbnQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlICp1aW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgZmxvYXQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlICpmbG9hdDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlIGZsb2F0NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqZmxvYXQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCnt7LSBlbHNlfX0KCQljYXNlIHt7LlR5cGUuTmFtZX19OgoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCBqKQoJCWNhc2UgKnt7LlR5cGUuTmFtZX19OgoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCAqaikKe3stIGVuZH19CgkJfQoJfQoKCXJldHVybiBsaXN0LCBsZW4obGlzdC5tKSA9PSBsZW4odmFsdWVzKQp9CgovLyBCdWlsZHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3RGcm9tQ2hhbiBjb25zdHJ1Y3RzIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgZnJvbSBhIGNoYW5uZWwgdGhhdCBzdXBwbGllcwovLyBhIHNlcXVlbmNlIG9mIHZhbHVlcyB1bnRpbCBpdCBpcyBjbG9zZWQuIFRoZSBmdW5jdGlvbiBkb2Vzbid0IHJldHVybiB1bnRpbCB0aGVuLgpmdW5jIEJ1aWxke3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdEZyb21DaGFuKHNvdXJjZSA8LWNoYW4ge3suVHlwZS5OYW1lfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWxpc3QgOj0gbmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCAwKQoJZm9yIHYgOj0gcmFuZ2Ugc291cmNlIHsKCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB2KQoJfQoJcmV0dXJuIGxpc3QKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBJc1NlcXVlbmNlIHJldHVybnMgdHJ1ZSBmb3IgbGlzdHMgYW5kIHF1ZXVlcy4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgSXNTZXF1ZW5jZSgpIGJvb2wgewoJcmV0dXJuIHRydWUKfQoKLy8gSXNTZXQgcmV0dXJucyBmYWxzZSBmb3IgbGlzdHMgb3IgcXVldWVzLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBJc1NldCgpIGJvb2wgewoJcmV0dXJuIGZhbHNlCn0KCi8vIHNsaWNlIHJldHVybnMgdGhlIGludGVybmFsIGVsZW1lbnRzIG9mIHRoZSBjdXJyZW50IGxpc3QuIFRoaXMgaXMgYSBzZWFtIGZvciB0ZXN0aW5nIGV0Yy4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgc2xpY2UoKSBbXXt7LlR5cGUuTmFtZX19IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CglyZXR1cm4gbGlzdC5tCn0KCi8vIFRvTGlzdCByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgbGlzdCBhcyBhIGxpc3QsIHdoaWNoIGlzIGFuIGlkZW50aXR5IG9wZXJhdGlvbiBpbiB0aGlzIGNhc2UuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFRvTGlzdCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCXJldHVybiBsaXN0Cn0Ke3stIGlmIC5Ub1NldH19CgovLyBUb1NldCByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgbGlzdCBhcyBhIHNldC4gVGhlIHJldHVybmVkIHNldCBpcyBhIHNoYWxsb3cKLy8gY29weTsgdGhlIGxpc3QgaXMgbm90IGFsdGVyZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFRvU2V0KCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJldHVybiBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQobGlzdC5tLi4uKQp9Cnt7LSBlbmR9fQoKLy8gVG9TbGljZSByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgY3VycmVudCBsaXN0IGFzIGEgc2xpY2UuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFRvU2xpY2UoKSBbXXt7LlR5cGUuTmFtZX19IHsKCglzIDo9IG1ha2UoW117ey5UeXBlLk5hbWV9fSwgbGVuKGxpc3QubSksIGxlbihsaXN0Lm0pKQoJY29weShzLCBsaXN0Lm0pCglyZXR1cm4gcwp9CgovLyBUb0ludGVyZmFjZVNsaWNlIHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBjdXJyZW50IGxpc3QgYXMgYSBzbGljZSBvZiBhcmJpdHJhcnkgdHlwZS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgVG9JbnRlcmZhY2VTbGljZSgpIFtdaW50ZXJmYWNle30gewoKCXMgOj0gbWFrZShbXWludGVyZmFjZXt9LCAwLCBsZW4obGlzdC5tKSkKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJcyA9IGFwcGVuZChzLCB2KQoJfQoJcmV0dXJuIHMKfQoKLy8gQ2xvbmUgcmV0dXJucyB0aGUgc2FtZSBsaXN0LCB3aGljaCBpcyBpbW11dGFibGUuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIENsb25lKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJcmV0dXJuIGxpc3QKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBHZXQgZ2V0cyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgaW4gdGhlIGxpc3QuCi8vIFBhbmljcyBpZiB0aGUgaW5kZXggaXMgb3V0IG9mIHJhbmdlIG9yIHRoZSBsaXN0IGlzIG5pbC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgR2V0KGkgaW50KSB7ey5UeXBlLk5hbWV9fSB7CglyZXR1cm4gbGlzdC5tW2ldCn0KCi8vIEhlYWQgZ2V0cyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgbGlzdC4gSGVhZCBwbHVzIFRhaWwgaW5jbHVkZSB0aGUgd2hvbGUgbGlzdC4gSGVhZCBpcyB0aGUgb3Bwb3NpdGUgb2YgTGFzdC4KLy8gUGFuaWNzIGlmIGxpc3QgaXMgZW1wdHkgb3IgbmlsLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBIZWFkKCkge3suVHlwZS5OYW1lfX0gewoJcmV0dXJuIGxpc3QubVswXQp9CgovLyBIZWFkT3B0aW9uIGdldHMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGxpc3QsIGlmIHBvc3NpYmxlLgovLyBPdGhlcndpc2UgcmV0dXJucyB7e2lmIC5UeXBlSXNQdHJ9fW5pbHt7ZWxzZX19dGhlIHplcm8gdmFsdWV7e2VuZH19LgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBIZWFkT3B0aW9uKCkge3suVHlwZS5OYW1lfX0gewoJaWYgbGlzdCA9PSBuaWwgfHwgbGVuKGxpc3QubSkgPT0gMCB7CgkJdmFyIHYge3suVHlwZS5OYW1lfX0KCQlyZXR1cm4gdgoJfQoJcmV0dXJuIGxpc3QubVswXQp9CgovLyBMYXN0IGdldHMgdGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgbGlzdC4gSW5pdCBwbHVzIExhc3QgaW5jbHVkZSB0aGUgd2hvbGUgbGlzdC4gTGFzdCBpcyB0aGUgb3Bwb3NpdGUgb2YgSGVhZC4KLy8gUGFuaWNzIGlmIGxpc3QgaXMgZW1wdHkgb3IgbmlsLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBMYXN0KCkge3suVHlwZS5OYW1lfX0gewoJcmV0dXJuIGxpc3QubVtsZW4obGlzdC5tKS0xXQp9CgovLyBMYXN0T3B0aW9uIGdldHMgdGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgbGlzdCwgaWYgcG9zc2libGUuCi8vIE90aGVyd2lzZSByZXR1cm5zIHt7aWYgLlR5cGVJc1B0cn19bmlse3tlbHNlfX10aGUgemVybyB2YWx1ZXt7ZW5kfX0uCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIExhc3RPcHRpb24oKSB7ey5UeXBlLk5hbWV9fSB7CglpZiBsaXN0ID09IG5pbCB8fCBsZW4obGlzdC5tKSA9PSAwIHsKCQl2YXIgdiB7ey5UeXBlLk5hbWV9fQoJCXJldHVybiB2Cgl9CglyZXR1cm4gbGlzdC5tW2xlbihsaXN0Lm0pLTFdCn0KCi8vIFRhaWwgZ2V0cyBldmVyeXRoaW5nIGV4Y2VwdCB0aGUgaGVhZC4gSGVhZCBwbHVzIFRhaWwgaW5jbHVkZSB0aGUgd2hvbGUgbGlzdC4gVGFpbCBpcyB0aGUgb3Bwb3NpdGUgb2YgSW5pdC4KLy8gUGFuaWNzIGlmIGxpc3QgaXMgZW1wdHkgb3IgbmlsLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUYWlsKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJcmVzdWx0IDo9IG5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCXJlc3VsdC5tID0gbGlzdC5tWzE6XQoJcmV0dXJuIHJlc3VsdAp9CgovLyBJbml0IGdldHMgZXZlcnl0aGluZyBleGNlcHQgdGhlIGxhc3QuIEluaXQgcGx1cyBMYXN0IGluY2x1ZGUgdGhlIHdob2xlIGxpc3QuIEluaXQgaXMgdGhlIG9wcG9zaXRlIG9mIFRhaWwuCi8vIFBhbmljcyBpZiBsaXN0IGlzIGVtcHR5IG9yIG5pbC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgSW5pdCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCXJlc3VsdCA6PSBuZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIDApCglyZXN1bHQubSA9IGxpc3QubVs6bGVuKGxpc3QubSktMV0KCXJldHVybiByZXN1bHQKfQoKLy8gSXNFbXB0eSB0ZXN0cyB3aGV0aGVyIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgaXMgZW1wdHkuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIElzRW1wdHkoKSBib29sIHsKCXJldHVybiBsaXN0LlNpemUoKSA9PSAwCn0KCi8vIE5vbkVtcHR5IHRlc3RzIHdoZXRoZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBpcyBlbXB0eS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTm9uRW1wdHkoKSBib29sIHsKCXJldHVybiBsaXN0LlNpemUoKSA+IDAKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBTaXplIHJldHVybnMgdGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgbGlzdCAtIGFuIGFsaWFzIG9mIExlbigpLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTaXplKCkgaW50IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gMAoJfQoKCXJldHVybiBsZW4obGlzdC5tKQp9CgovLyBMZW4gcmV0dXJucyB0aGUgbnVtYmVyIG9mIGl0ZW1zIGluIHRoZSBsaXN0IC0gYW4gYWxpYXMgb2YgU2l6ZSgpLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBMZW4oKSBpbnQgewoJcmV0dXJuIGxpc3QuU2l6ZSgpCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQp7ey0gaWYgLkNvbXBhcmFibGV9fQoKLy8gQ29udGFpbnMgZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gaXRlbSBpcyBhbHJlYWR5IGluIHRoZSBsaXN0LCByZXR1cm5pbmcgdHJ1ZSBpZiBzby4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgQ29udGFpbnModiB7ey5UeXBlLk5hbWV9fSkgYm9vbCB7CglyZXR1cm4gbGlzdC5FeGlzdHMoZnVuYyh4IHt7LlR5cGUuTmFtZX19KSBib29sIHsKCQlyZXR1cm4ge3suVHlwZS5TdGFyfX14ID09IHYKCX0pCn0KCi8vIENvbnRhaW5zQWxsIGRldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gaXRlbXMgYXJlIGFsbCBpbiB0aGUgbGlzdCwgcmV0dXJuaW5nIHRydWUgaWYgc28uCi8vIFRoaXMgaXMgcG90ZW50aWFsbHkgYSBzbG93IG1ldGhvZCBhbmQgc2hvdWxkIG9ubHkgYmUgdXNlZCByYXJlbHkuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIENvbnRhaW5zQWxsKGkgLi4ue3suVHlwZS5OYW1lfX0pIGJvb2wgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBsZW4oaSkgPT0gMAoJfQoKCWZvciBfLCB2IDo9IHJhbmdlIGkgewoJCWlmICFsaXN0LkNvbnRhaW5zKHYpIHsKCQkJcmV0dXJuIGZhbHNlCgkJfQoJfQoJcmV0dXJuIHRydWUKfQp7ey0gZW5kfX0KCi8vIEV4aXN0cyB2ZXJpZmllcyB0aGF0IG9uZSBvciBtb3JlIGVsZW1lbnRzIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgcmV0dXJuIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRXhpc3RzKHAgZnVuYyh7ey5UeXBlLk5hbWV9fSkgYm9vbCkgYm9vbCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBwKHt7LlR5cGUuU3Rhcn19dikgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCX0KCXJldHVybiBmYWxzZQp9CgovLyBGb3JhbGwgdmVyaWZpZXMgdGhhdCBhbGwgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBGb3JhbGwocCBmdW5jKHt7LlR5cGUuTmFtZX19KSBib29sKSBib29sIHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gdHJ1ZQoJfQoKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJaWYgIXAoe3suVHlwZS5TdGFyfX12KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0KCi8vIEZvcmVhY2ggaXRlcmF0ZXMgb3ZlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGFuZCBleGVjdXRlcyBmdW5jdGlvbiBmIGFnYWluc3QgZWFjaCBlbGVtZW50LgovLyBUaGUgZnVuY3Rpb24gcmVjZWl2ZXMgY29waWVzIHRoYXQgZG8gbm90IGFsdGVyIHRoZSBsaXN0IGVsZW1lbnRzIHdoZW4gdGhleSBhcmUgY2hhbmdlZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRm9yZWFjaChmIGZ1bmMoe3suVHlwZS5OYW1lfX0pKSB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuCgl9CgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlmKHt7LlR5cGUuU3Rhcn19dikKCX0KfQoKLy8gU2VuZCByZXR1cm5zIGEgY2hhbm5lbCB0aGF0IHdpbGwgc2VuZCBhbGwgdGhlIGVsZW1lbnRzIGluIG9yZGVyLiBBIGdvcm91dGluZSBpcyBjcmVhdGVkIHRvCi8vIHNlbmQgdGhlIGVsZW1lbnRzOyB0aGlzIG9ubHkgdGVybWluYXRlcyB3aGVuIGFsbCB0aGUgZWxlbWVudHMgaGF2ZSBiZWVuIGNvbnN1bWVkLiBUaGUKLy8gY2hhbm5lbCB3aWxsIGJlIGNsb3NlZCB3aGVuIGFsbCB0aGUgZWxlbWVudHMgaGF2ZSBiZWVuIHNlbnQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFNlbmQoKSA8LWNoYW4ge3suVHlwZS5OYW1lfX0gewoJY2ggOj0gbWFrZShjaGFuIHt7LlR5cGUuTmFtZX19KQoJZ28gZnVuYygpIHsKCQlpZiBsaXN0ICE9IG5pbCB7CgkJCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJCQljaCA8LSB2CgkJCX0KCQl9CgkJY2xvc2UoY2gpCgl9KCkKCXJldHVybiBjaAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFJldmVyc2UgcmV0dXJucyBhIGNvcHkgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB3aXRoIGFsbCBlbGVtZW50cyBpbiB0aGUgcmV2ZXJzZSBvcmRlci4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgUmV2ZXJzZSgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJbiA6PSBsZW4obGlzdC5tKQoJcmVzdWx0IDo9IG5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QobiwgbikKCWxhc3QgOj0gbiAtIDEKCWZvciBpLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJcmVzdWx0Lm1bbGFzdC1pXSA9IHYKCX0KCXJldHVybiByZXN1bHQKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBTaHVmZmxlIHJldHVybnMgYSBzaHVmZmxlZCBjb3B5IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QsIHVzaW5nIGEgdmVyc2lvbiBvZiB0aGUgRmlzaGVyLVlhdGVzIHNodWZmbGUuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFNodWZmbGUoKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KGxpc3QubS4uLikKCW4gOj0gbGVuKHJlc3VsdC5tKQoJZm9yIGkgOj0gMDsgaSA8IG47IGkrKyB7CgkJciA6PSBpICsgcmFuZC5JbnRuKG4taSkKCQlyZXN1bHQubVtpXSwgcmVzdWx0Lm1bcl0gPSByZXN1bHQubVtyXSwgcmVzdWx0Lm1baV0KCX0KCXJldHVybiByZXN1bHQKfQoKLy8gQXBwZW5kIHJldHVybnMgYSBuZXcgbGlzdCB3aXRoIGFsbCBvcmlnaW5hbCBpdGVtcyBhbmQgYWxsIGluIGBtb3JlYDsgdGhleSByZXRhaW4gdGhlaXIgb3JkZXIuCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBhbHRlcmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBBcHBlbmQobW9yZSAuLi57ey5UeXBlLk5hbWV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCWlmIGxlbihtb3JlKSA9PSAwIHsKCQkJcmV0dXJuIG5pbAoJCX0KCQlyZXR1cm4gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdChtb3JlLi4uKQoJfQoKCW5ld0xpc3QgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdChsaXN0Lm0uLi4pCgluZXdMaXN0LmRvQXBwZW5kKG1vcmUuLi4pCglyZXR1cm4gbmV3TGlzdAp9CgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBkb0FwcGVuZChtb3JlIC4uLnt7LlR5cGUuTmFtZX19KSB7CglsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCBtb3JlLi4uKQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFRha2UgcmV0dXJucyBhIHNsaWNlIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29udGFpbmluZyB0aGUgbGVhZGluZyBuIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgbGlzdC4KLy8gSWYgbiBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNpemUgb2YgdGhlIGxpc3QsIHRoZSB3aG9sZSBvcmlnaW5hbCBsaXN0IGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUYWtlKG4gaW50KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB8fCBuID49IGxlbihsaXN0Lm0pIHsKCQlyZXR1cm4gbGlzdAoJfQoKCXJlc3VsdCA6PSBuZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIDApCglyZXN1bHQubSA9IGxpc3QubVswOm5dCglyZXR1cm4gcmVzdWx0Cn0KCi8vIERyb3AgcmV0dXJucyBhIHNsaWNlIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3Qgd2l0aG91dCB0aGUgbGVhZGluZyBuIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgbGlzdC4KLy8gSWYgbiBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNpemUgb2YgdGhlIGxpc3QsIGFuIGVtcHR5IGxpc3QgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERyb3AobiBpbnQpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHx8IG4gPT0gMCB7CgkJcmV0dXJuIGxpc3QKCX0KCglpZiBuID49IGxlbihsaXN0Lm0pIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IG5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCXJlc3VsdC5tID0gbGlzdC5tW246XQoJcmV0dXJuIHJlc3VsdAp9CgovLyBUYWtlTGFzdCByZXR1cm5zIGEgc2xpY2Ugb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBjb250YWluaW5nIHRoZSB0cmFpbGluZyBuIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgbGlzdC4KLy8gSWYgbiBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNpemUgb2YgdGhlIGxpc3QsIHRoZSB3aG9sZSBvcmlnaW5hbCBsaXN0IGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUYWtlTGFzdChuIGludCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglsIDo9IGxlbihsaXN0Lm0pCglpZiBuID49IGwgewoJCXJldHVybiBsaXN0Cgl9CgoJcmVzdWx0IDo9IG5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCXJlc3VsdC5tID0gbGlzdC5tW2wtbjpdCglyZXR1cm4gcmVzdWx0Cn0KCi8vIERyb3BMYXN0IHJldHVybnMgYSBzbGljZSBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHdpdGhvdXQgdGhlIHRyYWlsaW5nIG4gZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBsaXN0LgovLyBJZiBuIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgc2l6ZSBvZiB0aGUgbGlzdCwgYW4gZW1wdHkgbGlzdCBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRHJvcExhc3QobiBpbnQpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHx8IG4gPT0gMCB7CgkJcmV0dXJuIGxpc3QKCX0KCglsIDo9IGxlbihsaXN0Lm0pCglpZiBuID49IGwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gbmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCAwKQoJcmVzdWx0Lm0gPSBsaXN0Lm1bOmwtbl0KCXJldHVybiByZXN1bHQKfQoKLy8gVGFrZVdoaWxlIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBjb250YWluaW5nIHRoZSBsZWFkaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgbGlzdC4gV2hpbHN0IHRoZQovLyBwcmVkaWNhdGUgcCByZXR1cm5zIHRydWUsIGVsZW1lbnRzIGFyZSBhZGRlZCB0byB0aGUgcmVzdWx0LiBPbmNlIHByZWRpY2F0ZSBwIHJldHVybnMgZmFsc2UsIGFsbCByZW1haW5pbmcKLy8gZWxlbWVudHMgYXJlIGV4Y2x1ZGVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUYWtlV2hpbGUocCBmdW5jKHt7LlR5cGUuTmFtZX19KSBib29sKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBuZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIDApCglmb3IgXywgdiA6PSByYW5nZSBsaXN0Lm0gewoJCWlmIHAodikgewoJCQlyZXN1bHQubSA9IGFwcGVuZChyZXN1bHQubSwgdikKCQl9IGVsc2UgewoJCQlyZXR1cm4gcmVzdWx0CgkJfQoJfQoJcmV0dXJuIHJlc3VsdAp9CgovLyBEcm9wV2hpbGUgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGNvbnRhaW5pbmcgdGhlIHRyYWlsaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgbGlzdC4gV2hpbHN0IHRoZQovLyBwcmVkaWNhdGUgcCByZXR1cm5zIHRydWUsIGVsZW1lbnRzIGFyZSBleGNsdWRlZCBmcm9tIHRoZSByZXN1bHQuIE9uY2UgcHJlZGljYXRlIHAgcmV0dXJucyBmYWxzZSwgYWxsIHJlbWFpbmluZwovLyBlbGVtZW50cyBhcmUgYWRkZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERyb3BXaGlsZShwIGZ1bmMoe3suVHlwZS5OYW1lfX0pIGJvb2wpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IG5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCWFkZGluZyA6PSBmYWxzZQoKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJaWYgYWRkaW5nIHx8ICFwKHYpIHsKCQkJYWRkaW5nID0gdHJ1ZQoJCQlyZXN1bHQubSA9IGFwcGVuZChyZXN1bHQubSwgdikKCQl9Cgl9CgoJcmV0dXJuIHJlc3VsdAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEZpbmQgcmV0dXJucyB0aGUgZmlyc3Qge3suVHlwZS5OYW1lfX0gdGhhdCByZXR1cm5zIHRydWUgZm9yIHByZWRpY2F0ZSBwLgovLyBGYWxzZSBpcyByZXR1cm5lZCBpZiBub25lIG1hdGNoLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBGaW5kKHAgZnVuYyh7ey5UeXBlLk5hbWV9fSkgYm9vbCkgKHt7LlR5cGUuTmFtZX19LCBib29sKSB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIHt7LlR5cGUuWmVyb319LCBmYWxzZQoJfQoKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJaWYgcCh2KSB7CgkJCXJldHVybiB2LCB0cnVlCgkJfQoJfQp7e2lmIGVxIC5UeXBlLlN0YXIgIioifX0KCglyZXR1cm4gbmlsLCBmYWxzZQp7e2Vsc2V9fQoKCXZhciBlbXB0eSB7ey5UeXBlLk5hbWV9fQoJcmV0dXJuIGVtcHR5LCBmYWxzZQp7e2VuZCAtfX0KfQoKLy8gRmlsdGVyIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB3aG9zZSBlbGVtZW50cyByZXR1cm4gdHJ1ZSBmb3IgcHJlZGljYXRlIHAuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEZpbHRlcihwIGZ1bmMoe3suVHlwZS5OYW1lfX0pIGJvb2wpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IG5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKGxpc3QubSkvMikKCglmb3IgXywgdiA6PSByYW5nZSBsaXN0Lm0gewoJCWlmIHAodikgewoJCQlyZXN1bHQubSA9IGFwcGVuZChyZXN1bHQubSwgdikKCQl9Cgl9CgoJcmV0dXJuIHJlc3VsdAp9CgovLyBQYXJ0aXRpb24gcmV0dXJucyB0d28gbmV3IHt7LlR5cGUuTmFtZX19TGlzdHMgd2hvc2UgZWxlbWVudHMgcmV0dXJuIHRydWUgb3IgZmFsc2UgZm9yIHRoZSBwcmVkaWNhdGUsIHAuCi8vIFRoZSBmaXJzdCByZXN1bHQgY29uc2lzdHMgb2YgYWxsIGVsZW1lbnRzIHRoYXQgc2F0aXNmeSB0aGUgcHJlZGljYXRlIGFuZCB0aGUgc2Vjb25kIHJlc3VsdCBjb25zaXN0cyBvZgovLyBhbGwgZWxlbWVudHMgdGhhdCBkb24ndC4gVGhlIHJlbGF0aXZlIG9yZGVyIG9mIHRoZSBlbGVtZW50cyBpbiB0aGUgcmVzdWx0cyBpcyB0aGUgc2FtZSBhcyBpbiB0aGUKLy8gb3JpZ2luYWwgbGlzdC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgUGFydGl0aW9uKHAgZnVuYyh7ey5UeXBlLk5hbWV9fSkgYm9vbCkgKCp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0LCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwsIG5pbAoJfQoKCW1hdGNoaW5nIDo9IG5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKGxpc3QubSkvMikKCW90aGVycyA6PSBuZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIGxlbihsaXN0Lm0pLzIpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBwKHYpIHsKCQkJbWF0Y2hpbmcubSA9IGFwcGVuZChtYXRjaGluZy5tLCB2KQoJCX0gZWxzZSB7CgkJCW90aGVycy5tID0gYXBwZW5kKG90aGVycy5tLCB2KQoJCX0KCX0KCglyZXR1cm4gbWF0Y2hpbmcsIG90aGVycwp9CgovLyBNYXAgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggZnVuY3Rpb24gZi4KLy8gVGhlIHJlc3VsdGluZyBsaXN0IGlzIHRoZSBzYW1lIHNpemUgYXMgdGhlIG9yaWdpbmFsIGxpc3QuCi8vCi8vIFRoaXMgaXMgYSBkb21haW4tdG8tcmFuZ2UgbWFwcGluZyBmdW5jdGlvbi4gRm9yIGJlc3Bva2UgdHJhbnNmb3JtYXRpb25zIHRvIG90aGVyIHR5cGVzLCBjb3B5IGFuZCBtb2RpZnkKLy8gdGhpcyBtZXRob2QgYXBwcm9wcmlhdGVseS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTWFwKGYgZnVuYyh7ey5UeXBlLk5hbWV9fSkge3suVHlwZS5OYW1lfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IG5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QobGVuKGxpc3QubSksIGxlbihsaXN0Lm0pKQoKCWZvciBpLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJcmVzdWx0Lm1baV0gPSBmKHYpCgl9CgoJcmV0dXJuIHJlc3VsdAp9CgovLyBGbGF0TWFwIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIGZ1bmN0aW9uIGYgdGhhdAovLyByZXR1cm5zIHplcm8gb3IgbW9yZSBpdGVtcyBpbiBhIHNsaWNlLiBUaGUgcmVzdWx0aW5nIGxpc3QgbWF5IGhhdmUgYSBkaWZmZXJlbnQgc2l6ZSB0byB0aGUgb3JpZ2luYWwgbGlzdC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBGbGF0TWFwKGYgZnVuYyh7ey5UeXBlLk5hbWV9fSkgW117ey5UeXBlLk5hbWV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gbmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCBsZW4obGlzdC5tKSkKCglmb3IgXywgdiA6PSByYW5nZSBsaXN0Lm0gewoJCXJlc3VsdC5tID0gYXBwZW5kKHJlc3VsdC5tLCBmKHYpLi4uKQoJfQoKCXJldHVybiByZXN1bHQKfQoKLy8gQ291bnRCeSBnaXZlcyB0aGUgbnVtYmVyIGVsZW1lbnRzIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgdGhhdCByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBDb3VudEJ5KHAgZnVuYyh7ey5UeXBlLk5hbWV9fSkgYm9vbCkgKHJlc3VsdCBpbnQpIHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gMAoJfQoKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJaWYgcCh2KSB7CgkJCXJlc3VsdCsrCgkJfQoJfQoJcmV0dXJuCn0KCi8vIE1pbkJ5IHJldHVybnMgYW4gZWxlbWVudCBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGNvbnRhaW5pbmcgdGhlIG1pbmltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMKLy8gdXNpbmcgYSBwYXNzZWQgZnVuYyBkZWZpbmluZyDigJhsZXNz4oCZLiBJbiB0aGUgY2FzZSBvZiBtdWx0aXBsZSBpdGVtcyBiZWluZyBlcXVhbGx5IG1pbmltYWwsIHRoZSBmaXJzdCBzdWNoCi8vIGVsZW1lbnQgaXMgcmV0dXJuZWQuIFBhbmljcyBpZiB0aGVyZSBhcmUgbm8gZWxlbWVudHMuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIE1pbkJ5KGxlc3MgZnVuYyh7ey5UeXBlLk5hbWV9fSwge3suVHlwZS5OYW1lfX0pIGJvb2wpIHt7LlR5cGUuTmFtZX19IHsKCWwgOj0gbGVuKGxpc3QubSkKCWlmIGwgPT0gMCB7CgkJcGFuaWMoIkNhbm5vdCBkZXRlcm1pbmUgdGhlIG1pbmltdW0gb2YgYW4gZW1wdHkgbGlzdC4iKQoJfQoKCW0gOj0gMAoJZm9yIGkgOj0gMTsgaSA8IGw7IGkrKyB7CgkJaWYgbGVzcyhsaXN0Lm1baV0sIGxpc3QubVttXSkgewoJCQltID0gaQoJCX0KCX0KCXJldHVybiBsaXN0Lm1bbV0KfQoKLy8gTWF4QnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29udGFpbmluZyB0aGUgbWF4aW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cwovLyB1c2luZyBhIHBhc3NlZCBmdW5jIGRlZmluaW5nIOKAmGxlc3PigJkuIEluIHRoZSBjYXNlIG9mIG11bHRpcGxlIGl0ZW1zIGJlaW5nIGVxdWFsbHkgbWF4aW1hbCwgdGhlIGZpcnN0IHN1Y2gKLy8gZWxlbWVudCBpcyByZXR1cm5lZC4gUGFuaWNzIGlmIHRoZXJlIGFyZSBubyBlbGVtZW50cy4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTWF4QnkobGVzcyBmdW5jKHt7LlR5cGUuTmFtZX19LCB7ey5UeXBlLk5hbWV9fSkgYm9vbCkge3suVHlwZS5OYW1lfX0gewoJbCA6PSBsZW4obGlzdC5tKQoJaWYgbCA9PSAwIHsKCQlwYW5pYygiQ2Fubm90IGRldGVybWluZSB0aGUgbWF4aW11bSBvZiBhbiBlbXB0eSBsaXN0LiIpCgl9CgltIDo9IDAKCWZvciBpIDo9IDE7IGkgPCBsOyBpKysgewoJCWlmIGxlc3MobGlzdC5tW21dLCBsaXN0Lm1baV0pIHsKCQkJbSA9IGkKCQl9Cgl9CgoJcmV0dXJuIGxpc3QubVttXQp9CgovLyBEaXN0aW5jdEJ5IHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB3aG9zZSBlbGVtZW50cyBhcmUgdW5pcXVlLCB3aGVyZSBlcXVhbGl0eSBpcyBkZWZpbmVkIGJ5IHRoZSBlcXVhbCBmdW5jdGlvbi4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRGlzdGluY3RCeShlcXVhbCBmdW5jKHt7LlR5cGUuTmFtZX19LCB7ey5UeXBlLk5hbWV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gbmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCBsZW4obGlzdC5tKSkKT3V0ZXI6Cglmb3IgXywgdiA6PSByYW5nZSBsaXN0Lm0gewoJCWZvciBfLCByIDo9IHJhbmdlIHJlc3VsdC5tIHsKCQkJaWYgZXF1YWwodiwgcikgewoJCQkJY29udGludWUgT3V0ZXIKCQkJfQoJCX0KCQlyZXN1bHQubSA9IGFwcGVuZChyZXN1bHQubSwgdikKCX0KCXJldHVybiByZXN1bHQKfQoKLy8gSW5kZXhXaGVyZSBmaW5kcyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgc2F0aXNmeWluZyBwcmVkaWNhdGUgcC4gSWYgbm9uZSBleGlzdHMsIC0xIGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBJbmRleFdoZXJlKHAgZnVuYyh7ey5UeXBlLk5hbWV9fSkgYm9vbCkgaW50IHsKCXJldHVybiBsaXN0LkluZGV4V2hlcmUyKHAsIDApCn0KCi8vIEluZGV4V2hlcmUyIGZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZWxlbWVudCBzYXRpc2Z5aW5nIHByZWRpY2F0ZSBwIGF0IG9yIGFmdGVyIHNvbWUgc3RhcnQgaW5kZXguCi8vIElmIG5vbmUgZXhpc3RzLCAtMSBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgSW5kZXhXaGVyZTIocCBmdW5jKHt7LlR5cGUuTmFtZX19KSBib29sLCBmcm9tIGludCkgaW50IHsKCglmb3IgaSwgdiA6PSByYW5nZSBsaXN0Lm0gewoJCWlmIGkgPj0gZnJvbSAmJiBwKHYpIHsKCQkJcmV0dXJuIGkKCQl9Cgl9CglyZXR1cm4gLTEKfQoKLy8gTGFzdEluZGV4V2hlcmUgZmluZHMgdGhlIGluZGV4IG9mIHRoZSBsYXN0IGVsZW1lbnQgc2F0aXNmeWluZyBwcmVkaWNhdGUgcC4KLy8gSWYgbm9uZSBleGlzdHMsIC0xIGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBMYXN0SW5kZXhXaGVyZShwIGZ1bmMoe3suVHlwZS5OYW1lfX0pIGJvb2wpIGludCB7CglyZXR1cm4gbGlzdC5MYXN0SW5kZXhXaGVyZTIocCwgLTEpCn0KCi8vIExhc3RJbmRleFdoZXJlMiBmaW5kcyB0aGUgaW5kZXggb2YgdGhlIGxhc3QgZWxlbWVudCBzYXRpc2Z5aW5nIHByZWRpY2F0ZSBwIGF0IG9yIGJlZm9yZSBzb21lIHN0YXJ0IGluZGV4LgovLyBJZiBub25lIGV4aXN0cywgLTEgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIExhc3RJbmRleFdoZXJlMihwIGZ1bmMoe3suVHlwZS5OYW1lfX0pIGJvb2wsIGJlZm9yZSBpbnQpIGludCB7CgoJaWYgYmVmb3JlIDwgMCB7CgkJYmVmb3JlID0gbGVuKGxpc3QubSkKCX0KCWZvciBpIDo9IGxlbihsaXN0Lm0pIC0gMTsgaSA+PSAwOyBpLS0gewoJCXYgOj0gbGlzdC5tW2ldCgkJaWYgaSA8PSBiZWZvcmUgJiYgcCh2KSB7CgkJCXJldHVybiBpCgkJfQoJfQoJcmV0dXJuIC0xCn0Ke3stIGlmIC5Db21wYXJhYmxlfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBUaGVzZSBtZXRob2RzIGFyZSBpbmNsdWRlZCB3aGVuIHt7LlR5cGUuTmFtZX19IGlzIGNvbXBhcmFibGUuCgovLyBFcXVhbHMgZGV0ZXJtaW5lcyBpZiB0d28gbGlzdHMgYXJlIGVxdWFsIHRvIGVhY2ggb3RoZXIuCi8vIElmIHRoZXkgYm90aCBhcmUgdGhlIHNhbWUgc2l6ZSBhbmQgaGF2ZSB0aGUgc2FtZSBpdGVtcyBpbiB0aGUgc2FtZSBvcmRlciwgdGhleSBhcmUgY29uc2lkZXJlZCBlcXVhbC4KLy8gT3JkZXIgb2YgaXRlbXMgaXMgbm90IHJlbGV2ZW50IGZvciBzZXRzIHRvIGJlIGVxdWFsLgovLyBOaWwgbGlzdHMgYXJlIGNvbnNpZGVyZWQgdG8gYmUgZW1wdHkuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEVxdWFscyhvdGhlciAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgYm9vbCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG90aGVyID09IG5pbCB8fCBsZW4ob3RoZXIubSkgPT0gMAoJfQoKCWlmIG90aGVyID09IG5pbCB7CgkJcmV0dXJuIGxlbihsaXN0Lm0pID09IDAKCX0KCglpZiBsZW4obGlzdC5tKSAhPSBsZW4ob3RoZXIubSkgewoJCXJldHVybiBmYWxzZQoJfQoKCWZvciBpLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJaWYgdiAhPSBvdGhlci5tW2ldIHsKCQkJcmV0dXJuIGZhbHNlCgkJfQoJfQoKCXJldHVybiB0cnVlCn0Ke3stIGVuZH19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCnR5cGUgc29ydGFibGV7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHN0cnVjdCB7CglsZXNzIGZ1bmMoaSwgaiB7ey5UeXBlLk5hbWV9fSkgYm9vbAoJbSBbXXt7LlR5cGUuTmFtZX19Cn0KCmZ1bmMgKHNsIHNvcnRhYmxle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTGVzcyhpLCBqIGludCkgYm9vbCB7CglyZXR1cm4gc2wubGVzcyh7ey5UeXBlLlN0YXJ9fXNsLm1baV0sIHt7LlR5cGUuU3Rhcn19c2wubVtqXSkKfQoKZnVuYyAoc2wgc29ydGFibGV7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBMZW4oKSBpbnQgewoJcmV0dXJuIGxlbihzbC5tKQp9CgpmdW5jIChzbCBzb3J0YWJsZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFN3YXAoaSwgaiBpbnQpIHsKCXNsLm1baV0sIHNsLm1bal0gPSBzbC5tW2pdLCBzbC5tW2ldCn0KCi8vIFNvcnRCeSByZXR1cm5zIGEgbmV3IGxpc3QgaW4gd2hpY2ggdGhlIGVsZW1lbnRzIGFyZSBzb3J0ZWQgYnkgYSBzcGVjaWZpZWQgb3JkZXJpbmcuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFNvcnRCeShsZXNzIGZ1bmMoaSwgaiB7ey5UeXBlLk5hbWV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdChsaXN0Lm0uLi4pCglzb3J0LlNvcnQoc29ydGFibGV7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0e2xlc3MsIHJlc3VsdC5tfSkKCXJldHVybiByZXN1bHQKfQoKLy8gU3RhYmxlU29ydEJ5IHJldHVybnMgYSBuZXcgbGlzdCBpbiB3aGljaCB0aGUgZWxlbWVudHMgYXJlIHNvcnRlZCBieSBhIHNwZWNpZmllZCBvcmRlcmluZy4KLy8gVGhlIGFsZ29yaXRobSBrZWVwcyB0aGUgb3JpZ2luYWwgb3JkZXIgb2YgZXF1YWwgZWxlbWVudHMuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFN0YWJsZVNvcnRCeShsZXNzIGZ1bmMoaSwgaiB7ey5UeXBlLk5hbWV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdChsaXN0Lm0uLi4pCglzb3J0LlN0YWJsZShzb3J0YWJsZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3R7bGVzcywgcmVzdWx0Lm19KQoJcmV0dXJuIHJlc3VsdAp9Cnt7LSBpZiAuT3JkZXJlZH19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gVGhlc2UgbWV0aG9kcyBhcmUgaW5jbHVkZWQgd2hlbiB7ey5UeXBlLk5hbWV9fSBpcyBvcmRlcmVkLgoKLy8gU29ydGVkIHJldHVybnMgYSBuZXcgbGlzdCBpbiB3aGljaCB0aGUgZWxlbWVudHMgYXJlIHNvcnRlZCBieSB0aGVpciBuYXR1cmFsIG9yZGVyaW5nLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTb3J0ZWQoKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXR1cm4gbGlzdC5Tb3J0QnkoZnVuYyhhLCBiIHt7LlR5cGUuTmFtZX19KSBib29sIHsKCQlyZXR1cm4gYSA8IGIKCX0pCn0KCi8vIFN0YWJsZVNvcnRlZCByZXR1cm5zIGEgbmV3IGxpc3QgaW4gd2hpY2ggdGhlIGVsZW1lbnRzIGFyZSBzb3J0ZWQgYnkgdGhlaXIgbmF0dXJhbCBvcmRlcmluZy4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU3RhYmxlU29ydGVkKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJcmV0dXJuIGxpc3QuU3RhYmxlU29ydEJ5KGZ1bmMoYSwgYiB7ey5UeXBlLk5hbWV9fSkgYm9vbCB7CgkJcmV0dXJuIGEgPCBiCgl9KQp9CgovLyBNaW4gcmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBjb250YWluaW5nIHRoZSBtaW5pbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzLgovLyBQYW5pY3MgaWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIE1pbigpIHt7LlR5cGUuTmFtZX19IHsKCglsIDo9IGxlbihsaXN0Lm0pCglpZiBsID09IDAgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtaW5pbXVtIG9mIGFuIGVtcHR5IGxpc3QuIikKCX0KCgl2IDo9IGxpc3QubVswXQoJbSA6PSB7ey5UeXBlLlN0YXJ9fXYKCWZvciBpIDo9IDE7IGkgPCBsOyBpKysgewoJCXYgOj0gbGlzdC5tW2ldCgkJaWYge3suVHlwZS5TdGFyfX12IDwgbSB7CgkJCW0gPSB7ey5UeXBlLlN0YXJ9fXYKCQl9Cgl9CglyZXR1cm4gbQp9CgovLyBNYXggcmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBjb250YWluaW5nIHRoZSBtYXhpbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzLgovLyBQYW5pY3MgaWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIE1heCgpIChyZXN1bHQge3suVHlwZS5OYW1lfX0pIHsKCglsIDo9IGxlbihsaXN0Lm0pCglpZiBsID09IDAgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtYXhpbXVtIG9mIGFuIGVtcHR5IGxpc3QuIikKCX0KCgl2IDo9IGxpc3QubVswXQoJbSA6PSB7ey5UeXBlLlN0YXJ9fXYKCWZvciBpIDo9IDE7IGkgPCBsOyBpKysgewoJCXYgOj0gbGlzdC5tW2ldCgkJaWYge3suVHlwZS5TdGFyfX12ID4gbSB7CgkJCW0gPSB7ey5UeXBlLlN0YXJ9fXYKCQl9Cgl9CglyZXR1cm4gbQp9Cnt7LSBlbmR9fQp7ey0gaWYgLk51bWVyaWN9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIFRoZXNlIG1ldGhvZHMgYXJlIGluY2x1ZGVkIHdoZW4ge3suVHlwZS5OYW1lfX0gaXMgbnVtZXJpYy4KCi8vIFN1bSByZXR1cm5zIHRoZSBzdW0gb2YgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgbGlzdC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU3VtKCkge3suVHlwZS5OYW1lfX0gewoKCXN1bSA6PSB7ey5UeXBlLk5hbWV9fSgwKQoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlzdW0gPSBzdW0gKyB7ey5UeXBlLlN0YXJ9fXYKCX0KCXJldHVybiBzdW0KfQp7ey0gZW5kfX0Ke3stIGlmIC5TdHJpbmdlcn19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFN0cmluZ0xpc3QgZ2V0cyBhIGxpc3Qgb2Ygc3RyaW5ncyB0aGF0IGRlcGljdHMgYWxsIHRoZSBlbGVtZW50cy4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU3RyaW5nTGlzdCgpIFtdc3RyaW5nIHsKCglzdHJpbmdzIDo9IG1ha2UoW11zdHJpbmcsIGxlbihsaXN0Lm0pKQoJZm9yIGksIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlzdHJpbmdzW2ldID0gZm10LlNwcmludGYoIiV2IiwgdikKCX0KCXJldHVybiBzdHJpbmdzCn0KCi8vIFN0cmluZyBpbXBsZW1lbnRzIHRoZSBTdHJpbmdlciBpbnRlcmZhY2UgdG8gcmVuZGVyIHRoZSBsaXN0IGFzIGEgY29tbWEtc2VwYXJhdGVkIHN0cmluZyBlbmNsb3NlZCBpbiBzcXVhcmUgYnJhY2tldHMuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFN0cmluZygpIHN0cmluZyB7CglyZXR1cm4gbGlzdC5Na1N0cmluZzMoIlsiLCAiLCAiLCAiXSIpCn0KCi8vIE1rU3RyaW5nIGNvbmNhdGVuYXRlcyB0aGUgdmFsdWVzIGFzIGEgc3RyaW5nIHVzaW5nIGEgc3VwcGxpZWQgc2VwYXJhdG9yLiBObyBlbmNsb3NpbmcgbWFya3MgYXJlIGFkZGVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcgewoJcmV0dXJuIGxpc3QuTWtTdHJpbmczKCIiLCBzZXAsICIiKQp9CgovLyBNa1N0cmluZzMgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcsIHVzaW5nIHRoZSBwcmVmaXgsIHNlcGFyYXRvciBhbmQgc3VmZml4IHN1cHBsaWVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBNa1N0cmluZzMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpIHN0cmluZyB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuICIiCgl9CgoJcmV0dXJuIGxpc3QubWtTdHJpbmczQnl0ZXMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlcikuU3RyaW5nKCkKfQoKZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBta1N0cmluZzNCeXRlcyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgKmJ5dGVzLkJ1ZmZlciB7CgliIDo9ICZieXRlcy5CdWZmZXJ7fQoJYi5Xcml0ZVN0cmluZyhiZWZvcmUpCglzZXAgOj0gIiIKCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQliLldyaXRlU3RyaW5nKHNlcCkKCQliLldyaXRlU3RyaW5nKGZtdC5TcHJpbnRmKCIldiIsIHYpKQoJCXNlcCA9IGJldHdlZW4KCX0KCWIuV3JpdGVTdHJpbmcoYWZ0ZXIpCglyZXR1cm4gYgp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFVubWFyc2hhbEpTT04gaW1wbGVtZW50cyBKU09OIGRlY29kaW5nIGZvciB0aGlzIGxpc3QgdHlwZS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IgewoJcmV0dXJuIGpzb24uVW5tYXJzaGFsKGIsICZsaXN0Lm0pCn0KCi8vIE1hcnNoYWxKU09OIGltcGxlbWVudHMgSlNPTiBlbmNvZGluZyBmb3IgdGhpcyBsaXN0IHR5cGUuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikgewoJYnVmLCBlcnIgOj0ganNvbi5NYXJzaGFsKGxpc3QubSkKCXJldHVybiBidWYsIGVycgp9Cnt7LSBlbmR9fQp7ey0gaWYgLkdvYkVuY29kZX19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEdvYkRlY29kZSBpbXBsZW1lbnRzICdnb2InIGRlY29kaW5nIGZvciB0aGlzIGxpc3QgdHlwZS4KLy8gWW91IG11c3QgcmVnaXN0ZXIge3suVHlwZS5OYW1lfX0gd2l0aCB0aGUgJ2dvYicgcGFja2FnZSBiZWZvcmUgdGhpcyBtZXRob2QgaXMgdXNlZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgR29iRGVjb2RlKGIgW11ieXRlKSBlcnJvciB7CglidWYgOj0gYnl0ZXMuTmV3QnVmZmVyKGIpCglyZXR1cm4gZ29iLk5ld0RlY29kZXIoYnVmKS5EZWNvZGUoJmxpc3QubSkKfQoKLy8gR29iRW5jb2RlIGltcGxlbWVudHMgJ2dvYicgZW5jb2RpbmcgZm9yIHRoaXMgbGlzdCB0eXBlLgovLyBZb3UgbXVzdCByZWdpc3RlciB7ey5UeXBlLk5hbWV9fSB3aXRoIHRoZSAnZ29iJyBwYWNrYWdlIGJlZm9yZSB0aGlzIG1ldGhvZCBpcyB1c2VkLgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEdvYkVuY29kZSgpIChbXWJ5dGUsIGVycm9yKSB7CglidWYgOj0gJmJ5dGVzLkJ1ZmZlcnt9CgllcnIgOj0gZ29iLk5ld0VuY29kZXIoYnVmKS5FbmNvZGUobGlzdC5tKQoJcmV0dXJuIGJ1Zi5CeXRlcygpLCBlcnIKfQp7ey0gZW5kfX0K\"")
		packr.PackJSONBytes("builtin", "immutable/map.tpl", "\"Ly8gQW4gZW5jYXBzdWxhdGVkIGltbXV0YWJsZSBtYXBbe3suS2V5Lk5hbWV9fV17ey5UeXBlfX0uCi8vIFRocmVhZC1zYWZlLgovL3t7aWYgLlR5cGUuSXNQdHJ9fQovLyBXYXJuaW5nOiBUSElTIENPTExFQ1RJT04gSVMgTk9UIERFU0lHTkVEIFRPIEJFIFVTRUQgV0lUSCBQT0lOVEVSIFRZUEVTLgovL3t7ZW5kfX0KLy8KLy8gR2VuZXJhdGVkIGZyb20ge3suVGVtcGxhdGVGaWxlfX0gd2l0aCBLZXk9e3suS2V5Lk5hbWV9fSBUeXBlPXt7LlR5cGV9fQovLyBvcHRpb25zOiBDb21wYXJhYmxlOnt7LkNvbXBhcmFibGV9fSBTdHJpbmdlcjp7ey5TdHJpbmdlcn19IEtleUxpc3Q6e3suS2V5TGlzdH19IFZhbHVlTGlzdDp7ey5WYWx1ZUxpc3R9fSBNdXRhYmxlOmRpc2FibGVkCi8vIGJ5IHJ1bnRlbXBsYXRlIHt7LkFwcFZlcnNpb259fQovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pvaGFuYnJhbmRob3JzdC9ydW50ZW1wbGF0ZS9ibG9iL21hc3Rlci9CVUlMVElOLm1kCgpwYWNrYWdlIHt7LlBhY2thZ2V9fQoKaW1wb3J0ICgKe3stIGlmIG9yIC5TdHJpbmdlciAuR29iRW5jb2RlfX0KCSJieXRlcyIKe3stIGVuZH19Cnt7LSBpZiAuR29iRW5jb2RlfX0KCSJlbmNvZGluZy9nb2IiCnt7LSBlbmR9fQp7ey0gaWYgYW5kIC5TdHJpbmdlciAoZXEgLktleS5TdHJpbmcgInN0cmluZyIpfX0KCSJlbmNvZGluZy9qc29uIgp7ey0gZW5kfX0KCSJmbXQiCnt7LSBpZiAuSGFzSW1wb3J0fX0KCXt7LkltcG9ydH19Cnt7ZW5kfX0KKQoKLy8ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCBpcyB0aGUgcHJpbWFyeSB0eXBlIHRoYXQgcmVwcmVzZW50cyBhIHRocmVhZC1zYWZlIG1hcAp0eXBlIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgc3RydWN0IHsKCW0gbWFwW3t7LktleX19XXt7LlR5cGV9fQp9CgovLyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUgcmVwcmVzZW50cyBhIGtleS92YWx1ZSBwYWlyLgp0eXBlIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZSBzdHJ1Y3QgewoJS2V5IHt7LktleX19CglWYWwge3suVHlwZX19Cn0KCi8vIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgY2FuIGJlIHVzZWQgYXMgYSBidWlsZGVyIGZvciB1bm1vZGlmaWFibGUgbWFwcy4KdHlwZSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzIFtde3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlCgovLyBBcHBlbmQxIGFkZHMgb25lIGl0ZW0uCmZ1bmMgKHRzIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMpIEFwcGVuZDEoayB7ey5LZXl9fSwgdiB7ey5UeXBlfX0pIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgewoJcmV0dXJuIGFwcGVuZCh0cywge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle2ssIHZ9KQp9CgovLyBBcHBlbmQyIGFkZHMgdHdvIGl0ZW1zLgpmdW5jICh0cyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzKSBBcHBlbmQyKGsxIHt7LktleX19LCB2MSB7ey5UeXBlfX0sIGsyIHt7LktleX19LCB2MiB7ey5UeXBlfX0pIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgewoJcmV0dXJuIGFwcGVuZCh0cywge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle2sxLCB2MX0sIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXtrMiwgdjJ9KQp9CgovLyBBcHBlbmQzIGFkZHMgdGhyZWUgaXRlbXMuCmZ1bmMgKHRzIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMpIEFwcGVuZDMoazEge3suS2V5fX0sIHYxIHt7LlR5cGV9fSwgazIge3suS2V5fX0sIHYyIHt7LlR5cGV9fSwgazMge3suS2V5fX0sIHYzIHt7LlR5cGV9fSkge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlcyB7CglyZXR1cm4gYXBwZW5kKHRzLCB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGV7azEsIHYxfSwge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle2syLCB2Mn0sIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXtrMywgdjN9KQp9CgovLyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19WmlwIGlzIHVzZWQgd2l0aCB0aGUgVmFsdWVzIG1ldGhvZCB0byB6aXAgKGkuZS4gaW50ZXJsZWF2ZSkgYSBzbGljZSBvZgovLyBrZXlzIHdpdGggYSBzbGljZSBvZiB2YWx1ZXMuIFRoZXNlIGNhbiB0aGVuIGJlIHBhc3NlZCBpbiB0byB0aGUgTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcAovLyBjb25zdHJ1Y3RvciBmdW5jdGlvbi4KZnVuYyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19WmlwKGtleXMgLi4ue3suS2V5fX0pIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgewoJdHMgOj0gbWFrZSh7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzLCBsZW4oa2V5cykpCglmb3IgaSwgayA6PSByYW5nZSBrZXlzIHsKCQl0c1tpXS5LZXkgPSBrCgl9CglyZXR1cm4gdHMKfQoKLy8gVmFsdWVzIHNldHMgdGhlIHZhbHVlcyBpbiBhIHR1cGxlIHNsaWNlLiBVc2UgdGhpcyB3aXRoIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1aaXAuCmZ1bmMgKHRzIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMpIFZhbHVlcyh2YWx1ZXMgLi4ue3suVHlwZX19KSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzIHsKCWlmIGxlbih0cykgIT0gbGVuKHZhbHVlcykgewoJCXBhbmljKGZtdC5FcnJvcmYoIk1pc21hdGNoZWQgJWQga2V5cyBhbmQgJWQgdmFsdWVzIiwgbGVuKHRzKSwgbGVuKHZhbHVlcykpKQoJfQoJZm9yIGksIHYgOj0gcmFuZ2UgdmFsdWVzIHsKCQl0c1tpXS5WYWwgPSB2Cgl9CglyZXR1cm4gdHMKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpmdW5jIG5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCB7CglyZXR1cm4gJnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXB7CgkJbTogbWFrZShtYXBbe3suS2V5fX1de3suVHlwZX19KSwKCX0KfQoKLy8gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcDEgY3JlYXRlcyBhbmQgcmV0dXJucyBhIHJlZmVyZW5jZSB0byBhIG1hcCBjb250YWluaW5nIG9uZSBpdGVtLgpmdW5jIE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAxKGsge3suS2V5fX0sIHYge3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCB7CgltbSA6PSBuZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKCkKCW1tLm1ba10gPSB2CglyZXR1cm4gbW0KfQoKLy8gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCBjcmVhdGVzIGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIGEgbWFwLCBvcHRpb25hbGx5IGNvbnRhaW5pbmcgc29tZSBpdGVtcy4KZnVuYyBOZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKGt2IC4uLnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZSkgKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgewoJbW0gOj0gbmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCgpCglmb3IgXywgdCA6PSByYW5nZSBrdiB7CgkJbW0ubVt0LktleV0gPSB0LlZhbAoJfQoJcmV0dXJuIG1tCn0KCi8vIEtleXMgcmV0dXJucyB0aGUga2V5cyBvZiB0aGUgY3VycmVudCBtYXAgYXMgYSBzbGljZS4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEtleXMoKSB7e2lmIC5LZXlMaXN0fX17ey5LZXlMaXN0fX17e2Vsc2V9fVtde3suS2V5fX17e2VuZH19IHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXMgOj0gbWFrZSh7e2lmIC5LZXlMaXN0fX17ey5LZXlMaXN0fX17e2Vsc2V9fVtde3suS2V5fX17e2VuZH19LCAwLCBsZW4obW0ubSkpCglmb3IgayA6PSByYW5nZSBtbS5tIHsKCQlzID0gYXBwZW5kKHMsIGspCgl9CgoJcmV0dXJuIHMKfQoKLy8gVmFsdWVzIHJldHVybnMgdGhlIHZhbHVlcyBvZiB0aGUgY3VycmVudCBtYXAgYXMgYSBzbGljZS4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIFZhbHVlcygpIHt7aWYgLlZhbHVlTGlzdH19e3suVmFsdWVMaXN0fX17e2Vsc2V9fVtde3suVHlwZX19e3tlbmR9fSB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglzIDo9IG1ha2Uoe3tpZiAuVmFsdWVMaXN0fX17ey5WYWx1ZUxpc3R9fXt7ZWxzZX19W117ey5UeXBlfX17e2VuZH19LCAwLCBsZW4obW0ubSkpCglmb3IgXywgdiA6PSByYW5nZSBtbS5tIHsKCQlzID0gYXBwZW5kKHMsIHYpCgl9CgoJcmV0dXJuIHMKfQoKLy8gc2xpY2UgcmV0dXJucyB0aGUgaW50ZXJuYWwgZWxlbWVudHMgb2YgdGhlIG1hcC4gVGhpcyBpcyBhIHNlYW0gZm9yIHRlc3RpbmcgZXRjLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgc2xpY2UoKSBbXXt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZSB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglzIDo9IG1ha2UoW117ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUsIDAsIGxlbihtbS5tKSkKCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCXMgPSBhcHBlbmQocywge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle2ssIHZ9KQoJfQoKCXJldHVybiBzCn0KCi8vIFRvU2xpY2UgcmV0dXJucyB0aGUga2V5L3ZhbHVlIHBhaXJzIGFzIGEgc2xpY2UKZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIFRvU2xpY2UoKSBbXXt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZSB7CglyZXR1cm4gbW0uc2xpY2UoKQp9CgovLyBHZXQgcmV0dXJucyBvbmUgb2YgdGhlIGl0ZW1zIGluIHRoZSBtYXAsIGlmIHByZXNlbnQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBHZXQoayB7ey5LZXl9fSkgKHt7LlR5cGV9fSwgYm9vbCkgewoJdiwgZm91bmQgOj0gbW0ubVtrXQoJcmV0dXJuIHYsIGZvdW5kCn0KCi8vIFB1dCBhZGRzIGFuIGl0ZW0gdG8gYSBjbG9uZSBvZiB0aGUgbWFwLCByZXBsYWNpbmcgYW55IHByaW9yIHZhbHVlIGFuZCByZXR1cm5pbmcgdGhlIGNsb25lZCBtYXAuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBQdXQoayB7ey5LZXl9fSwgdiB7ey5UeXBlfX0pICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwIHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAxKGssIHYpCgl9CgoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKQoKCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCXJlc3VsdC5tW2tdID0gdgoJfQoJcmVzdWx0Lm1ba10gPSB2CgoJcmV0dXJuIHJlc3VsdAp9CgovLyBDb250YWluc0tleSBkZXRlcm1pbmVzIGlmIGEgZ2l2ZW4gaXRlbSBpcyBhbHJlYWR5IGluIHRoZSBtYXAuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBDb250YWluc0tleShrIHt7LktleX19KSBib29sIHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJXywgZm91bmQgOj0gbW0ubVtrXQoJcmV0dXJuIGZvdW5kCn0KCi8vIENvbnRhaW5zQWxsS2V5cyBkZXRlcm1pbmVzIGlmIHRoZSBnaXZlbiBpdGVtcyBhcmUgYWxsIGluIHRoZSBtYXAuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBDb250YWluc0FsbEtleXMoa2sgLi4ue3suS2V5fX0pIGJvb2wgewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gbGVuKGtrKSA9PSAwCgl9CgoJZm9yIF8sIGsgOj0gcmFuZ2Uga2sgewoJCWlmICFtbS5Db250YWluc0tleShrKSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0KCi8vIFNpemUgcmV0dXJucyBob3cgbWFueSBpdGVtcyBhcmUgY3VycmVudGx5IGluIHRoZSBtYXAuIFRoaXMgaXMgYSBzeW5vbnltIGZvciBMZW4uCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBTaXplKCkgaW50IHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIDAKCX0KCglyZXR1cm4gbGVuKG1tLm0pCn0KCi8vIElzRW1wdHkgcmV0dXJucyB0cnVlIGlmIHRoZSBtYXAgaXMgZW1wdHkuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBJc0VtcHR5KCkgYm9vbCB7CglyZXR1cm4gbW0uU2l6ZSgpID09IDAKfQoKLy8gTm9uRW1wdHkgcmV0dXJucyB0cnVlIGlmIHRoZSBtYXAgaXMgbm90IGVtcHR5LgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgTm9uRW1wdHkoKSBib29sIHsKCXJldHVybiBtbS5TaXplKCkgPiAwCn0KCi8vIEZvcmVhY2ggYXBwbGllcyB0aGUgZnVuY3Rpb24gZiB0byBldmVyeSBlbGVtZW50IGluIHRoZSBtYXAuCi8vIFRoZSBmdW5jdGlvbiBjYW4gc2FmZWx5IGFsdGVyIHRoZSB2YWx1ZXMgdmlhIHNpZGUtZWZmZWN0cy4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEZvcmVhY2goZiBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pKSB7CglpZiBtbSAhPSBuaWwgewoJCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCQlmKGssIHYpCgkJfQoJfQp9CgovLyBGb3JhbGwgYXBwbGllcyB0aGUgcHJlZGljYXRlIHAgdG8gZXZlcnkgZWxlbWVudCBpbiB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBmYWxzZSwKLy8gdGhlIGl0ZXJhdGlvbiB0ZXJtaW5hdGVzIGVhcmx5LiBUaGUgcmV0dXJuZWQgdmFsdWUgaXMgdHJ1ZSBpZiBhbGwgZWxlbWVudHMgd2VyZSB2aXNpdGVkLAovLyBvciBmYWxzZSBpZiBhbiBlYXJseSByZXR1cm4gb2NjdXJyZWQuCi8vCi8vIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBjYW4gYWxzbyBiZSB1c2VkIHNpbXBseSBhcyBhIHdheSB0byB2aXNpdCBldmVyeSBlbGVtZW50IHVzaW5nIGEgZnVuY3Rpb24KLy8gd2l0aCBzb21lIHNpZGUtZWZmZWN0czsgc3VjaCBhIGZ1bmN0aW9uIG11c3QgYWx3YXlzIHJldHVybiB0cnVlLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgRm9yYWxsKGYgZnVuYyh7ey5LZXl9fSwge3suVHlwZX19KSBib29sKSBib29sIHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIHRydWUKCX0KCglmb3IgaywgdiA6PSByYW5nZSBtbS5tIHsKCQlpZiAhZihrLCB2KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCglyZXR1cm4gdHJ1ZQp9CgovLyBFeGlzdHMgYXBwbGllcyB0aGUgcHJlZGljYXRlIHAgdG8gZXZlcnkgZWxlbWVudCBpbiB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyB0cnVlLAovLyB0aGUgaXRlcmF0aW9uIHRlcm1pbmF0ZXMgZWFybHkuIFRoZSByZXR1cm5lZCB2YWx1ZSBpcyB0cnVlIGlmIGFuIGVhcmx5IHJldHVybiBvY2N1cnJlZC4KLy8gb3IgZmFsc2UgaWYgYWxsIGVsZW1lbnRzIHdlcmUgdmlzaXRlZCB3aXRob3V0IGZpbmRpbmcgYSBtYXRjaC4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEV4aXN0cyhwIGZ1bmMoe3suS2V5fX0sIHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBmYWxzZQoJfQoKCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCWlmIHAoaywgdikgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCX0KCglyZXR1cm4gZmFsc2UKfQoKLy8gRmluZCByZXR1cm5zIHRoZSBmaXJzdCB7ey5UeXBlfX0gdGhhdCByZXR1cm5zIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4KLy8gRmFsc2UgaXMgcmV0dXJuZWQgaWYgbm9uZSBtYXRjaC4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEZpbmQocCBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pIGJvb2wpICh7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUsIGJvb2wpIHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXt9LCBmYWxzZQoJfQoKCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCWlmIHAoaywgdikgewoJCQlyZXR1cm4ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle2ssIHZ9LCB0cnVlCgkJfQoJfQoKCXJldHVybiB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGV7fSwgZmFsc2UKfQoKLy8gRmlsdGVyIGFwcGxpZXMgdGhlIHByZWRpY2F0ZSBwIHRvIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hcCBhbmQgcmV0dXJucyBhIGNvcGllZCBtYXAgY29udGFpbmluZwovLyBvbmx5IHRoZSBlbGVtZW50cyBmb3Igd2hpY2ggdGhlIHByZWRpY2F0ZSByZXR1cm5lZCB0cnVlLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgRmlsdGVyKHAgZnVuYyh7ey5LZXl9fSwge3suVHlwZX19KSBib29sKSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCgpCgoJZm9yIGssIHYgOj0gcmFuZ2UgbW0ubSB7CgkJaWYgcChrLCB2KSB7CgkJCXJlc3VsdC5tW2tdID0gdgoJCX0KCX0KCglyZXR1cm4gcmVzdWx0Cn0KCi8vIFBhcnRpdGlvbiBhcHBsaWVzIHRoZSBwcmVkaWNhdGUgcCB0byBldmVyeSBlbGVtZW50IGluIHRoZSBtYXAuIEl0IGRpdmlkZXMgdGhlIG1hcCBpbnRvIHR3byBjb3BpZWQgbWFwcywKLy8gdGhlIGZpcnN0IGNvbnRhaW5pbmcgYWxsIHRoZSBlbGVtZW50cyBmb3Igd2hpY2ggdGhlIHByZWRpY2F0ZSByZXR1cm5lZCB0cnVlLCBhbmQgdGhlIHNlY29uZCBjb250YWluaW5nIGFsbAovLyB0aGUgb3RoZXJzLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgUGFydGl0aW9uKHAgZnVuYyh7ey5LZXl9fSwge3suVHlwZX19KSBib29sKSAobWF0Y2hpbmcgKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAsIG90aGVycyAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gbmlsLCBuaWwKCX0KCgltYXRjaGluZyA9IE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKQoJb3RoZXJzID0gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCgpCgoJZm9yIGssIHYgOj0gcmFuZ2UgbW0ubSB7CgkJaWYgcChrLCB2KSB7CgkJCW1hdGNoaW5nLm1ba10gPSB2CgkJfSBlbHNlIHsKCQkJb3RoZXJzLm1ba10gPSB2CgkJfQoJfQoJcmV0dXJuCn0KCi8vIE1hcCByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1hcCBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIHRoZSBmdW5jdGlvbiBmLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBNYXAoZiBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pICh7ey5LZXl9fSwge3suVHlwZX19KSkgKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKQoKCWZvciBrMSwgdjEgOj0gcmFuZ2UgbW0ubSB7CgkJazIsIHYyIDo9IGYoazEsIHYxKQoJCXJlc3VsdC5tW2syXSA9IHYyCgl9CgoJcmV0dXJuIHJlc3VsdAp9CgovLyBGbGF0TWFwIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TWFwIGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggdGhlIGZ1bmN0aW9uIGYgdGhhdAovLyByZXR1cm5zIHplcm8gb3IgbW9yZSBpdGVtcyBpbiBhIHNsaWNlLiBUaGUgcmVzdWx0aW5nIG1hcCBtYXkgaGF2ZSBhIGRpZmZlcmVudCBzaXplIHRvIHRoZSBvcmlnaW5hbCBtYXAuCi8vCi8vIFRoaXMgaXMgYSBkb21haW4tdG8tcmFuZ2UgbWFwcGluZyBmdW5jdGlvbi4gRm9yIGJlc3Bva2UgdHJhbnNmb3JtYXRpb25zIHRvIG90aGVyIHR5cGVzLCBjb3B5IGFuZCBtb2RpZnkKLy8gdGhpcyBtZXRob2QgYXBwcm9wcmlhdGVseS4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEZsYXRNYXAoZiBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pIFtde3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlKSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCgpCgoJZm9yIGsxLCB2MSA6PSByYW5nZSBtbS5tIHsKCQl0cyA6PSBmKGsxLCB2MSkKCQlmb3IgXywgdCA6PSByYW5nZSB0cyB7CgkJCXJlc3VsdC5tW3QuS2V5XSA9IHQuVmFsCgkJfQoJfQoKCXJldHVybiByZXN1bHQKfQp7ey0gaWYgLkNvbXBhcmFibGV9fQoKLy8gRXF1YWxzIGRldGVybWluZXMgaWYgdHdvIG1hcHMgYXJlIGVxdWFsIHRvIGVhY2ggb3RoZXIuCi8vIElmIHRoZXkgYm90aCBhcmUgdGhlIHNhbWUgc2l6ZSBhbmQgaGF2ZSB0aGUgc2FtZSBpdGVtcyB0aGV5IGFyZSBjb25zaWRlcmVkIGVxdWFsLgovLyBPcmRlciBvZiBpdGVtcyBpcyBub3QgcmVsZXZlbnQgZm9yIG1hcHMgdG8gYmUgZXF1YWwuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBFcXVhbHMob3RoZXIgKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIGJvb2wgewoJaWYgbW0gPT0gbmlsIHx8IG90aGVyID09IG5pbCB7CgkJcmV0dXJuIG1tLklzRW1wdHkoKSAmJiBvdGhlci5Jc0VtcHR5KCkKCX0KCglpZiBtbS5TaXplKCkgIT0gb3RoZXIuU2l6ZSgpIHsKCQlyZXR1cm4gZmFsc2UKCX0KCWZvciBrLCB2MSA6PSByYW5nZSBtbS5tIHsKCQl2MiwgZm91bmQgOj0gb3RoZXIubVtrXQoJCWlmICFmb3VuZCB8fCB7ey5UeXBlLlN0YXJ9fXYxICE9IHt7LlR5cGUuU3Rhcn19djIgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9Cnt7LSBlbmR9fQoKLy8gQ2xvbmUgcmV0dXJucyB0aGUgc2FtZSBtYXAsIHdoaWNoIGlzIGltbXV0YWJsZS4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIENsb25lKCkgKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgewoJcmV0dXJuIG1tCn0Ke3stIGlmIC5TdHJpbmdlcn19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBTdHJpbmcoKSBzdHJpbmcgewoJcmV0dXJuIG1tLk1rU3RyaW5nMygiWyIsICIsICIsICJdIikKfQoKLy8gaW1wbGVtZW50cyBlbmNvZGluZy5NYXJzaGFsZXIgaW50ZXJmYWNlIHsKLy9mdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikgewovLwlyZXR1cm4gbW0ubWtTdHJpbmczQnl0ZXMoIntcIiIsICJcIiwgXCIiLCAiXCJ9IikuQnl0ZXMoKSwgbmlsCi8vfQoKLy8gTWtTdHJpbmcgY29uY2F0ZW5hdGVzIHRoZSBtYXAga2V5L3ZhbHVlcyBhcyBhIHN0cmluZyB1c2luZyBhIHN1cHBsaWVkIHNlcGFyYXRvci4gTm8gZW5jbG9zaW5nIG1hcmtzIGFyZSBhZGRlZC4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZyB7CglyZXR1cm4gbW0uTWtTdHJpbmczKCIiLCBzZXAsICIiKQp9CgovLyBNa1N0cmluZzMgY29uY2F0ZW5hdGVzIHRoZSBtYXAga2V5L3ZhbHVlcyBhcyBhIHN0cmluZywgdXNpbmcgdGhlIHByZWZpeCwgc2VwYXJhdG9yIGFuZCBzdWZmaXggc3VwcGxpZWQuCnt7LSBpZiAuSGFzS2V5U2xpY2V9fQovLyBUaGUgbWFwIGVudHJpZXMgYXJlIHNvcnRlZCBieSB0aGVpciBrZXlzLnt7LSBlbmR9fQpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcgewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gIiIKCX0KCXJldHVybiBtbS5ta1N0cmluZzNCeXRlcyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyKS5TdHJpbmcoKQp9CgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgbWtTdHJpbmczQnl0ZXMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpICpieXRlcy5CdWZmZXIgewoJYiA6PSAmYnl0ZXMuQnVmZmVye30KCWIuV3JpdGVTdHJpbmcoYmVmb3JlKQoJc2VwIDo9ICIiCnt7aWYgLkhhc0tleUxpc3R9fQoJa2V5cyA6PSBtYWtlKHt7LktleUxpc3R9fSwgMCwgbGVuKG1tLm0pKQoJZm9yIGssIF8gOj0gcmFuZ2UgbW0ubSB7CgkJa2V5cyAgPSBhcHBlbmQoa2V5cywgaykKCX0KCWtleXMuU29ydGVkKCkKCglmb3IgXywgayA6PSByYW5nZSBrZXlzIHsKCQl2IDo9IG1tLm1ba10KCQliLldyaXRlU3RyaW5nKHNlcCkKCQliLldyaXRlU3RyaW5nKGZtdC5TcHJpbnRmKCIldjoldiIsIGssIHYpKQoJCXNlcCA9IGJldHdlZW4KCX0Ke3tlbHNlfX0KCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCWIuV3JpdGVTdHJpbmcoc2VwKQoJCWIuV3JpdGVTdHJpbmcoZm10LlNwcmludGYoIiV2OiV2IiwgaywgdikpCgkJc2VwID0gYmV0d2VlbgoJfQp7e2VuZH19CgliLldyaXRlU3RyaW5nKGFmdGVyKQoJcmV0dXJuIGIKfQp7ey0gaWYgZXEgLktleS5TdHJpbmcgInN0cmluZyJ9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBVbm1hcnNoYWxKU09OIGltcGxlbWVudHMgSlNPTiBkZWNvZGluZyBmb3IgdGhpcyBtYXAgdHlwZS4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIFVubWFyc2hhbEpTT04oYiBbXWJ5dGUpIGVycm9yIHsKCWJ1ZiA6PSBieXRlcy5OZXdCdWZmZXIoYikKCXJldHVybiBqc29uLk5ld0RlY29kZXIoYnVmKS5EZWNvZGUoJm1tLm0pCn0KCi8vIE1hcnNoYWxKU09OIGltcGxlbWVudHMgSlNPTiBlbmNvZGluZyBmb3IgdGhpcyBtYXAgdHlwZS4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIE1hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpIHsKCXJldHVybiBqc29uLk1hcnNoYWwobW0ubSkKfQp7ey0gZW5kfX0Ke3stIGVuZH19Cnt7LSBpZiAuR29iRW5jb2RlfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gR29iRGVjb2RlIGltcGxlbWVudHMgJ2dvYicgZGVjb2RpbmcgZm9yIHRoaXMgbWFwIHR5cGUuCi8vIFlvdSBtdXN0IHJlZ2lzdGVyIHt7LlR5cGV9fSB3aXRoIHRoZSAnZ29iJyBwYWNrYWdlIGJlZm9yZSB0aGlzIG1ldGhvZCBpcyB1c2VkLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgR29iRGVjb2RlKGIgW11ieXRlKSBlcnJvciB7CglidWYgOj0gYnl0ZXMuTmV3QnVmZmVyKGIpCglyZXR1cm4gZ29iLk5ld0RlY29kZXIoYnVmKS5EZWNvZGUoJm1tLm0pCn0KCi8vIEdvYkVuY29kZSBpbXBsZW1lbnRzICdnb2InIGVuY29kaW5nIGZvciB0aGlzIGxpc3QgdHlwZS4KLy8gWW91IG11c3QgcmVnaXN0ZXIge3suVHlwZX19IHdpdGggdGhlICdnb2InIHBhY2thZ2UgYmVmb3JlIHRoaXMgbWV0aG9kIGlzIHVzZWQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBHb2JFbmNvZGUoKSAoW11ieXRlLCBlcnJvcikgewoJYnVmIDo9ICZieXRlcy5CdWZmZXJ7fQoJZXJyIDo9IGdvYi5OZXdFbmNvZGVyKGJ1ZikuRW5jb2RlKG1tLm0pCglyZXR1cm4gYnVmLkJ5dGVzKCksIGVycgp9Cnt7LSBlbmR9fQo=\"")
		packr.PackJSONBytes("builtin", "immutable/set.tpl", "\"Ly8gQW4gZW5jYXBzdWxhdGVkIGltbXV0YWJsZSBtYXBbe3suVHlwZS5OYW1lfX1dc3RydWN0e30gdXNlZCBhcyBhIHNldC4KLy8gVGhyZWFkLXNhZmUuCi8ve3tpZiAuVHlwZS5Jc1B0cn19Ci8vIFdhcm5pbmc6IFRISVMgQ09MTEVDVElPTiBJUyBOT1QgREVTSUdORUQgVE8gQkUgVVNFRCBXSVRIIFBPSU5URVIgVFlQRVMuCi8ve3tlbmR9fQovLwovLyBHZW5lcmF0ZWQgZnJvbSB7ey5UZW1wbGF0ZUZpbGV9fSB3aXRoIFR5cGU9e3suVHlwZS5OYW1lfX0KLy8gb3B0aW9uczogQ29tcGFyYWJsZTphbHdheXMgTnVtZXJpYzp7ey5OdW1lcmljfX0gT3JkZXJlZDp7ey5PcmRlcmVkfX0gU3RyaW5nZXI6e3suU3RyaW5nZXJ9fSBNdXRhYmxlOmRpc2FibGVkCi8vIGJ5IHJ1bnRlbXBsYXRlIHt7LkFwcFZlcnNpb259fQovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pvaGFuYnJhbmRob3JzdC9ydW50ZW1wbGF0ZS9ibG9iL21hc3Rlci9CVUlMVElOLm1kCgpwYWNrYWdlIHt7LlBhY2thZ2V9fQoKe3tpZiBvciAob3IgLlN0cmluZ2VyIC5Hb2JFbmNvZGUpIC5IYXNJbXBvcnQgLX19CmltcG9ydCAoCnt7LSBpZiBvciAuU3RyaW5nZXIgLkdvYkVuY29kZX19CgkiYnl0ZXMiCnt7LSBlbmR9fQp7ey0gaWYgLkdvYkVuY29kZX19CgkiZW5jb2RpbmcvZ29iIgp7ey0gZW5kfX0Ke3stIGlmIC5TdHJpbmdlcn19CgkiZW5jb2RpbmcvanNvbiIKCSJmbXQiCnt7LSBlbmR9fQp7ey0gaWYgLkhhc0ltcG9ydH19Cgl7ey5JbXBvcnR9fQp7e2VuZH19CikKCnt7ZW5kIC19fQovLyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgaXMgdGhlIHByaW1hcnkgdHlwZSB0aGF0IHJlcHJlc2VudHMgYSBzZXQuCnR5cGUge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHN0cnVjdCB7CgltIG1hcFt7ey5UeXBlLk5hbWV9fV1zdHJ1Y3R7fQp9CgovLyBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgY3JlYXRlcyBhbmQgcmV0dXJucyBhIHJlZmVyZW5jZSB0byBhbiBlbXB0eSBzZXQuCmZ1bmMgTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KHZhbHVlcyAuLi57ey5UeXBlLk5hbWV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglzZXQgOj0gJnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldHsKCQltOiBtYWtlKG1hcFt7ey5UeXBlLk5hbWV9fV1zdHJ1Y3R7fSksCgl9Cglmb3IgXywgaSA6PSByYW5nZSB2YWx1ZXMgewoJCXNldC5tW2ldID0gc3RydWN0e317fQoJfQoJcmV0dXJuIHNldAp9CgovLyBDb252ZXJ0e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IGNvbnN0cnVjdHMgYSBuZXcgc2V0IGNvbnRhaW5pbmcgdGhlIHN1cHBsaWVkIHZhbHVlcywgaWYgYW55LgovLyBUaGUgcmV0dXJuZWQgYm9vbGVhbiB3aWxsIGJlIGZhbHNlIGlmIGFueSBvZiB0aGUgdmFsdWVzIGNvdWxkIG5vdCBiZSBjb252ZXJ0ZWQgY29ycmVjdGx5LgovLyBUaGUgcmV0dXJuZWQgc2V0IHdpbGwgY29udGFpbiBhbGwgdGhlIHZhbHVlcyB0aGF0IHdlcmUgY29ycmVjdGx5IGNvbnZlcnRlZC4KZnVuYyBDb252ZXJ0e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKCp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQsIGJvb2wpIHsKCXNldCA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoKCWZvciBfLCBpIDo9IHJhbmdlIHZhbHVlcyB7CgkJc3dpdGNoIGogOj0gaS4odHlwZSkgewp7ey0gaWYgLk51bWVyaWN9fQoJCWNhc2UgaW50OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKmludDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSBpbnQ4OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKmludDg6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgaW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqaW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgaW50MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqaW50MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgaW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqaW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgdWludDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlICp1aW50OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlIHVpbnQ4OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKnVpbnQ4OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlIHVpbnQxNjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlICp1aW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgdWludDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKnVpbnQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSB1aW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqdWludDY0OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlIGZsb2F0MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqZmxvYXQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSBmbG9hdDY0OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKmZsb2F0NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQp7ey0gZWxzZX19CgkJY2FzZSB7ey5UeXBlLk5hbWV9fToKCQkJc2V0Lm1bal0gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqe3suVHlwZS5OYW1lfX06CgkJCXNldC5tWypqXSA9IHN0cnVjdHt9e30Ke3stIGVuZH19CgkJfQoJfQoKCXJldHVybiBzZXQsIGxlbihzZXQubSkgPT0gbGVuKHZhbHVlcykKfQoKLy8gQnVpbGR7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXRGcm9tQ2hhbiBjb25zdHJ1Y3RzIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBmcm9tIGEgY2hhbm5lbCB0aGF0IHN1cHBsaWVzIGEgc2VxdWVuY2UKLy8gb2YgdmFsdWVzIHVudGlsIGl0IGlzIGNsb3NlZC4gVGhlIGZ1bmN0aW9uIGRvZXNuJ3QgcmV0dXJuIHVudGlsIHRoZW4uCmZ1bmMgQnVpbGR7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXRGcm9tQ2hhbihzb3VyY2UgPC1jaGFuIHt7LlR5cGUuTmFtZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHsKCXNldCA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoJZm9yIHYgOj0gcmFuZ2Ugc291cmNlIHsKCQlzZXQubVt2XSA9IHN0cnVjdHt9e30KCX0KCXJldHVybiBzZXQKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBJc1NlcXVlbmNlIHJldHVybnMgdHJ1ZSBmb3IgbGlzdHMgYW5kIHF1ZXVlcy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIElzU2VxdWVuY2UoKSBib29sIHsKCXJldHVybiBmYWxzZQp9CgovLyBJc1NldCByZXR1cm5zIGZhbHNlIGZvciBsaXN0cyBvciBxdWV1ZXMuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBJc1NldCgpIGJvb2wgewoJcmV0dXJuIHRydWUKfQp7ey0gaWYgLlRvTGlzdH19CgovLyBUb0xpc3QgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgdGhlIHNldCBhcyBhIGxpc3QuIFRoZSByZXR1cm5lZCBsaXN0IGlzIGEgc2hhbGxvdwovLyBjb3B5OyB0aGUgc2V0IGlzIG5vdCBhbHRlcmVkLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgVG9MaXN0KCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJldHVybiAme3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdHsKCQltOiBzZXQuVG9TbGljZSgpLAoJfQp9Cnt7LSBlbmR9fQoKLy8gVG9TZXQgcmV0dXJucyB0aGUgc2V0OyB0aGlzIGlzIGFuIGlkZW50aXR5IG9wZXJhdGlvbiBpbiB0aGlzIGNhc2UuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBUb1NldCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJcmV0dXJuIHNldAp9CgovLyBUb1NsaWNlIHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBjdXJyZW50IHNldCBhcyBhIHNsaWNlLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgVG9TbGljZSgpIFtde3suVHlwZS5OYW1lfX0gewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXMgOj0gbWFrZShbXXt7LlR5cGUuTmFtZX19LCAwLCBsZW4oc2V0Lm0pKQoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCXMgPSBhcHBlbmQocywgdikKCX0KCXJldHVybiBzCn0KCi8vIFRvSW50ZXJmYWNlU2xpY2UgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgdGhlIGN1cnJlbnQgc2V0IGFzIGEgc2xpY2Ugb2YgYXJiaXRyYXJ5IHR5cGUuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBUb0ludGVyZmFjZVNsaWNlKCkgW11pbnRlcmZhY2V7fSB7CgoJcyA6PSBtYWtlKFtdaW50ZXJmYWNle30sIDAsIGxlbihzZXQubSkpCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJcyA9IGFwcGVuZChzLCB2KQoJfQoJcmV0dXJuIHMKfQoKLy8gQ2xvbmUgcmV0dXJucyB0aGUgc2FtZSBzZXQsIHdoaWNoIGlzIGltbXV0YWJsZS4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIENsb25lKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglyZXR1cm4gc2V0Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gSXNFbXB0eSByZXR1cm5zIHRydWUgaWYgdGhlIHNldCBpcyBlbXB0eS4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIElzRW1wdHkoKSBib29sIHsKCXJldHVybiBzZXQuU2l6ZSgpID09IDAKfQoKLy8gTm9uRW1wdHkgcmV0dXJucyB0cnVlIGlmIHRoZSBzZXQgaXMgbm90IGVtcHR5LgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgTm9uRW1wdHkoKSBib29sIHsKCXJldHVybiBzZXQuU2l6ZSgpID4gMAp9CgovLyBTaXplIHJldHVybnMgaG93IG1hbnkgaXRlbXMgYXJlIGN1cnJlbnRseSBpbiB0aGUgc2V0LiBUaGlzIGlzIGEgc3lub255bSBmb3IgQ2FyZGluYWxpdHkuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBTaXplKCkgaW50IHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiAwCgl9CgoJcmV0dXJuIGxlbihzZXQubSkKfQoKLy8gQ2FyZGluYWxpdHkgcmV0dXJucyBob3cgbWFueSBpdGVtcyBhcmUgY3VycmVudGx5IGluIHRoZSBzZXQuIFRoaXMgaXMgYSBzeW5vbnltIGZvciBTaXplLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgQ2FyZGluYWxpdHkoKSBpbnQgewoJcmV0dXJuIHNldC5TaXplKCkKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBBZGQgcmV0dXJucyBhIG5ldyBzZXQgd2l0aCBhbGwgb3JpZ2luYWwgaXRlbXMgYW5kIGFsbCBpbiBgbW9yZWAuCi8vIFRoZSBvcmlnaW5hbCBzZXQgaXMgbm90IGFsdGVyZWQuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBBZGQobW9yZSAuLi57ey5UeXBlLk5hbWV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CgluZXdTZXQgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KCkKCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJbmV3U2V0LmRvQWRkKHYpCgl9CgoJZm9yIF8sIHYgOj0gcmFuZ2UgbW9yZSB7CgkJbmV3U2V0LmRvQWRkKHYpCgl9CgoJcmV0dXJuIG5ld1NldAp9CgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgZG9BZGQoaSB7ey5UeXBlLk5hbWV9fSkgewoJc2V0Lm1baV0gPSBzdHJ1Y3R7fXt9Cn0KCi8vIENvbnRhaW5zIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGl0ZW0gaXMgYWxyZWFkeSBpbiB0aGUgc2V0LCByZXR1cm5pbmcgdHJ1ZSBpZiBzby4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIENvbnRhaW5zKGkge3suVHlwZS5OYW1lfX0pIGJvb2wgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJXywgZm91bmQgOj0gc2V0Lm1baV0KCXJldHVybiBmb3VuZAp9CgovLyBDb250YWluc0FsbCBkZXRlcm1pbmVzIHdoZXRoZXIgYSBnaXZlbiBpdGVtIGlzIGFscmVhZHkgaW4gdGhlIHNldCwgcmV0dXJuaW5nIHRydWUgaWYgc28uCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBDb250YWluc0FsbChpIC4uLnt7LlR5cGUuTmFtZX19KSBib29sIHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBmYWxzZQoJfQoKCWZvciBfLCB2IDo9IHJhbmdlIGkgewoJCWlmICFzZXQuQ29udGFpbnModikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIElzU3Vic2V0IGRldGVybWluZXMgd2hldGhlciBldmVyeSBpdGVtIGluIHRoZSBvdGhlciBzZXQgaXMgaW4gdGhpcyBzZXQsIHJldHVybmluZyB0cnVlIGlmIHNvLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgSXNTdWJzZXQob3RoZXIgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgYm9vbCB7CglpZiBzZXQuSXNFbXB0eSgpIHsKCQlyZXR1cm4gIW90aGVyLklzRW1wdHkoKQoJfQoKCWlmIG90aGVyLklzRW1wdHkoKSB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmICFvdGhlci5Db250YWlucyh2KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0KCi8vIElzU3VwZXJzZXQgZGV0ZXJtaW5lcyB3aGV0aGVyIGV2ZXJ5IGl0ZW0gb2YgdGhpcyBzZXQgaXMgaW4gdGhlIG90aGVyIHNldCwgcmV0dXJuaW5nIHRydWUgaWYgc28uCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBJc1N1cGVyc2V0KG90aGVyICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIGJvb2wgewoJcmV0dXJuIG90aGVyLklzU3Vic2V0KHNldCkKfQoKLy8gVW5pb24gcmV0dXJucyBhIG5ldyBzZXQgd2l0aCBhbGwgaXRlbXMgaW4gYm90aCBzZXRzLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgVW5pb24ob3RoZXIgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gb3RoZXIKCX0KCglpZiBvdGhlciA9PSBuaWwgewoJCXJldHVybiBzZXQKCX0KCgl1bmlvbmVkU2V0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCXVuaW9uZWRTZXQuZG9BZGQodikKCX0KCglmb3IgdiA6PSByYW5nZSBvdGhlci5tIHsKCQl1bmlvbmVkU2V0LmRvQWRkKHYpCgl9CgoJcmV0dXJuIHVuaW9uZWRTZXQKfQoKLy8gSW50ZXJzZWN0IHJldHVybnMgYSBuZXcgc2V0IHdpdGggaXRlbXMgdGhhdCBleGlzdCBvbmx5IGluIGJvdGggc2V0cy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEludGVyc2VjdChvdGhlciAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHsKCWlmIHNldCA9PSBuaWwgfHwgb3RoZXIgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJaW50ZXJzZWN0aW9uIDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCgoJLy8gbG9vcCBvdmVyIHNtYWxsZXIgc2V0CglpZiBzZXQuU2l6ZSgpIDwgb3RoZXIuU2l6ZSgpIHsKCQlmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJCWlmIG90aGVyLkNvbnRhaW5zKHYpIHsKCQkJCWludGVyc2VjdGlvbi5kb0FkZCh2KQoJCQl9CgkJfQoJfSBlbHNlIHsKCQlmb3IgdiA6PSByYW5nZSBvdGhlci5tIHsKCQkJaWYgc2V0LkNvbnRhaW5zKHYpIHsKCQkJCWludGVyc2VjdGlvbi5kb0FkZCh2KQoJCQl9CgkJfQoJfQoKCXJldHVybiBpbnRlcnNlY3Rpb24KfQoKLy8gRGlmZmVyZW5jZSByZXR1cm5zIGEgbmV3IHNldCB3aXRoIGl0ZW1zIGluIHRoZSBjdXJyZW50IHNldCBidXQgbm90IGluIHRoZSBvdGhlciBzZXQKZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIERpZmZlcmVuY2Uob3RoZXIgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJaWYgb3RoZXIgPT0gbmlsIHsKCQlyZXR1cm4gc2V0Cgl9CgoJZGlmZmVyZW5jZWRTZXQgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KCkKCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgIW90aGVyLkNvbnRhaW5zKHYpIHsKCQkJZGlmZmVyZW5jZWRTZXQuZG9BZGQodikKCQl9Cgl9CgoJcmV0dXJuIGRpZmZlcmVuY2VkU2V0Cn0KCi8vIFN5bW1ldHJpY0RpZmZlcmVuY2UgcmV0dXJucyBhIG5ldyBzZXQgd2l0aCBpdGVtcyBpbiB0aGUgY3VycmVudCBzZXQgb3IgdGhlIG90aGVyIHNldCBidXQgbm90IGluIGJvdGguCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBTeW1tZXRyaWNEaWZmZXJlbmNlKG90aGVyICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJYURpZmYgOj0gc2V0LkRpZmZlcmVuY2Uob3RoZXIpCgliRGlmZiA6PSBvdGhlci5EaWZmZXJlbmNlKHNldCkKCXJldHVybiBhRGlmZi5VbmlvbihiRGlmZikKfQoKLy8gUmVtb3ZlIHJlbW92ZXMgYSBzaW5nbGUgaXRlbSBmcm9tIHRoZSBzZXQuIEEgbmV3IHNldCBpcyByZXR1cm5lZCB0aGF0IGhhcyBhbGwgdGhlIGVsZW1lbnRzIGV4Y2VwdCB0aGUgcmVtb3ZlZCBvbmUuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBSZW1vdmUoaSB7ey5UeXBlLk5hbWV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJY2xvbmVkU2V0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmIGkgIT0gdiB7CgkJCWNsb25lZFNldC5kb0FkZCh2KQoJCX0KCX0KCglyZXR1cm4gY2xvbmVkU2V0Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gU2VuZCByZXR1cm5zIGEgY2hhbm5lbCB0aGF0IHdpbGwgc2VuZCBhbGwgdGhlIGVsZW1lbnRzIGluIG9yZGVyLgovLyBBIGdvcm91dGluZSBpcyBjcmVhdGVkIHRvIHNlbmQgdGhlIGVsZW1lbnRzOyB0aGlzIG9ubHkgdGVybWluYXRlcyB3aGVuIGFsbCB0aGUgZWxlbWVudHMgaGF2ZSBiZWVuIGNvbnN1bWVkCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBTZW5kKCkgPC1jaGFuIHt7LlR5cGUuTmFtZX19IHsKCWNoIDo9IG1ha2UoY2hhbiB7ey5UeXBlLk5hbWV9fSkKCWdvIGZ1bmMoKSB7CgkJaWYgc2V0ICE9IG5pbCB7CgkJCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQkJCWNoIDwtIHYKCQkJfQoJCX0KCQljbG9zZShjaCkKCX0oKQoKCXJldHVybiBjaAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEZvcmFsbCBhcHBsaWVzIGEgcHJlZGljYXRlIGZ1bmN0aW9uIHAgdG8gZXZlcnkgZWxlbWVudCBpbiB0aGUgc2V0LiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBmYWxzZSwKLy8gdGhlIGl0ZXJhdGlvbiB0ZXJtaW5hdGVzIGVhcmx5LiBUaGUgcmV0dXJuZWQgdmFsdWUgaXMgdHJ1ZSBpZiBhbGwgZWxlbWVudHMgd2VyZSB2aXNpdGVkLAovLyBvciBmYWxzZSBpZiBhbiBlYXJseSByZXR1cm4gb2NjdXJyZWQuCi8vCi8vIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBjYW4gYWxzbyBiZSB1c2VkIHNpbXBseSBhcyBhIHdheSB0byB2aXNpdCBldmVyeSBlbGVtZW50IHVzaW5nIGEgZnVuY3Rpb24KLy8gd2l0aCBzb21lIHNpZGUtZWZmZWN0czsgc3VjaCBhIGZ1bmN0aW9uIG11c3QgYWx3YXlzIHJldHVybiB0cnVlLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgRm9yYWxsKHAgZnVuYyh7ey5UeXBlLk5hbWV9fSkgYm9vbCkgYm9vbCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gdHJ1ZQoJfQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlpZiAhcCh2KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0KCi8vIEV4aXN0cyBhcHBsaWVzIGEgcHJlZGljYXRlIHAgdG8gZXZlcnkgZWxlbWVudCBpbiB0aGUgc2V0LiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyB0cnVlLAovLyB0aGUgaXRlcmF0aW9uIHRlcm1pbmF0ZXMgZWFybHkuIFRoZSByZXR1cm5lZCB2YWx1ZSBpcyB0cnVlIGlmIGFuIGVhcmx5IHJldHVybiBvY2N1cnJlZC4KLy8gb3IgZmFsc2UgaWYgYWxsIGVsZW1lbnRzIHdlcmUgdmlzaXRlZCB3aXRob3V0IGZpbmRpbmcgYSBtYXRjaC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEV4aXN0cyhwIGZ1bmMoe3suVHlwZS5OYW1lfX0pIGJvb2wpIGJvb2wgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmIHAodikgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCX0KCXJldHVybiBmYWxzZQp9CgovLyBGb3JlYWNoIGl0ZXJhdGVzIG92ZXIge3suVHlwZS5OYW1lfX1TZXQgYW5kIGV4ZWN1dGVzIHRoZSBmdW5jdGlvbiBmIGFnYWluc3QgZWFjaCBlbGVtZW50LgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgRm9yZWFjaChmIGZ1bmMoe3suVHlwZS5OYW1lfX0pKSB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4KCX0KCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJZih2KQoJfQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEZpbmQgcmV0dXJucyB0aGUgZmlyc3Qge3suVHlwZS5OYW1lfX0gdGhhdCByZXR1cm5zIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4gSWYgdGhlcmUgYXJlIG1hbnkgbWF0Y2hlcwovLyBvbmUgaXMgYXJidHJhcmlseSBjaG9zZW4uIEZhbHNlIGlzIHJldHVybmVkIGlmIG5vbmUgbWF0Y2guCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBGaW5kKHAgZnVuYyh7ey5UeXBlLk5hbWV9fSkgYm9vbCkgKHt7LlR5cGUuTmFtZX19LCBib29sKSB7CgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmIHAodikgewoJCQlyZXR1cm4gdiwgdHJ1ZQoJCX0KCX0Ke3stIGlmIGVxIC5UeXBlLlN0YXIgIioifX0KCglyZXR1cm4gbmlsLCBmYWxzZQp7ey0gZWxzZX19CgoJdmFyIGVtcHR5IHt7LlR5cGUuTmFtZX19CglyZXR1cm4gZW1wdHksIGZhbHNlCnt7LSBlbmR9fQp9CgovLyBGaWx0ZXIgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgd2hvc2UgZWxlbWVudHMgcmV0dXJuIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEZpbHRlcihwIGZ1bmMoe3suVHlwZS5OYW1lfX0pIGJvb2wpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlpZiBwKHYpIHsKCQkJcmVzdWx0LmRvQWRkKHYpCgkJfQoJfQoJcmV0dXJuIHJlc3VsdAp9CgovLyBQYXJ0aXRpb24gcmV0dXJucyB0d28gbmV3IHt7LlR5cGUuTmFtZX19U2V0cyB3aG9zZSBlbGVtZW50cyByZXR1cm4gdHJ1ZSBvciBmYWxzZSBmb3IgdGhlIHByZWRpY2F0ZSwgcC4KLy8gVGhlIGZpcnN0IHJlc3VsdCBjb25zaXN0cyBvZiBhbGwgZWxlbWVudHMgdGhhdCBzYXRpc2Z5IHRoZSBwcmVkaWNhdGUgYW5kIHRoZSBzZWNvbmQgcmVzdWx0IGNvbnNpc3RzIG9mCi8vIGFsbCBlbGVtZW50cyB0aGF0IGRvbid0LiBUaGUgcmVsYXRpdmUgb3JkZXIgb2YgdGhlIGVsZW1lbnRzIGluIHRoZSByZXN1bHRzIGlzIHRoZSBzYW1lIGFzIGluIHRoZQovLyBvcmlnaW5hbCBsaXN0LgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgUGFydGl0aW9uKHAgZnVuYyh7ey5UeXBlLk5hbWV9fSkgYm9vbCkgKCp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQsICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBuaWwsIG5pbAoJfQoKCW1hdGNoaW5nIDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCglvdGhlcnMgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KCkKCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgcCh2KSB7CgkJCW1hdGNoaW5nLmRvQWRkKHYpCgkJfSBlbHNlIHsKCQkJb3RoZXJzLmRvQWRkKHYpCgkJfQoJfQoJcmV0dXJuIG1hdGNoaW5nLCBvdGhlcnMKfQoKLy8gTWFwIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggYSBmdW5jdGlvbiBmLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBNYXAoZiBmdW5jKHt7LlR5cGUuTmFtZX19KSB7ey5UeXBlLk5hbWV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCXJlc3VsdC5tW2YodildID0gc3RydWN0e317fQoJfQoKCXJldHVybiByZXN1bHQKfQoKLy8gRmxhdE1hcCByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIGEgZnVuY3Rpb24gZiB0aGF0Ci8vIHJldHVybnMgemVybyBvciBtb3JlIGl0ZW1zIGluIGEgc2xpY2UuIFRoZSByZXN1bHRpbmcgc2V0IG1heSBoYXZlIGEgZGlmZmVyZW50IHNpemUgdG8gdGhlIG9yaWdpbmFsIHNldC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgRmxhdE1hcChmIGZ1bmMoe3suVHlwZS5OYW1lfX0pIFtde3suVHlwZS5OYW1lfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlmb3IgXywgeCA6PSByYW5nZSBmKHYpIHsKCQkJcmVzdWx0Lm1beF0gPSBzdHJ1Y3R7fXt9CgkJfQoJfQoKCXJldHVybiByZXN1bHQKfQoKLy8gQ291bnRCeSBnaXZlcyB0aGUgbnVtYmVyIGVsZW1lbnRzIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB0aGF0IHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBDb3VudEJ5KHAgZnVuYyh7ey5UeXBlLk5hbWV9fSkgYm9vbCkgKHJlc3VsdCBpbnQpIHsKCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgcCh2KSB7CgkJCXJlc3VsdCsrCgkJfQoJfQoJcmV0dXJuCn0Ke3stIGlmIC5PcmRlcmVkfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBUaGVzZSBtZXRob2RzIGFyZSBpbmNsdWRlZCB3aGVuIHt7LlR5cGUuTmFtZX19IGlzIG9yZGVyZWQuCgovLyBNaW4gcmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBjb250YWluaW5nIHRoZSBtaW5pbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzLgovLyBQYW5pY3MgaWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBNaW4oKSB7ey5UeXBlLk5hbWV9fSB7CgoJdmFyIG0ge3suVHlwZS5OYW1lfX0KCWZpcnN0IDo9IHRydWUKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlpZiBmaXJzdCB7CgkJCW0gPSB2CgkJCWZpcnN0ID0gZmFsc2UKCQl9IGVsc2UgaWYgdiA8IG0gewoJCQltID0gdgoJCX0KCX0KCXJldHVybiBtCn0KCi8vIE1heCByZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIG1heGltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMuCi8vIFBhbmljcyBpZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1heCgpIChyZXN1bHQge3suVHlwZS5OYW1lfX0pIHsKCgl2YXIgbSB7ey5UeXBlLk5hbWV9fQoJZmlyc3QgOj0gdHJ1ZQoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmIGZpcnN0IHsKCQkJbSA9IHYKCQkJZmlyc3QgPSBmYWxzZQoJCX0gZWxzZSBpZiB2ID4gbSB7CgkJCW0gPSB2CgkJfQoJfQoJcmV0dXJuIG0KfQp7ey0gZW5kfX0KCi8vIE1pbkJ5IHJldHVybnMgYW4gZWxlbWVudCBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgY29udGFpbmluZyB0aGUgbWluaW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cwovLyB1c2luZyBhIHBhc3NlZCBmdW5jIGRlZmluaW5nIOKAmGxlc3PigJkuIEluIHRoZSBjYXNlIG9mIG11bHRpcGxlIGl0ZW1zIGJlaW5nIGVxdWFsbHkgbWluaW1hbCwgdGhlIGZpcnN0IHN1Y2gKLy8gZWxlbWVudCBpcyByZXR1cm5lZC4gUGFuaWNzIGlmIHRoZXJlIGFyZSBubyBlbGVtZW50cy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1pbkJ5KGxlc3MgZnVuYyh7ey5UeXBlLk5hbWV9fSwge3suVHlwZS5OYW1lfX0pIGJvb2wpIHt7LlR5cGUuTmFtZX19IHsKCWlmIHNldC5Jc0VtcHR5KCkgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtaW5pbXVtIG9mIGFuIGVtcHR5IHNldC4iKQoJfQoKCXZhciBtIHt7LlR5cGUuTmFtZX19CglmaXJzdCA6PSB0cnVlCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgZmlyc3QgewoJCQltID0gdgoJCQlmaXJzdCA9IGZhbHNlCgkJfSBlbHNlIGlmIGxlc3ModiwgbSkgewoJCQltID0gdgoJCX0KCX0KCXJldHVybiBtCn0KCi8vIE1heEJ5IHJldHVybnMgYW4gZWxlbWVudCBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgY29udGFpbmluZyB0aGUgbWF4aW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cwovLyB1c2luZyBhIHBhc3NlZCBmdW5jIGRlZmluaW5nIOKAmGxlc3PigJkuIEluIHRoZSBjYXNlIG9mIG11bHRpcGxlIGl0ZW1zIGJlaW5nIGVxdWFsbHkgbWF4aW1hbCwgdGhlIGZpcnN0IHN1Y2gKLy8gZWxlbWVudCBpcyByZXR1cm5lZC4gUGFuaWNzIGlmIHRoZXJlIGFyZSBubyBlbGVtZW50cy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1heEJ5KGxlc3MgZnVuYyh7ey5UeXBlLk5hbWV9fSwge3suVHlwZS5OYW1lfX0pIGJvb2wpIHt7LlR5cGUuTmFtZX19IHsKCWlmIHNldC5Jc0VtcHR5KCkgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtaW5pbXVtIG9mIGFuIGVtcHR5IHNldC4iKQoJfQoKCXZhciBtIHt7LlR5cGUuTmFtZX19CglmaXJzdCA6PSB0cnVlCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgZmlyc3QgewoJCQltID0gdgoJCQlmaXJzdCA9IGZhbHNlCgkJfSBlbHNlIGlmIGxlc3MobSwgdikgewoJCQltID0gdgoJCX0KCX0KCXJldHVybiBtCn0Ke3stIGlmIC5OdW1lcmljfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBUaGVzZSBtZXRob2RzIGFyZSBpbmNsdWRlZCB3aGVuIHt7LlR5cGUuTmFtZX19IGlzIG51bWVyaWMuCgovLyBTdW0gcmV0dXJucyB0aGUgc3VtIG9mIGFsbCB0aGUgZWxlbWVudHMgaW4gdGhlIHNldC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFN1bSgpIHt7LlR5cGUuTmFtZX19IHsKCglzdW0gOj0ge3suVHlwZS5OYW1lfX0oMCkKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlzdW0gPSBzdW0gKyB7ey5UeXBlLlN0YXJ9fXYKCX0KCXJldHVybiBzdW0KfQp7ey0gZW5kfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gRXF1YWxzIGRldGVybWluZXMgd2hldGhlciB0d28gc2V0cyBhcmUgZXF1YWwgdG8gZWFjaCBvdGhlciwgcmV0dXJuaW5nIHRydWUgaWYgc28uCi8vIElmIHRoZXkgYm90aCBhcmUgdGhlIHNhbWUgc2l6ZSBhbmQgaGF2ZSB0aGUgc2FtZSBpdGVtcyB0aGV5IGFyZSBjb25zaWRlcmVkIGVxdWFsLgovLyBPcmRlciBvZiBpdGVtcyBpcyBub3QgcmVsZXZlbnQgZm9yIHNldHMgdG8gYmUgZXF1YWwuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBFcXVhbHMob3RoZXIgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgYm9vbCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gb3RoZXIgPT0gbmlsIHx8IG90aGVyLklzRW1wdHkoKQoJfQoKCWlmIG90aGVyID09IG5pbCB7CgkJcmV0dXJuIHNldC5Jc0VtcHR5KCkKCX0KCglpZiBzZXQuU2l6ZSgpICE9IG90aGVyLlNpemUoKSB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmICFvdGhlci5Db250YWlucyh2KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCglyZXR1cm4gdHJ1ZQp9Cnt7LSBpZiAuU3RyaW5nZXJ9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBTdHJpbmdMaXN0IGdldHMgYSBsaXN0IG9mIHN0cmluZ3MgdGhhdCBkZXBpY3RzIGFsbCB0aGUgZWxlbWVudHMuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBTdHJpbmdMaXN0KCkgW11zdHJpbmcgewoKCXN0cmluZ3MgOj0gbWFrZShbXXN0cmluZywgbGVuKHNldC5tKSkKCWkgOj0gMAoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCXN0cmluZ3NbaV0gPSBmbXQuU3ByaW50ZigiJXYiLCB2KQoJCWkrKwoJfQoJcmV0dXJuIHN0cmluZ3MKfQoKLy8gU3RyaW5nIGltcGxlbWVudHMgdGhlIFN0cmluZ2VyIGludGVyZmFjZSB0byByZW5kZXIgdGhlIHNldCBhcyBhIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmcgZW5jbG9zZWQgaW4gc3F1YXJlIGJyYWNrZXRzLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgU3RyaW5nKCkgc3RyaW5nIHsKCXJldHVybiBzZXQuTWtTdHJpbmczKCJbIiwgIiwgIiwgIl0iKQp9CgovLyBNa1N0cmluZyBjb25jYXRlbmF0ZXMgdGhlIHZhbHVlcyBhcyBhIHN0cmluZyB1c2luZyBhIHN1cHBsaWVkIHNlcGFyYXRvci4gTm8gZW5jbG9zaW5nIG1hcmtzIGFyZSBhZGRlZC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZyB7CglyZXR1cm4gc2V0Lk1rU3RyaW5nMygiIiwgc2VwLCAiIikKfQoKLy8gTWtTdHJpbmczIGNvbmNhdGVuYXRlcyB0aGUgdmFsdWVzIGFzIGEgc3RyaW5nLCB1c2luZyB0aGUgcHJlZml4LCBzZXBhcmF0b3IgYW5kIHN1ZmZpeCBzdXBwbGllZC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nIHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiAiIgoJfQoJcmV0dXJuIHNldC5ta1N0cmluZzNCeXRlcyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyKS5TdHJpbmcoKQp9CgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgbWtTdHJpbmczQnl0ZXMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpICpieXRlcy5CdWZmZXIgewoJYiA6PSAmYnl0ZXMuQnVmZmVye30KCWIuV3JpdGVTdHJpbmcoYmVmb3JlKQoJc2VwIDo9ICIiCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWIuV3JpdGVTdHJpbmcoc2VwKQoJCWIuV3JpdGVTdHJpbmcoZm10LlNwcmludGYoIiV2IiwgdikpCgkJc2VwID0gYmV0d2VlbgoJfQoJYi5Xcml0ZVN0cmluZyhhZnRlcikKCXJldHVybiBiCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gVW5tYXJzaGFsSlNPTiBpbXBsZW1lbnRzIEpTT04gZGVjb2RpbmcgZm9yIHRoaXMgc2V0IHR5cGUuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBVbm1hcnNoYWxKU09OKGIgW11ieXRlKSBlcnJvciB7CgoJdmFsdWVzIDo9IG1ha2UoW117ey5UeXBlLk5hbWV9fSwgMCkKCWVyciA6PSBqc29uLlVubWFyc2hhbChiLCAmdmFsdWVzKQoJaWYgZXJyICE9IG5pbCB7CgkJcmV0dXJuIGVycgoJfQoKCXMyIDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCh2YWx1ZXMuLi4pCgkqc2V0ID0gKnMyCglyZXR1cm4gbmlsCn0KCi8vIE1hcnNoYWxKU09OIGltcGxlbWVudHMgSlNPTiBlbmNvZGluZyBmb3IgdGhpcyBzZXQgdHlwZS4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpIHsKCglidWYsIGVyciA6PSBqc29uLk1hcnNoYWwoc2V0LlRvU2xpY2UoKSkKCXJldHVybiBidWYsIGVycgp9CgovLyBTdHJpbmdNYXAgcmVuZGVycyB0aGUgc2V0IGFzIGEgbWFwIG9mIHN0cmluZ3MuIFRoZSB2YWx1ZSBvZiBlYWNoIGl0ZW0gaW4gdGhlIHNldCBiZWNvbWVzIHN0cmluZ2lmaWVkIGFzIGEga2V5IGluIHRoZQovLyByZXN1bHRpbmcgbWFwLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgU3RyaW5nTWFwKCkgbWFwW3N0cmluZ11ib29sIHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglzdHJpbmdzIDo9IG1ha2UobWFwW3N0cmluZ11ib29sKQoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCXN0cmluZ3NbZm10LlNwcmludGYoIiV2IiwgdildID0gdHJ1ZQoJfQoJcmV0dXJuIHN0cmluZ3MKfQp7ey0gZW5kfX0Ke3stIGlmIC5Hb2JFbmNvZGV9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBHb2JEZWNvZGUgaW1wbGVtZW50cyAnZ29iJyBkZWNvZGluZyBmb3IgdGhpcyBzZXQgdHlwZS4KLy8gWW91IG11c3QgcmVnaXN0ZXIge3suVHlwZS5OYW1lfX0gd2l0aCB0aGUgJ2dvYicgcGFja2FnZSBiZWZvcmUgdGhpcyBtZXRob2QgaXMgdXNlZC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEdvYkRlY29kZShiIFtdYnl0ZSkgZXJyb3IgewoJYnVmIDo9IGJ5dGVzLk5ld0J1ZmZlcihiKQoJcmV0dXJuIGdvYi5OZXdEZWNvZGVyKGJ1ZikuRGVjb2RlKCZzZXQubSkKfQoKLy8gR29iRW5jb2RlIGltcGxlbWVudHMgJ2dvYicgZW5jb2RpbmcgZm9yIHRoaXMgbGlzdCB0eXBlLgovLyBZb3UgbXVzdCByZWdpc3RlciB7ey5UeXBlLk5hbWV9fSB3aXRoIHRoZSAnZ29iJyBwYWNrYWdlIGJlZm9yZSB0aGlzIG1ldGhvZCBpcyB1c2VkLgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBHb2JFbmNvZGUoKSAoW11ieXRlLCBlcnJvcikgewoJYnVmIDo9ICZieXRlcy5CdWZmZXJ7fQoJZXJyIDo9IGdvYi5OZXdFbmNvZGVyKGJ1ZikuRW5jb2RlKHNldC5tKQoJcmV0dXJuIGJ1Zi5CeXRlcygpLCBlcnIKfQp7ey0gZW5kfX0K\"")
		packr.PackJSONBytes("builtin", "immutable-list-api.txt", "\"ZnVuYyBOZXdUeXBlTGlzdCh2YWx1ZXMgLi4uVHlwZSkgKlR5cGVMaXN0CmZ1bmMgQ29udmVydFR5cGVMaXN0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKCpUeXBlTGlzdCwgYm9vbCkKZnVuYyBCdWlsZFR5cGVMaXN0RnJvbUNoYW4oc291cmNlIDwtY2hhbiBUeXBlKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIElzU2VxdWVuY2UoKSBib29sCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBJc1NldCgpIGJvb2wKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFRvTGlzdCgpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgVG9TZXQoKSAqVHlwZVNldApmdW5jIChsaXN0ICpUeXBlTGlzdCkgVG9TbGljZSgpIFtdVHlwZQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgVG9JbnRlcmZhY2VTbGljZSgpIFtdaW50ZXJmYWNle30KZnVuYyAobGlzdCAqVHlwZUxpc3QpIENsb25lKCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBHZXQoaSBpbnQpIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEhlYWQoKSBUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBIZWFkT3B0aW9uKCkgVHlwZQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgTGFzdCgpIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIExhc3RPcHRpb24oKSBUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBUYWlsKCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBJbml0KCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBJc0VtcHR5KCkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgTm9uRW1wdHkoKSBib29sCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTaXplKCkgaW50CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBMZW4oKSBpbnQKZnVuYyAobGlzdCAqVHlwZUxpc3QpIENvbnRhaW5zKHYgVHlwZSkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgQ29udGFpbnNBbGwoaSAuLi5UeXBlKSBib29sCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBFeGlzdHMocCBmdW5jKFR5cGUpIGJvb2wpIGJvb2wKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEZvcmFsbChwIGZ1bmMoVHlwZSkgYm9vbCkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRm9yZWFjaChmIGZ1bmMoVHlwZSkpCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTZW5kKCkgPC1jaGFuIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFJldmVyc2UoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFNodWZmbGUoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEFwcGVuZChtb3JlIC4uLlR5cGUpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgVGFrZShuIGludCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBEcm9wKG4gaW50KSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFRha2VMYXN0KG4gaW50KSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIERyb3BMYXN0KG4gaW50KSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFRha2VXaGlsZShwIGZ1bmMoVHlwZSkgYm9vbCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBEcm9wV2hpbGUocCBmdW5jKFR5cGUpIGJvb2wpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRmluZChwIGZ1bmMoVHlwZSkgYm9vbCkgKFR5cGUsIGJvb2wpCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBGaWx0ZXIocCBmdW5jKFR5cGUpIGJvb2wpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgUGFydGl0aW9uKHAgZnVuYyhUeXBlKSBib29sKSAoKlR5cGVMaXN0LCAqVHlwZUxpc3QpCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBNYXAoZiBmdW5jKFR5cGUpIFR5cGUpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRmxhdE1hcChmIGZ1bmMoVHlwZSkgW11UeXBlKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIENvdW50QnkocCBmdW5jKFR5cGUpIGJvb2wpIChyZXN1bHQgaW50KQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgTWluQnkobGVzcyBmdW5jKFR5cGUsIFR5cGUpIGJvb2wpIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIE1heEJ5KGxlc3MgZnVuYyhUeXBlLCBUeXBlKSBib29sKSBUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBEaXN0aW5jdEJ5KGVxdWFsIGZ1bmMoVHlwZSwgVHlwZSkgYm9vbCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBJbmRleFdoZXJlKHAgZnVuYyhUeXBlKSBib29sKSBpbnQKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEluZGV4V2hlcmUyKHAgZnVuYyhUeXBlKSBib29sLCBmcm9tIGludCkgaW50CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBMYXN0SW5kZXhXaGVyZShwIGZ1bmMoVHlwZSkgYm9vbCkgaW50CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBMYXN0SW5kZXhXaGVyZTIocCBmdW5jKFR5cGUpIGJvb2wsIGJlZm9yZSBpbnQpIGludApmdW5jIChzbCBzb3J0YWJsZVR5cGVMaXN0KSBMZXNzKGksIGogaW50KSBib29sCmZ1bmMgKHNsIHNvcnRhYmxlVHlwZUxpc3QpIExlbigpIGludApmdW5jIChzbCBzb3J0YWJsZVR5cGVMaXN0KSBTd2FwKGksIGogaW50KQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgU29ydEJ5KGxlc3MgZnVuYyhpLCBqIFR5cGUpIGJvb2wpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgU3RhYmxlU29ydEJ5KGxlc3MgZnVuYyhpLCBqIFR5cGUpIGJvb2wpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgU29ydGVkKCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTdGFibGVTb3J0ZWQoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIE1pbigpIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIE1heCgpIChyZXN1bHQgVHlwZSkKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFN1bSgpIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFN0cmluZ0xpc3QoKSBbXXN0cmluZwpmdW5jIChsaXN0ICpUeXBlTGlzdCkgU3RyaW5nKCkgc3RyaW5nCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcKZnVuYyAobGlzdCAqVHlwZUxpc3QpIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBVbm1hcnNoYWxKU09OKGIgW11ieXRlKSBlcnJvcgpmdW5jIChsaXN0IFR5cGVMaXN0KSBNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgR29iRGVjb2RlKGIgW11ieXRlKSBlcnJvcgpmdW5jIChsaXN0IFR5cGVMaXN0KSBHb2JFbmNvZGUoKSAoW11ieXRlLCBlcnJvcikK\"")
		packr.PackJSONBytes("builtin", "immutable-map-api.txt", "\"ZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMShrIEtleSwgdiBUeXBlKSBLZXlUeXBlVHVwbGVzCmZ1bmMgKHRzIEtleVR5cGVUdXBsZXMpIEFwcGVuZDIoazEgS2V5LCB2MSBUeXBlLCBrMiBLZXksIHYyIFR5cGUpIEtleVR5cGVUdXBsZXMKZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMyhrMSBLZXksIHYxIFR5cGUsIGsyIEtleSwgdjIgVHlwZSwgazMgS2V5LCB2MyBUeXBlKSBLZXlUeXBlVHVwbGVzCmZ1bmMgS2V5VHlwZVppcChrZXlzIC4uLktleSkgS2V5VHlwZVR1cGxlcwpmdW5jICh0cyBLZXlUeXBlVHVwbGVzKSBWYWx1ZXModmFsdWVzIC4uLlR5cGUpIEtleVR5cGVUdXBsZXMKZnVuYyBOZXdLZXlUeXBlTWFwMShrIEtleSwgdiBUeXBlKSAqS2V5VHlwZU1hcApmdW5jIE5ld0tleVR5cGVNYXAoa3YgLi4uS2V5VHlwZVR1cGxlKSAqS2V5VHlwZU1hcApmdW5jIChtbSAqS2V5VHlwZU1hcCkgS2V5cygpIFtdS2V5CmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBWYWx1ZXMoKSBbXVR5cGUKZnVuYyAobW0gKktleVR5cGVNYXApIFRvU2xpY2UoKSBbXUtleVR5cGVUdXBsZQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgR2V0KGsgS2V5KSAoVHlwZSwgYm9vbCkKZnVuYyAobW0gKktleVR5cGVNYXApIFB1dChrIEtleSwgdiBUeXBlKSAqS2V5VHlwZU1hcApmdW5jIChtbSAqS2V5VHlwZU1hcCkgQ29udGFpbnNLZXkoayBLZXkpIGJvb2wKZnVuYyAobW0gKktleVR5cGVNYXApIENvbnRhaW5zQWxsS2V5cyhrayAuLi5LZXkpIGJvb2wKZnVuYyAobW0gKktleVR5cGVNYXApIFNpemUoKSBpbnQKZnVuYyAobW0gKktleVR5cGVNYXApIElzRW1wdHkoKSBib29sCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBOb25FbXB0eSgpIGJvb2wKZnVuYyAobW0gKktleVR5cGVNYXApIEZvcmVhY2goZiBmdW5jKEtleSwgVHlwZSkpCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBGb3JhbGwoZiBmdW5jKEtleSwgVHlwZSkgYm9vbCkgYm9vbApmdW5jIChtbSAqS2V5VHlwZU1hcCkgRXhpc3RzKHAgZnVuYyhLZXksIFR5cGUpIGJvb2wpIGJvb2wKZnVuYyAobW0gKktleVR5cGVNYXApIEZpbmQocCBmdW5jKEtleSwgVHlwZSkgYm9vbCkgKEtleVR5cGVUdXBsZSwgYm9vbCkKZnVuYyAobW0gKktleVR5cGVNYXApIEZpbHRlcihwIGZ1bmMoS2V5LCBUeXBlKSBib29sKSAqS2V5VHlwZU1hcApmdW5jIChtbSAqS2V5VHlwZU1hcCkgUGFydGl0aW9uKHAgZnVuYyhLZXksIFR5cGUpIGJvb2wpIChtYXRjaGluZyAqS2V5VHlwZU1hcCwgb3RoZXJzICpLZXlUeXBlTWFwKQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgTWFwKGYgZnVuYyhLZXksIFR5cGUpIChLZXksIFR5cGUpKSAqS2V5VHlwZU1hcApmdW5jIChtbSAqS2V5VHlwZU1hcCkgRmxhdE1hcChmIGZ1bmMoS2V5LCBUeXBlKSBbXUtleVR5cGVUdXBsZSkgKktleVR5cGVNYXAKZnVuYyAobW0gKktleVR5cGVNYXApIENsb25lKCkgKktleVR5cGVNYXAKZnVuYyAobW0gKktleVR5cGVNYXApIFN0cmluZygpIHN0cmluZwpmdW5jIChtbSAqS2V5VHlwZU1hcCkgTWtTdHJpbmcoc2VwIHN0cmluZykgc3RyaW5nCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBNa1N0cmluZzMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpIHN0cmluZwpmdW5jIChtbSAqS2V5VHlwZU1hcCkgVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IKZnVuYyAobW0gKktleVR5cGVNYXApIE1hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBHb2JEZWNvZGUoYiBbXWJ5dGUpIGVycm9yCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBHb2JFbmNvZGUoKSAoW11ieXRlLCBlcnJvcikK\"")
		packr.PackJSONBytes("builtin", "immutable-plist-api.txt", "\"ZnVuYyBOZXdUeXBlTGlzdCh2YWx1ZXMgLi4uVHlwZSkgKlR5cGVMaXN0CmZ1bmMgQ29udmVydFR5cGVMaXN0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKCpUeXBlTGlzdCwgYm9vbCkKZnVuYyBCdWlsZFR5cGVMaXN0RnJvbUNoYW4oc291cmNlIDwtY2hhbiBUeXBlKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIElzU2VxdWVuY2UoKSBib29sCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBJc1NldCgpIGJvb2wKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFRvTGlzdCgpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgVG9TZXQoKSAqVHlwZVNldApmdW5jIChsaXN0ICpUeXBlTGlzdCkgVG9TbGljZSgpIFtdVHlwZQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgVG9JbnRlcmZhY2VTbGljZSgpIFtdaW50ZXJmYWNle30KZnVuYyAobGlzdCAqVHlwZUxpc3QpIENsb25lKCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBHZXQoaSBpbnQpIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEhlYWQoKSBUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBIZWFkT3B0aW9uKCkgVHlwZQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgTGFzdCgpIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIExhc3RPcHRpb24oKSBUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBUYWlsKCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBJbml0KCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBJc0VtcHR5KCkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgTm9uRW1wdHkoKSBib29sCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTaXplKCkgaW50CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBMZW4oKSBpbnQKZnVuYyAobGlzdCAqVHlwZUxpc3QpIENvbnRhaW5zKHYgVHlwZSkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgQ29udGFpbnNBbGwoaSAuLi5UeXBlKSBib29sCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBFeGlzdHMocCBmdW5jKFR5cGUpIGJvb2wpIGJvb2wKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEZvcmFsbChwIGZ1bmMoVHlwZSkgYm9vbCkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRm9yZWFjaChmIGZ1bmMoVHlwZSkpCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTZW5kKCkgPC1jaGFuIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFJldmVyc2UoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFNodWZmbGUoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEFwcGVuZChtb3JlIC4uLlR5cGUpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgVGFrZShuIGludCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBEcm9wKG4gaW50KSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFRha2VMYXN0KG4gaW50KSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIERyb3BMYXN0KG4gaW50KSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFRha2VXaGlsZShwIGZ1bmMoVHlwZSkgYm9vbCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBEcm9wV2hpbGUocCBmdW5jKFR5cGUpIGJvb2wpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRmluZChwIGZ1bmMoVHlwZSkgYm9vbCkgKFR5cGUsIGJvb2wpCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBGaWx0ZXIocCBmdW5jKFR5cGUpIGJvb2wpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgUGFydGl0aW9uKHAgZnVuYyhUeXBlKSBib29sKSAoKlR5cGVMaXN0LCAqVHlwZUxpc3QpCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBNYXAoZiBmdW5jKFR5cGUpIFR5cGUpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRmxhdE1hcChmIGZ1bmMoVHlwZSkgW11UeXBlKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIENvdW50QnkocCBmdW5jKFR5cGUpIGJvb2wpIChyZXN1bHQgaW50KQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgTWluQnkobGVzcyBmdW5jKFR5cGUsIFR5cGUpIGJvb2wpIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIE1heEJ5KGxlc3MgZnVuYyhUeXBlLCBUeXBlKSBib29sKSBUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBEaXN0aW5jdEJ5KGVxdWFsIGZ1bmMoVHlwZSwgVHlwZSkgYm9vbCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBJbmRleFdoZXJlKHAgZnVuYyhUeXBlKSBib29sKSBpbnQKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEluZGV4V2hlcmUyKHAgZnVuYyhUeXBlKSBib29sLCBmcm9tIGludCkgaW50CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBMYXN0SW5kZXhXaGVyZShwIGZ1bmMoVHlwZSkgYm9vbCkgaW50CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBMYXN0SW5kZXhXaGVyZTIocCBmdW5jKFR5cGUpIGJvb2wsIGJlZm9yZSBpbnQpIGludApmdW5jIChzbCBzb3J0YWJsZVR5cGVMaXN0KSBMZXNzKGksIGogaW50KSBib29sCmZ1bmMgKHNsIHNvcnRhYmxlVHlwZUxpc3QpIExlbigpIGludApmdW5jIChzbCBzb3J0YWJsZVR5cGVMaXN0KSBTd2FwKGksIGogaW50KQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgU29ydEJ5KGxlc3MgZnVuYyhpLCBqIFR5cGUpIGJvb2wpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgU3RhYmxlU29ydEJ5KGxlc3MgZnVuYyhpLCBqIFR5cGUpIGJvb2wpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgU29ydGVkKCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTdGFibGVTb3J0ZWQoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIE1pbigpIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIE1heCgpIChyZXN1bHQgVHlwZSkKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFN1bSgpIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFN0cmluZ0xpc3QoKSBbXXN0cmluZwpmdW5jIChsaXN0ICpUeXBlTGlzdCkgU3RyaW5nKCkgc3RyaW5nCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcKZnVuYyAobGlzdCAqVHlwZUxpc3QpIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBVbm1hcnNoYWxKU09OKGIgW11ieXRlKSBlcnJvcgpmdW5jIChsaXN0IFR5cGVMaXN0KSBNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgR29iRGVjb2RlKGIgW11ieXRlKSBlcnJvcgpmdW5jIChsaXN0IFR5cGVMaXN0KSBHb2JFbmNvZGUoKSAoW11ieXRlLCBlcnJvcikK\"")
		packr.PackJSONBytes("builtin", "immutable-pmap-api.txt", "\"ZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMShrICpLZXksIHYgKlR5cGUpIEtleVR5cGVUdXBsZXMKZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMihrMSAqS2V5LCB2MSAqVHlwZSwgazIgKktleSwgdjIgKlR5cGUpIEtleVR5cGVUdXBsZXMKZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMyhrMSAqS2V5LCB2MSAqVHlwZSwgazIgKktleSwgdjIgKlR5cGUsIGszICpLZXksIHYzICpUeXBlKSBLZXlUeXBlVHVwbGVzCmZ1bmMgS2V5VHlwZVppcChrZXlzIC4uLipLZXkpIEtleVR5cGVUdXBsZXMKZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgVmFsdWVzKHZhbHVlcyAuLi4qVHlwZSkgS2V5VHlwZVR1cGxlcwpmdW5jIE5ld0tleVR5cGVNYXAxKGsgKktleSwgdiAqVHlwZSkgKktleVR5cGVNYXAKZnVuYyBOZXdLZXlUeXBlTWFwKGt2IC4uLktleVR5cGVUdXBsZSkgKktleVR5cGVNYXAKZnVuYyAobW0gKktleVR5cGVNYXApIEtleXMoKSBbXSpLZXkKZnVuYyAobW0gKktleVR5cGVNYXApIFZhbHVlcygpIFtdKlR5cGUKZnVuYyAobW0gKktleVR5cGVNYXApIFRvU2xpY2UoKSBbXUtleVR5cGVUdXBsZQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgR2V0KGsgKktleSkgKCpUeXBlLCBib29sKQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgUHV0KGsgKktleSwgdiAqVHlwZSkgKktleVR5cGVNYXAKZnVuYyAobW0gKktleVR5cGVNYXApIENvbnRhaW5zS2V5KGsgKktleSkgYm9vbApmdW5jIChtbSAqS2V5VHlwZU1hcCkgQ29udGFpbnNBbGxLZXlzKGtrIC4uLipLZXkpIGJvb2wKZnVuYyAobW0gKktleVR5cGVNYXApIFNpemUoKSBpbnQKZnVuYyAobW0gKktleVR5cGVNYXApIElzRW1wdHkoKSBib29sCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBOb25FbXB0eSgpIGJvb2wKZnVuYyAobW0gKktleVR5cGVNYXApIEZvcmVhY2goZiBmdW5jKCpLZXksICpUeXBlKSkKZnVuYyAobW0gKktleVR5cGVNYXApIEZvcmFsbChmIGZ1bmMoKktleSwgKlR5cGUpIGJvb2wpIGJvb2wKZnVuYyAobW0gKktleVR5cGVNYXApIEV4aXN0cyhwIGZ1bmMoKktleSwgKlR5cGUpIGJvb2wpIGJvb2wKZnVuYyAobW0gKktleVR5cGVNYXApIEZpbmQocCBmdW5jKCpLZXksICpUeXBlKSBib29sKSAoS2V5VHlwZVR1cGxlLCBib29sKQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgRmlsdGVyKHAgZnVuYygqS2V5LCAqVHlwZSkgYm9vbCkgKktleVR5cGVNYXAKZnVuYyAobW0gKktleVR5cGVNYXApIFBhcnRpdGlvbihwIGZ1bmMoKktleSwgKlR5cGUpIGJvb2wpIChtYXRjaGluZyAqS2V5VHlwZU1hcCwgb3RoZXJzICpLZXlUeXBlTWFwKQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgTWFwKGYgZnVuYygqS2V5LCAqVHlwZSkgKCpLZXksICpUeXBlKSkgKktleVR5cGVNYXAKZnVuYyAobW0gKktleVR5cGVNYXApIEZsYXRNYXAoZiBmdW5jKCpLZXksICpUeXBlKSBbXUtleVR5cGVUdXBsZSkgKktleVR5cGVNYXAKZnVuYyAobW0gKktleVR5cGVNYXApIENsb25lKCkgKktleVR5cGVNYXAKZnVuYyAobW0gKktleVR5cGVNYXApIFN0cmluZygpIHN0cmluZwpmdW5jIChtbSAqS2V5VHlwZU1hcCkgTWtTdHJpbmcoc2VwIHN0cmluZykgc3RyaW5nCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBNa1N0cmluZzMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpIHN0cmluZwpmdW5jIChtbSAqS2V5VHlwZU1hcCkgVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IKZnVuYyAobW0gKktleVR5cGVNYXApIE1hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBHb2JEZWNvZGUoYiBbXWJ5dGUpIGVycm9yCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBHb2JFbmNvZGUoKSAoW11ieXRlLCBlcnJvcikK\"")
		packr.PackJSONBytes("builtin", "immutable-pset-api.txt", "\"ZnVuYyBOZXdUeXBlU2V0KHZhbHVlcyAuLi5UeXBlKSAqVHlwZVNldApmdW5jIENvbnZlcnRUeXBlU2V0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKCpUeXBlU2V0LCBib29sKQpmdW5jIEJ1aWxkVHlwZVNldEZyb21DaGFuKHNvdXJjZSA8LWNoYW4gVHlwZSkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBJc1NlcXVlbmNlKCkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIElzU2V0KCkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIFRvTGlzdCgpICpUeXBlTGlzdApmdW5jIChzZXQgKlR5cGVTZXQpIFRvU2V0KCkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBUb1NsaWNlKCkgW11UeXBlCmZ1bmMgKHNldCAqVHlwZVNldCkgVG9JbnRlcmZhY2VTbGljZSgpIFtdaW50ZXJmYWNle30KZnVuYyAoc2V0ICpUeXBlU2V0KSBDbG9uZSgpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgSXNFbXB0eSgpIGJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBOb25FbXB0eSgpIGJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBTaXplKCkgaW50CmZ1bmMgKHNldCAqVHlwZVNldCkgQ2FyZGluYWxpdHkoKSBpbnQKZnVuYyAoc2V0ICpUeXBlU2V0KSBBZGQobW9yZSAuLi5UeXBlKSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIENvbnRhaW5zKGkgVHlwZSkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIENvbnRhaW5zQWxsKGkgLi4uVHlwZSkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIFVuaW9uKG90aGVyICpUeXBlU2V0KSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIEludGVyc2VjdChvdGhlciAqVHlwZVNldCkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBEaWZmZXJlbmNlKG90aGVyICpUeXBlU2V0KSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIFN5bW1ldHJpY0RpZmZlcmVuY2Uob3RoZXIgKlR5cGVTZXQpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgUmVtb3ZlKGkgVHlwZSkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBTZW5kKCkgPC1jaGFuIFR5cGUKZnVuYyAoc2V0ICpUeXBlU2V0KSBGb3JhbGwocCBmdW5jKFR5cGUpIGJvb2wpIGJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBFeGlzdHMocCBmdW5jKFR5cGUpIGJvb2wpIGJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBGb3JlYWNoKGYgZnVuYyhUeXBlKSkKZnVuYyAoc2V0ICpUeXBlU2V0KSBGaW5kKHAgZnVuYyhUeXBlKSBib29sKSAoVHlwZSwgYm9vbCkKZnVuYyAoc2V0ICpUeXBlU2V0KSBGaWx0ZXIocCBmdW5jKFR5cGUpIGJvb2wpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgUGFydGl0aW9uKHAgZnVuYyhUeXBlKSBib29sKSAoKlR5cGVTZXQsICpUeXBlU2V0KQpmdW5jIChzZXQgKlR5cGVTZXQpIE1hcChmIGZ1bmMoVHlwZSkgVHlwZSkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBGbGF0TWFwKGYgZnVuYyhUeXBlKSBbXVR5cGUpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgQ291bnRCeShwIGZ1bmMoVHlwZSkgYm9vbCkgKHJlc3VsdCBpbnQpCmZ1bmMgKHNldCAqVHlwZVNldCkgTWluKCkgVHlwZQpmdW5jIChzZXQgKlR5cGVTZXQpIE1heCgpIChyZXN1bHQgVHlwZSkKZnVuYyAoc2V0ICpUeXBlU2V0KSBNaW5CeShsZXNzIGZ1bmMoVHlwZSwgVHlwZSkgYm9vbCkgVHlwZQpmdW5jIChzZXQgKlR5cGVTZXQpIE1heEJ5KGxlc3MgZnVuYyhUeXBlLCBUeXBlKSBib29sKSBUeXBlCmZ1bmMgKHNldCAqVHlwZVNldCkgU3VtKCkgVHlwZQpmdW5jIChzZXQgKlR5cGVTZXQpIFN0cmluZ0xpc3QoKSBbXXN0cmluZwpmdW5jIChzZXQgKlR5cGVTZXQpIFN0cmluZygpIHN0cmluZwpmdW5jIChzZXQgKlR5cGVTZXQpIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZwpmdW5jIChzZXQgKlR5cGVTZXQpIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nCmZ1bmMgKHNldCAqVHlwZVNldCkgVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IKZnVuYyAoc2V0ICpUeXBlU2V0KSBNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKQpmdW5jIChzZXQgKlR5cGVTZXQpIFN0cmluZ01hcCgpIG1hcFtzdHJpbmddYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIEdvYkRlY29kZShiIFtdYnl0ZSkgZXJyb3IKZnVuYyAoc2V0IFR5cGVTZXQpIEdvYkVuY29kZSgpIChbXWJ5dGUsIGVycm9yKQo=\"")
		packr.PackJSONBytes("builtin", "immutable-set-api.txt", "\"ZnVuYyBOZXdUeXBlU2V0KHZhbHVlcyAuLi5UeXBlKSAqVHlwZVNldApmdW5jIENvbnZlcnRUeXBlU2V0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKCpUeXBlU2V0LCBib29sKQpmdW5jIEJ1aWxkVHlwZVNldEZyb21DaGFuKHNvdXJjZSA8LWNoYW4gVHlwZSkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBJc1NlcXVlbmNlKCkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIElzU2V0KCkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIFRvTGlzdCgpICpUeXBlTGlzdApmdW5jIChzZXQgKlR5cGVTZXQpIFRvU2V0KCkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBUb1NsaWNlKCkgW11UeXBlCmZ1bmMgKHNldCAqVHlwZVNldCkgVG9JbnRlcmZhY2VTbGljZSgpIFtdaW50ZXJmYWNle30KZnVuYyAoc2V0ICpUeXBlU2V0KSBDbG9uZSgpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgSXNFbXB0eSgpIGJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBOb25FbXB0eSgpIGJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBTaXplKCkgaW50CmZ1bmMgKHNldCAqVHlwZVNldCkgQ2FyZGluYWxpdHkoKSBpbnQKZnVuYyAoc2V0ICpUeXBlU2V0KSBBZGQobW9yZSAuLi5UeXBlKSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIENvbnRhaW5zKGkgVHlwZSkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIENvbnRhaW5zQWxsKGkgLi4uVHlwZSkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIFVuaW9uKG90aGVyICpUeXBlU2V0KSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIEludGVyc2VjdChvdGhlciAqVHlwZVNldCkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBEaWZmZXJlbmNlKG90aGVyICpUeXBlU2V0KSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIFN5bW1ldHJpY0RpZmZlcmVuY2Uob3RoZXIgKlR5cGVTZXQpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgUmVtb3ZlKGkgVHlwZSkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBTZW5kKCkgPC1jaGFuIFR5cGUKZnVuYyAoc2V0ICpUeXBlU2V0KSBGb3JhbGwocCBmdW5jKFR5cGUpIGJvb2wpIGJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBFeGlzdHMocCBmdW5jKFR5cGUpIGJvb2wpIGJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBGb3JlYWNoKGYgZnVuYyhUeXBlKSkKZnVuYyAoc2V0ICpUeXBlU2V0KSBGaW5kKHAgZnVuYyhUeXBlKSBib29sKSAoVHlwZSwgYm9vbCkKZnVuYyAoc2V0ICpUeXBlU2V0KSBGaWx0ZXIocCBmdW5jKFR5cGUpIGJvb2wpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgUGFydGl0aW9uKHAgZnVuYyhUeXBlKSBib29sKSAoKlR5cGVTZXQsICpUeXBlU2V0KQpmdW5jIChzZXQgKlR5cGVTZXQpIE1hcChmIGZ1bmMoVHlwZSkgVHlwZSkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBGbGF0TWFwKGYgZnVuYyhUeXBlKSBbXVR5cGUpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgQ291bnRCeShwIGZ1bmMoVHlwZSkgYm9vbCkgKHJlc3VsdCBpbnQpCmZ1bmMgKHNldCAqVHlwZVNldCkgTWluKCkgVHlwZQpmdW5jIChzZXQgKlR5cGVTZXQpIE1heCgpIChyZXN1bHQgVHlwZSkKZnVuYyAoc2V0ICpUeXBlU2V0KSBNaW5CeShsZXNzIGZ1bmMoVHlwZSwgVHlwZSkgYm9vbCkgVHlwZQpmdW5jIChzZXQgKlR5cGVTZXQpIE1heEJ5KGxlc3MgZnVuYyhUeXBlLCBUeXBlKSBib29sKSBUeXBlCmZ1bmMgKHNldCAqVHlwZVNldCkgU3VtKCkgVHlwZQpmdW5jIChzZXQgKlR5cGVTZXQpIFN0cmluZ0xpc3QoKSBbXXN0cmluZwpmdW5jIChzZXQgKlR5cGVTZXQpIFN0cmluZygpIHN0cmluZwpmdW5jIChzZXQgKlR5cGVTZXQpIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZwpmdW5jIChzZXQgKlR5cGVTZXQpIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nCmZ1bmMgKHNldCAqVHlwZVNldCkgVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IKZnVuYyAoc2V0ICpUeXBlU2V0KSBNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKQpmdW5jIChzZXQgKlR5cGVTZXQpIFN0cmluZ01hcCgpIG1hcFtzdHJpbmddYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIEdvYkRlY29kZShiIFtdYnl0ZSkgZXJyb3IKZnVuYyAoc2V0IFR5cGVTZXQpIEdvYkVuY29kZSgpIChbXWJ5dGUsIGVycm9yKQo=\"")
		packr.PackJSONBytes("builtin", "plumbing/mapTo.tpl", "\"Ly8gR2VuZXJhdGVkIGZyb20ge3suVGVtcGxhdGVGaWxlfX0gd2l0aCBUeXBlPXt7LlR5cGV9fSBUb1R5cGU9e3suVG9UeXBlfX0KLy8gYnkgcnVudGVtcGxhdGUge3suQXBwVmVyc2lvbn19Ci8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vam9oYW5icmFuZGhvcnN0L3J1bnRlbXBsYXRlL2Jsb2IvbWFzdGVyL0JVSUxUSU4ubWQKCnBhY2thZ2Uge3suUGFja2FnZX19Cgp7e2lmIC5IYXNJbXBvcnR9fQppbXBvcnQgKAoJe3suSW1wb3J0fX0KKQoKe3tlbmQgLX19Ci8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1hcFRve3suVG9QcmVmaXguVX19e3suVG9UeXBlLlV9fSB0cmFuc2Zvcm1zIGEgc3RyZWFtIG9mIHt7LlR5cGUuTmFtZX19IHRvIGEgc3RyZWFtIG9mIHt7LlRvVHlwZS5OYW1lfX0uCi8vIFdoZW4gdGhlIHNlbmRlciBjbG9zZXMgdGhlIGlucHV0IGNoYW5uZWwsIHRoZSBvdXRwdXQgY2hhbm5lbCBpcyBjbG9zZWQgdGhlbiB0aGUgZnVuY3Rpb24gdGVybWluYXRlcy4KZnVuYyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1NYXBUb3t7LlRvUHJlZml4LlV9fXt7LlRvVHlwZS5VfX0oaW4gPC1jaGFuIHt7LlR5cGV9fSwgb3V0IGNoYW48LSB7ey5Ub1R5cGV9fSwgZm4gZnVuYyh7ey5UeXBlfX0pIHt7LlRvVHlwZX19KSB7Cglmb3IgdiA6PSByYW5nZSBpbiB7CgkJb3V0IDwtIGZuKHYpCgl9CgljbG9zZShvdXQpCn0KCi8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUZsYXRNYXBUb3t7LlRvUHJlZml4LlV9fXt7LlRvVHlwZS5VfX0gdHJhbnNmb3JtcyBhIHN0cmVhbSBvZiB7ey5UeXBlLk5hbWV9fSB0byBhIHN0cmVhbSBvZiB7ey5Ub1R5cGUuTmFtZX19LgovLyBXaGVuIHRoZSBzZW5kZXIgY2xvc2VzIHRoZSBpbnB1dCBjaGFubmVsLCB0aGUgb3V0cHV0IGNoYW5uZWwgaXMgY2xvc2VkIHRoZW4gdGhlIGZ1bmN0aW9uIHRlcm1pbmF0ZXMuCmZ1bmMge3suUHJlZml4LlV9fXt7LlR5cGUuVX19RmxhdE1hcFRve3suVG9QcmVmaXguVX19e3suVG9UeXBlLlV9fShpbiA8LWNoYW4ge3suVHlwZX19LCBvdXQgY2hhbjwtIHt7LlRvVHlwZX19LCBmbiBmdW5jKHt7LlR5cGV9fSkge3suVG9QcmVmaXguVX19e3suVG9UeXBlLlV9fUNvbGxlY3Rpb24pIHsKCWZvciB2aSA6PSByYW5nZSBpbiB7CgkJYyA6PSBmbih2aSkKCQlpZiBjLk5vbkVtcHR5KCkgewoJCQlmb3Igdm8gOj0gcmFuZ2UgYy5TZW5kKCkgewoJCQkJb3V0IDwtIHZvCgkJCX0KCQl9Cgl9CgljbG9zZShvdXQpCn0K\"")
		packr.PackJSONBytes("builtin", "plumbing/plumbing.tpl", "\"Ly8gR2VuZXJhdGVkIGZyb20ge3suVGVtcGxhdGVGaWxlfX0gd2l0aCBUeXBlPXt7LlR5cGV9fQovLyBObyBvdGhlciBvcHRpb25zIGFyZSBhdmFpbGFibGUuCi8vIGJ5IHJ1bnRlbXBsYXRlIHt7LkFwcFZlcnNpb259fQovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pvaGFuYnJhbmRob3JzdC9ydW50ZW1wbGF0ZS9ibG9iL21hc3Rlci9CVUlMVElOLm1kCgpwYWNrYWdlIHt7LlBhY2thZ2V9fQoKe3tpZiAuSGFzSW1wb3J0fX0KaW1wb3J0ICgKCXt7LkltcG9ydH19CikKCnt7ZW5kIC19fQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFRoaXMgcGx1bWJpbmcgc3VpdGUgcHJvdmlkZXMgc3RhbmRhcmQgZnVuY3Rpb25zIGZvciBwaXBpbmcgZGF0YSBiZXR3ZWVuIGdvcm91dGluZXMuCi8vIEFsbCB0aGVzZSBmdW5jdGlvbnMgcnVuIHVudGlsIHRoZSBpbnB1dCBjaGFubmVsIGlzIGNsb3NlZCAob3IgYWxsIGlucHV0IGNoYW5uZWxzIGFyZSBjbG9zZWQsIGlmCi8vIG11bHRpcGxlKS4gVGhleSB0aGVuIGNsb3NlIHRoZWlyIG91dHB1dCBjaGFubmVsKHMpLgovLyBOb25lIG9mIHRoZXNlIGZ1bmN0aW9ucyBjcmVhdGUgYSBnb3JvdXRpbmUgLSB0aGlzIG11c3QgYmUgZG9uZSBhdCB0aGUgY2FsbCBzaXRlLgoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1HZW5lcmF0b3IgcHJvZHVjZXMgYSBzdHJlYW0gb2Yge3suVHlwZX19IGJhc2VkIG9uIGEgc3VwcGxpZWQgZ2VuZXJhdG9yIGZ1bmN0aW9uLgovLyBUaGUgZnVuY3Rpb24gZm4gaXMgaW52b2tlZCBOIHRpbWVzIHdpdGggdGhlIGludGVnZXJzIGZyb20gMCB0byBOLTEuIEVhY2ggcmVzdWx0IGlzIHNlbnQgb3V0LgovLyBGaW5hbGx5LCB0aGUgb3V0cHV0IGNoYW5uZWwgaXMgY2xvc2VkIGFuZCB0aGUgZ2VuZXJhdG9yIHRlcm1pbmF0ZXMuCi8vCi8vIEl0IGlzIHBhcnQgb2YgdGhlIFBsdW1iaW5nIGZ1bmN0aW9uIHN1aXRlIGZvciB7ey5UeXBlLlV9fS4KZnVuYyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1HZW5lcmF0b3Iob3V0IGNoYW48LSB7ey5UeXBlfX0sIGl0ZXJhdGlvbnMgaW50LCBmbiBmdW5jKGludCkge3suVHlwZX19KSB7Cgl7ey5QcmVmaXguVX19e3suVHlwZS5VfX1HZW5lcmF0b3IzKG91dCwgMCwgaXRlcmF0aW9ucy0xLCAxLCBmbikKfQoKLy8ge3suUHJlZml4LlV9fXt7LlR5cGUuVX19R2VuZXJhdG9yIHByb2R1Y2VzIGEgc3RyZWFtIG9mIHt7LlR5cGV9fSBiYXNlZCBvbiBhIHN1cHBsaWVkIGdlbmVyYXRvciBmdW5jdGlvbi4KLy8gVGhlIGZ1bmN0aW9uIGZuIGlzIGludm9rZWQgKih8dG8gLSBmcm9tfCkgLyB8c3RyaWRlfCogdGltZXMgd2l0aCB0aGUgaW50ZWdlcnMgaW4gdGhlIHJhbmdlIHNwZWNpZmllZCBieQovLyBmcm9tLCB0byBhbmQgc3RyaWRlLiBJZiBzdHJpZGUgaXMgbmVnYXRpdmUsIGZyb20gc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiB0by4KLy8gRm9yIGVhY2ggaXRlcmF0aW9uLCB0aGUgY29tcHV0ZWQgZnVuY3Rpb24gcmVzdWx0IGlzIHNlbnQgb3V0LgovLyBJZiBzdHJpZGUgaXMgemVybywgdGhlIGxvb3AgbmV2ZXIgdGVybWluYXRlcy4gT3RoZXJ3aXNlLCBhZnRlciB0aGUgZ2VuZXJhdG9yIGhhcyByZWFjaGVkIHRoZQovLyBsb29wIGVuZCwgdGhlIG91dHB1dCBjaGFubmVsIGlzIGNsb3NlZCBhbmQgdGhlIGdlbmVyYXRvciB0ZXJtaW5hdGVzLgovLwovLyBJdCBpcyBwYXJ0IG9mIHRoZSBQbHVtYmluZyBmdW5jdGlvbiBzdWl0ZSBmb3Ige3suVHlwZS5VfX0uCmZ1bmMge3suUHJlZml4LlV9fXt7LlR5cGUuVX19R2VuZXJhdG9yMyhvdXQgY2hhbjwtIHt7LlR5cGV9fSwgZnJvbSwgdG8sIHN0cmlkZSBpbnQsIGZuIGZ1bmMoaW50KSB7ey5UeXBlfX0pIHsKCWlmIChmcm9tID4gdG8gJiYgc3RyaWRlID4gMCkgfHwgKGZyb20gPCB0byAmJiBzdHJpZGUgPCAwKSB7CgkJcGFuaWMoIkxvb3AgY29uZGl0aW9ucyBhcmUgZGl2ZXJnZW50LiIpCgl9CglpZiBmcm9tID4gdG8gJiYgc3RyaWRlIDwgMCB7CgkJZm9yIGkgOj0gZnJvbTsgaSA+PSB0bzsgaSArPSBzdHJpZGUgewoJCQlvdXQgPC0gZm4oaSkKCQl9Cgl9IGVsc2UgewoJCWZvciBpIDo9IGZyb207IGkgPD0gdG87IGkgKz0gc3RyaWRlIHsKCQkJb3V0IDwtIGZuKGkpCgkJfQoJfQoJY2xvc2Uob3V0KQp9CgovLyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1EZWx0YSBkdXBsaWNhdGVzIGEgc3RyZWFtIG9mIHt7LlR5cGV9fSB0byB0d28gb3V0cHV0IGNoYW5uZWxzLgovLyBXaGVuIHRoZSBzZW5kZXIgY2xvc2VzIHRoZSBpbnB1dCBjaGFubmVsLCBib3RoIG91dHB1dCBjaGFubmVscyBhcmUgY2xvc2VkIHRoZW4gdGhlIGZ1bmN0aW9uIHRlcm1pbmF0ZXMuCi8vCi8vIEl0IGlzIHBhcnQgb2YgdGhlIFBsdW1iaW5nIGZ1bmN0aW9uIHN1aXRlIGZvciB7ey5UeXBlLlV9fS4KZnVuYyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1EZWx0YShpbiA8LWNoYW4ge3suVHlwZX19LCBvdXQxLCBvdXQyIGNoYW48LSB7ey5UeXBlfX0pIHsKCWZvciB2IDo9IHJhbmdlIGluIHsKCQlzZWxlY3QgewoJCWNhc2Ugb3V0MSA8LSB2OgoJCQlvdXQyIDwtIHYKCQljYXNlIG91dDIgPC0gdjoKCQkJb3V0MSA8LSB2CgkJfQoJfQoJY2xvc2Uob3V0MSkKCWNsb3NlKG91dDIpCn0KCi8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVppcDIgaW50ZXJsZWF2ZXMgdHdvIHN0cmVhbXMgb2Yge3suVHlwZX19LgovLyBFYWNoIGlucHV0IGNoYW5uZWwgaXMgdXNlZCBpbiB0dXJuLCBhbHRlcm5hdGluZyBiZXR3ZWVuIHRoZW0uCi8vIFRoZSBmdW5jdGlvbiB0ZXJtaW5hdGVzIHdoZW4gKmJvdGgqIGlucHV0IGNoYW5uZWxzIGhhdmUgYmVlbiBjbG9zZWQgYnkgdGhlaXIgc2VuZGVycy4KLy8gVGhlIG91dHB1dCBjaGFubmVsIGlzIHRoZW4gY2xvc2VkIGFsc28uCi8vCi8vIEl0IGlzIHBhcnQgb2YgdGhlIFBsdW1iaW5nIGZ1bmN0aW9uIHN1aXRlIGZvciB7ey5UeXBlLlV9fS4KZnVuYyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1aaXAyKGluMSwgaW4yIDwtY2hhbiB7ey5UeXBlfX0sIG91dCBjaGFuPC0ge3suVHlwZX19KSB7CgljbG9zZWQyIDo9IGZhbHNlCglmb3IgdiA6PSByYW5nZSBpbjEgewoJCW91dCA8LSB2CgkJdiwgb2sgOj0gPC0gaW4yCgkJaWYgb2sgewoJCQlvdXQgPC0gdgoJCX0gZWxzZSB7CgkJCWNsb3NlZDIgPSB0cnVlCgkJfQoJfQoJLy8gbmVlZCB0byBkcmFpbiBpbjIgYXMgd2VsbD8KCWlmICFjbG9zZWQyIHsKCQlmb3IgXyA9IHJhbmdlIGluMiB7CgkJfQoJfQoJY2xvc2Uob3V0KQp9CgovLyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1NdXgyIG11bHRpcGxleGVzIHR3byBzdHJlYW1zIG9mIHt7LlR5cGV9fSBpbnRvIGEgc2luZ2xlIG91dHB1dCBjaGFubmVsLgovLyBFYWNoIGlucHV0IGNoYW5uZWwgaXMgdXNlZCBhcyBzb29uIGFzIGl0IGlzIHJlYWR5LgovLyBXaGVuIGEgc2lnbmFsIGlzIHJlY2VpdmVkIGZyb20gdGhlIGNsb3NlciBjaGFubmVsLCB0aGUgb3V0cHV0IGNoYW5uZWwgaXMgdGhlbiBjbG9zZWQuCi8vIENvbmN1cnJlbnRseSwgYm90aCBpbnB1dCBjaGFubmVscyBhcmUgdGhlbiBwYXNzZWQgaW50byBibGFja2hvbGVzIHRoYXQgY29tc3VtZSB0aGVtIHVudGlsIHRoZXkgdG9vIGFyZSBjbG9zZWQsCi8vIGFuZCB0aGUgZnVuY3Rpb24gdGVybWluYXRlcy4KLy8KLy8gSXQgaXMgcGFydCBvZiB0aGUgUGx1bWJpbmcgZnVuY3Rpb24gc3VpdGUgZm9yIHt7LlR5cGUuVX19LgpmdW5jIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU11eDIoaW4xLCBpbjIgPC1jaGFuIHt7LlR5cGV9fSwgY2xvc2VyIDwtY2hhbiBib29sLCBvdXQgY2hhbjwtIHt7LlR5cGV9fSkgewoJcnVubmluZyA6PSB0cnVlCglmb3IgcnVubmluZyB7CgkJc2VsZWN0IHsKCQljYXNlIHYgOj0gPC0gaW4xOgoJCQlvdXQgPC0gdgoJCWNhc2UgdiA6PSA8LSBpbjI6CgkJCW91dCA8LSB2CgkJY2FzZSBfID0gPC0gY2xvc2VyOgoJCQlydW5uaW5nID0gZmFsc2UKCQl9Cgl9CglnbyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1CbGFja0hvbGUoaW4xKQoJZ28ge3suUHJlZml4LlV9fXt7LlR5cGUuVX19QmxhY2tIb2xlKGluMikKCWNsb3NlKG91dCkKfQoKLy8ge3suUHJlZml4LlV9fXt7LlR5cGUuVX19QmxhY2tIb2xlIHNpbGVudGx5IGNvbnN1bWVzIGEgc3RyZWFtIG9mIHt7LlR5cGV9fS4KLy8gSXQgdGVybWluYXRlcyB3aGVuIHRoZSBzZW5kZXIgY2xvc2VzIHRoZSBjaGFubmVsLgovLwovLyBJdCBpcyBwYXJ0IG9mIHRoZSBQbHVtYmluZyBmdW5jdGlvbiBzdWl0ZSBmb3Ige3suVHlwZS5VfX0uCmZ1bmMge3suUHJlZml4LlV9fXt7LlR5cGUuVX19QmxhY2tIb2xlKGluIDwtY2hhbiB7ey5UeXBlfX0pIHsKCWZvciBfID0gcmFuZ2UgaW4gewoJCS8vIG9tIG5vbSBub20KCX0KfQoKLy8ge3suUHJlZml4LlV9fXt7LlR5cGUuVX19RmlsdGVyIGZpbHRlcnMgYSBzdHJlYW0gb2Yge3suVHlwZX19LCBzaWxlbnRseSBkcm9wcGluZyBlbGVtZW50cyB0aGF0IGRvIG5vdCBtYXRjaCB0aGUgcHJlZGljYXRlIHAuCi8vIFdoZW4gdGhlIHNlbmRlciBjbG9zZXMgdGhlIGlucHV0IGNoYW5uZWwsIHRoZSBvdXRwdXQgY2hhbm5lbCBpcyBjbG9zZWQgdGhlbiB0aGUgZnVuY3Rpb24gdGVybWluYXRlcy4KLy8KLy8gSXQgaXMgcGFydCBvZiB0aGUgUGx1bWJpbmcgZnVuY3Rpb24gc3VpdGUgZm9yIHt7LlR5cGUuVX19LgpmdW5jIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUZpbHRlcihpbiA8LWNoYW4ge3suVHlwZX19LCBvdXQgY2hhbjwtIHt7LlR5cGV9fSwgcCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgewoJZm9yIHYgOj0gcmFuZ2UgaW4gewoJCWlmIHAodikgewoJCQlvdXQgPC0gdgoJCX0KCX0KCWNsb3NlKG91dCkKfQoKLy8ge3suUHJlZml4LlV9fXt7LlR5cGUuVX19UGFydGl0aW9uIGZpbHRlcnMgYSBzdHJlYW0gb2Yge3suVHlwZX19IGludG8gdHdvIG91dHB1dCBzdHJlYW1zIHVzaW5nIGEgcHJlZGljYXRlIHAsIHRob3NlIHRoYXQKLy8gbWF0Y2ggYW5kIGFsbCBvdGhlcnMuCi8vIFdoZW4gdGhlIHNlbmRlciBjbG9zZXMgdGhlIGlucHV0IGNoYW5uZWwsIGJvdGggb3V0cHV0IGNoYW5uZWxzIGFyZSBjbG9zZWQgdGhlbiB0aGUgZnVuY3Rpb24gdGVybWluYXRlcy4KLy8KLy8gSXQgaXMgcGFydCBvZiB0aGUgUGx1bWJpbmcgZnVuY3Rpb24gc3VpdGUgZm9yIHt7LlR5cGUuVX19LgpmdW5jIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVBhcnRpdGlvbihpbiA8LWNoYW4ge3suVHlwZX19LCBtYXRjaGluZywgb3RoZXJzIGNoYW48LSB7ey5UeXBlfX0sIHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIHsKCWZvciB2IDo9IHJhbmdlIGluIHsKCQlpZiBwKHYpIHsKCQkJbWF0Y2hpbmcgPC0gdgoJCX0gZWxzZSB7CgkJCW90aGVycyA8LSB2CgkJfQoJfQoJY2xvc2UobWF0Y2hpbmcpCgljbG9zZShvdGhlcnMpCn0KCi8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1hcCB0cmFuc2Zvcm1zIGEgc3RyZWFtIG9mIHt7LlR5cGV9fSBieSBhcHBseWluZyBhIGZ1bmN0aW9uIGZuIHRvIGVhY2ggaXRlbSBpbiB0aGUgc3RyZWFtLgovLyBXaGVuIHRoZSBzZW5kZXIgY2xvc2VzIHRoZSBpbnB1dCBjaGFubmVsLCB0aGUgb3V0cHV0IGNoYW5uZWwgaXMgY2xvc2VkIHRoZW4gdGhlIGZ1bmN0aW9uIHRlcm1pbmF0ZXMuCi8vCi8vIEl0IGlzIHBhcnQgb2YgdGhlIFBsdW1iaW5nIGZ1bmN0aW9uIHN1aXRlIGZvciB7ey5UeXBlLlV9fS4KZnVuYyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1NYXAoaW4gPC1jaGFuIHt7LlR5cGV9fSwgb3V0IGNoYW48LSB7ey5UeXBlfX0sIGZuIGZ1bmMoe3suVHlwZX19KSB7ey5UeXBlfX0pIHsKCWZvciB2IDo9IHJhbmdlIGluIHsKCQlvdXQgPC0gZm4odikKCX0KCWNsb3NlKG91dCkKfQoKLy8ge3suUHJlZml4LlV9fXt7LlR5cGUuVX19RmxhdE1hcCB0cmFuc2Zvcm1zIGEgc3RyZWFtIG9mIHt7LlR5cGV9fSBieSBhcHBseWluZyBhIGZ1bmN0aW9uIGZuIHRvIGVhY2ggaXRlbSBpbiB0aGUgc3RyZWFtIHRoYXQKLy8gZ2l2ZXMgemVybyBvciBtb3JlIHJlc3VsdHMsIGFsbCBvZiB3aGljaCBhcmUgc2VudCBvdXQuCi8vIFdoZW4gdGhlIHNlbmRlciBjbG9zZXMgdGhlIGlucHV0IGNoYW5uZWwsIHRoZSBvdXRwdXQgY2hhbm5lbCBpcyBjbG9zZWQgdGhlbiB0aGUgZnVuY3Rpb24gdGVybWluYXRlcy4KLy8KLy8gSXQgaXMgcGFydCBvZiB0aGUgUGx1bWJpbmcgZnVuY3Rpb24gc3VpdGUgZm9yIHt7LlR5cGUuVX19LgpmdW5jIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUZsYXRNYXAoaW4gPC1jaGFuIHt7LlR5cGV9fSwgb3V0IGNoYW48LSB7ey5UeXBlfX0sIGZuIGZ1bmMoe3suVHlwZX19KSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Db2xsZWN0aW9uKSB7Cglmb3IgdmkgOj0gcmFuZ2UgaW4gewoJCWMgOj0gZm4odmkpCgkJYy5Gb3JlYWNoKGZ1bmModm8ge3suVHlwZX19KSB7CgkJCW91dCA8LSB2bwoJCX0pCgl9CgljbG9zZShvdXQpCn0K\"")
		packr.PackJSONBytes("builtin", "simple/collection.tpl", "\"Ly8gR2VuZXJhdGVkIGZyb20ge3suVGVtcGxhdGVGaWxlfX0gd2l0aCBUeXBlPXt7LlR5cGV9fQovLyBvcHRpb25zOiBDb21wYXJhYmxlOnt7LkNvbXBhcmFibGV9fSBOdW1lcmljOnt7Lk51bWVyaWN9fSBPcmRlcmVkOnt7Lk9yZGVyZWR9fSBTdHJpbmdlcjp7ey5TdHJpbmdlcn19IE11dGFibGU6YWx3YXlzCi8vIGJ5IHJ1bnRlbXBsYXRlIHt7LkFwcFZlcnNpb259fQovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pvaGFuYnJhbmRob3JzdC9ydW50ZW1wbGF0ZS9ibG9iL21hc3Rlci9CVUlMVElOLm1kCgpwYWNrYWdlIHt7LlBhY2thZ2V9fQoKe3tpZiAuSGFzSW1wb3J0fX0KaW1wb3J0ICgKCXt7LkltcG9ydH19CikKCnt7ZW5kIC19fQovLyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TaXplciBkZWZpbmVzIGFuIGludGVyZmFjZSBmb3Igc2l6aW5nIG1ldGhvZHMgb24ge3suVHlwZX19IGNvbGxlY3Rpb25zLgp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNpemVyIGludGVyZmFjZSB7CgkvLyBJc0VtcHR5IHRlc3RzIHdoZXRoZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiBpcyBlbXB0eS4KCUlzRW1wdHkoKSBib29sCgoJLy8gTm9uRW1wdHkgdGVzdHMgd2hldGhlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Db2xsZWN0aW9uIGlzIGVtcHR5LgoJTm9uRW1wdHkoKSBib29sCgoJLy8gU2l6ZSByZXR1cm5zIHRoZSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIGxpc3QgLSBhbiBhbGlhcyBvZiBMZW4oKS4KCVNpemUoKSBpbnQKfQp7ey0gaWYgLlN0cmluZ2VyfX0KCi8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1rU3RyaW5nZXIgZGVmaW5lcyBhbiBpbnRlcmZhY2UgZm9yIHN0cmluZ2VyIG1ldGhvZHMgb24ge3suVHlwZX19IGNvbGxlY3Rpb25zLgp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1rU3RyaW5nZXIgaW50ZXJmYWNlIHsKCS8vIFN0cmluZyBpbXBsZW1lbnRzIHRoZSBTdHJpbmdlciBpbnRlcmZhY2UgdG8gcmVuZGVyIHRoZSBsaXN0IGFzIGEgY29tbWEtc2VwYXJhdGVkIHN0cmluZyBlbmNsb3NlZAoJLy8gaW4gc3F1YXJlIGJyYWNrZXRzLgoJU3RyaW5nKCkgc3RyaW5nCgoJLy8gTWtTdHJpbmcgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcgdXNpbmcgYSBzdXBwbGllZCBzZXBhcmF0b3IuIE5vIGVuY2xvc2luZyBtYXJrcyBhcmUgYWRkZWQuCglNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcKCgkvLyBNa1N0cmluZzMgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcsIHVzaW5nIHRoZSBwcmVmaXgsIHNlcGFyYXRvciBhbmQgc3VmZml4IHN1cHBsaWVkLgoJTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcKCgkvLyBpbXBsZW1lbnRzIGpzb24uTWFyc2hhbGVyIGludGVyZmFjZSB7CgkvL01hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpCgoJLy8gaW1wbGVtZW50cyBqc29uLlVubWFyc2hhbGVyIGludGVyZmFjZSB7CgkvL1VubWFyc2hhbEpTT04oYiBbXWJ5dGUpIGVycm9yCgoJLy8gU3RyaW5nTGlzdCBnZXRzIGEgbGlzdCBvZiBzdHJpbmdzIHRoYXQgZGVwaWN0cyBhbGwgdGhlIGVsZW1lbnRzLgoJU3RyaW5nTGlzdCgpIFtdc3RyaW5nCn0Ke3stIGVuZH19CgovLyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Db2xsZWN0aW9uIGRlZmluZXMgYW4gaW50ZXJmYWNlIGZvciBjb21tb24gY29sbGVjdGlvbiBtZXRob2RzIG9uIHt7LlR5cGV9fS4KdHlwZSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Db2xsZWN0aW9uIGludGVyZmFjZSB7Cgl7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TaXplcgp7ey0gaWYgLlN0cmluZ2VyfX0KCXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1rU3RyaW5nZXIKe3stIGVuZH19CgoJLy8gSXNTZXF1ZW5jZSByZXR1cm5zIHRydWUgZm9yIGxpc3RzIGFuZCBxdWV1ZXMuCglJc1NlcXVlbmNlKCkgYm9vbAoKCS8vIElzU2V0IHJldHVybnMgZmFsc2UgZm9yIGxpc3RzIGFuZCBxdWV1ZXMuCglJc1NldCgpIGJvb2wKe3stIGlmIC5Ub0xpc3R9fQoKCS8vIFRvTGlzdCByZXR1cm5zIGEgc2hhbGxvdyBjb3B5IGFzIGEgbGlzdC4KCVRvTGlzdCgpIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QKe3stIGVuZH19Cnt7LSBpZiAuVG9TZXR9fQoKCS8vIFRvU2V0IHJldHVybnMgYSBzaGFsbG93IGNvcHkgYXMgYSBzZXQuCglUb1NldCgpIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldAp7ey0gZW5kfX0KCgkvLyBUb1NsaWNlIHJldHVybnMgYSBzaGFsbG93IGNvcHkgYXMgYSBwbGFpbiBzbGljZS4KCVRvU2xpY2UoKSBbXXt7LlR5cGV9fQoKCS8vIFRvSW50ZXJmYWNlU2xpY2UgcmV0dXJucyBhIHNoYWxsb3cgY29weSBhcyBhIHNsaWNlIG9mIGFyYml0cmFyeSB0eXBlLgoJVG9JbnRlcmZhY2VTbGljZSgpIFtdaW50ZXJmYWNle30KCgkvLyBFeGlzdHMgdmVyaWZpZXMgdGhhdCBvbmUgb3IgbW9yZSBlbGVtZW50cyBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Db2xsZWN0aW9uIHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCglFeGlzdHMocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbAoKCS8vIEZvcmFsbCB2ZXJpZmllcyB0aGF0IGFsbCBlbGVtZW50cyBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Db2xsZWN0aW9uIHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCglGb3JhbGwocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbAoKCS8vIEZvcmVhY2ggaXRlcmF0ZXMgb3ZlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Db2xsZWN0aW9uIGFuZCBleGVjdXRlcyB0aGUgZnVuY3Rpb24gZiBhZ2FpbnN0IGVhY2ggZWxlbWVudC4KCUZvcmVhY2goZiBmdW5jKHt7LlR5cGV9fSkpCgoJLy8gRmluZCByZXR1cm5zIHRoZSBmaXJzdCB7ey5UeXBlLk5hbWV9fSB0aGF0IHJldHVybnMgdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgoJLy8gRmFsc2UgaXMgcmV0dXJuZWQgaWYgbm9uZSBtYXRjaC4KCUZpbmQocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKHt7LlR5cGV9fSwgYm9vbCkKCgkvLyBTZW5kIHJldHVybnMgYSBjaGFubmVsIHRoYXQgd2lsbCBzZW5kIGFsbCB0aGUgZWxlbWVudHMgaW4gb3JkZXIuIENhbiBiZSB1c2VkIHdpdGggdGhlIHBsdW1iaW5nIGNvZGUsIGZvciBleGFtcGxlLgoJLy8gQSBnb3JvdXRpbmUgaXMgY3JlYXRlZCB0byBzZW5kIHRoZSBlbGVtZW50czsgdGhpcyBvbmx5IHRlcm1pbmF0ZXMgd2hlbiBhbGwgdGhlIGVsZW1lbnRzIGhhdmUgYmVlbiBjb25zdW1lZAoJU2VuZCgpIDwtY2hhbiB7ey5UeXBlfX0KCgkvLyBDb3VudEJ5IGdpdmVzIHRoZSBudW1iZXIgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiB0aGF0IHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCglDb3VudEJ5KHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIGludAp7ey0gaWYgLkNvbXBhcmFibGV9fQoKCS8vIENvbnRhaW5zIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGl0ZW0gaXMgYWxyZWFkeSBpbiB0aGUgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRydWUgaWYgc28uCglDb250YWlucyh2IHt7LlR5cGV9fSkgYm9vbAoKCS8vIENvbnRhaW5zQWxsIGRldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gaXRlbXMgYXJlIGFsbCBpbiB0aGUgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRydWUgaWYgc28uCglDb250YWluc0FsbCh2IC4uLnt7LlR5cGV9fSkgYm9vbAp7ey0gZW5kfX0KCgkvLyBBZGQgYWRkcyBpdGVtcyB0byB0aGUgY3VycmVudCBjb2xsZWN0aW9uLgoJLy9BZGQobW9yZSAuLi57ey5UeXBlLk5hbWV9fSkKe3stIGlmIC5PcmRlcmVkfX0KCgkvLyBNaW4gcmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZSBvZiBhbGwgdGhlIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgoJTWluKCkge3suVHlwZS5OYW1lfX0KCgkvLyBNYXggcmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZSBvZiBhbGwgdGhlIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgoJTWF4KCkge3suVHlwZS5OYW1lfX0Ke3stIGVuZH19CgoJLy8gTWluQnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUNvbGxlY3Rpb24gY29udGFpbmluZyB0aGUgbWluaW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cwoJLy8gdXNpbmcgYSBwYXNzZWQgZnVuYyBkZWZpbmluZyDigJhsZXNz4oCZLiBJbiB0aGUgY2FzZSBvZiBtdWx0aXBsZSBpdGVtcyBiZWluZyBlcXVhbGx5IG1pbmltYWwsIHRoZSBmaXJzdCBzdWNoCgkvLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgoJTWluQnkobGVzcyBmdW5jKHt7LlR5cGV9fSwge3suVHlwZX19KSBib29sKSB7ey5UeXBlfX0KCgkvLyBNYXhCeSByZXR1cm5zIGFuIGVsZW1lbnQgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiBjb250YWluaW5nIHRoZSBtYXhpbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCgkvLyB1c2luZyBhIHBhc3NlZCBmdW5jIGRlZmluaW5nIOKAmGxlc3PigJkuIEluIHRoZSBjYXNlIG9mIG11bHRpcGxlIGl0ZW1zIGJlaW5nIGVxdWFsbHkgbWF4aW1hbCwgdGhlIGZpcnN0IHN1Y2gKCS8vIGVsZW1lbnQgaXMgcmV0dXJuZWQuIFBhbmljcyBpZiB0aGVyZSBhcmUgbm8gZWxlbWVudHMuCglNYXhCeShsZXNzIGZ1bmMoe3suVHlwZX19LCB7ey5UeXBlfX0pIGJvb2wpIHt7LlR5cGV9fQp7ey0gaWYgLk51bWVyaWN9fQoKCS8vIFN1bSByZXR1cm5zIHRoZSBzdW0gb2YgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgY29sbGVjdGlvbi4KCVN1bSgpIHt7LlR5cGUuTmFtZX19Cnt7LSBlbmR9fQp9Cg==\"")
		packr.PackJSONBytes("builtin", "simple/list.tpl", "\"Ly8gQSBzaW1wbGUgdHlwZSBkZXJpdmVkIGZyb20gW117ey5UeXBlfX0KLy8gTm90IHRocmVhZC1zYWZlLgovLwovLyBHZW5lcmF0ZWQgZnJvbSB7ey5UZW1wbGF0ZUZpbGV9fSB3aXRoIFR5cGU9e3suVHlwZX19Ci8vIG9wdGlvbnM6IENvbXBhcmFibGU6e3suQ29tcGFyYWJsZX19IE51bWVyaWM6e3suTnVtZXJpY319IE9yZGVyZWQ6e3suT3JkZXJlZH19IFN0cmluZ2VyOnt7LlN0cmluZ2VyfX0KLy8gR29iRW5jb2RlOnt7LkdvYkVuY29kZX19IE11dGFibGU6YWx3YXlzIFRvTGlzdDphbHdheXMgVG9TZXQ6e3suVG9TZXR9fQovLyBieSBydW50ZW1wbGF0ZSB7ey5BcHBWZXJzaW9ufX0KLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qb2hhbmJyYW5kaG9yc3QvcnVudGVtcGxhdGUvYmxvYi9tYXN0ZXIvQlVJTFRJTi5tZAoKcGFja2FnZSB7ey5QYWNrYWdlfX0KCmltcG9ydCAoCnt7LSBpZiBvciAuU3RyaW5nZXIgLkdvYkVuY29kZX19CgkiYnl0ZXMiCnt7LSBlbmR9fQp7ey0gaWYgLkdvYkVuY29kZX19CgkiZW5jb2RpbmcvZ29iIgp7ey0gZW5kfX0Ke3stIGlmIC5TdHJpbmdlcn19CgkiZm10Igp7ey0gZW5kfX0KCSJtYXRoL3JhbmQiCgkic29ydCIKe3stIGlmIC5IYXNJbXBvcnR9fQoJe3suSW1wb3J0fX0Ke3stIGVuZH19CikKCi8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgaXMgYSBzbGljZSBvZiB0eXBlIHt7LlR5cGV9fS4gVXNlIGl0IHdoZXJlIHlvdSB3b3VsZCB1c2UgW117ey5UeXBlfX0uCi8vIFRvIGFkZCBpdGVtcyB0byB0aGUgbGlzdCwgc2ltcGx5IHVzZSB0aGUgbm9ybWFsIGJ1aWx0LWluIGFwcGVuZCBmdW5jdGlvbi4KLy8KLy8gTGlzdCB2YWx1ZXMgZm9sbG93IGEgc2ltaWxhciBwYXR0ZXJuIHRvIFNjYWxhIExpc3RzIGFuZCBMaW5lYXJTZXFzIGluIHBhcnRpY3VsYXIuCi8vIEZvciBjb21wYXJpc29uIHdpdGggU2NhbGEsIHNlZSBlLmcuIGh0dHA6Ly93d3cuc2NhbGEtbGFuZy5vcmcvYXBpLzIuMTEuNy8jc2NhbGEuY29sbGVjdGlvbi5MaW5lYXJTZXEKdHlwZSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IFtde3suVHlwZX19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IG1ha2VzIGFuIGVtcHR5IGxpc3Qgd2l0aCBib3RoIGxlbmd0aCBhbmQgY2FwYWNpdHkgaW5pdGlhbGlzZWQuCmZ1bmMgTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QobGVuZ3RoLCBjYXBhY2l0eSBpbnQpIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJcmV0dXJuIG1ha2Uoe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCwgbGVuZ3RoLCBjYXBhY2l0eSkKfQoKLy8gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBjb25zdHJ1Y3RzIGEgbmV3IGxpc3QgY29udGFpbmluZyB0aGUgc3VwcGxpZWQgdmFsdWVzLCBpZiBhbnkuCmZ1bmMgTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCh2YWx1ZXMgLi4ue3suVHlwZX19KSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWxpc3QgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QobGVuKHZhbHVlcyksIGxlbih2YWx1ZXMpKQoJY29weShsaXN0LCB2YWx1ZXMpCglyZXR1cm4gbGlzdAp9CgovLyBDb252ZXJ0e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBjb25zdHJ1Y3RzIGEgbmV3IGxpc3QgY29udGFpbmluZyB0aGUgc3VwcGxpZWQgdmFsdWVzLCBpZiBhbnkuCi8vIFRoZSByZXR1cm5lZCBib29sZWFuIHdpbGwgYmUgZmFsc2UgaWYgYW55IG9mIHRoZSB2YWx1ZXMgY291bGQgbm90IGJlIGNvbnZlcnRlZCBjb3JyZWN0bHkuCi8vIFRoZSByZXR1cm5lZCBsaXN0IHdpbGwgY29udGFpbiBhbGwgdGhlIHZhbHVlcyB0aGF0IHdlcmUgY29ycmVjdGx5IGNvbnZlcnRlZC4KZnVuYyBDb252ZXJ0e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCh2YWx1ZXMgLi4uaW50ZXJmYWNle30pICh7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0LCBib29sKSB7CglsaXN0IDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIGxlbih2YWx1ZXMpKQoKCWZvciBfLCBpIDo9IHJhbmdlIHZhbHVlcyB7CgkJc3dpdGNoIGogOj0gaS4odHlwZSkgewp7ey0gaWYgLk51bWVyaWN9fQoJCXt7LSBpZiAuVHlwZS5Jc1B0cn19CgkJY2FzZSAqaW50OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlsaXN0ID0gYXBwZW5kKGxpc3QsICZrKQoJCWNhc2UgKmludDg6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QgPSBhcHBlbmQobGlzdCwgJmspCgkJY2FzZSAqaW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QgPSBhcHBlbmQobGlzdCwgJmspCgkJY2FzZSAqaW50MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QgPSBhcHBlbmQobGlzdCwgJmspCgkJY2FzZSAqaW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QgPSBhcHBlbmQobGlzdCwgJmspCgkJY2FzZSAqdWludDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdCA9IGFwcGVuZChsaXN0LCAmaykKCQljYXNlICp1aW50ODoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdCA9IGFwcGVuZChsaXN0LCAmaykKCQljYXNlICp1aW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QgPSBhcHBlbmQobGlzdCwgJmspCgkJY2FzZSAqdWludDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlsaXN0ID0gYXBwZW5kKGxpc3QsICZrKQoJCWNhc2UgKnVpbnQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdCA9IGFwcGVuZChsaXN0LCAmaykKCQljYXNlICpmbG9hdDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlsaXN0ID0gYXBwZW5kKGxpc3QsICZrKQoJCWNhc2UgKmZsb2F0NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QgPSBhcHBlbmQobGlzdCwgJmspCgkJe3stIGVsc2V9fQoJCWNhc2UgaW50OgoJCQlsaXN0ID0gYXBwZW5kKGxpc3QsIHt7LlR5cGV9fShqKSkKCQljYXNlIGludDg6CgkJCWxpc3QgPSBhcHBlbmQobGlzdCwge3suVHlwZX19KGopKQoJCWNhc2UgaW50MTY6CgkJCWxpc3QgPSBhcHBlbmQobGlzdCwge3suVHlwZX19KGopKQoJCWNhc2UgaW50MzI6CgkJCWxpc3QgPSBhcHBlbmQobGlzdCwge3suVHlwZX19KGopKQoJCWNhc2UgaW50NjQ6CgkJCWxpc3QgPSBhcHBlbmQobGlzdCwge3suVHlwZX19KGopKQoJCWNhc2UgdWludDoKCQkJbGlzdCA9IGFwcGVuZChsaXN0LCB7ey5UeXBlfX0oaikpCgkJY2FzZSB1aW50ODoKCQkJbGlzdCA9IGFwcGVuZChsaXN0LCB7ey5UeXBlfX0oaikpCgkJY2FzZSB1aW50MTY6CgkJCWxpc3QgPSBhcHBlbmQobGlzdCwge3suVHlwZX19KGopKQoJCWNhc2UgdWludDMyOgoJCQlsaXN0ID0gYXBwZW5kKGxpc3QsIHt7LlR5cGV9fShqKSkKCQljYXNlIHVpbnQ2NDoKCQkJbGlzdCA9IGFwcGVuZChsaXN0LCB7ey5UeXBlfX0oaikpCgkJY2FzZSBmbG9hdDMyOgoJCQlsaXN0ID0gYXBwZW5kKGxpc3QsIHt7LlR5cGV9fShqKSkKCQljYXNlIGZsb2F0NjQ6CgkJCWxpc3QgPSBhcHBlbmQobGlzdCwge3suVHlwZX19KGopKQoJCXt7LSBlbmR9fQp7ey0gZWxzZX19CgkJe3stIGlmIC5UeXBlLklzUHRyfX0KCQljYXNlIHt7LlR5cGUuTmFtZX19OgoJCQlsaXN0ID0gYXBwZW5kKGxpc3QsICZqKQoJCWNhc2Uge3suVHlwZX19OgoJCQlsaXN0ID0gYXBwZW5kKGxpc3QsIGopCgkJe3stIGVsc2V9fQoJCWNhc2Uge3suVHlwZX19OgoJCQlsaXN0ID0gYXBwZW5kKGxpc3QsIGopCgkJY2FzZSAqe3suVHlwZX19OgoJCQlsaXN0ID0gYXBwZW5kKGxpc3QsICpqKQoJCXt7LSBlbmR9fQp7ey0gZW5kfX0KCQl9Cgl9CgoJcmV0dXJuIGxpc3QsIGxlbihsaXN0KSA9PSBsZW4odmFsdWVzKQp9CgovLyBCdWlsZHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3RGcm9tQ2hhbiBjb25zdHJ1Y3RzIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgZnJvbSBhIGNoYW5uZWwgdGhhdCBzdXBwbGllcyBhIHNlcXVlbmNlCi8vIG9mIHZhbHVlcyB1bnRpbCBpdCBpcyBjbG9zZWQuIFRoZSBmdW5jdGlvbiBkb2Vzbid0IHJldHVybiB1bnRpbCB0aGVuLgpmdW5jIEJ1aWxke3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdEZyb21DaGFuKHNvdXJjZSA8LWNoYW4ge3suVHlwZX19KSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWxpc3QgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCWZvciB2IDo9IHJhbmdlIHNvdXJjZSB7CgkJbGlzdCA9IGFwcGVuZChsaXN0LCB2KQoJfQoJcmV0dXJuIGxpc3QKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBJc1NlcXVlbmNlIHJldHVybnMgdHJ1ZSBmb3IgbGlzdHMgYW5kIHF1ZXVlcy4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBJc1NlcXVlbmNlKCkgYm9vbCB7CglyZXR1cm4gdHJ1ZQp9CgovLyBJc1NldCByZXR1cm5zIGZhbHNlIGZvciBsaXN0cyBvciBxdWV1ZXMuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgSXNTZXQoKSBib29sIHsKCXJldHVybiBmYWxzZQp9CgovLyBzbGljZSByZXR1cm5zIHRoZSBpbnRlcm5hbCBlbGVtZW50cyBvZiB0aGUgY3VycmVudCBsaXN0LiBUaGlzIGlzIGEgc2VhbSBmb3IgdGVzdGluZyBldGMuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgc2xpY2UoKSBbXXt7LlR5cGV9fSB7CglyZXR1cm4gbGlzdAp9CgovLyBUb0xpc3QgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgdGhlIGxpc3QgYXMgYSBsaXN0LCB3aGljaCBpcyBhbiBpZGVudGl0eSBvcGVyYXRpb24gaW4gdGhpcyBjYXNlLgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFRvTGlzdCgpIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJcmV0dXJuIGxpc3QKfQp7ey0gaWYgLlRvU2V0fX0KCi8vIFRvU2V0IHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBsaXN0IGFzIGEgc2V0LiBUaGUgcmV0dXJuZWQgc2V0IGlzIGEgc2hhbGxvdwovLyBjb3B5OyB0aGUgbGlzdCBpcyBub3QgYWx0ZXJlZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUb1NldCgpIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJldHVybiBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQobGlzdC4uLikKfQp7ey0gZW5kfX0KCi8vIFRvU2xpY2UgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgdGhlIGxpc3QgYXMgYSBzbGljZSwgd2hpY2ggaXMgYW4gaWRlbnRpdHkgb3BlcmF0aW9uIGluIHRoaXMgY2FzZSwKLy8gYmVjYXVzZSB0aGUgc2ltcGxlIGxpc3QgaXMgbWVyZWx5IGEgZHJlc3NlZC11cCBzbGljZS4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUb1NsaWNlKCkgW117ey5UeXBlfX0gewoJcmV0dXJuIGxpc3QKfQoKLy8gVG9JbnRlcmZhY2VTbGljZSByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgY3VycmVudCBsaXN0IGFzIGEgc2xpY2Ugb2YgYXJiaXRyYXJ5IHR5cGUuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgVG9JbnRlcmZhY2VTbGljZSgpIFtdaW50ZXJmYWNle30gewoJcyA6PSBtYWtlKFtdaW50ZXJmYWNle30sIDAsIGxlbihsaXN0KSkKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QgewoJCXMgPSBhcHBlbmQocywgdikKCX0KCXJldHVybiBzCn0KCi8vIENsb25lIHJldHVybnMgYSBzaGFsbG93IGNvcHkgb2YgdGhlIGxpc3QuIEl0IGRvZXMgbm90IGNsb25lIHRoZSB1bmRlcmx5aW5nIGVsZW1lbnRzLgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIENsb25lKCkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXR1cm4gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdChsaXN0Li4uKQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEdldCBnZXRzIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBpbiB0aGUgbGlzdC4KLy8gUGFuaWNzIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgcmFuZ2Ugb3IgdGhlIGxpc3QgaXMgbmlsLgovLyBUaGUgc2ltcGxlIGxpc3QgaXMgYSBkcmVzc2VkLXVwIHNsaWNlIGFuZCBub3JtYWwgc2xpY2Ugb3BlcmF0aW9ucyB3aWxsIGFsc28gd29yay4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBHZXQoaSBpbnQpIHt7LlR5cGV9fSB7CglyZXR1cm4gbGlzdFtpXQp9CgovLyBIZWFkIGdldHMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGxpc3QuIEhlYWQgcGx1cyBUYWlsIGluY2x1ZGUgdGhlIHdob2xlIGxpc3QuIEhlYWQgaXMgdGhlIG9wcG9zaXRlIG9mIExhc3QuCi8vIFBhbmljcyBpZiBsaXN0IGlzIGVtcHR5IG9yIG5pbC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBIZWFkKCkge3suVHlwZX19IHsKCXJldHVybiBsaXN0WzBdCn0KCi8vIEhlYWRPcHRpb24gZ2V0cyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgbGlzdCwgaWYgcG9zc2libGUuCi8vIE90aGVyd2lzZSByZXR1cm5zIHt7aWYgLlR5cGUuSXNQdHJ9fW5pbHt7ZWxzZX19dGhlIHplcm8gdmFsdWV7e2VuZH19LgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEhlYWRPcHRpb24oKSB7ey5UeXBlfX0gewoJaWYgbGlzdC5Jc0VtcHR5KCkgewoJCXJldHVybiB7ey5UeXBlLlplcm99fQoJfQoJcmV0dXJuIGxpc3RbMF0KfQoKLy8gTGFzdCBnZXRzIHRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlIGxpc3QuIEluaXQgcGx1cyBMYXN0IGluY2x1ZGUgdGhlIHdob2xlIGxpc3QuIExhc3QgaXMgdGhlIG9wcG9zaXRlIG9mIEhlYWQuCi8vIFBhbmljcyBpZiBsaXN0IGlzIGVtcHR5IG9yIG5pbC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBMYXN0KCkge3suVHlwZX19IHsKCXJldHVybiBsaXN0W2xlbihsaXN0KS0xXQp9CgovLyBMYXN0T3B0aW9uIGdldHMgdGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgbGlzdCwgaWYgcG9zc2libGUuCi8vIE90aGVyd2lzZSByZXR1cm5zIHt7aWYgLlR5cGUuSXNQdHJ9fW5pbHt7ZWxzZX19dGhlIHplcm8gdmFsdWV7e2VuZH19LgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIExhc3RPcHRpb24oKSB7ey5UeXBlfX0gewoJaWYgbGlzdC5Jc0VtcHR5KCkgewoJCXJldHVybiB7ey5UeXBlLlplcm99fQoJfQoJcmV0dXJuIGxpc3RbbGVuKGxpc3QpLTFdCn0KCi8vIFRhaWwgZ2V0cyBldmVyeXRoaW5nIGV4Y2VwdCB0aGUgaGVhZC4gSGVhZCBwbHVzIFRhaWwgaW5jbHVkZSB0aGUgd2hvbGUgbGlzdC4gVGFpbCBpcyB0aGUgb3Bwb3NpdGUgb2YgSW5pdC4KLy8gUGFuaWNzIGlmIGxpc3QgaXMgZW1wdHkgb3IgbmlsLgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFRhaWwoKSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCXJldHVybiBsaXN0WzE6XQp9CgovLyBJbml0IGdldHMgZXZlcnl0aGluZyBleGNlcHQgdGhlIGxhc3QuIEluaXQgcGx1cyBMYXN0IGluY2x1ZGUgdGhlIHdob2xlIGxpc3QuIEluaXQgaXMgdGhlIG9wcG9zaXRlIG9mIFRhaWwuCi8vIFBhbmljcyBpZiBsaXN0IGlzIGVtcHR5IG9yIG5pbC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBJbml0KCkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXR1cm4gbGlzdFs6bGVuKGxpc3QpLTFdCn0KCi8vIElzRW1wdHkgdGVzdHMgd2hldGhlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGlzIGVtcHR5LgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIElzRW1wdHkoKSBib29sIHsKCXJldHVybiBsaXN0LlNpemUoKSA9PSAwCn0KCi8vIE5vbkVtcHR5IHRlc3RzIHdoZXRoZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBpcyBlbXB0eS4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBOb25FbXB0eSgpIGJvb2wgewoJcmV0dXJuIGxpc3QuU2l6ZSgpID4gMAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFNpemUgcmV0dXJucyB0aGUgbnVtYmVyIG9mIGl0ZW1zIGluIHRoZSBsaXN0IC0gYW4gYWxpYXMgb2YgTGVuKCkuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU2l6ZSgpIGludCB7CglyZXR1cm4gbGVuKGxpc3QpCn0KCi8vIExlbiByZXR1cm5zIHRoZSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIGxpc3QgLSBhbiBhbGlhcyBvZiBTaXplKCkuCi8vIFRoaXMgaXMgb25lIG9mIHRoZSB0aHJlZSBtZXRob2RzIGluIHRoZSBzdGFuZGFyZCBzb3J0LkludGVyZmFjZS4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBMZW4oKSBpbnQgewoJcmV0dXJuIGxlbihsaXN0KQp9CgovLyBTd2FwIGV4Y2hhbmdlcyB0d28gZWxlbWVudHMsIHdoaWNoIGlzIG5lY2Vzc2FyeSBkdXJpbmcgc29ydGluZyBldGMuCi8vIFRoaXMgaXMgb25lIG9mIHRoZSB0aHJlZSBtZXRob2RzIGluIHRoZSBzdGFuZGFyZCBzb3J0LkludGVyZmFjZS4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTd2FwKGksIGogaW50KSB7CglsaXN0W2ldLCBsaXN0W2pdID0gbGlzdFtqXSwgbGlzdFtpXQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0Ke3stIGlmIC5Db21wYXJhYmxlfX0KCi8vIENvbnRhaW5zIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGl0ZW0gaXMgYWxyZWFkeSBpbiB0aGUgbGlzdCwgcmV0dXJuaW5nIHRydWUgaWYgc28uCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgQ29udGFpbnModiB7ey5UeXBlfX0pIGJvb2wgewoJcmV0dXJuIGxpc3QuRXhpc3RzKGZ1bmMoeCB7ey5UeXBlfX0pIGJvb2wgewoJCXJldHVybiB7ey5UeXBlLlN0YXJ9fXggPT0ge3suVHlwZS5TdGFyfX12Cgl9KQp9CgovLyBDb250YWluc0FsbCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGdpdmVuIGl0ZW1zIGFyZSBhbGwgaW4gdGhlIGxpc3QsIHJldHVybmluZyB0cnVlIGlmIHNvLgovLyBUaGlzIGlzIHBvdGVudGlhbGx5IGEgc2xvdyBtZXRob2QgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgcmFyZWx5LgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIENvbnRhaW5zQWxsKGkgLi4ue3suVHlwZX19KSBib29sIHsKCWZvciBfLCB2IDo9IHJhbmdlIGkgewoJCWlmICFsaXN0LkNvbnRhaW5zKHYpIHsKCQkJcmV0dXJuIGZhbHNlCgkJfQoJfQoJcmV0dXJuIHRydWUKfQp7ey0gZW5kfX0KCi8vIEV4aXN0cyB2ZXJpZmllcyB0aGF0IG9uZSBvciBtb3JlIGVsZW1lbnRzIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgcmV0dXJuIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBFeGlzdHMocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7Cglmb3IgXywgdiA6PSByYW5nZSBsaXN0IHsKCQlpZiBwKHYpIHsKCQkJcmV0dXJuIHRydWUKCQl9Cgl9CglyZXR1cm4gZmFsc2UKfQoKLy8gRm9yYWxsIHZlcmlmaWVzIHRoYXQgYWxsIGVsZW1lbnRzIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgcmV0dXJuIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBGb3JhbGwocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7Cglmb3IgXywgdiA6PSByYW5nZSBsaXN0IHsKCQlpZiAhcCh2KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0KCi8vIEZvcmVhY2ggaXRlcmF0ZXMgb3ZlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGFuZCBleGVjdXRlcyBmdW5jdGlvbiBmIGFnYWluc3QgZWFjaCBlbGVtZW50LgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEZvcmVhY2goZiBmdW5jKHt7LlR5cGV9fSkpIHsKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QgewoJCWYodikKCX0KfQoKLy8gU2VuZCByZXR1cm5zIGEgY2hhbm5lbCB0aGF0IHdpbGwgc2VuZCBhbGwgdGhlIGVsZW1lbnRzIGluIG9yZGVyLgovLyBBIGdvcm91dGluZSBpcyBjcmVhdGVkIHRvIHNlbmQgdGhlIGVsZW1lbnRzOyB0aGlzIG9ubHkgdGVybWluYXRlcyB3aGVuIGFsbCB0aGUgZWxlbWVudHMKLy8gaGF2ZSBiZWVuIGNvbnN1bWVkLiBUaGUgY2hhbm5lbCB3aWxsIGJlIGNsb3NlZCB3aGVuIGFsbCB0aGUgZWxlbWVudHMgaGF2ZSBiZWVuIHNlbnQuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU2VuZCgpIDwtY2hhbiB7ey5UeXBlfX0gewoJY2ggOj0gbWFrZShjaGFuIHt7LlR5cGV9fSkKCWdvIGZ1bmMoKSB7CgkJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdCB7CgkJCWNoIDwtIHYKCQl9CgkJY2xvc2UoY2gpCgl9KCkKCXJldHVybiBjaAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFJldmVyc2UgcmV0dXJucyBhIGNvcHkgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB3aXRoIGFsbCBlbGVtZW50cyBpbiB0aGUgcmV2ZXJzZSBvcmRlci4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFJldmVyc2UoKSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCW4gOj0gbGVuKGxpc3QpCglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QobiwgbikKCWxhc3QgOj0gbiAtIDEKCWZvciBpLCB2IDo9IHJhbmdlIGxpc3QgewoJCXJlc3VsdFtsYXN0LWldID0gdgoJfQoJcmV0dXJuIHJlc3VsdAp9CgovLyBEb1JldmVyc2UgYWx0ZXJzIGEge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB3aXRoIGFsbCBlbGVtZW50cyBpbiB0aGUgcmV2ZXJzZSBvcmRlci4KLy8gVW5saWtlIFJldmVyc2UsIGl0IGRvZXMgbm90IGFsbG9jYXRlIG5ldyBtZW1vcnkuCi8vCi8vIFRoZSBsaXN0IGlzIG1vZGlmaWVkIGFuZCB0aGUgbW9kaWZpZWQgbGlzdCBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBEb1JldmVyc2UoKSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCW1pZCA6PSAobGVuKGxpc3QpICsgMSkgLyAyCglsYXN0IDo9IGxlbihsaXN0KSAtIDEKCWZvciBpIDo9IDA7IGkgPCBtaWQ7IGkrKyB7CgkJciA6PSBsYXN0IC0gaQoJCWlmIGkgIT0gciB7CgkJCWxpc3RbaV0sIGxpc3Rbcl0gPSBsaXN0W3JdLCBsaXN0W2ldCgkJfQoJfQoJcmV0dXJuIGxpc3QKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBTaHVmZmxlIHJldHVybnMgYSBzaHVmZmxlZCBjb3B5IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QsIHVzaW5nIGEgdmVyc2lvbiBvZiB0aGUgRmlzaGVyLVlhdGVzIHNodWZmbGUuCi8vCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBtb2RpZmllZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTaHVmZmxlKCkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJldHVybiBsaXN0LkNsb25lKCkuRG9TaHVmZmxlKCkKfQoKLy8gRG9TaHVmZmxlIHJldHVybnMgYSBzaHVmZmxlZCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0LCB1c2luZyBhIHZlcnNpb24gb2YgdGhlIEZpc2hlci1ZYXRlcyBzaHVmZmxlLgovLwovLyBUaGUgbGlzdCBpcyBtb2RpZmllZCBhbmQgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRG9TaHVmZmxlKCkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCW4gOj0gbGVuKGxpc3QpCglmb3IgaSA6PSAwOyBpIDwgbjsgaSsrIHsKCQlyIDo9IGkgKyByYW5kLkludG4obi1pKQoJCWxpc3RbaV0sIGxpc3Rbcl0gPSBsaXN0W3JdLCBsaXN0W2ldCgl9CglyZXR1cm4gbGlzdAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFRha2UgcmV0dXJucyBhIHNsaWNlIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29udGFpbmluZyB0aGUgbGVhZGluZyBuIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgbGlzdC4KLy8gSWYgbiBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNpemUgb2YgdGhlIGxpc3QsIHRoZSB3aG9sZSBvcmlnaW5hbCBsaXN0IGlzIHJldHVybmVkLgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFRha2UobiBpbnQpIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbiA+PSBsZW4obGlzdCkgewoJCXJldHVybiBsaXN0Cgl9CglyZXR1cm4gbGlzdFswOm5dCn0KCi8vIERyb3AgcmV0dXJucyBhIHNsaWNlIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3Qgd2l0aG91dCB0aGUgbGVhZGluZyBuIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgbGlzdC4KLy8gSWYgbiBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNpemUgb2YgdGhlIGxpc3QsIGFuIGVtcHR5IGxpc3QgaXMgcmV0dXJuZWQuCi8vCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBtb2RpZmllZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBEcm9wKG4gaW50KSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIG4gPT0gMCB7CgkJcmV0dXJuIGxpc3QKCX0KCglsIDo9IGxlbihsaXN0KQoJaWYgbiA8IGwgewoJCXJldHVybiBsaXN0W246XQoJfQoJcmV0dXJuIGxpc3RbbDpdCn0KCi8vIFRha2VMYXN0IHJldHVybnMgYSBzbGljZSBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGNvbnRhaW5pbmcgdGhlIHRyYWlsaW5nIG4gZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBsaXN0LgovLyBJZiBuIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgc2l6ZSBvZiB0aGUgbGlzdCwgdGhlIHdob2xlIG9yaWdpbmFsIGxpc3QgaXMgcmV0dXJuZWQuCi8vCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBtb2RpZmllZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUYWtlTGFzdChuIGludCkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglsIDo9IGxlbihsaXN0KQoJaWYgbiA+PSBsIHsKCQlyZXR1cm4gbGlzdAoJfQoJcmV0dXJuIGxpc3RbbC1uOl0KfQoKLy8gRHJvcExhc3QgcmV0dXJucyBhIHNsaWNlIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3Qgd2l0aG91dCB0aGUgdHJhaWxpbmcgbiBlbGVtZW50cyBvZiB0aGUgc291cmNlIGxpc3QuCi8vIElmIG4gaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzaXplIG9mIHRoZSBsaXN0LCBhbiBlbXB0eSBsaXN0IGlzIHJldHVybmVkLgovLwovLyBUaGUgb3JpZ2luYWwgbGlzdCBpcyBub3QgbW9kaWZpZWQuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRHJvcExhc3QobiBpbnQpIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbiA9PSAwIHsKCQlyZXR1cm4gbGlzdAoJfQoKCWwgOj0gbGVuKGxpc3QpCglpZiBuID4gbCB7CgkJcmV0dXJuIGxpc3RbbDpdCgl9CglyZXR1cm4gbGlzdFswIDogbC1uXQp9CgovLyBUYWtlV2hpbGUgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGNvbnRhaW5pbmcgdGhlIGxlYWRpbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBsaXN0LiBXaGlsc3QgdGhlCi8vIHByZWRpY2F0ZSBwIHJldHVybnMgdHJ1ZSwgZWxlbWVudHMgYXJlIGFkZGVkIHRvIHRoZSByZXN1bHQuIE9uY2UgcHJlZGljYXRlIHAgcmV0dXJucyBmYWxzZSwgYWxsIHJlbWFpbmluZwovLyBlbGVtZW50cyBhcmUgZXhjbHVkZWQuCi8vCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBtb2RpZmllZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUYWtlV2hpbGUocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QgewoJCWlmIHAodikgewoJCQlyZXN1bHQgPSBhcHBlbmQocmVzdWx0LCB2KQoJCX0gZWxzZSB7CgkJCXJldHVybiByZXN1bHQKCQl9Cgl9CglyZXR1cm4gcmVzdWx0Cn0KCi8vIERyb3BXaGlsZSByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29udGFpbmluZyB0aGUgdHJhaWxpbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBsaXN0LiBXaGlsc3QgdGhlCi8vIHByZWRpY2F0ZSBwIHJldHVybnMgdHJ1ZSwgZWxlbWVudHMgYXJlIGV4Y2x1ZGVkIGZyb20gdGhlIHJlc3VsdC4gT25jZSBwcmVkaWNhdGUgcCByZXR1cm5zIGZhbHNlLCBhbGwgcmVtYWluaW5nCi8vIGVsZW1lbnRzIGFyZSBhZGRlZC4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERyb3BXaGlsZShwIGZ1bmMoe3suVHlwZX19KSBib29sKSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCXJlc3VsdCA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCAwKQoJYWRkaW5nIDo9IGZhbHNlCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdCB7CgkJaWYgYWRkaW5nIHx8ICFwKHYpIHsKCQkJYWRkaW5nID0gdHJ1ZQoJCQlyZXN1bHQgPSBhcHBlbmQocmVzdWx0LCB2KQoJCX0KCX0KCglyZXR1cm4gcmVzdWx0Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gRmluZCByZXR1cm5zIHRoZSBmaXJzdCB7ey5UeXBlLk5hbWV9fSB0aGF0IHJldHVybnMgdHJ1ZSBmb3IgcHJlZGljYXRlIHAuCi8vIEZhbHNlIGlzIHJldHVybmVkIGlmIG5vbmUgbWF0Y2guCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRmluZChwIGZ1bmMoe3suVHlwZX19KSBib29sKSAoe3suVHlwZX19LCBib29sKSB7CgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdCB7CgkJaWYgcCh2KSB7CgkJCXJldHVybiB2LCB0cnVlCgkJfQoJfQp7ey0gaWYgLlR5cGUuSXNQdHJ9fQoKCXJldHVybiBuaWwsIGZhbHNlCnt7LSBlbHNlfX0KCgl2YXIgZW1wdHkge3suVHlwZX19CglyZXR1cm4gZW1wdHksIGZhbHNlCnt7LSBlbmR9fQp9CgovLyBGaWx0ZXIgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHdob3NlIGVsZW1lbnRzIHJldHVybiB0cnVlIGZvciBwcmVkaWNhdGUgcC4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEZpbHRlcihwIGZ1bmMoe3suVHlwZX19KSBib29sKSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCXJlc3VsdCA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCBsZW4obGlzdCkpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdCB7CgkJaWYgcCh2KSB7CgkJCXJlc3VsdCA9IGFwcGVuZChyZXN1bHQsIHYpCgkJfQoJfQoKCXJldHVybiByZXN1bHQKfQoKLy8gUGFydGl0aW9uIHJldHVybnMgdHdvIG5ldyB7ey5UeXBlLlV9fUxpc3RzIHdob3NlIGVsZW1lbnRzIHJldHVybiB0cnVlIG9yIGZhbHNlIGZvciB0aGUgcHJlZGljYXRlLCBwLgovLyBUaGUgZmlyc3QgcmVzdWx0IGNvbnNpc3RzIG9mIGFsbCBlbGVtZW50cyB0aGF0IHNhdGlzZnkgdGhlIHByZWRpY2F0ZSBhbmQgdGhlIHNlY29uZCByZXN1bHQgY29uc2lzdHMgb2YKLy8gYWxsIGVsZW1lbnRzIHRoYXQgZG9uJ3QuIFRoZSByZWxhdGl2ZSBvcmRlciBvZiB0aGUgZWxlbWVudHMgaW4gdGhlIHJlc3VsdHMgaXMgdGhlIHNhbWUgYXMgaW4gdGhlCi8vIG9yaWdpbmFsIGxpc3QuCi8vCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBtb2RpZmllZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBQYXJ0aXRpb24ocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QsIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIHsKCW1hdGNoaW5nIDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIGxlbihsaXN0KSkKCW90aGVycyA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCBsZW4obGlzdCkpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdCB7CgkJaWYgcCh2KSB7CgkJCW1hdGNoaW5nID0gYXBwZW5kKG1hdGNoaW5nLCB2KQoJCX0gZWxzZSB7CgkJCW90aGVycyA9IGFwcGVuZChvdGhlcnMsIHYpCgkJfQoJfQoKCXJldHVybiBtYXRjaGluZywgb3RoZXJzCn0KCi8vIE1hcCByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCBmdW5jdGlvbiBmLgovLyBUaGUgcmVzdWx0aW5nIGxpc3QgaXMgdGhlIHNhbWUgc2l6ZSBhcyB0aGUgb3JpZ2luYWwgbGlzdC4KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTWFwKGYgZnVuYyh7ey5UeXBlfX0pIHt7LlR5cGV9fSkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKGxpc3QpKQoKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QgewoJCXJlc3VsdCA9IGFwcGVuZChyZXN1bHQsIGYodikpCgl9CgoJcmV0dXJuIHJlc3VsdAp9CgovLyBGbGF0TWFwIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIGZ1bmN0aW9uIGYgdGhhdAovLyByZXR1cm5zIHplcm8gb3IgbW9yZSBpdGVtcyBpbiBhIHNsaWNlLiBUaGUgcmVzdWx0aW5nIGxpc3QgbWF5IGhhdmUgYSBkaWZmZXJlbnQgc2l6ZSB0byB0aGUgb3JpZ2luYWwgbGlzdC4KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRmxhdE1hcChmIGZ1bmMoe3suVHlwZX19KSBbXXt7LlR5cGV9fSkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKGxpc3QpKQoKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QgewoJCXJlc3VsdCA9IGFwcGVuZChyZXN1bHQsIGYodikuLi4pCgl9CgoJcmV0dXJuIHJlc3VsdAp9CgovLyBDb3VudEJ5IGdpdmVzIHRoZSBudW1iZXIgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB0aGF0IHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgQ291bnRCeShwIGZ1bmMoe3suVHlwZX19KSBib29sKSAocmVzdWx0IGludCkgewoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdCB7CgkJaWYgcCh2KSB7CgkJCXJlc3VsdCsrCgkJfQoJfQoJcmV0dXJuIHJlc3VsdAp9CgovLyBNaW5CeSByZXR1cm5zIGFuIGVsZW1lbnQgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBjb250YWluaW5nIHRoZSBtaW5pbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCi8vIHVzaW5nIGEgcGFzc2VkIGZ1bmMgZGVmaW5pbmcg4oCYbGVzc+KAmS4gSW4gdGhlIGNhc2Ugb2YgbXVsdGlwbGUgaXRlbXMgYmVpbmcgZXF1YWxseSBtaW5pbWFsLCB0aGUgZmlyc3Qgc3VjaAovLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIE1pbkJ5KGxlc3MgZnVuYyh7ey5UeXBlfX0sIHt7LlR5cGV9fSkgYm9vbCkge3suVHlwZX19IHsKCWwgOj0gbGVuKGxpc3QpCglpZiBsID09IDAgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtaW5pbXVtIG9mIGFuIGVtcHR5IGxpc3QuIikKCX0KCgltIDo9IDAKCWZvciBpIDo9IDE7IGkgPCBsOyBpKysgewoJCWlmIGxlc3MobGlzdFtpXSwgbGlzdFttXSkgewoJCQltID0gaQoJCX0KCX0KCglyZXR1cm4gbGlzdFttXQp9CgovLyBNYXhCeSByZXR1cm5zIGFuIGVsZW1lbnQgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBjb250YWluaW5nIHRoZSBtYXhpbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCi8vIHVzaW5nIGEgcGFzc2VkIGZ1bmMgZGVmaW5pbmcg4oCYbGVzc+KAmS4gSW4gdGhlIGNhc2Ugb2YgbXVsdGlwbGUgaXRlbXMgYmVpbmcgZXF1YWxseSBtYXhpbWFsLCB0aGUgZmlyc3Qgc3VjaAovLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIE1heEJ5KGxlc3MgZnVuYyh7ey5UeXBlfX0sIHt7LlR5cGV9fSkgYm9vbCkge3suVHlwZX19IHsKCWwgOj0gbGVuKGxpc3QpCglpZiBsID09IDAgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtYXhpbXVtIG9mIGFuIGVtcHR5IGxpc3QuIikKCX0KCgltIDo9IDAKCWZvciBpIDo9IDE7IGkgPCBsOyBpKysgewoJCWlmIGxlc3MobGlzdFttXSwgbGlzdFtpXSkgewoJCQltID0gaQoJCX0KCX0KCglyZXR1cm4gbGlzdFttXQp9CgovLyBEaXN0aW5jdEJ5IHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB3aG9zZSBlbGVtZW50cyBhcmUgdW5pcXVlLCB3aGVyZSBlcXVhbGl0eSBpcyBkZWZpbmVkIGJ5IHRoZSBlcXVhbCBmdW5jdGlvbi4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBEaXN0aW5jdEJ5KGVxdWFsIGZ1bmMoe3suVHlwZX19LCB7ey5UeXBlfX0pIGJvb2wpIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJcmVzdWx0IDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIGxlbihsaXN0KSkKT3V0ZXI6Cglmb3IgXywgdiA6PSByYW5nZSBsaXN0IHsKCQlmb3IgXywgciA6PSByYW5nZSByZXN1bHQgewoJCQlpZiBlcXVhbCh2LCByKSB7CgkJCQljb250aW51ZSBPdXRlcgoJCQl9CgkJfQoJCXJlc3VsdCA9IGFwcGVuZChyZXN1bHQsIHYpCgl9CglyZXR1cm4gcmVzdWx0Cn0KCi8vIEluZGV4V2hlcmUgZmluZHMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBlbGVtZW50IHNhdGlzZnlpbmcgcHJlZGljYXRlIHAuIElmIG5vbmUgZXhpc3RzLCAtMSBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBJbmRleFdoZXJlKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIGludCB7CglyZXR1cm4gbGlzdC5JbmRleFdoZXJlMihwLCAwKQp9CgovLyBJbmRleFdoZXJlMiBmaW5kcyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgc2F0aXNmeWluZyBwcmVkaWNhdGUgcCBhdCBvciBhZnRlciBzb21lIHN0YXJ0IGluZGV4LgovLyBJZiBub25lIGV4aXN0cywgLTEgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgSW5kZXhXaGVyZTIocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCwgZnJvbSBpbnQpIGludCB7Cglmb3IgaSwgdiA6PSByYW5nZSBsaXN0IHsKCQlpZiBpID49IGZyb20gJiYgcCh2KSB7CgkJCXJldHVybiBpCgkJfQoJfQoJcmV0dXJuIC0xCn0KCi8vIExhc3RJbmRleFdoZXJlIGZpbmRzIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IHNhdGlzZnlpbmcgcHJlZGljYXRlIHAuCi8vIElmIG5vbmUgZXhpc3RzLCAtMSBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBMYXN0SW5kZXhXaGVyZShwIGZ1bmMoe3suVHlwZX19KSBib29sKSBpbnQgewoJcmV0dXJuIGxpc3QuTGFzdEluZGV4V2hlcmUyKHAsIGxlbihsaXN0KSkKfQoKLy8gTGFzdEluZGV4V2hlcmUyIGZpbmRzIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IHNhdGlzZnlpbmcgcHJlZGljYXRlIHAgYXQgb3IgYmVmb3JlIHNvbWUgc3RhcnQgaW5kZXguCi8vIElmIG5vbmUgZXhpc3RzLCAtMSBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBMYXN0SW5kZXhXaGVyZTIocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCwgYmVmb3JlIGludCkgaW50IHsKCWlmIGJlZm9yZSA8IDAgewoJCWJlZm9yZSA9IGxlbihsaXN0KQoJfQoJZm9yIGkgOj0gbGVuKGxpc3QpIC0gMTsgaSA+PSAwOyBpLS0gewoJCXYgOj0gbGlzdFtpXQoJCWlmIGkgPD0gYmVmb3JlICYmIHAodikgewoJCQlyZXR1cm4gaQoJCX0KCX0KCXJldHVybiAtMQp9Cnt7LSBpZiAuQ29tcGFyYWJsZX19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gVGhlc2UgbWV0aG9kcyBhcmUgaW5jbHVkZWQgd2hlbiB7ey5UeXBlLk5hbWV9fSBpcyBjb21wYXJhYmxlLgoKLy8gRXF1YWxzIGRldGVybWluZXMgaWYgdHdvIGxpc3RzIGFyZSBlcXVhbCB0byBlYWNoIG90aGVyLgovLyBJZiB0aGV5IGJvdGggYXJlIHRoZSBzYW1lIHNpemUgYW5kIGhhdmUgdGhlIHNhbWUgaXRlbXMgaW4gdGhlIHNhbWUgb3JkZXIsIHRoZXkgYXJlIGNvbnNpZGVyZWQgZXF1YWwuCi8vIE9yZGVyIG9mIGl0ZW1zIGlzIG5vdCByZWxldmVudCBmb3Igc2V0cyB0byBiZSBlcXVhbC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBFcXVhbHMob3RoZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgYm9vbCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIGxlbihvdGhlcikgPT0gMAoJfQoKCWlmIG90aGVyID09IG5pbCB7CgkJcmV0dXJuIGxlbihsaXN0KSA9PSAwCgl9CgoJaWYgbGVuKGxpc3QpICE9IGxlbihvdGhlcikgewoJCXJldHVybiBmYWxzZQoJfQoKCWZvciBpLCB2IDo9IHJhbmdlIGxpc3QgewoJCWlmIHYgIT0gb3RoZXJbaV0gewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CgoJcmV0dXJuIHRydWUKfQp7ey0gZW5kfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKdHlwZSBzb3J0YWJsZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3Qgc3RydWN0IHsKCWxlc3MgZnVuYyhpLCBqIHt7LlR5cGV9fSkgYm9vbAoJbSAgICBbXXt7LlR5cGV9fQp9CgpmdW5jIChzbCBzb3J0YWJsZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIExlc3MoaSwgaiBpbnQpIGJvb2wgewoJcmV0dXJuIHNsLmxlc3Moc2wubVtpXSwgc2wubVtqXSkKfQoKZnVuYyAoc2wgc29ydGFibGV7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBMZW4oKSBpbnQgewoJcmV0dXJuIGxlbihzbC5tKQp9CgpmdW5jIChzbCBzb3J0YWJsZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFN3YXAoaSwgaiBpbnQpIHsKCXNsLm1baV0sIHNsLm1bal0gPSBzbC5tW2pdLCBzbC5tW2ldCn0KCi8vIFNvcnRCeSBhbHRlcnMgdGhlIGxpc3Qgc28gdGhhdCB0aGUgZWxlbWVudHMgYXJlIHNvcnRlZCBieSBhIHNwZWNpZmllZCBvcmRlcmluZy4KLy8gU29ydGluZyBoYXBwZW5zIGluLXBsYWNlOyB0aGUgbW9kaWZpZWQgbGlzdCBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTb3J0QnkobGVzcyBmdW5jKGksIGoge3suVHlwZX19KSBib29sKSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCglzb3J0LlNvcnQoc29ydGFibGV7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0e2xlc3MsIGxpc3R9KQoJcmV0dXJuIGxpc3QKfQoKLy8gU3RhYmxlU29ydEJ5IGFsdGVycyB0aGUgbGlzdCBzbyB0aGF0IHRoZSBlbGVtZW50cyBhcmUgc29ydGVkIGJ5IGEgc3BlY2lmaWVkIG9yZGVyaW5nLgovLyBTb3J0aW5nIGhhcHBlbnMgaW4tcGxhY2U7IHRoZSBtb2RpZmllZCBsaXN0IGlzIHJldHVybmVkLgovLyBUaGUgYWxnb3JpdGhtIGtlZXBzIHRoZSBvcmlnaW5hbCBvcmRlciBvZiBlcXVhbCBlbGVtZW50cy4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTdGFibGVTb3J0QnkobGVzcyBmdW5jKGksIGoge3suVHlwZX19KSBib29sKSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCglzb3J0LlN0YWJsZShzb3J0YWJsZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3R7bGVzcywgbGlzdH0pCglyZXR1cm4gbGlzdAp9Cnt7LSBpZiAuT3JkZXJlZH19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gVGhlc2UgbWV0aG9kcyBhcmUgaW5jbHVkZWQgd2hlbiB7ey5UeXBlLk5hbWV9fSBpcyBvcmRlcmVkLgoKLy8gU29ydGVkIGFsdGVycyB0aGUgbGlzdCBzbyB0aGF0IHRoZSBlbGVtZW50cyBhcmUgc29ydGVkIGJ5IHRoZWlyIG5hdHVyYWwgb3JkZXJpbmcuCi8vIFNvcnRpbmcgaGFwcGVucyBpbi1wbGFjZTsgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU29ydGVkKCkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXR1cm4gbGlzdC5Tb3J0QnkoZnVuYyhhLCBiIHt7LlR5cGV9fSkgYm9vbCB7CgkJcmV0dXJuIHt7LlR5cGUuU3Rhcn19YSA8IHt7LlR5cGUuU3Rhcn19YgoJfSkKfQoKLy8gU3RhYmxlU29ydGVkIGFsdGVycyB0aGUgbGlzdCBzbyB0aGF0IHRoZSBlbGVtZW50cyBhcmUgc29ydGVkIGJ5IHRoZWlyIG5hdHVyYWwgb3JkZXJpbmcuCi8vIFNvcnRpbmcgaGFwcGVucyBpbi1wbGFjZTsgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU3RhYmxlU29ydGVkKCkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXR1cm4gbGlzdC5TdGFibGVTb3J0QnkoZnVuYyhhLCBiIHt7LlR5cGV9fSkgYm9vbCB7CgkJcmV0dXJuIHt7LlR5cGUuU3Rhcn19YSA8IHt7LlR5cGUuU3Rhcn19YgoJfSkKfQoKLy8gTWluIHJldHVybnMgdGhlIGZpcnN0IGVsZW1lbnQgY29udGFpbmluZyB0aGUgbWluaW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cy4KLy8gUGFuaWNzIGlmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5LgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIE1pbigpIHt7LlR5cGUuTmFtZX19IHsKCW0gOj0gbGlzdC5NaW5CeShmdW5jKGEge3suVHlwZX19LCBiIHt7LlR5cGV9fSkgYm9vbCB7CgkJcmV0dXJuIHt7LlR5cGUuU3Rhcn19YSA8IHt7LlR5cGUuU3Rhcn19YgoJfSkKCXJldHVybiB7ey5UeXBlLlN0YXJ9fW0KfQoKLy8gTWF4IHJldHVybnMgdGhlIGZpcnN0IGVsZW1lbnQgY29udGFpbmluZyB0aGUgbWF4aW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cy4KLy8gUGFuaWNzIGlmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5LgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIE1heCgpIChyZXN1bHQge3suVHlwZS5OYW1lfX0pIHsKCW0gOj0gbGlzdC5NYXhCeShmdW5jKGEge3suVHlwZX19LCBiIHt7LlR5cGV9fSkgYm9vbCB7CgkJcmV0dXJuIHt7LlR5cGUuU3Rhcn19YSA8IHt7LlR5cGUuU3Rhcn19YgoJfSkKCXJldHVybiB7ey5UeXBlLlN0YXJ9fW0KfQp7ey0gZW5kfX0Ke3stIGlmIC5OdW1lcmljfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBUaGVzZSBtZXRob2RzIGFyZSBpbmNsdWRlZCB3aGVuIHt7LlR5cGUuTmFtZX19IGlzIG51bWVyaWMuCgovLyBTdW0gcmV0dXJucyB0aGUgc3VtIG9mIGFsbCB0aGUgZWxlbWVudHMgaW4gdGhlIGxpc3QuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU3VtKCkge3suVHlwZS5OYW1lfX0gewoJc3VtIDo9IHt7LlR5cGUuTmFtZX19KDApCglmb3IgXywgdiA6PSByYW5nZSBsaXN0IHsKCQlzdW0gPSBzdW0gKyB7ey5UeXBlLlN0YXJ9fXYKCX0KCXJldHVybiBzdW0KfQp7ey0gZW5kfX0Ke3stIGlmIC5TdHJpbmdlcn19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFN0cmluZ0xpc3QgZ2V0cyBhIGxpc3Qgb2Ygc3RyaW5ncyB0aGF0IGRlcGljdHMgYWxsIHRoZSBlbGVtZW50cy4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTdHJpbmdMaXN0KCkgW11zdHJpbmcgewp7ey0gaWYgZXEgLlR5cGUuU3RyaW5nICJzdHJpbmcifX0KCXJldHVybiBsaXN0Cnt7LSBlbHNlfX0KCXN0cmluZ3MgOj0gbWFrZShbXXN0cmluZywgbGVuKGxpc3QpKQoJZm9yIGksIHYgOj0gcmFuZ2UgbGlzdCB7CgkJc3RyaW5nc1tpXSA9IGZtdC5TcHJpbnRmKCIldiIsIHYpCgl9CglyZXR1cm4gc3RyaW5ncwp7ey0gZW5kfX0KfQoKLy8gU3RyaW5nIGltcGxlbWVudHMgdGhlIFN0cmluZ2VyIGludGVyZmFjZSB0byByZW5kZXIgdGhlIGxpc3QgYXMgYSBjb21tYS1zZXBhcmF0ZWQgc3RyaW5nIGVuY2xvc2VkIGluIHNxdWFyZSBicmFja2V0cy4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTdHJpbmcoKSBzdHJpbmcgewoJcmV0dXJuIGxpc3QuTWtTdHJpbmczKCJbIiwgIiwgIiwgIl0iKQp9CgovLyBNa1N0cmluZyBjb25jYXRlbmF0ZXMgdGhlIHZhbHVlcyBhcyBhIHN0cmluZyB1c2luZyBhIHN1cHBsaWVkIHNlcGFyYXRvci4gTm8gZW5jbG9zaW5nIG1hcmtzIGFyZSBhZGRlZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcgewoJcmV0dXJuIGxpc3QuTWtTdHJpbmczKCIiLCBzZXAsICIiKQp9CgovLyBNa1N0cmluZzMgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcsIHVzaW5nIHRoZSBwcmVmaXgsIHNlcGFyYXRvciBhbmQgc3VmZml4IHN1cHBsaWVkLgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nIHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gIiIKCX0KCglyZXR1cm4gbGlzdC5ta1N0cmluZzNCeXRlcyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyKS5TdHJpbmcoKQp9CgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIG1rU3RyaW5nM0J5dGVzKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSAqYnl0ZXMuQnVmZmVyIHsKCWIgOj0gJmJ5dGVzLkJ1ZmZlcnt9CgliLldyaXRlU3RyaW5nKGJlZm9yZSkKCXNlcCA6PSAiIgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdCB7CgkJYi5Xcml0ZVN0cmluZyhzZXApCgkJYi5Xcml0ZVN0cmluZyhmbXQuU3ByaW50ZigiJXYiLCB2KSkKCQlzZXAgPSBiZXR3ZWVuCgl9CgliLldyaXRlU3RyaW5nKGFmdGVyKQoJcmV0dXJuIGIKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCnt7LSBlbmR9fQp7ey0gaWYgLkdvYkVuY29kZX19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEdvYkRlY29kZSBpbXBsZW1lbnRzICdnb2InIGRlY29kaW5nIGZvciB0aGlzIGxpc3QgdHlwZS4KLy8gWW91IG11c3QgcmVnaXN0ZXIge3suVHlwZS5OYW1lfX0gd2l0aCB0aGUgJ2dvYicgcGFja2FnZSBiZWZvcmUgdGhpcyBtZXRob2QgaXMgdXNlZC4KZnVuYyAobGlzdCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBHb2JEZWNvZGUoYiBbXWJ5dGUpIGVycm9yIHsKCWJ1ZiA6PSBieXRlcy5OZXdCdWZmZXIoYikKCXJldHVybiBnb2IuTmV3RGVjb2RlcihidWYpLkRlY29kZSgmbGlzdCkKfQoKLy8gR29iRW5jb2RlIGltcGxlbWVudHMgJ2dvYicgZW5jb2RpbmcgZm9yIHRoaXMgbGlzdCB0eXBlLgovLyBZb3UgbXVzdCByZWdpc3RlciB7ey5UeXBlLk5hbWV9fSB3aXRoIHRoZSAnZ29iJyBwYWNrYWdlIGJlZm9yZSB0aGlzIG1ldGhvZCBpcyB1c2VkLgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEdvYkVuY29kZSgpIChbXWJ5dGUsIGVycm9yKSB7CglidWYgOj0gJmJ5dGVzLkJ1ZmZlcnt9CgllcnIgOj0gZ29iLk5ld0VuY29kZXIoYnVmKS5FbmNvZGUobGlzdCkKCXJldHVybiBidWYuQnl0ZXMoKSwgZXJyCn0Ke3stIGVuZH19Cg==\"")
		packr.PackJSONBytes("builtin", "simple/map.tpl", "\"Ly8gQSBzaW1wbGUgdHlwZSBkZXJpdmVkIGZyb20gbWFwW3t7LktleS5OYW1lfX1de3suVHlwZX19LgovL3t7aWYgLktleS5Jc1B0cn19IE5vdGUgdGhhdCB0aGUgYXBpIHVzZXMge3suS2V5fX0gYnV0IHRoZSBtYXAgdXNlcyB7ey5LZXkuTmFtZX19IGtleXMue3tlbmR9fQovLyBOb3QgdGhyZWFkLXNhZmUuCi8vCi8vIEdlbmVyYXRlZCBmcm9tIHt7LlRlbXBsYXRlRmlsZX19IHdpdGggS2V5PXt7LktleX19IFR5cGU9e3suVHlwZX19Ci8vIG9wdGlvbnM6IENvbXBhcmFibGU6e3suQ29tcGFyYWJsZX19IFN0cmluZ2VyOnt7LlN0cmluZ2VyfX0gS2V5TGlzdDp7ey5LZXlMaXN0fX0gVmFsdWVMaXN0Ont7LlZhbHVlTGlzdH19IE11dGFibGU6YWx3YXlzCi8vIGJ5IHJ1bnRlbXBsYXRlIHt7LkFwcFZlcnNpb259fQovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pvaGFuYnJhbmRob3JzdC9ydW50ZW1wbGF0ZS9ibG9iL21hc3Rlci9CVUlMVElOLm1kCgpwYWNrYWdlIHt7LlBhY2thZ2V9fQoKaW1wb3J0ICgKe3stIGlmIC5TdHJpbmdlcn19CgkiYnl0ZXMiCnt7LSBlbmR9fQoJImZtdCIKe3stIGlmIC5IYXNJbXBvcnR9fQoJe3suSW1wb3J0fX0Ke3stIGVuZH19CikKCi8vIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgaXMgdGhlIHByaW1hcnkgdHlwZSB0aGF0IHJlcHJlc2VudHMgYSBtYXAKdHlwZSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwIG1hcFt7ey5LZXkuTmFtZX19XXt7LlR5cGV9fQoKLy8ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlIHJlcHJlc2VudHMgYSBrZXkvdmFsdWUgcGFpci4KdHlwZSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUgc3RydWN0IHsKCUtleSB7ey5LZXl9fQoJVmFsIHt7LlR5cGV9fQp9CgovLyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzIGNhbiBiZSB1c2VkIGFzIGEgYnVpbGRlciBmb3IgdW5tb2RpZmlhYmxlIG1hcHMuCnR5cGUge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlcyBbXXt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZQoKLy8gQXBwZW5kMSBhZGRzIG9uZSBpdGVtLgpmdW5jICh0cyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzKSBBcHBlbmQxKGsge3suS2V5fX0sIHYge3suVHlwZX19KSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzIHsKCXJldHVybiBhcHBlbmQodHMsIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXtrLCB2fSkKfQoKLy8gQXBwZW5kMiBhZGRzIHR3byBpdGVtcy4KZnVuYyAodHMge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlcykgQXBwZW5kMihrMSB7ey5LZXl9fSwgdjEge3suVHlwZX19LCBrMiB7ey5LZXl9fSwgdjIge3suVHlwZX19KSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzIHsKCXJldHVybiBhcHBlbmQodHMsIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXtrMSwgdjF9LCB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGV7azIsIHYyfSkKfQoKLy8gQXBwZW5kMyBhZGRzIHRocmVlIGl0ZW1zLgpmdW5jICh0cyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzKSBBcHBlbmQzKGsxIHt7LktleX19LCB2MSB7ey5UeXBlfX0sIGsyIHt7LktleX19LCB2MiB7ey5UeXBlfX0sIGszIHt7LktleX19LCB2MyB7ey5UeXBlfX0pIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgewoJcmV0dXJuIGFwcGVuZCh0cywge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle2sxLCB2MX0sIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXtrMiwgdjJ9LCB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGV7azMsIHYzfSkKfQoKLy8ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVppcCBpcyB1c2VkIHdpdGggdGhlIFZhbHVlcyBtZXRob2QgdG8gemlwIChpLmUuIGludGVybGVhdmUpIGEgc2xpY2Ugb2YKLy8ga2V5cyB3aXRoIGEgc2xpY2Ugb2YgdmFsdWVzLiBUaGVzZSBjYW4gdGhlbiBiZSBwYXNzZWQgaW4gdG8gdGhlIE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAKLy8gY29uc3RydWN0b3IgZnVuY3Rpb24uCmZ1bmMge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVppcChrZXlzIC4uLnt7LktleX19KSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzIHsKCXRzIDo9IG1ha2Uoe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlcywgbGVuKGtleXMpKQoJZm9yIGksIGsgOj0gcmFuZ2Uga2V5cyB7CgkJdHNbaV0uS2V5ID0gawoJfQoJcmV0dXJuIHRzCn0KCi8vIFZhbHVlcyBzZXRzIHRoZSB2YWx1ZXMgaW4gYSB0dXBsZSBzbGljZS4gVXNlIHRoaXMgd2l0aCB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19WmlwLgpmdW5jICh0cyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzKSBWYWx1ZXModmFsdWVzIC4uLnt7LlR5cGV9fSkge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlcyB7CglpZiBsZW4odHMpICE9IGxlbih2YWx1ZXMpIHsKCQlwYW5pYyhmbXQuRXJyb3JmKCJNaXNtYXRjaGVkICVkIGtleXMgYW5kICVkIHZhbHVlcyIsIGxlbih0cyksIGxlbih2YWx1ZXMpKSkKCX0KCWZvciBpLCB2IDo9IHJhbmdlIHZhbHVlcyB7CgkJdHNbaV0uVmFsID0gdgoJfQoJcmV0dXJuIHRzCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZnVuYyBuZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKCkge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCB7CglyZXR1cm4ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcChtYWtlKG1hcFt7ey5LZXkuTmFtZX19XXt7LlR5cGV9fSkpCn0KCi8vIE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAxIGNyZWF0ZXMgYW5kIHJldHVybnMgYSByZWZlcmVuY2UgdG8gYSBtYXAgY29udGFpbmluZyBvbmUgaXRlbS4KZnVuYyBOZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwMShrIHt7LktleX19LCB2IHt7LlR5cGV9fSkge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCB7CgltbSA6PSBuZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKCkKCW1tW3t7LktleS5TdGFyfX1rXSA9IHYKCXJldHVybiBtbQp9CgovLyBOZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwIGNyZWF0ZXMgYW5kIHJldHVybnMgYSByZWZlcmVuY2UgdG8gYSBtYXAsIG9wdGlvbmFsbHkgY29udGFpbmluZyBzb21lIGl0ZW1zLgpmdW5jIE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoa3YgLi4ue3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlKSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwIHsKCW1tIDo9IG5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKQoJZm9yIF8sIHQgOj0gcmFuZ2Uga3YgewoJCW1tW3t7LktleS5TdGFyfX10LktleV0gPSB0LlZhbAoJfQoJcmV0dXJuIG1tCn0KCi8vIEtleXMgcmV0dXJucyB0aGUga2V5cyBvZiB0aGUgY3VycmVudCBtYXAgYXMgYSBzbGljZS4KZnVuYyAobW0ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgS2V5cygpIHt7aWYgLktleUxpc3R9fXt7LktleUxpc3R9fXt7ZWxzZX19W117ey5LZXl9fXt7ZW5kfX0gewoJcyA6PSBtYWtlKHt7aWYgLktleUxpc3R9fXt7LktleUxpc3R9fXt7ZWxzZX19W117ey5LZXl9fXt7ZW5kfX0sIDAsIGxlbihtbSkpCglmb3IgayA6PSByYW5nZSBtbSB7CgkJcyA9IGFwcGVuZChzLCB7ey5LZXkuQW1wfX1rKQoJfQoJcmV0dXJuIHMKfQoKLy8gVmFsdWVzIHJldHVybnMgdGhlIHZhbHVlcyBvZiB0aGUgY3VycmVudCBtYXAgYXMgYSBzbGljZS4KZnVuYyAobW0ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgVmFsdWVzKCkge3tpZiAuVmFsdWVMaXN0fX17ey5WYWx1ZUxpc3R9fXt7ZWxzZX19W117ey5UeXBlfX17e2VuZH19IHsKCXMgOj0gbWFrZSh7e2lmIC5WYWx1ZUxpc3R9fXt7LlZhbHVlTGlzdH19e3tlbHNlfX1bXXt7LlR5cGV9fXt7ZW5kfX0sIDAsIGxlbihtbSkpCglmb3IgXywgdiA6PSByYW5nZSBtbSB7CgkJcyA9IGFwcGVuZChzLCB2KQoJfQoJcmV0dXJuIHMKfQoKLy8gc2xpY2UgcmV0dXJucyB0aGUgaW50ZXJuYWwgZWxlbWVudHMgb2YgdGhlIG1hcC4gVGhpcyBpcyBhIHNlYW0gZm9yIHRlc3RpbmcgZXRjLgpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBzbGljZSgpIFtde3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlIHsKCXMgOj0gbWFrZShbXXt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZSwgMCwgbGVuKG1tKSkKCWZvciBrLCB2IDo9IHJhbmdlIG1tIHsKCQlzID0gYXBwZW5kKHMsIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXsoe3suS2V5LkFtcH19ayksIHZ9KQoJfQoJcmV0dXJuIHMKfQoKLy8gVG9TbGljZSByZXR1cm5zIHRoZSBrZXkvdmFsdWUgcGFpcnMgYXMgYSBzbGljZQpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBUb1NsaWNlKCkgW117ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUgewoJcmV0dXJuIG1tLnNsaWNlKCkKfQoKLy8gR2V0IHJldHVybnMgb25lIG9mIHRoZSBpdGVtcyBpbiB0aGUgbWFwLCBpZiBwcmVzZW50LgpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBHZXQoayB7ey5LZXl9fSkgKHt7LlR5cGV9fSwgYm9vbCkgewoJdiwgZm91bmQgOj0gbW1be3suS2V5LlN0YXJ9fWtdCglyZXR1cm4gdiwgZm91bmQKfQoKLy8gUHV0IGFkZHMgYW4gaXRlbSB0byB0aGUgY3VycmVudCBtYXAsIHJlcGxhY2luZyBhbnkgcHJpb3IgdmFsdWUuCmZ1bmMgKG1tIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIFB1dChrIHt7LktleX19LCB2IHt7LlR5cGV9fSkgYm9vbCB7CglfLCBmb3VuZCA6PSBtbVt7ey5LZXkuU3Rhcn19a10KCW1tW3t7LktleS5TdGFyfX1rXSA9IHYKCXJldHVybiAhZm91bmQgLy9GYWxzZSBpZiBpdCBleGlzdGVkIGFscmVhZHkKfQoKLy8gQ29udGFpbnNLZXkgZGV0ZXJtaW5lcyBpZiBhIGdpdmVuIGl0ZW0gaXMgYWxyZWFkeSBpbiB0aGUgbWFwLgpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBDb250YWluc0tleShrIHt7LktleX19KSBib29sIHsKCV8sIGZvdW5kIDo9IG1tW3t7LktleS5TdGFyfX1rXQoJcmV0dXJuIGZvdW5kCn0KCi8vIENvbnRhaW5zQWxsS2V5cyBkZXRlcm1pbmVzIGlmIHRoZSBnaXZlbiBpdGVtcyBhcmUgYWxsIGluIHRoZSBtYXAuCmZ1bmMgKG1tIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIENvbnRhaW5zQWxsS2V5cyhrayAuLi57ey5LZXl9fSkgYm9vbCB7Cglmb3IgXywgayA6PSByYW5nZSBrayB7CgkJaWYgIW1tLkNvbnRhaW5zS2V5KGspIHsKCQkJcmV0dXJuIGZhbHNlCgkJfQoJfQoJcmV0dXJuIHRydWUKfQoKLy8gQ2xlYXIgY2xlYXJzIHRoZSBlbnRpcmUgbWFwLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgQ2xlYXIoKSB7CgkqbW0gPSBtYWtlKG1hcFt7ey5LZXkuTmFtZX19XXt7LlR5cGV9fSkKfQoKLy8gUmVtb3ZlIGEgc2luZ2xlIGl0ZW0gZnJvbSB0aGUgbWFwLgpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBSZW1vdmUoayB7ey5LZXl9fSkgewoJZGVsZXRlKG1tLCB7ey5LZXkuU3Rhcn19aykKfQoKLy8gUG9wIHJlbW92ZXMgYSBzaW5nbGUgaXRlbSBmcm9tIHRoZSBtYXAsIHJldHVybmluZyB0aGUgdmFsdWUgcHJlc2VudCBwcmlvciB0byByZW1vdmFsLgpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBQb3AoayB7ey5LZXl9fSkgKHt7LlR5cGV9fSwgYm9vbCkgewoJdiwgZm91bmQgOj0gbW1be3suS2V5LlN0YXJ9fWtdCglkZWxldGUobW0sIHt7LktleS5TdGFyfX1rKQoJcmV0dXJuIHYsIGZvdW5kCn0KCi8vIFNpemUgcmV0dXJucyBob3cgbWFueSBpdGVtcyBhcmUgY3VycmVudGx5IGluIHRoZSBtYXAuIFRoaXMgaXMgYSBzeW5vbnltIGZvciBMZW4uCmZ1bmMgKG1tIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIFNpemUoKSBpbnQgewoJcmV0dXJuIGxlbihtbSkKfQoKLy8gSXNFbXB0eSByZXR1cm5zIHRydWUgaWYgdGhlIG1hcCBpcyBlbXB0eS4KZnVuYyAobW0ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgSXNFbXB0eSgpIGJvb2wgewoJcmV0dXJuIG1tLlNpemUoKSA9PSAwCn0KCi8vIE5vbkVtcHR5IHJldHVybnMgdHJ1ZSBpZiB0aGUgbWFwIGlzIG5vdCBlbXB0eS4KZnVuYyAobW0ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgTm9uRW1wdHkoKSBib29sIHsKCXJldHVybiBtbS5TaXplKCkgPiAwCn0KCi8vIERyb3BXaGVyZSBhcHBsaWVzIGEgcHJlZGljYXRlIGZ1bmN0aW9uIHRvIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hcC4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSwKLy8gdGhlIGVsZW1lbnQgaXMgZHJvcHBlZCBmcm9tIHRoZSBtYXAuCi8vIFRoaXMgaXMgc2ltaWxhciB0byBGaWx0ZXIgZXhjZXB0IHRoYXQgdGhlIG1hcCBpcyBtb2RpZmllZC4KZnVuYyAobW0ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgRHJvcFdoZXJlKGZuIGZ1bmMoe3suS2V5fX0sIHt7LlR5cGV9fSkgYm9vbCkge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlcyB7CglyZW1vdmVkIDo9IG1ha2Uoe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlcywgMCkKCWZvciBrLCB2IDo9IHJhbmdlIG1tIHsKCQlpZiBmbih7ey5LZXkuQW1wfX1rLCB2KSB7CgkJCXJlbW92ZWQgPSBhcHBlbmQocmVtb3ZlZCwge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxleyh7ey5LZXkuQW1wfX1rKSwgdn0pCgkJCWRlbGV0ZShtbSwgaykKCQl9Cgl9CglyZXR1cm4gcmVtb3ZlZAp9CgovLyBGb3JlYWNoIGFwcGxpZXMgdGhlIGZ1bmN0aW9uIGYgdG8gZXZlcnkgZWxlbWVudCBpbiB0aGUgbWFwLgovLyBUaGUgZnVuY3Rpb24gY2FuIHNhZmVseSBhbHRlciB0aGUgdmFsdWVzIHZpYSBzaWRlLWVmZmVjdHMuCmZ1bmMgKG1tIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEZvcmVhY2goZiBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pKSB7Cglmb3IgaywgdiA6PSByYW5nZSBtbSB7CgkJZih7ey5LZXkuQW1wfX1rLCB2KQoJfQp9CgovLyBGb3JhbGwgYXBwbGllcyB0aGUgcHJlZGljYXRlIHAgdG8gZXZlcnkgZWxlbWVudCBpbiB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBmYWxzZSwKLy8gdGhlIGl0ZXJhdGlvbiB0ZXJtaW5hdGVzIGVhcmx5LiBUaGUgcmV0dXJuZWQgdmFsdWUgaXMgdHJ1ZSBpZiBhbGwgZWxlbWVudHMgd2VyZSB2aXNpdGVkLAovLyBvciBmYWxzZSBpZiBhbiBlYXJseSByZXR1cm4gb2NjdXJyZWQuCi8vCi8vIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBjYW4gYWxzbyBiZSB1c2VkIHNpbXBseSBhcyBhIHdheSB0byB2aXNpdCBldmVyeSBlbGVtZW50IHVzaW5nIGEgZnVuY3Rpb24KLy8gd2l0aCBzb21lIHNpZGUtZWZmZWN0czsgc3VjaCBhIGZ1bmN0aW9uIG11c3QgYWx3YXlzIHJldHVybiB0cnVlLgpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBGb3JhbGwocCBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pIGJvb2wpIGJvb2wgewoJZm9yIGssIHYgOj0gcmFuZ2UgbW0gewoJCWlmICFwKHt7LktleS5BbXB9fWssIHYpIHsKCQkJcmV0dXJuIGZhbHNlCgkJfQoJfQoKCXJldHVybiB0cnVlCn0KCi8vIEV4aXN0cyBhcHBsaWVzIHRoZSBwcmVkaWNhdGUgcCB0byBldmVyeSBlbGVtZW50IGluIHRoZSBtYXAuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRydWUsCi8vIHRoZSBpdGVyYXRpb24gdGVybWluYXRlcyBlYXJseS4gVGhlIHJldHVybmVkIHZhbHVlIGlzIHRydWUgaWYgYW4gZWFybHkgcmV0dXJuIG9jY3VycmVkLgovLyBvciBmYWxzZSBpZiBhbGwgZWxlbWVudHMgd2VyZSB2aXNpdGVkIHdpdGhvdXQgZmluZGluZyBhIG1hdGNoLgpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBFeGlzdHMocCBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pIGJvb2wpIGJvb2wgewoJZm9yIGssIHYgOj0gcmFuZ2UgbW0gewoJCWlmIHAoe3suS2V5LkFtcH19aywgdikgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCX0KCglyZXR1cm4gZmFsc2UKfQoKLy8gRmluZCByZXR1cm5zIHRoZSBmaXJzdCB7ey5UeXBlfX0gdGhhdCByZXR1cm5zIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4KLy8gRmFsc2UgaXMgcmV0dXJuZWQgaWYgbm9uZSBtYXRjaC4KLy8gVGhlIG9yaWdpbmFsIG1hcCBpcyBub3QgbW9kaWZpZWQuCmZ1bmMgKG1tIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEZpbmQocCBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pIGJvb2wpICh7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUsIGJvb2wpIHsKCWZvciBrLCB2IDo9IHJhbmdlIG1tIHsKCQlpZiBwKHt7LktleS5BbXB9fWssIHYpIHsKCQkJcmV0dXJuIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXsoe3suS2V5LkFtcH19ayksIHZ9LCB0cnVlCgkJfQoJfQoKCXJldHVybiB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGV7fSwgZmFsc2UKfQoKLy8gRmlsdGVyIGFwcGxpZXMgdGhlIHByZWRpY2F0ZSBwIHRvIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hcCBhbmQgcmV0dXJucyBhIGNvcGllZCBtYXAgY29udGFpbmluZwovLyBvbmx5IHRoZSBlbGVtZW50cyBmb3Igd2hpY2ggdGhlIHByZWRpY2F0ZSByZXR1cm5lZCB0cnVlLgovLyBUaGUgb3JpZ2luYWwgbWFwIGlzIG5vdCBtb2RpZmllZC4KZnVuYyAobW0ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgRmlsdGVyKHAgZnVuYyh7ey5LZXl9fSwge3suVHlwZX19KSBib29sKSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwIHsKCXJlc3VsdCA6PSBOZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKCkKCWZvciBrLCB2IDo9IHJhbmdlIG1tIHsKCQlpZiBwKHt7LktleS5BbXB9fWssIHYpIHsKCQkJcmVzdWx0W2tdID0gdgoJCX0KCX0KCglyZXR1cm4gcmVzdWx0Cn0KCi8vIFBhcnRpdGlvbiBhcHBsaWVzIHRoZSBwcmVkaWNhdGUgcCB0byBldmVyeSBlbGVtZW50IGluIHRoZSBtYXAuIEl0IGRpdmlkZXMgdGhlIG1hcCBpbnRvIHR3byBjb3BpZWQgbWFwcywKLy8gdGhlIGZpcnN0IGNvbnRhaW5pbmcgYWxsIHRoZSBlbGVtZW50cyBmb3Igd2hpY2ggdGhlIHByZWRpY2F0ZSByZXR1cm5lZCB0cnVlLCBhbmQgdGhlIHNlY29uZCBjb250YWluaW5nIGFsbAovLyB0aGUgb3RoZXJzLgovLyBUaGUgb3JpZ2luYWwgbWFwIGlzIG5vdCBtb2RpZmllZC4KZnVuYyAobW0ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgUGFydGl0aW9uKHAgZnVuYyh7ey5LZXl9fSwge3suVHlwZX19KSBib29sKSAobWF0Y2hpbmcge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCwgb3RoZXJzIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIHsKCW1hdGNoaW5nID0gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCgpCglvdGhlcnMgPSBOZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKCkKCWZvciBrLCB2IDo9IHJhbmdlIG1tIHsKCQlpZiBwKHt7LktleS5BbXB9fWssIHYpIHsKCQkJbWF0Y2hpbmdba10gPSB2CgkJfSBlbHNlIHsKCQkJb3RoZXJzW2tdID0gdgoJCX0KCX0KCXJldHVybiBtYXRjaGluZywgb3RoZXJzCn0KCi8vIE1hcCByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1hcCBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIHRoZSBmdW5jdGlvbiBmLgovLyBUaGUgb3JpZ2luYWwgbWFwIGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBNYXAoZiBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pICh7ey5LZXl9fSwge3suVHlwZX19KSkge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCB7CglyZXN1bHQgOj0gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCgpCgoJZm9yIGsxLCB2MSA6PSByYW5nZSBtbSB7CgkJazIsIHYyIDo9IGYoe3suS2V5LkFtcH19azEsIHYxKQoJCXJlc3VsdFt7ey5LZXkuU3Rhcn19azJdID0gdjIKCX0KCglyZXR1cm4gcmVzdWx0Cn0KCi8vIEZsYXRNYXAgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1NYXAgYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCB0aGUgZnVuY3Rpb24gZiB0aGF0Ci8vIHJldHVybnMgemVybyBvciBtb3JlIGl0ZW1zIGluIGEgc2xpY2UuIFRoZSByZXN1bHRpbmcgbWFwIG1heSBoYXZlIGEgZGlmZmVyZW50IHNpemUgdG8gdGhlIG9yaWdpbmFsIG1hcC4KLy8gVGhlIG9yaWdpbmFsIG1hcCBpcyBub3QgbW9kaWZpZWQuCi8vCi8vIFRoaXMgaXMgYSBkb21haW4tdG8tcmFuZ2UgbWFwcGluZyBmdW5jdGlvbi4gRm9yIGJlc3Bva2UgdHJhbnNmb3JtYXRpb25zIHRvIG90aGVyIHR5cGVzLCBjb3B5IGFuZCBtb2RpZnkKLy8gdGhpcyBtZXRob2QgYXBwcm9wcmlhdGVseS4KZnVuYyAobW0ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgRmxhdE1hcChmIGZ1bmMoe3suS2V5fX0sIHt7LlR5cGV9fSkgW117ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUpIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgewoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKQoKCWZvciBrMSwgdjEgOj0gcmFuZ2UgbW0gewoJCXRzIDo9IGYoe3suS2V5LkFtcH19azEsIHYxKQoJCWZvciBfLCB0IDo9IHJhbmdlIHRzIHsKCQkJcmVzdWx0W3t7LktleS5TdGFyfX10LktleV0gPSB0LlZhbAoJCX0KCX0KCglyZXR1cm4gcmVzdWx0Cn0Ke3stIGlmIC5Db21wYXJhYmxlfX0KCi8vIEVxdWFscyBkZXRlcm1pbmVzIGlmIHR3byBtYXBzIGFyZSBlcXVhbCB0byBlYWNoIG90aGVyLgovLyBJZiB0aGV5IGJvdGggYXJlIHRoZSBzYW1lIHNpemUgYW5kIGhhdmUgdGhlIHNhbWUgaXRlbXMgdGhleSBhcmUgY29uc2lkZXJlZCBlcXVhbC4KLy8gT3JkZXIgb2YgaXRlbXMgaXMgbm90IHJlbGV2ZW50IGZvciBtYXBzIHRvIGJlIGVxdWFsLgpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBFcXVhbHMob3RoZXIge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgYm9vbCB7CglpZiBtbS5TaXplKCkgIT0gb3RoZXIuU2l6ZSgpIHsKCQlyZXR1cm4gZmFsc2UKCX0KCWZvciBrLCB2MSA6PSByYW5nZSBtbSB7CgkJdjIsIGZvdW5kIDo9IG90aGVyW2tdCgkJaWYgIWZvdW5kIHx8IHt7LlR5cGUuU3Rhcn19djEgIT0ge3suVHlwZS5TdGFyfX12MiB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0Ke3stIGVuZH19CgovLyBDbG9uZSByZXR1cm5zIGEgc2hhbGxvdyBjb3B5IG9mIHRoZSBtYXAuIEl0IGRvZXMgbm90IGNsb25lIHRoZSB1bmRlcmx5aW5nIGVsZW1lbnRzLgpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBDbG9uZSgpIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgewoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKQoJZm9yIGssIHYgOj0gcmFuZ2UgbW0gewoJCXJlc3VsdFtrXSA9IHYKCX0KCXJldHVybiByZXN1bHQKfQp7ey0gaWYgLlN0cmluZ2VyfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gU3RyaW5nIGltcGxlbWVudHMgdGhlIFN0cmluZ2VyIGludGVyZmFjZSB0byByZW5kZXIgdGhlIHNldCBhcyBhIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmcgZW5jbG9zZWQgaW4gc3F1YXJlIGJyYWNrZXRzLgpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBTdHJpbmcoKSBzdHJpbmcgewoJcmV0dXJuIG1tLk1rU3RyaW5nMygiWyIsICIsICIsICJdIikKfQoKLy8gaW1wbGVtZW50cyBlbmNvZGluZy5NYXJzaGFsZXIgaW50ZXJmYWNlIHsKLy9mdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKSB7Ci8vCXJldHVybiBtbS5ta1N0cmluZzNCeXRlcygie1wiIiwgIlwiLCBcIiIsICJcIn0iKS5CeXRlcygpLCBuaWwKLy99CgovLyBNa1N0cmluZyBjb25jYXRlbmF0ZXMgdGhlIG1hcCBrZXkvdmFsdWVzIGFzIGEgc3RyaW5nIHVzaW5nIGEgc3VwcGxpZWQgc2VwYXJhdG9yLiBObyBlbmNsb3NpbmcgbWFya3MgYXJlIGFkZGVkLgpmdW5jIChtbSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcgewoJcmV0dXJuIG1tLk1rU3RyaW5nMygiIiwgc2VwLCAiIikKfQoKLy8gTWtTdHJpbmczIGNvbmNhdGVuYXRlcyB0aGUgbWFwIGtleS92YWx1ZXMgYXMgYSBzdHJpbmcsIHVzaW5nIHRoZSBwcmVmaXgsIHNlcGFyYXRvciBhbmQgc3VmZml4IHN1cHBsaWVkLgp7ey0gaWYgLkhhc0tleVNsaWNlfX0KLy8gVGhlIG1hcCBlbnRyaWVzIGFyZSBzb3J0ZWQgYnkgdGhlaXIga2V5cy57ey0gZW5kfX0KZnVuYyAobW0ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcgewoJcmV0dXJuIG1tLm1rU3RyaW5nM0J5dGVzKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIpLlN0cmluZygpCn0KCmZ1bmMgKG1tIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIG1rU3RyaW5nM0J5dGVzKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSAqYnl0ZXMuQnVmZmVyIHsKCWIgOj0gJmJ5dGVzLkJ1ZmZlcnt9CgliLldyaXRlU3RyaW5nKGJlZm9yZSkKCXNlcCA6PSAiIgp7e2lmIC5IYXNLZXlMaXN0fX0KCWtleXMgOj0gbWFrZSh7ey5LZXlMaXN0fX0sIDAsIGxlbihtbSkpCglmb3IgaywgXyA6PSByYW5nZSBtbSB7CgkJa2V5cyAgPSBhcHBlbmQoa2V5cywgaykKCX0KCWtleXMuU29ydGVkKCkKCglmb3IgXywgayA6PSByYW5nZSBrZXlzIHsKCQl2IDo9IG1tW2tdCgkJYi5Xcml0ZVN0cmluZyhzZXApCgkJYi5Xcml0ZVN0cmluZyhmbXQuU3ByaW50ZigiJXY6JXYiLCBrLCB2KSkKCQlzZXAgPSBiZXR3ZWVuCgl9Cnt7ZWxzZX19Cglmb3IgaywgdiA6PSByYW5nZSBtbSB7CgkJYi5Xcml0ZVN0cmluZyhzZXApCgkJYi5Xcml0ZVN0cmluZyhmbXQuU3ByaW50ZigiJXY6JXYiLCBrLCB2KSkKCQlzZXAgPSBiZXR3ZWVuCgl9Cnt7ZW5kfX0KCWIuV3JpdGVTdHJpbmcoYWZ0ZXIpCglyZXR1cm4gYgp9Cnt7LSBlbmR9fQo=\"")
		packr.PackJSONBytes("builtin", "simple/set.tpl", "\"Ly8gQSBzaW1wbGUgdHlwZSBkZXJpdmVkIGZyb20gbWFwW3t7LlR5cGUuTmFtZX19XXN0cnVjdHt9Ci8ve3tpZiAuVHlwZS5Jc1B0cn19IE5vdGUgdGhhdCB0aGUgYXBpIHVzZXMge3suVHlwZX19IGJ1dCB0aGUgc2V0IHVzZXMge3suS2V5Lk5hbWV9fSBrZXlzLnt7ZW5kfX0KLy8gTm90IHRocmVhZC1zYWZlLgovLwovLyBHZW5lcmF0ZWQgZnJvbSB7ey5UZW1wbGF0ZUZpbGV9fSB3aXRoIFR5cGU9e3suVHlwZS5OYW1lfX0KLy8gb3B0aW9uczogTnVtZXJpYzp7ey5OdW1lcmljfX0gU3RyaW5nZXI6e3suU3RyaW5nZXJ9fSBNdXRhYmxlOmFsd2F5cwovLyBieSBydW50ZW1wbGF0ZSB7ey5BcHBWZXJzaW9ufX0KLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qb2hhbmJyYW5kaG9yc3QvcnVudGVtcGxhdGUvYmxvYi9tYXN0ZXIvQlVJTFRJTi5tZAoKcGFja2FnZSB7ey5QYWNrYWdlfX0KCnt7aWYgb3IgLlN0cmluZ2VyIC5IYXNJbXBvcnR9fQppbXBvcnQgKAp7ey0gaWYgLlN0cmluZ2VyfX0KCSJieXRlcyIKCSJlbmNvZGluZy9qc29uIgoJImZtdCIKe3stIGVuZH19Cnt7LSBpZiAuSGFzSW1wb3J0fX0KCXt7LkltcG9ydH19Cnt7ZW5kIC19fQopCgp7e2VuZCAtfX0KLy8ge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IGlzIHRoZSBwcmltYXJ5IHR5cGUgdGhhdCByZXByZXNlbnRzIGEgc2V0CnR5cGUge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IG1hcFt7ey5UeXBlLk5hbWV9fV1zdHJ1Y3R7fQoKLy8gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IGNyZWF0ZXMgYW5kIHJldHVybnMgYSByZWZlcmVuY2UgdG8gYW4gZW1wdHkgc2V0LgpmdW5jIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCh2YWx1ZXMgLi4ue3suVHlwZX19KSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJc2V0IDo9IG1ha2Uoe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KQoJZm9yIF8sIGkgOj0gcmFuZ2UgdmFsdWVzIHsKCQlzZXRbe3suVHlwZS5TdGFyfX1pXSA9IHN0cnVjdHt9e30KCX0KCXJldHVybiBzZXQKfQoKLy8gQ29udmVydHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBjb25zdHJ1Y3RzIGEgbmV3IHNldCBjb250YWluaW5nIHRoZSBzdXBwbGllZCB2YWx1ZXMsIGlmIGFueS4KLy8gVGhlIHJldHVybmVkIGJvb2xlYW4gd2lsbCBiZSBmYWxzZSBpZiBhbnkgb2YgdGhlIHZhbHVlcyBjb3VsZCBub3QgYmUgY29udmVydGVkIGNvcnJlY3RseS4KZnVuYyBDb252ZXJ0e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCwgYm9vbCkgewoJc2V0IDo9IG1ha2Uoe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KQoKCWZvciBfLCBpIDo9IHJhbmdlIHZhbHVlcyB7CgkJc3dpdGNoIGogOj0gaS4odHlwZSkgewp7ey0gaWYgLk51bWVyaWN9fQoJCWNhc2UgaW50OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldFtrXSA9IHN0cnVjdHt9e30KCQljYXNlICppbnQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldFtrXSA9IHN0cnVjdHt9e30KCQljYXNlIGludDg6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0W2tdID0gc3RydWN0e317fQoJCWNhc2UgKmludDg6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldFtrXSA9IHN0cnVjdHt9e30KCQljYXNlIGludDE2OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldFtrXSA9IHN0cnVjdHt9e30KCQljYXNlICppbnQxNjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0W2tdID0gc3RydWN0e317fQoJCWNhc2UgaW50MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0W2tdID0gc3RydWN0e317fQoJCWNhc2UgKmludDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXRba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSBpbnQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXRba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqaW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldFtrXSA9IHN0cnVjdHt9e30KCQljYXNlIHVpbnQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0W2tdID0gc3RydWN0e317fQoJCWNhc2UgKnVpbnQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldFtrXSA9IHN0cnVjdHt9e30KCQljYXNlIHVpbnQ4OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldFtrXSA9IHN0cnVjdHt9e30KCQljYXNlICp1aW50ODoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0W2tdID0gc3RydWN0e317fQoJCWNhc2UgdWludDE2OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldFtrXSA9IHN0cnVjdHt9e30KCQljYXNlICp1aW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldFtrXSA9IHN0cnVjdHt9e30KCQljYXNlIHVpbnQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXRba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqdWludDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXRba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSB1aW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0W2tdID0gc3RydWN0e317fQoJCWNhc2UgKnVpbnQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0W2tdID0gc3RydWN0e317fQoJCWNhc2UgZmxvYXQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXRba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqZmxvYXQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0W2tdID0gc3RydWN0e317fQoJCWNhc2UgZmxvYXQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXRba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqZmxvYXQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0W2tdID0gc3RydWN0e317fQp7ey0gZWxzZX19CgkJY2FzZSB7ey5UeXBlLk5hbWV9fToKCQkJc2V0W2pdID0gc3RydWN0e317fQoJCWNhc2UgKnt7LlR5cGUuTmFtZX19OgoJCQlzZXRbKmpdID0gc3RydWN0e317fQp7ey0gZW5kfX0KCQl9Cgl9CgoJcmV0dXJuIHNldCwgbGVuKHNldCkgPT0gbGVuKHZhbHVlcykKfQoKLy8gQnVpbGR7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXRGcm9tQ2hhbiBjb25zdHJ1Y3RzIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBmcm9tIGEgY2hhbm5lbCB0aGF0IHN1cHBsaWVzIGEgc2VxdWVuY2UKLy8gb2YgdmFsdWVzIHVudGlsIGl0IGlzIGNsb3NlZC4gVGhlIGZ1bmN0aW9uIGRvZXNuJ3QgcmV0dXJuIHVudGlsIHRoZW4uCmZ1bmMgQnVpbGR7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXRGcm9tQ2hhbihzb3VyY2UgPC1jaGFuIHt7LlR5cGV9fSkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHsKCXNldCA6PSBtYWtlKHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkKCWZvciB2IDo9IHJhbmdlIHNvdXJjZSB7CgkJc2V0W3t7LlR5cGUuU3Rhcn19dl0gPSBzdHJ1Y3R7fXt9Cgl9CglyZXR1cm4gc2V0Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gSXNTZXF1ZW5jZSByZXR1cm5zIHRydWUgZm9yIGxpc3RzIGFuZCBxdWV1ZXMuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIElzU2VxdWVuY2UoKSBib29sIHsKCXJldHVybiBmYWxzZQp9CgovLyBJc1NldCByZXR1cm5zIGZhbHNlIGZvciBsaXN0cyBvciBxdWV1ZXMuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIElzU2V0KCkgYm9vbCB7CglyZXR1cm4gdHJ1ZQp9Cgp7ey0gaWYgLlRvTGlzdH19CgovLyBUb0xpc3QgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgdGhlIHNldCBhcyBhIGxpc3QuIFRoZSByZXR1cm5lZCBsaXN0IGlzIGEgc2hhbGxvdwovLyBjb3B5OyB0aGUgc2V0IGlzIG5vdCBhbHRlcmVkLgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBUb0xpc3QoKSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXR1cm4ge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdChzZXQuVG9TbGljZSgpKQp9Cnt7LSBlbmR9fQoKLy8gVG9TZXQgcmV0dXJucyB0aGUgc2V0OyB0aGlzIGlzIGFuIGlkZW50aXR5IG9wZXJhdGlvbiBpbiB0aGlzIGNhc2UuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFRvU2V0KCkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHsKCXJldHVybiBzZXQKfQoKLy8gVG9TbGljZSByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgY3VycmVudCBzZXQgYXMgYSBzbGljZS4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgVG9TbGljZSgpIFtde3suVHlwZX19IHsKCXMgOj0gbWFrZShbXXt7LlR5cGV9fSwgMCwgbGVuKHNldCkpCglmb3IgdiA6PSByYW5nZSBzZXQgewoJCXMgPSBhcHBlbmQocywge3suVHlwZS5BbXB9fXYpCgl9CglyZXR1cm4gcwp9CgovLyBUb0ludGVyZmFjZVNsaWNlIHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBjdXJyZW50IHNldCBhcyBhIHNsaWNlIG9mIGFyYml0cmFyeSB0eXBlLgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBUb0ludGVyZmFjZVNsaWNlKCkgW11pbnRlcmZhY2V7fSB7CglzIDo9IG1ha2UoW11pbnRlcmZhY2V7fSwgMCwgbGVuKHNldCkpCglmb3IgdiA6PSByYW5nZSBzZXQgewoJCXMgPSBhcHBlbmQocywgdikKCX0KCXJldHVybiBzCn0KCi8vIENsb25lIHJldHVybnMgYSBzaGFsbG93IGNvcHkgb2YgdGhlIHNldC4gSXQgZG9lcyBub3QgY2xvbmUgdGhlIHVuZGVybHlpbmcgZWxlbWVudHMuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIENsb25lKCkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHsKCWNsb25lZFNldCA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoJZm9yIHYgOj0gcmFuZ2Ugc2V0IHsKCQljbG9uZWRTZXQuZG9BZGQodikKCX0KCXJldHVybiBjbG9uZWRTZXQKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBJc0VtcHR5IHJldHVybnMgdHJ1ZSBpZiB0aGUgc2V0IGlzIGVtcHR5LgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBJc0VtcHR5KCkgYm9vbCB7CglyZXR1cm4gc2V0LlNpemUoKSA9PSAwCn0KCi8vIE5vbkVtcHR5IHJldHVybnMgdHJ1ZSBpZiB0aGUgc2V0IGlzIG5vdCBlbXB0eS4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgTm9uRW1wdHkoKSBib29sIHsKCXJldHVybiBzZXQuU2l6ZSgpID4gMAp9CgovLyBTaXplIHJldHVybnMgaG93IG1hbnkgaXRlbXMgYXJlIGN1cnJlbnRseSBpbiB0aGUgc2V0LiBUaGlzIGlzIGEgc3lub255bSBmb3IgQ2FyZGluYWxpdHkuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFNpemUoKSBpbnQgewoJcmV0dXJuIGxlbihzZXQpCn0KCi8vIENhcmRpbmFsaXR5IHJldHVybnMgaG93IG1hbnkgaXRlbXMgYXJlIGN1cnJlbnRseSBpbiB0aGUgc2V0LiBUaGlzIGlzIGEgc3lub255bSBmb3IgU2l6ZS4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgQ2FyZGluYWxpdHkoKSBpbnQgewoJcmV0dXJuIHNldC5TaXplKCkKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBBZGQgYWRkcyBpdGVtcyB0byB0aGUgY3VycmVudCBzZXQsIHJldHVybmluZyB0aGUgbW9kaWZpZWQgc2V0LgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBBZGQobW9yZSAuLi57ey5UeXBlfX0pIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7Cglmb3IgXywgdiA6PSByYW5nZSBtb3JlIHsKCQlzZXQuZG9BZGQoe3suVHlwZS5TdGFyfX12KQoJfQoJcmV0dXJuIHNldAp9CgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBkb0FkZChpIHt7LlR5cGUuTmFtZX19KSB7CglzZXRbaV0gPSBzdHJ1Y3R7fXt9Cn0KCi8vIENvbnRhaW5zIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGl0ZW0gaXMgYWxyZWFkeSBpbiB0aGUgc2V0LCByZXR1cm5pbmcgdHJ1ZSBpZiBzby4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgQ29udGFpbnMoaSB7ey5UeXBlfX0pIGJvb2wgewoJXywgZm91bmQgOj0gc2V0W3t7LlR5cGUuU3Rhcn19aV0KCXJldHVybiBmb3VuZAp9CgovLyBDb250YWluc0FsbCBkZXRlcm1pbmVzIHdoZXRoZXIgYSBnaXZlbiBpdGVtIGlzIGFscmVhZHkgaW4gdGhlIHNldCwgcmV0dXJuaW5nIHRydWUgaWYgc28uCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIENvbnRhaW5zQWxsKGkgLi4ue3suVHlwZX19KSBib29sIHsKCWZvciBfLCB2IDo9IHJhbmdlIGkgewoJCWlmICFzZXQuQ29udGFpbnModikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIElzU3Vic2V0IGRldGVybWluZXMgd2hldGhlciBldmVyeSBpdGVtIGluIHRoZSBvdGhlciBzZXQgaXMgaW4gdGhpcyBzZXQsIHJldHVybmluZyB0cnVlIGlmIHNvLgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBJc1N1YnNldChvdGhlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIGJvb2wgewoJZm9yIHYgOj0gcmFuZ2Ugc2V0IHsKCQlpZiAhb3RoZXIuQ29udGFpbnMoe3suVHlwZS5BbXB9fXYpIHsKCQkJcmV0dXJuIGZhbHNlCgkJfQoJfQoJcmV0dXJuIHRydWUKfQoKLy8gSXNTdXBlcnNldCBkZXRlcm1pbmVzIHdoZXRoZXIgZXZlcnkgaXRlbSBvZiB0aGlzIHNldCBpcyBpbiB0aGUgb3RoZXIgc2V0LCByZXR1cm5pbmcgdHJ1ZSBpZiBzby4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgSXNTdXBlcnNldChvdGhlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIGJvb2wgewoJcmV0dXJuIG90aGVyLklzU3Vic2V0KHNldCkKfQoKLy8gQXBwZW5kIGluc2VydHMgbW9yZSBpdGVtcyBpbnRvIGEgY2xvbmUgb2YgdGhlIHNldC4gSXQgcmV0dXJucyB0aGUgYXVnbWVudGVkIHNldC4KLy8gVGhlIG9yaWdpbmFsIHNldCBpcyB1bm1vZGlmaWVkLgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBBcHBlbmQobW9yZSAuLi57ey5UeXBlLk5hbWV9fSkge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHsKCXVuaW9uZWRTZXQgOj0gc2V0LkNsb25lKCkKCWZvciBfLCB2IDo9IHJhbmdlIG1vcmUgewoJCXVuaW9uZWRTZXQuZG9BZGQodikKCX0KCXJldHVybiB1bmlvbmVkU2V0Cn0KCi8vIFVuaW9uIHJldHVybnMgYSBuZXcgc2V0IHdpdGggYWxsIGl0ZW1zIGluIGJvdGggc2V0cy4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgVW5pb24ob3RoZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJdW5pb25lZFNldCA6PSBzZXQuQ2xvbmUoKQoJZm9yIHYgOj0gcmFuZ2Ugb3RoZXIgewoJCXVuaW9uZWRTZXQuZG9BZGQodikKCX0KCglyZXR1cm4gdW5pb25lZFNldAp9CgovLyBJbnRlcnNlY3QgcmV0dXJucyBhIG5ldyBzZXQgd2l0aCBpdGVtcyB0aGF0IGV4aXN0IG9ubHkgaW4gYm90aCBzZXRzLgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBJbnRlcnNlY3Qob3RoZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJaW50ZXJzZWN0aW9uIDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCgkvLyBsb29wIG92ZXIgc21hbGxlciBzZXQKCWlmIHNldC5TaXplKCkgPCBvdGhlci5TaXplKCkgewoJCWZvciB2IDo9IHJhbmdlIHNldCB7CgkJCWlmIG90aGVyLkNvbnRhaW5zKHt7LlR5cGUuQW1wfX12KSB7CgkJCQlpbnRlcnNlY3Rpb24uZG9BZGQodikKCQkJfQoJCX0KCX0gZWxzZSB7CgkJZm9yIHYgOj0gcmFuZ2Ugb3RoZXIgewoJCQlpZiBzZXQuQ29udGFpbnMoe3suVHlwZS5BbXB9fXYpIHsKCQkJCWludGVyc2VjdGlvbi5kb0FkZCh2KQoJCQl9CgkJfQoJfQoKCXJldHVybiBpbnRlcnNlY3Rpb24KfQoKLy8gRGlmZmVyZW5jZSByZXR1cm5zIGEgbmV3IHNldCB3aXRoIGl0ZW1zIGluIHRoZSBjdXJyZW50IHNldCBidXQgbm90IGluIHRoZSBvdGhlciBzZXQKZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgRGlmZmVyZW5jZShvdGhlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglkaWZmZXJlbmNlZFNldCA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoJZm9yIHYgOj0gcmFuZ2Ugc2V0IHsKCQlpZiAhb3RoZXIuQ29udGFpbnMoe3suVHlwZS5BbXB9fXYpIHsKCQkJZGlmZmVyZW5jZWRTZXQuZG9BZGQodikKCQl9Cgl9CgoJcmV0dXJuIGRpZmZlcmVuY2VkU2V0Cn0KCi8vIFN5bW1ldHJpY0RpZmZlcmVuY2UgcmV0dXJucyBhIG5ldyBzZXQgd2l0aCBpdGVtcyBpbiB0aGUgY3VycmVudCBzZXQgb3IgdGhlIG90aGVyIHNldCBidXQgbm90IGluIGJvdGguCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFN5bW1ldHJpY0RpZmZlcmVuY2Uob3RoZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJYURpZmYgOj0gc2V0LkRpZmZlcmVuY2Uob3RoZXIpCgliRGlmZiA6PSBvdGhlci5EaWZmZXJlbmNlKHNldCkKCXJldHVybiBhRGlmZi5VbmlvbihiRGlmZikKfQoKLy8gQ2xlYXIgdGhlIGVudGlyZSBzZXQuIEF0ZXJ3YXJkcywgaXQgd2lsbCBiZSBhbiBlbXB0eSBzZXQuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBDbGVhcigpIHsKCSpzZXQgPSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQp9CgovLyBSZW1vdmUgYSBzaW5nbGUgaXRlbSBmcm9tIHRoZSBzZXQuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFJlbW92ZShpIHt7LlR5cGV9fSkgewoJZGVsZXRlKHNldCwge3suVHlwZS5TdGFyfX1pKQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFNlbmQgcmV0dXJucyBhIGNoYW5uZWwgdGhhdCB3aWxsIHNlbmQgYWxsIHRoZSBlbGVtZW50cyBpbiBvcmRlci4KLy8gQSBnb3JvdXRpbmUgaXMgY3JlYXRlZCB0byBzZW5kIHRoZSBlbGVtZW50czsgdGhpcyBvbmx5IHRlcm1pbmF0ZXMgd2hlbiBhbGwgdGhlIGVsZW1lbnRzIGhhdmUgYmVlbiBjb25zdW1lZApmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBTZW5kKCkgPC1jaGFuIHt7LlR5cGV9fSB7CgljaCA6PSBtYWtlKGNoYW4ge3suVHlwZX19KQoJZ28gZnVuYygpIHsKCQlmb3IgdiA6PSByYW5nZSBzZXQgewoJCQljaCA8LSB7ey5UeXBlLkFtcH19dgoJCX0KCQljbG9zZShjaCkKCX0oKQoKCXJldHVybiBjaAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEZvcmFsbCBhcHBsaWVzIGEgcHJlZGljYXRlIGZ1bmN0aW9uIHAgdG8gZXZlcnkgZWxlbWVudCBpbiB0aGUgc2V0LiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBmYWxzZSwKLy8gdGhlIGl0ZXJhdGlvbiB0ZXJtaW5hdGVzIGVhcmx5LiBUaGUgcmV0dXJuZWQgdmFsdWUgaXMgdHJ1ZSBpZiBhbGwgZWxlbWVudHMgd2VyZSB2aXNpdGVkLAovLyBvciBmYWxzZSBpZiBhbiBlYXJseSByZXR1cm4gb2NjdXJyZWQuCi8vCi8vIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBjYW4gYWxzbyBiZSB1c2VkIHNpbXBseSBhcyBhIHdheSB0byB2aXNpdCBldmVyeSBlbGVtZW50IHVzaW5nIGEgZnVuY3Rpb24KLy8gd2l0aCBzb21lIHNpZGUtZWZmZWN0czsgc3VjaCBhIGZ1bmN0aW9uIG11c3QgYWx3YXlzIHJldHVybiB0cnVlLgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBGb3JhbGwocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7Cglmb3IgdiA6PSByYW5nZSBzZXQgewoJCWlmICFwKHt7LlR5cGUuQW1wfX12KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0KCi8vIEV4aXN0cyBhcHBsaWVzIGEgcHJlZGljYXRlIHAgdG8gZXZlcnkgZWxlbWVudCBpbiB0aGUgc2V0LiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyB0cnVlLAovLyB0aGUgaXRlcmF0aW9uIHRlcm1pbmF0ZXMgZWFybHkuIFRoZSByZXR1cm5lZCB2YWx1ZSBpcyB0cnVlIGlmIGFuIGVhcmx5IHJldHVybiBvY2N1cnJlZC4KLy8gb3IgZmFsc2UgaWYgYWxsIGVsZW1lbnRzIHdlcmUgdmlzaXRlZCB3aXRob3V0IGZpbmRpbmcgYSBtYXRjaC4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgRXhpc3RzKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIGJvb2wgewoJZm9yIHYgOj0gcmFuZ2Ugc2V0IHsKCQlpZiBwKHt7LlR5cGUuQW1wfX12KSB7CgkJCXJldHVybiB0cnVlCgkJfQoJfQoJcmV0dXJuIGZhbHNlCn0KCi8vIEZvcmVhY2ggaXRlcmF0ZXMgb3ZlciB0aGUgc2V0IGFuZCBleGVjdXRlcyB0aGUgZnVuY3Rpb24gZiBhZ2FpbnN0IGVhY2ggZWxlbWVudC4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgRm9yZWFjaChmIGZ1bmMoe3suVHlwZX19KSkgewoJZm9yIHYgOj0gcmFuZ2Ugc2V0IHsKCQlmKHt7LlR5cGUuQW1wfX12KQoJfQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEZpbmQgcmV0dXJucyB0aGUgZmlyc3Qge3suVHlwZS5OYW1lfX0gdGhhdCByZXR1cm5zIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4gSWYgdGhlcmUgYXJlIG1hbnkgbWF0Y2hlcwovLyBvbmUgaXMgYXJidHJhcmlseSBjaG9zZW4uIEZhbHNlIGlzIHJldHVybmVkIGlmIG5vbmUgbWF0Y2guCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEZpbmQocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKHt7LlR5cGV9fSwgYm9vbCkgewoKCWZvciB2IDo9IHJhbmdlIHNldCB7CgkJaWYgcCh7ey5UeXBlLkFtcH19dikgewoJCQlyZXR1cm4ge3suVHlwZS5BbXB9fXYsIHRydWUKCQl9Cgl9Cnt7LSBpZiAuVHlwZS5Jc1B0cn19CgoJcmV0dXJuIG5pbCwgZmFsc2UKe3stIGVsc2V9fQoKCXZhciBlbXB0eSB7ey5UeXBlLk5hbWV9fQoJcmV0dXJuIGVtcHR5LCBmYWxzZQp7ey0gZW5kfX0KfQoKLy8gRmlsdGVyIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHdob3NlIGVsZW1lbnRzIHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCi8vCi8vIFRoZSBvcmlnaW5hbCBzZXQgaXMgbm90IG1vZGlmaWVkCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEZpbHRlcihwIGZ1bmMoe3suVHlwZX19KSBib29sKSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCglmb3IgdiA6PSByYW5nZSBzZXQgewoJCWlmIHAoe3suVHlwZS5BbXB9fXYpIHsKCQkJcmVzdWx0W3ZdID0gc3RydWN0e317fQoJCX0KCX0KCXJldHVybiByZXN1bHQKfQoKLy8gUGFydGl0aW9uIHJldHVybnMgdHdvIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXRzIHdob3NlIGVsZW1lbnRzIHJldHVybiB0cnVlIG9yIGZhbHNlIGZvciB0aGUgcHJlZGljYXRlLCBwLgovLyBUaGUgZmlyc3QgcmVzdWx0IGNvbnNpc3RzIG9mIGFsbCBlbGVtZW50cyB0aGF0IHNhdGlzZnkgdGhlIHByZWRpY2F0ZSBhbmQgdGhlIHNlY29uZCByZXN1bHQgY29uc2lzdHMgb2YKLy8gYWxsIGVsZW1lbnRzIHRoYXQgZG9uJ3QuCi8vCi8vIFRoZSBvcmlnaW5hbCBzZXQgaXMgbm90IG1vZGlmaWVkCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFBhcnRpdGlvbihwIGZ1bmMoe3suVHlwZX19KSBib29sKSAoe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0LCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIHsKCW1hdGNoaW5nIDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCglvdGhlcnMgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KCkKCWZvciB2IDo9IHJhbmdlIHNldCB7CgkJaWYgcCh7ey5UeXBlLkFtcH19dikgewoJCQltYXRjaGluZ1t2XSA9IHN0cnVjdHt9e30KCQl9IGVsc2UgewoJCQlvdGhlcnNbdl0gPSBzdHJ1Y3R7fXt9CgkJfQoJfQoJcmV0dXJuIG1hdGNoaW5nLCBvdGhlcnMKfQoKLy8gTWFwIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggYSBmdW5jdGlvbiBmLgovLyBUaGUgb3JpZ2luYWwgc2V0IGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBNYXAoZiBmdW5jKHt7LlR5cGV9fSkge3suVHlwZX19KSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0IHsKCQlrIDo9IGYoe3suVHlwZS5BbXB9fXYpCgkJcmVzdWx0W3t7LlR5cGUuU3Rhcn19a10gPSBzdHJ1Y3R7fXt9Cgl9CgoJcmV0dXJuIHJlc3VsdAp9Cnt7LSByYW5nZSAuTWFwVG99fQoKLy8gTWFwVG97ey5VfX0gcmV0dXJucyBhIG5ldyBbXXt7Ln19IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggZnVuY3Rpb24gZi4KLy8gVGhlIHJlc3VsdGluZyBzbGljZSBpcyB0aGUgc2FtZSBzaXplIGFzIHRoZSBzZXQuCi8vIFRoZSBzZXQgaXMgbm90IG1vZGlmaWVkLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKHNldCB7eyQuUHJlZml4LlV9fXt7JC5UeXBlLlV9fVNldCkgTWFwVG97ey5VfX0oZiBmdW5jKHt7JC5UeXBlfX0pIHt7Ln19KSBbXXt7Ln19IHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gbWFrZShbXXt7Ln19LCAwLCBsZW4oc2V0KSkKCWZvciB2IDo9IHJhbmdlIHNldCB7CgkJcmVzdWx0ID0gYXBwZW5kKHJlc3VsdCwgZih7eyQuVHlwZS5BbXB9fXYpKQoJfQoKCXJldHVybiByZXN1bHQKfQp7ey0gZW5kfX0KCi8vIEZsYXRNYXAgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCBhIGZ1bmN0aW9uIGYgdGhhdAovLyByZXR1cm5zIHplcm8gb3IgbW9yZSBpdGVtcyBpbiBhIHNsaWNlLiBUaGUgcmVzdWx0aW5nIHNldCBtYXkgaGF2ZSBhIGRpZmZlcmVudCBzaXplIHRvIHRoZSBvcmlnaW5hbCBzZXQuCi8vIFRoZSBvcmlnaW5hbCBzZXQgaXMgbm90IG1vZGlmaWVkLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEZsYXRNYXAoZiBmdW5jKHt7LlR5cGV9fSkgW117ey5UeXBlfX0pIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglyZXN1bHQgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KCkKCglmb3IgdiA6PSByYW5nZSBzZXQgewoJCWZvciBfLCB4IDo9IHJhbmdlIGYoe3suVHlwZS5BbXB9fXYpIHsKCQkJcmVzdWx0W3t7LlR5cGUuU3Rhcn19eF0gPSBzdHJ1Y3R7fXt9CgkJfQoJfQoKCXJldHVybiByZXN1bHQKfQp7ey0gcmFuZ2UgLk1hcFRvfX0KCi8vIEZsYXRNYXBUb3t7LlV9fSByZXR1cm5zIGEgbmV3IFtde3sufX0gYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCBmdW5jdGlvbiBmIHRoYXQKLy8gcmV0dXJucyB6ZXJvIG9yIG1vcmUgaXRlbXMgaW4gYSBzbGljZS4gVGhlIHJlc3VsdGluZyBzbGljZSBtYXkgaGF2ZSBhIGRpZmZlcmVudCBzaXplIHRvIHRoZSBzZXQuCi8vIFRoZSBzZXQgaXMgbm90IG1vZGlmaWVkLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKHNldCB7eyQuUHJlZml4LlV9fXt7JC5UeXBlLlV9fVNldCkgRmxhdE1hcFRve3suVX19KGYgZnVuYyh7eyQuVHlwZX19KSBbXXt7Ln19KSBbXXt7Ln19IHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gbWFrZShbXXt7Ln19LCAwLCBsZW4oc2V0KSkKCWZvciB2IDo9IHJhbmdlIHNldCB7CgkJcmVzdWx0ID0gYXBwZW5kKHJlc3VsdCwgZih7eyQuVHlwZS5BbXB9fXYpLi4uKQoJfQoKCXJldHVybiByZXN1bHQKfQp7ey0gZW5kfX0KCi8vIENvdW50QnkgZ2l2ZXMgdGhlIG51bWJlciBlbGVtZW50cyBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgdGhhdCByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBDb3VudEJ5KHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIChyZXN1bHQgaW50KSB7Cglmb3IgdiA6PSByYW5nZSBzZXQgewoJCWlmIHAoe3suVHlwZS5BbXB9fXYpIHsKCQkJcmVzdWx0KysKCQl9Cgl9CglyZXR1cm4gcmVzdWx0Cn0Ke3stIGlmIC5PcmRlcmVkfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBUaGVzZSBtZXRob2RzIGFyZSBpbmNsdWRlZCB3aGVuIHt7LlR5cGUuTmFtZX19IGlzIG9yZGVyZWQuCgovLyBNaW4gcmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBjb250YWluaW5nIHRoZSBtaW5pbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzLgovLyBQYW5pY3MgaWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1pbigpIHt7LlR5cGUuTmFtZX19IHsKCXYgOj0gc2V0Lk1pbkJ5KGZ1bmMoYSB7ey5UeXBlfX0sIGIge3suVHlwZX19KSBib29sIHsKCQlyZXR1cm4ge3suVHlwZS5TdGFyfX1hIDwge3suVHlwZS5TdGFyfX1iCgl9KQoJcmV0dXJuIHt7LlR5cGUuU3Rhcn19dgp9CgovLyBNYXggcmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBjb250YWluaW5nIHRoZSBtYXhpbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzLgovLyBQYW5pY3MgaWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1heCgpIHt7LlR5cGUuTmFtZX19IHsKCXYgOj0gc2V0Lk1heEJ5KGZ1bmMoYSB7ey5UeXBlfX0sIGIge3suVHlwZX19KSBib29sIHsKCQlyZXR1cm4ge3suVHlwZS5TdGFyfX1hIDwge3suVHlwZS5TdGFyfX1iCgl9KQoJcmV0dXJuIHt7LlR5cGUuU3Rhcn19dgp9Cnt7LSBlbmR9fQoKLy8gTWluQnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBjb250YWluaW5nIHRoZSBtaW5pbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCi8vIHVzaW5nIGEgcGFzc2VkIGZ1bmMgZGVmaW5pbmcg4oCYbGVzc+KAmS4gSW4gdGhlIGNhc2Ugb2YgbXVsdGlwbGUgaXRlbXMgYmVpbmcgZXF1YWxseSBtaW5pbWFsLCB0aGUgZmlyc3Qgc3VjaAovLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBNaW5CeShsZXNzIGZ1bmMoe3suVHlwZX19LCB7ey5UeXBlfX0pIGJvb2wpIHt7LlR5cGV9fSB7CglpZiBzZXQuSXNFbXB0eSgpIHsKCQlwYW5pYygiQ2Fubm90IGRldGVybWluZSB0aGUgbWluaW11bSBvZiBhbiBlbXB0eSBzZXQuIikKCX0KCXZhciBtIHt7LlR5cGUuTmFtZX19CglmaXJzdCA6PSB0cnVlCglmb3IgdiA6PSByYW5nZSBzZXQgewoJCWlmIGZpcnN0IHsKCQkJbSA9IHYKCQkJZmlyc3QgPSBmYWxzZQoJCX0gZWxzZSBpZiBsZXNzKHt7LlR5cGUuQW1wfX12LCB7ey5UeXBlLkFtcH19bSkgewoJCQltID0gdgoJCX0KCX0KCXJldHVybiB7ey5UeXBlLkFtcH19bQp9CgovLyBNYXhCeSByZXR1cm5zIGFuIGVsZW1lbnQgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IGNvbnRhaW5pbmcgdGhlIG1heGltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMKLy8gdXNpbmcgYSBwYXNzZWQgZnVuYyBkZWZpbmluZyDigJhsZXNz4oCZLiBJbiB0aGUgY2FzZSBvZiBtdWx0aXBsZSBpdGVtcyBiZWluZyBlcXVhbGx5IG1heGltYWwsIHRoZSBmaXJzdCBzdWNoCi8vIGVsZW1lbnQgaXMgcmV0dXJuZWQuIFBhbmljcyBpZiB0aGVyZSBhcmUgbm8gZWxlbWVudHMuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1heEJ5KGxlc3MgZnVuYyh7ey5UeXBlfX0sIHt7LlR5cGV9fSkgYm9vbCkge3suVHlwZX19IHsKCWlmIHNldC5Jc0VtcHR5KCkgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtaW5pbXVtIG9mIGFuIGVtcHR5IHNldC4iKQoJfQoJdmFyIG0ge3suVHlwZS5OYW1lfX0KCWZpcnN0IDo9IHRydWUKCWZvciB2IDo9IHJhbmdlIHNldCB7CgkJaWYgZmlyc3QgewoJCQltID0gdgoJCQlmaXJzdCA9IGZhbHNlCgkJfSBlbHNlIGlmIGxlc3Moe3suVHlwZS5BbXB9fW0sIHt7LlR5cGUuQW1wfX12KSB7CgkJCW0gPSB2CgkJfQoJfQoJcmV0dXJuIHt7LlR5cGUuQW1wfX1tCn0Ke3stIGlmIC5OdW1lcmljfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBUaGVzZSBtZXRob2RzIGFyZSBpbmNsdWRlZCB3aGVuIHt7LlR5cGUuTmFtZX19IGlzIG51bWVyaWMuCgovLyBTdW0gcmV0dXJucyB0aGUgc3VtIG9mIGFsbCB0aGUgZWxlbWVudHMgaW4gdGhlIHNldC4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgU3VtKCkge3suVHlwZS5OYW1lfX0gewoJc3VtIDo9IHt7LlR5cGUuTmFtZX19KDApCglmb3IgdiA6PSByYW5nZSBzZXQgewoJCXN1bSA9IHN1bSArIHYKCX0KCXJldHVybiBzdW0KfQp7ey0gZW5kfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gRXF1YWxzIGRldGVybWluZXMgd2hldGhlciB0d28gc2V0cyBhcmUgZXF1YWwgdG8gZWFjaCBvdGhlciwgcmV0dXJuaW5nIHRydWUgaWYgc28uCi8vIElmIHRoZXkgYm90aCBhcmUgdGhlIHNhbWUgc2l6ZSBhbmQgaGF2ZSB0aGUgc2FtZSBpdGVtcyB0aGV5IGFyZSBjb25zaWRlcmVkIGVxdWFsLgovLyBPcmRlciBvZiBpdGVtcyBpcyBub3QgcmVsZXZlbnQgZm9yIHNldHMgdG8gYmUgZXF1YWwuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEVxdWFscyhvdGhlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIGJvb2wgewoJaWYgc2V0LlNpemUoKSAhPSBvdGhlci5TaXplKCkgewoJCXJldHVybiBmYWxzZQoJfQoKCWZvciB2IDo9IHJhbmdlIHNldCB7CgkJaWYgIW90aGVyLkNvbnRhaW5zKHt7LlR5cGUuQW1wfX12KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCglyZXR1cm4gdHJ1ZQp9Cnt7LSBpZiAuU3RyaW5nZXJ9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBTdHJpbmdMaXN0IGdldHMgYSBsaXN0IG9mIHN0cmluZ3MgdGhhdCBkZXBpY3RzIGFsbCB0aGUgZWxlbWVudHMuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFN0cmluZ0xpc3QoKSBbXXN0cmluZyB7CglzdHJpbmdzIDo9IG1ha2UoW11zdHJpbmcsIGxlbihzZXQpKQoJaSA6PSAwCglmb3IgdiA6PSByYW5nZSBzZXQgewoJCXN0cmluZ3NbaV0gPSBmbXQuU3ByaW50ZigiJXYiLCB2KQoJCWkrKwoJfQoJcmV0dXJuIHN0cmluZ3MKfQoKLy8gU3RyaW5nIGltcGxlbWVudHMgdGhlIFN0cmluZ2VyIGludGVyZmFjZSB0byByZW5kZXIgdGhlIHNldCBhcyBhIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmcgZW5jbG9zZWQgaW4gc3F1YXJlIGJyYWNrZXRzLgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBTdHJpbmcoKSBzdHJpbmcgewoJcmV0dXJuIHNldC5ta1N0cmluZzNCeXRlcygiWyIsICIsICIsICJdIikuU3RyaW5nKCkKfQoKLy8gTWtTdHJpbmcgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcgdXNpbmcgYSBzdXBwbGllZCBzZXBhcmF0b3IuIE5vIGVuY2xvc2luZyBtYXJrcyBhcmUgYWRkZWQuCmZ1bmMgKHNldCB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZyB7CglyZXR1cm4gc2V0Lk1rU3RyaW5nMygiIiwgc2VwLCAiIikKfQoKLy8gTWtTdHJpbmczIGNvbmNhdGVuYXRlcyB0aGUgdmFsdWVzIGFzIGEgc3RyaW5nLCB1c2luZyB0aGUgcHJlZml4LCBzZXBhcmF0b3IgYW5kIHN1ZmZpeCBzdXBwbGllZC4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcgewoJcmV0dXJuIHNldC5ta1N0cmluZzNCeXRlcyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyKS5TdHJpbmcoKQp9CgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBta1N0cmluZzNCeXRlcyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgKmJ5dGVzLkJ1ZmZlciB7CgliIDo9ICZieXRlcy5CdWZmZXJ7fQoJYi5Xcml0ZVN0cmluZyhiZWZvcmUpCglzZXAgOj0gIiIKCWZvciB2IDo9IHJhbmdlIHNldCB7CgkJYi5Xcml0ZVN0cmluZyhzZXApCgkJYi5Xcml0ZVN0cmluZyhmbXQuU3ByaW50ZigiJXYiLCB2KSkKCQlzZXAgPSBiZXR3ZWVuCgl9CgliLldyaXRlU3RyaW5nKGFmdGVyKQoJcmV0dXJuIGIKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBVbm1hcnNoYWxKU09OIGltcGxlbWVudHMgSlNPTiBkZWNvZGluZyBmb3IgdGhpcyBzZXQgdHlwZS4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IgewoJdmFsdWVzIDo9IG1ha2UoW117ey5UeXBlfX0sIDApCglidWYgOj0gYnl0ZXMuTmV3QnVmZmVyKGIpCgllcnIgOj0ganNvbi5OZXdEZWNvZGVyKGJ1ZikuRGVjb2RlKCZ2YWx1ZXMpCglpZiBlcnIgIT0gbmlsIHsKCQlyZXR1cm4gZXJyCgl9CglzZXQuQWRkKHZhbHVlcy4uLikKCXJldHVybiBuaWwKfQoKLy8gTWFyc2hhbEpTT04gaW1wbGVtZW50cyBKU09OIGVuY29kaW5nIGZvciB0aGlzIHNldCB0eXBlLgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKSB7CglidWYgOj0gJmJ5dGVzLkJ1ZmZlcnt9CgllcnIgOj0ganNvbi5OZXdFbmNvZGVyKGJ1ZikuRW5jb2RlKHNldC5Ub1NsaWNlKCkpCglyZXR1cm4gYnVmLkJ5dGVzKCksIGVycgp9CgovLyBTdHJpbmdNYXAgcmVuZGVycyB0aGUgc2V0IGFzIGEgbWFwIG9mIHN0cmluZ3MuIFRoZSB2YWx1ZSBvZiBlYWNoIGl0ZW0gaW4gdGhlIHNldCBiZWNvbWVzIHN0cmluZ2lmaWVkIGFzIGEga2V5IGluIHRoZQovLyByZXN1bHRpbmcgbWFwLgpmdW5jIChzZXQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBTdHJpbmdNYXAoKSBtYXBbc3RyaW5nXWJvb2wgewoJc3RyaW5ncyA6PSBtYWtlKG1hcFtzdHJpbmddYm9vbCkKCWZvciB2IDo9IHJhbmdlIHNldCB7CgkJc3RyaW5nc1tmbXQuU3ByaW50ZigiJXYiLCB2KV0gPSB0cnVlCgl9CglyZXR1cm4gc3RyaW5ncwp9Cnt7LSBlbmR9fQo=\"")
		packr.PackJSONBytes("builtin", "simple-list-api.txt", "\"ZnVuYyBNYWtlVHlwZUxpc3QobGVuZ3RoLCBjYXBhY2l0eSBpbnQpIFR5cGVMaXN0CmZ1bmMgTmV3VHlwZUxpc3QodmFsdWVzIC4uLlR5cGUpIFR5cGVMaXN0CmZ1bmMgQ29udmVydFR5cGVMaXN0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKFR5cGVMaXN0LCBib29sKQpmdW5jIEJ1aWxkVHlwZUxpc3RGcm9tQ2hhbihzb3VyY2UgPC1jaGFuIFR5cGUpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIElzU2VxdWVuY2UoKSBib29sCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIElzU2V0KCkgYm9vbApmdW5jIChsaXN0IFR5cGVMaXN0KSBUb0xpc3QoKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBUb1NldCgpIFR5cGVTZXQKZnVuYyAobGlzdCBUeXBlTGlzdCkgVG9TbGljZSgpIFtdVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBUb0ludGVyZmFjZVNsaWNlKCkgW11pbnRlcmZhY2V7fQpmdW5jIChsaXN0IFR5cGVMaXN0KSBDbG9uZSgpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIEdldChpIGludCkgVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBIZWFkKCkgVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBIZWFkT3B0aW9uKCkgVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBMYXN0KCkgVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBMYXN0T3B0aW9uKCkgVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBUYWlsKCkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgSW5pdCgpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIElzRW1wdHkoKSBib29sCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIE5vbkVtcHR5KCkgYm9vbApmdW5jIChsaXN0IFR5cGVMaXN0KSBTaXplKCkgaW50CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIExlbigpIGludApmdW5jIChsaXN0IFR5cGVMaXN0KSBTd2FwKGksIGogaW50KQpmdW5jIChsaXN0IFR5cGVMaXN0KSBDb250YWlucyh2IFR5cGUpIGJvb2wKZnVuYyAobGlzdCBUeXBlTGlzdCkgQ29udGFpbnNBbGwoaSAuLi5UeXBlKSBib29sCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIEV4aXN0cyhwIGZ1bmMoVHlwZSkgYm9vbCkgYm9vbApmdW5jIChsaXN0IFR5cGVMaXN0KSBGb3JhbGwocCBmdW5jKFR5cGUpIGJvb2wpIGJvb2wKZnVuYyAobGlzdCBUeXBlTGlzdCkgRm9yZWFjaChmIGZ1bmMoVHlwZSkpCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIFNlbmQoKSA8LWNoYW4gVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBSZXZlcnNlKCkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgRG9SZXZlcnNlKCkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgU2h1ZmZsZSgpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIERvU2h1ZmZsZSgpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIFRha2UobiBpbnQpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIERyb3AobiBpbnQpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIFRha2VMYXN0KG4gaW50KSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBEcm9wTGFzdChuIGludCkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgVGFrZVdoaWxlKHAgZnVuYyhUeXBlKSBib29sKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBEcm9wV2hpbGUocCBmdW5jKFR5cGUpIGJvb2wpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIEZpbmQocCBmdW5jKFR5cGUpIGJvb2wpIChUeXBlLCBib29sKQpmdW5jIChsaXN0IFR5cGVMaXN0KSBGaWx0ZXIocCBmdW5jKFR5cGUpIGJvb2wpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIFBhcnRpdGlvbihwIGZ1bmMoVHlwZSkgYm9vbCkgKFR5cGVMaXN0LCBUeXBlTGlzdCkKZnVuYyAobGlzdCBUeXBlTGlzdCkgTWFwKGYgZnVuYyhUeXBlKSBUeXBlKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBGbGF0TWFwKGYgZnVuYyhUeXBlKSBbXVR5cGUpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIENvdW50QnkocCBmdW5jKFR5cGUpIGJvb2wpIChyZXN1bHQgaW50KQpmdW5jIChsaXN0IFR5cGVMaXN0KSBNaW5CeShsZXNzIGZ1bmMoVHlwZSwgVHlwZSkgYm9vbCkgVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBNYXhCeShsZXNzIGZ1bmMoVHlwZSwgVHlwZSkgYm9vbCkgVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBEaXN0aW5jdEJ5KGVxdWFsIGZ1bmMoVHlwZSwgVHlwZSkgYm9vbCkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgSW5kZXhXaGVyZShwIGZ1bmMoVHlwZSkgYm9vbCkgaW50CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIEluZGV4V2hlcmUyKHAgZnVuYyhUeXBlKSBib29sLCBmcm9tIGludCkgaW50CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIExhc3RJbmRleFdoZXJlKHAgZnVuYyhUeXBlKSBib29sKSBpbnQKZnVuYyAobGlzdCBUeXBlTGlzdCkgTGFzdEluZGV4V2hlcmUyKHAgZnVuYyhUeXBlKSBib29sLCBiZWZvcmUgaW50KSBpbnQKZnVuYyAoc2wgc29ydGFibGVUeXBlTGlzdCkgTGVzcyhpLCBqIGludCkgYm9vbApmdW5jIChzbCBzb3J0YWJsZVR5cGVMaXN0KSBMZW4oKSBpbnQKZnVuYyAoc2wgc29ydGFibGVUeXBlTGlzdCkgU3dhcChpLCBqIGludCkKZnVuYyAobGlzdCBUeXBlTGlzdCkgU29ydEJ5KGxlc3MgZnVuYyhpLCBqIFR5cGUpIGJvb2wpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIFN0YWJsZVNvcnRCeShsZXNzIGZ1bmMoaSwgaiBUeXBlKSBib29sKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBTb3J0ZWQoKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBTdGFibGVTb3J0ZWQoKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBNaW4oKSBUeXBlCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIE1heCgpIChyZXN1bHQgVHlwZSkKZnVuYyAobGlzdCBUeXBlTGlzdCkgU3VtKCkgVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBTdHJpbmdMaXN0KCkgW11zdHJpbmcKZnVuYyAobGlzdCBUeXBlTGlzdCkgU3RyaW5nKCkgc3RyaW5nCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZwpmdW5jIChsaXN0IFR5cGVMaXN0KSBNa1N0cmluZzMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpIHN0cmluZwpmdW5jIChsaXN0IFR5cGVMaXN0KSBHb2JEZWNvZGUoYiBbXWJ5dGUpIGVycm9yCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIEdvYkVuY29kZSgpIChbXWJ5dGUsIGVycm9yKQo=\"")
		packr.PackJSONBytes("builtin", "simple-map-api.txt", "\"ZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMShrIEtleSwgdiBUeXBlKSBLZXlUeXBlVHVwbGVzCmZ1bmMgKHRzIEtleVR5cGVUdXBsZXMpIEFwcGVuZDIoazEgS2V5LCB2MSBUeXBlLCBrMiBLZXksIHYyIFR5cGUpIEtleVR5cGVUdXBsZXMKZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMyhrMSBLZXksIHYxIFR5cGUsIGsyIEtleSwgdjIgVHlwZSwgazMgS2V5LCB2MyBUeXBlKSBLZXlUeXBlVHVwbGVzCmZ1bmMgS2V5VHlwZVppcChrZXlzIC4uLktleSkgS2V5VHlwZVR1cGxlcwpmdW5jICh0cyBLZXlUeXBlVHVwbGVzKSBWYWx1ZXModmFsdWVzIC4uLlR5cGUpIEtleVR5cGVUdXBsZXMKZnVuYyBOZXdLZXlUeXBlTWFwMShrIEtleSwgdiBUeXBlKSBLZXlUeXBlTWFwCmZ1bmMgTmV3S2V5VHlwZU1hcChrdiAuLi5LZXlUeXBlVHVwbGUpIEtleVR5cGVNYXAKZnVuYyAobW0gS2V5VHlwZU1hcCkgS2V5cygpIFtdS2V5CmZ1bmMgKG1tIEtleVR5cGVNYXApIFZhbHVlcygpIFtdVHlwZQpmdW5jIChtbSBLZXlUeXBlTWFwKSBUb1NsaWNlKCkgW11LZXlUeXBlVHVwbGUKZnVuYyAobW0gS2V5VHlwZU1hcCkgR2V0KGsgS2V5KSAoVHlwZSwgYm9vbCkKZnVuYyAobW0gS2V5VHlwZU1hcCkgUHV0KGsgS2V5LCB2IFR5cGUpIGJvb2wKZnVuYyAobW0gS2V5VHlwZU1hcCkgQ29udGFpbnNLZXkoayBLZXkpIGJvb2wKZnVuYyAobW0gS2V5VHlwZU1hcCkgQ29udGFpbnNBbGxLZXlzKGtrIC4uLktleSkgYm9vbApmdW5jIChtbSAqS2V5VHlwZU1hcCkgQ2xlYXIoKQpmdW5jIChtbSBLZXlUeXBlTWFwKSBSZW1vdmUoayBLZXkpCmZ1bmMgKG1tIEtleVR5cGVNYXApIFBvcChrIEtleSkgKFR5cGUsIGJvb2wpCmZ1bmMgKG1tIEtleVR5cGVNYXApIFNpemUoKSBpbnQKZnVuYyAobW0gS2V5VHlwZU1hcCkgSXNFbXB0eSgpIGJvb2wKZnVuYyAobW0gS2V5VHlwZU1hcCkgTm9uRW1wdHkoKSBib29sCmZ1bmMgKG1tIEtleVR5cGVNYXApIERyb3BXaGVyZShmbiBmdW5jKEtleSwgVHlwZSkgYm9vbCkgS2V5VHlwZVR1cGxlcwpmdW5jIChtbSBLZXlUeXBlTWFwKSBGb3JlYWNoKGYgZnVuYyhLZXksIFR5cGUpKQpmdW5jIChtbSBLZXlUeXBlTWFwKSBGb3JhbGwocCBmdW5jKEtleSwgVHlwZSkgYm9vbCkgYm9vbApmdW5jIChtbSBLZXlUeXBlTWFwKSBFeGlzdHMocCBmdW5jKEtleSwgVHlwZSkgYm9vbCkgYm9vbApmdW5jIChtbSBLZXlUeXBlTWFwKSBGaW5kKHAgZnVuYyhLZXksIFR5cGUpIGJvb2wpIChLZXlUeXBlVHVwbGUsIGJvb2wpCmZ1bmMgKG1tIEtleVR5cGVNYXApIEZpbHRlcihwIGZ1bmMoS2V5LCBUeXBlKSBib29sKSBLZXlUeXBlTWFwCmZ1bmMgKG1tIEtleVR5cGVNYXApIFBhcnRpdGlvbihwIGZ1bmMoS2V5LCBUeXBlKSBib29sKSAobWF0Y2hpbmcgS2V5VHlwZU1hcCwgb3RoZXJzIEtleVR5cGVNYXApCmZ1bmMgKG1tIEtleVR5cGVNYXApIE1hcChmIGZ1bmMoS2V5LCBUeXBlKSAoS2V5LCBUeXBlKSkgS2V5VHlwZU1hcApmdW5jIChtbSBLZXlUeXBlTWFwKSBGbGF0TWFwKGYgZnVuYyhLZXksIFR5cGUpIFtdS2V5VHlwZVR1cGxlKSBLZXlUeXBlTWFwCmZ1bmMgKG1tIEtleVR5cGVNYXApIENsb25lKCkgS2V5VHlwZU1hcApmdW5jIChtbSBLZXlUeXBlTWFwKSBTdHJpbmcoKSBzdHJpbmcKZnVuYyAobW0gS2V5VHlwZU1hcCkgTWtTdHJpbmcoc2VwIHN0cmluZykgc3RyaW5nCmZ1bmMgKG1tIEtleVR5cGVNYXApIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nCg==\"")
		packr.PackJSONBytes("builtin", "simple-plist-api.txt", "\"ZnVuYyBNYWtlVHlwZUxpc3QobGVuZ3RoLCBjYXBhY2l0eSBpbnQpIFR5cGVMaXN0CmZ1bmMgTmV3VHlwZUxpc3QodmFsdWVzIC4uLipUeXBlKSBUeXBlTGlzdApmdW5jIENvbnZlcnRUeXBlTGlzdCh2YWx1ZXMgLi4uaW50ZXJmYWNle30pIChUeXBlTGlzdCwgYm9vbCkKZnVuYyBCdWlsZFR5cGVMaXN0RnJvbUNoYW4oc291cmNlIDwtY2hhbiAqVHlwZSkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgSXNTZXF1ZW5jZSgpIGJvb2wKZnVuYyAobGlzdCBUeXBlTGlzdCkgSXNTZXQoKSBib29sCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIFRvTGlzdCgpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIFRvU2V0KCkgVHlwZVNldApmdW5jIChsaXN0IFR5cGVMaXN0KSBUb1NsaWNlKCkgW10qVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBUb0ludGVyZmFjZVNsaWNlKCkgW11pbnRlcmZhY2V7fQpmdW5jIChsaXN0IFR5cGVMaXN0KSBDbG9uZSgpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIEdldChpIGludCkgKlR5cGUKZnVuYyAobGlzdCBUeXBlTGlzdCkgSGVhZCgpICpUeXBlCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIEhlYWRPcHRpb24oKSAqVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBMYXN0KCkgKlR5cGUKZnVuYyAobGlzdCBUeXBlTGlzdCkgTGFzdE9wdGlvbigpICpUeXBlCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIFRhaWwoKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBJbml0KCkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgSXNFbXB0eSgpIGJvb2wKZnVuYyAobGlzdCBUeXBlTGlzdCkgTm9uRW1wdHkoKSBib29sCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIFNpemUoKSBpbnQKZnVuYyAobGlzdCBUeXBlTGlzdCkgTGVuKCkgaW50CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIFN3YXAoaSwgaiBpbnQpCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIENvbnRhaW5zKHYgKlR5cGUpIGJvb2wKZnVuYyAobGlzdCBUeXBlTGlzdCkgQ29udGFpbnNBbGwoaSAuLi4qVHlwZSkgYm9vbApmdW5jIChsaXN0IFR5cGVMaXN0KSBFeGlzdHMocCBmdW5jKCpUeXBlKSBib29sKSBib29sCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIEZvcmFsbChwIGZ1bmMoKlR5cGUpIGJvb2wpIGJvb2wKZnVuYyAobGlzdCBUeXBlTGlzdCkgRm9yZWFjaChmIGZ1bmMoKlR5cGUpKQpmdW5jIChsaXN0IFR5cGVMaXN0KSBTZW5kKCkgPC1jaGFuICpUeXBlCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIFJldmVyc2UoKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBEb1JldmVyc2UoKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBTaHVmZmxlKCkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgRG9TaHVmZmxlKCkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgVGFrZShuIGludCkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgRHJvcChuIGludCkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgVGFrZUxhc3QobiBpbnQpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIERyb3BMYXN0KG4gaW50KSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBUYWtlV2hpbGUocCBmdW5jKCpUeXBlKSBib29sKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBEcm9wV2hpbGUocCBmdW5jKCpUeXBlKSBib29sKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBGaW5kKHAgZnVuYygqVHlwZSkgYm9vbCkgKCpUeXBlLCBib29sKQpmdW5jIChsaXN0IFR5cGVMaXN0KSBGaWx0ZXIocCBmdW5jKCpUeXBlKSBib29sKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBQYXJ0aXRpb24ocCBmdW5jKCpUeXBlKSBib29sKSAoVHlwZUxpc3QsIFR5cGVMaXN0KQpmdW5jIChsaXN0IFR5cGVMaXN0KSBNYXAoZiBmdW5jKCpUeXBlKSAqVHlwZSkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgRmxhdE1hcChmIGZ1bmMoKlR5cGUpIFtdKlR5cGUpIFR5cGVMaXN0CmZ1bmMgKGxpc3QgVHlwZUxpc3QpIENvdW50QnkocCBmdW5jKCpUeXBlKSBib29sKSAocmVzdWx0IGludCkKZnVuYyAobGlzdCBUeXBlTGlzdCkgTWluQnkobGVzcyBmdW5jKCpUeXBlLCAqVHlwZSkgYm9vbCkgKlR5cGUKZnVuYyAobGlzdCBUeXBlTGlzdCkgTWF4QnkobGVzcyBmdW5jKCpUeXBlLCAqVHlwZSkgYm9vbCkgKlR5cGUKZnVuYyAobGlzdCBUeXBlTGlzdCkgRGlzdGluY3RCeShlcXVhbCBmdW5jKCpUeXBlLCAqVHlwZSkgYm9vbCkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgSW5kZXhXaGVyZShwIGZ1bmMoKlR5cGUpIGJvb2wpIGludApmdW5jIChsaXN0IFR5cGVMaXN0KSBJbmRleFdoZXJlMihwIGZ1bmMoKlR5cGUpIGJvb2wsIGZyb20gaW50KSBpbnQKZnVuYyAobGlzdCBUeXBlTGlzdCkgTGFzdEluZGV4V2hlcmUocCBmdW5jKCpUeXBlKSBib29sKSBpbnQKZnVuYyAobGlzdCBUeXBlTGlzdCkgTGFzdEluZGV4V2hlcmUyKHAgZnVuYygqVHlwZSkgYm9vbCwgYmVmb3JlIGludCkgaW50CmZ1bmMgKHNsIHNvcnRhYmxlVHlwZUxpc3QpIExlc3MoaSwgaiBpbnQpIGJvb2wKZnVuYyAoc2wgc29ydGFibGVUeXBlTGlzdCkgTGVuKCkgaW50CmZ1bmMgKHNsIHNvcnRhYmxlVHlwZUxpc3QpIFN3YXAoaSwgaiBpbnQpCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIFNvcnRCeShsZXNzIGZ1bmMoaSwgaiAqVHlwZSkgYm9vbCkgVHlwZUxpc3QKZnVuYyAobGlzdCBUeXBlTGlzdCkgU3RhYmxlU29ydEJ5KGxlc3MgZnVuYyhpLCBqICpUeXBlKSBib29sKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBTb3J0ZWQoKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBTdGFibGVTb3J0ZWQoKSBUeXBlTGlzdApmdW5jIChsaXN0IFR5cGVMaXN0KSBNaW4oKSBUeXBlCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIE1heCgpIChyZXN1bHQgVHlwZSkKZnVuYyAobGlzdCBUeXBlTGlzdCkgU3VtKCkgVHlwZQpmdW5jIChsaXN0IFR5cGVMaXN0KSBTdHJpbmdMaXN0KCkgW11zdHJpbmcKZnVuYyAobGlzdCBUeXBlTGlzdCkgU3RyaW5nKCkgc3RyaW5nCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZwpmdW5jIChsaXN0IFR5cGVMaXN0KSBNa1N0cmluZzMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpIHN0cmluZwpmdW5jIChsaXN0IFR5cGVMaXN0KSBHb2JEZWNvZGUoYiBbXWJ5dGUpIGVycm9yCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIEdvYkVuY29kZSgpIChbXWJ5dGUsIGVycm9yKQo=\"")
		packr.PackJSONBytes("builtin", "simple-pmap-api.txt", "\"ZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMShrICpLZXksIHYgKlR5cGUpIEtleVR5cGVUdXBsZXMKZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMihrMSAqS2V5LCB2MSAqVHlwZSwgazIgKktleSwgdjIgKlR5cGUpIEtleVR5cGVUdXBsZXMKZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMyhrMSAqS2V5LCB2MSAqVHlwZSwgazIgKktleSwgdjIgKlR5cGUsIGszICpLZXksIHYzICpUeXBlKSBLZXlUeXBlVHVwbGVzCmZ1bmMgS2V5VHlwZVppcChrZXlzIC4uLipLZXkpIEtleVR5cGVUdXBsZXMKZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgVmFsdWVzKHZhbHVlcyAuLi4qVHlwZSkgS2V5VHlwZVR1cGxlcwpmdW5jIE5ld0tleVR5cGVNYXAxKGsgKktleSwgdiAqVHlwZSkgS2V5VHlwZU1hcApmdW5jIE5ld0tleVR5cGVNYXAoa3YgLi4uS2V5VHlwZVR1cGxlKSBLZXlUeXBlTWFwCmZ1bmMgKG1tIEtleVR5cGVNYXApIEtleXMoKSBbXSpLZXkKZnVuYyAobW0gS2V5VHlwZU1hcCkgVmFsdWVzKCkgW10qVHlwZQpmdW5jIChtbSBLZXlUeXBlTWFwKSBUb1NsaWNlKCkgW11LZXlUeXBlVHVwbGUKZnVuYyAobW0gS2V5VHlwZU1hcCkgR2V0KGsgKktleSkgKCpUeXBlLCBib29sKQpmdW5jIChtbSBLZXlUeXBlTWFwKSBQdXQoayAqS2V5LCB2ICpUeXBlKSBib29sCmZ1bmMgKG1tIEtleVR5cGVNYXApIENvbnRhaW5zS2V5KGsgKktleSkgYm9vbApmdW5jIChtbSBLZXlUeXBlTWFwKSBDb250YWluc0FsbEtleXMoa2sgLi4uKktleSkgYm9vbApmdW5jIChtbSAqS2V5VHlwZU1hcCkgQ2xlYXIoKQpmdW5jIChtbSBLZXlUeXBlTWFwKSBSZW1vdmUoayAqS2V5KQpmdW5jIChtbSBLZXlUeXBlTWFwKSBQb3AoayAqS2V5KSAoKlR5cGUsIGJvb2wpCmZ1bmMgKG1tIEtleVR5cGVNYXApIFNpemUoKSBpbnQKZnVuYyAobW0gS2V5VHlwZU1hcCkgSXNFbXB0eSgpIGJvb2wKZnVuYyAobW0gS2V5VHlwZU1hcCkgTm9uRW1wdHkoKSBib29sCmZ1bmMgKG1tIEtleVR5cGVNYXApIERyb3BXaGVyZShmbiBmdW5jKCpLZXksICpUeXBlKSBib29sKSBLZXlUeXBlVHVwbGVzCmZ1bmMgKG1tIEtleVR5cGVNYXApIEZvcmVhY2goZiBmdW5jKCpLZXksICpUeXBlKSkKZnVuYyAobW0gS2V5VHlwZU1hcCkgRm9yYWxsKHAgZnVuYygqS2V5LCAqVHlwZSkgYm9vbCkgYm9vbApmdW5jIChtbSBLZXlUeXBlTWFwKSBFeGlzdHMocCBmdW5jKCpLZXksICpUeXBlKSBib29sKSBib29sCmZ1bmMgKG1tIEtleVR5cGVNYXApIEZpbmQocCBmdW5jKCpLZXksICpUeXBlKSBib29sKSAoS2V5VHlwZVR1cGxlLCBib29sKQpmdW5jIChtbSBLZXlUeXBlTWFwKSBGaWx0ZXIocCBmdW5jKCpLZXksICpUeXBlKSBib29sKSBLZXlUeXBlTWFwCmZ1bmMgKG1tIEtleVR5cGVNYXApIFBhcnRpdGlvbihwIGZ1bmMoKktleSwgKlR5cGUpIGJvb2wpIChtYXRjaGluZyBLZXlUeXBlTWFwLCBvdGhlcnMgS2V5VHlwZU1hcCkKZnVuYyAobW0gS2V5VHlwZU1hcCkgTWFwKGYgZnVuYygqS2V5LCAqVHlwZSkgKCpLZXksICpUeXBlKSkgS2V5VHlwZU1hcApmdW5jIChtbSBLZXlUeXBlTWFwKSBGbGF0TWFwKGYgZnVuYygqS2V5LCAqVHlwZSkgW11LZXlUeXBlVHVwbGUpIEtleVR5cGVNYXAKZnVuYyAobW0gS2V5VHlwZU1hcCkgQ2xvbmUoKSBLZXlUeXBlTWFwCmZ1bmMgKG1tIEtleVR5cGVNYXApIFN0cmluZygpIHN0cmluZwpmdW5jIChtbSBLZXlUeXBlTWFwKSBNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcKZnVuYyAobW0gS2V5VHlwZU1hcCkgTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcK\"")
		packr.PackJSONBytes("builtin", "simple-pset-api.txt", "\"ZnVuYyBOZXdUeXBlU2V0KHZhbHVlcyAuLi4qVHlwZSkgVHlwZVNldApmdW5jIENvbnZlcnRUeXBlU2V0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKFR5cGVTZXQsIGJvb2wpCmZ1bmMgQnVpbGRUeXBlU2V0RnJvbUNoYW4oc291cmNlIDwtY2hhbiAqVHlwZSkgVHlwZVNldApmdW5jIChzZXQgVHlwZVNldCkgSXNTZXF1ZW5jZSgpIGJvb2wKZnVuYyAoc2V0IFR5cGVTZXQpIElzU2V0KCkgYm9vbApmdW5jIChzZXQgVHlwZVNldCkgVG9MaXN0KCkgVHlwZUxpc3QKZnVuYyAoc2V0IFR5cGVTZXQpIFRvU2V0KCkgVHlwZVNldApmdW5jIChzZXQgVHlwZVNldCkgVG9TbGljZSgpIFtdKlR5cGUKZnVuYyAoc2V0IFR5cGVTZXQpIFRvSW50ZXJmYWNlU2xpY2UoKSBbXWludGVyZmFjZXt9CmZ1bmMgKHNldCBUeXBlU2V0KSBDbG9uZSgpIFR5cGVTZXQKZnVuYyAoc2V0IFR5cGVTZXQpIElzRW1wdHkoKSBib29sCmZ1bmMgKHNldCBUeXBlU2V0KSBOb25FbXB0eSgpIGJvb2wKZnVuYyAoc2V0IFR5cGVTZXQpIFNpemUoKSBpbnQKZnVuYyAoc2V0IFR5cGVTZXQpIENhcmRpbmFsaXR5KCkgaW50CmZ1bmMgKHNldCBUeXBlU2V0KSBBZGQobW9yZSAuLi4qVHlwZSkgVHlwZVNldApmdW5jIChzZXQgVHlwZVNldCkgQ29udGFpbnMoaSAqVHlwZSkgYm9vbApmdW5jIChzZXQgVHlwZVNldCkgQ29udGFpbnNBbGwoaSAuLi4qVHlwZSkgYm9vbApmdW5jIChzZXQgVHlwZVNldCkgQXBwZW5kKG1vcmUgLi4uVHlwZSkgVHlwZVNldApmdW5jIChzZXQgVHlwZVNldCkgVW5pb24ob3RoZXIgVHlwZVNldCkgVHlwZVNldApmdW5jIChzZXQgVHlwZVNldCkgSW50ZXJzZWN0KG90aGVyIFR5cGVTZXQpIFR5cGVTZXQKZnVuYyAoc2V0IFR5cGVTZXQpIERpZmZlcmVuY2Uob3RoZXIgVHlwZVNldCkgVHlwZVNldApmdW5jIChzZXQgVHlwZVNldCkgU3ltbWV0cmljRGlmZmVyZW5jZShvdGhlciBUeXBlU2V0KSBUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgQ2xlYXIoKQpmdW5jIChzZXQgVHlwZVNldCkgUmVtb3ZlKGkgKlR5cGUpCmZ1bmMgKHNldCBUeXBlU2V0KSBTZW5kKCkgPC1jaGFuICpUeXBlCmZ1bmMgKHNldCBUeXBlU2V0KSBGb3JhbGwocCBmdW5jKCpUeXBlKSBib29sKSBib29sCmZ1bmMgKHNldCBUeXBlU2V0KSBFeGlzdHMocCBmdW5jKCpUeXBlKSBib29sKSBib29sCmZ1bmMgKHNldCBUeXBlU2V0KSBGb3JlYWNoKGYgZnVuYygqVHlwZSkpCmZ1bmMgKHNldCBUeXBlU2V0KSBGaW5kKHAgZnVuYygqVHlwZSkgYm9vbCkgKCpUeXBlLCBib29sKQpmdW5jIChzZXQgVHlwZVNldCkgRmlsdGVyKHAgZnVuYygqVHlwZSkgYm9vbCkgVHlwZVNldApmdW5jIChzZXQgVHlwZVNldCkgUGFydGl0aW9uKHAgZnVuYygqVHlwZSkgYm9vbCkgKFR5cGVTZXQsIFR5cGVTZXQpCmZ1bmMgKHNldCBUeXBlU2V0KSBNYXAoZiBmdW5jKCpUeXBlKSAqVHlwZSkgVHlwZVNldApmdW5jIChzZXQgVHlwZVNldCkgRmxhdE1hcChmIGZ1bmMoKlR5cGUpIFtdKlR5cGUpIFR5cGVTZXQKZnVuYyAoc2V0IFR5cGVTZXQpIENvdW50QnkocCBmdW5jKCpUeXBlKSBib29sKSAocmVzdWx0IGludCkKZnVuYyAoc2V0IFR5cGVTZXQpIE1pbigpIFR5cGUKZnVuYyAoc2V0IFR5cGVTZXQpIE1heCgpIFR5cGUKZnVuYyAoc2V0IFR5cGVTZXQpIE1pbkJ5KGxlc3MgZnVuYygqVHlwZSwgKlR5cGUpIGJvb2wpICpUeXBlCmZ1bmMgKHNldCBUeXBlU2V0KSBNYXhCeShsZXNzIGZ1bmMoKlR5cGUsICpUeXBlKSBib29sKSAqVHlwZQpmdW5jIChzZXQgVHlwZVNldCkgU3VtKCkgVHlwZQpmdW5jIChzZXQgVHlwZVNldCkgU3RyaW5nTGlzdCgpIFtdc3RyaW5nCmZ1bmMgKHNldCBUeXBlU2V0KSBTdHJpbmcoKSBzdHJpbmcKZnVuYyAoc2V0IFR5cGVTZXQpIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZwpmdW5jIChzZXQgVHlwZVNldCkgTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcKZnVuYyAoc2V0IFR5cGVTZXQpIFVubWFyc2hhbEpTT04oYiBbXWJ5dGUpIGVycm9yCmZ1bmMgKHNldCBUeXBlU2V0KSBNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKQpmdW5jIChzZXQgVHlwZVNldCkgU3RyaW5nTWFwKCkgbWFwW3N0cmluZ11ib29sCg==\"")
		packr.PackJSONBytes("builtin", "simple-set-api.txt", "\"ZnVuYyBOZXdUeXBlU2V0KHZhbHVlcyAuLi5UeXBlKSBUeXBlU2V0CmZ1bmMgQ29udmVydFR5cGVTZXQodmFsdWVzIC4uLmludGVyZmFjZXt9KSAoVHlwZVNldCwgYm9vbCkKZnVuYyBCdWlsZFR5cGVTZXRGcm9tQ2hhbihzb3VyY2UgPC1jaGFuIFR5cGUpIFR5cGVTZXQKZnVuYyAoc2V0IFR5cGVTZXQpIElzU2VxdWVuY2UoKSBib29sCmZ1bmMgKHNldCBUeXBlU2V0KSBJc1NldCgpIGJvb2wKZnVuYyAoc2V0IFR5cGVTZXQpIFRvTGlzdCgpIFR5cGVMaXN0CmZ1bmMgKHNldCBUeXBlU2V0KSBUb1NldCgpIFR5cGVTZXQKZnVuYyAoc2V0IFR5cGVTZXQpIFRvU2xpY2UoKSBbXVR5cGUKZnVuYyAoc2V0IFR5cGVTZXQpIFRvSW50ZXJmYWNlU2xpY2UoKSBbXWludGVyZmFjZXt9CmZ1bmMgKHNldCBUeXBlU2V0KSBDbG9uZSgpIFR5cGVTZXQKZnVuYyAoc2V0IFR5cGVTZXQpIElzRW1wdHkoKSBib29sCmZ1bmMgKHNldCBUeXBlU2V0KSBOb25FbXB0eSgpIGJvb2wKZnVuYyAoc2V0IFR5cGVTZXQpIFNpemUoKSBpbnQKZnVuYyAoc2V0IFR5cGVTZXQpIENhcmRpbmFsaXR5KCkgaW50CmZ1bmMgKHNldCBUeXBlU2V0KSBBZGQobW9yZSAuLi5UeXBlKSBUeXBlU2V0CmZ1bmMgKHNldCBUeXBlU2V0KSBDb250YWlucyhpIFR5cGUpIGJvb2wKZnVuYyAoc2V0IFR5cGVTZXQpIENvbnRhaW5zQWxsKGkgLi4uVHlwZSkgYm9vbApmdW5jIChzZXQgVHlwZVNldCkgQXBwZW5kKG1vcmUgLi4uVHlwZSkgVHlwZVNldApmdW5jIChzZXQgVHlwZVNldCkgVW5pb24ob3RoZXIgVHlwZVNldCkgVHlwZVNldApmdW5jIChzZXQgVHlwZVNldCkgSW50ZXJzZWN0KG90aGVyIFR5cGVTZXQpIFR5cGVTZXQKZnVuYyAoc2V0IFR5cGVTZXQpIERpZmZlcmVuY2Uob3RoZXIgVHlwZVNldCkgVHlwZVNldApmdW5jIChzZXQgVHlwZVNldCkgU3ltbWV0cmljRGlmZmVyZW5jZShvdGhlciBUeXBlU2V0KSBUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgQ2xlYXIoKQpmdW5jIChzZXQgVHlwZVNldCkgUmVtb3ZlKGkgVHlwZSkKZnVuYyAoc2V0IFR5cGVTZXQpIFNlbmQoKSA8LWNoYW4gVHlwZQpmdW5jIChzZXQgVHlwZVNldCkgRm9yYWxsKHAgZnVuYyhUeXBlKSBib29sKSBib29sCmZ1bmMgKHNldCBUeXBlU2V0KSBFeGlzdHMocCBmdW5jKFR5cGUpIGJvb2wpIGJvb2wKZnVuYyAoc2V0IFR5cGVTZXQpIEZvcmVhY2goZiBmdW5jKFR5cGUpKQpmdW5jIChzZXQgVHlwZVNldCkgRmluZChwIGZ1bmMoVHlwZSkgYm9vbCkgKFR5cGUsIGJvb2wpCmZ1bmMgKHNldCBUeXBlU2V0KSBGaWx0ZXIocCBmdW5jKFR5cGUpIGJvb2wpIFR5cGVTZXQKZnVuYyAoc2V0IFR5cGVTZXQpIFBhcnRpdGlvbihwIGZ1bmMoVHlwZSkgYm9vbCkgKFR5cGVTZXQsIFR5cGVTZXQpCmZ1bmMgKHNldCBUeXBlU2V0KSBNYXAoZiBmdW5jKFR5cGUpIFR5cGUpIFR5cGVTZXQKZnVuYyAoc2V0IFR5cGVTZXQpIEZsYXRNYXAoZiBmdW5jKFR5cGUpIFtdVHlwZSkgVHlwZVNldApmdW5jIChzZXQgVHlwZVNldCkgQ291bnRCeShwIGZ1bmMoVHlwZSkgYm9vbCkgKHJlc3VsdCBpbnQpCmZ1bmMgKHNldCBUeXBlU2V0KSBNaW4oKSBUeXBlCmZ1bmMgKHNldCBUeXBlU2V0KSBNYXgoKSBUeXBlCmZ1bmMgKHNldCBUeXBlU2V0KSBNaW5CeShsZXNzIGZ1bmMoVHlwZSwgVHlwZSkgYm9vbCkgVHlwZQpmdW5jIChzZXQgVHlwZVNldCkgTWF4QnkobGVzcyBmdW5jKFR5cGUsIFR5cGUpIGJvb2wpIFR5cGUKZnVuYyAoc2V0IFR5cGVTZXQpIFN1bSgpIFR5cGUKZnVuYyAoc2V0IFR5cGVTZXQpIFN0cmluZ0xpc3QoKSBbXXN0cmluZwpmdW5jIChzZXQgVHlwZVNldCkgU3RyaW5nKCkgc3RyaW5nCmZ1bmMgKHNldCBUeXBlU2V0KSBNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcKZnVuYyAoc2V0IFR5cGVTZXQpIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nCmZ1bmMgKHNldCBUeXBlU2V0KSBVbm1hcnNoYWxKU09OKGIgW11ieXRlKSBlcnJvcgpmdW5jIChzZXQgVHlwZVNldCkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikKZnVuYyAoc2V0IFR5cGVTZXQpIFN0cmluZ01hcCgpIG1hcFtzdHJpbmddYm9vbAo=\"")
		packr.PackJSONBytes("builtin", "threadsafe/collection.tpl", "\"Ly8gR2VuZXJhdGVkIGZyb20ge3suVGVtcGxhdGVGaWxlfX0gd2l0aCBUeXBlPXt7LlR5cGV9fQovLyBvcHRpb25zOiBDb21wYXJhYmxlOnt7LkNvbXBhcmFibGV9fSBOdW1lcmljOnt7Lk51bWVyaWN9fSBPcmRlcmVkOnt7Lk9yZGVyZWR9fSBTdHJpbmdlcjp7ey5TdHJpbmdlcn19IE11dGFibGU6YWx3YXlzCi8vIGJ5IHJ1bnRlbXBsYXRlIHt7LkFwcFZlcnNpb259fQovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pvaGFuYnJhbmRob3JzdC9ydW50ZW1wbGF0ZS9ibG9iL21hc3Rlci9CVUlMVElOLm1kCgpwYWNrYWdlIHt7LlBhY2thZ2V9fQoKe3tpZiAuSGFzSW1wb3J0fX0KaW1wb3J0ICgKCXt7LkltcG9ydH19CikKCnt7ZW5kIC19fQovLyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TaXplciBkZWZpbmVzIGFuIGludGVyZmFjZSBmb3Igc2l6aW5nIG1ldGhvZHMgb24ge3suVHlwZX19IGNvbGxlY3Rpb25zLgp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNpemVyIGludGVyZmFjZSB7CgkvLyBJc0VtcHR5IHRlc3RzIHdoZXRoZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiBpcyBlbXB0eS4KCUlzRW1wdHkoKSBib29sCgoJLy8gTm9uRW1wdHkgdGVzdHMgd2hldGhlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Db2xsZWN0aW9uIGlzIGVtcHR5LgoJTm9uRW1wdHkoKSBib29sCgoJLy8gU2l6ZSByZXR1cm5zIHRoZSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIGxpc3QgLSBhbiBhbGlhcyBvZiBMZW4oKS4KCVNpemUoKSBpbnQKfQp7ey0gaWYgLlN0cmluZ2VyfX0KCi8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1rU3RyaW5nZXIgZGVmaW5lcyBhbiBpbnRlcmZhY2UgZm9yIHN0cmluZ2VyIG1ldGhvZHMgb24ge3suVHlwZX19IGNvbGxlY3Rpb25zLgp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1rU3RyaW5nZXIgaW50ZXJmYWNlIHsKCS8vIFN0cmluZyBpbXBsZW1lbnRzIHRoZSBTdHJpbmdlciBpbnRlcmZhY2UgdG8gcmVuZGVyIHRoZSBsaXN0IGFzIGEgY29tbWEtc2VwYXJhdGVkIHN0cmluZyBlbmNsb3NlZAoJLy8gaW4gc3F1YXJlIGJyYWNrZXRzLgoJU3RyaW5nKCkgc3RyaW5nCgoJLy8gTWtTdHJpbmcgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcgdXNpbmcgYSBzdXBwbGllZCBzZXBhcmF0b3IuIE5vIGVuY2xvc2luZyBtYXJrcyBhcmUgYWRkZWQuCglNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcKCgkvLyBNa1N0cmluZzMgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcsIHVzaW5nIHRoZSBwcmVmaXgsIHNlcGFyYXRvciBhbmQgc3VmZml4IHN1cHBsaWVkLgoJTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcKCgkvLyBpbXBsZW1lbnRzIGpzb24uTWFyc2hhbGVyIGludGVyZmFjZSB7CglNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKQoKCS8vIGltcGxlbWVudHMganNvbi5Vbm1hcnNoYWxlciBpbnRlcmZhY2UgewoJVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IKCgkvLyBTdHJpbmdMaXN0IGdldHMgYSBsaXN0IG9mIHN0cmluZ3MgdGhhdCBkZXBpY3RzIGFsbCB0aGUgZWxlbWVudHMuCglTdHJpbmdMaXN0KCkgW11zdHJpbmcKfQp7ey0gZW5kfX0KCi8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUNvbGxlY3Rpb24gZGVmaW5lcyBhbiBpbnRlcmZhY2UgZm9yIGNvbW1vbiBjb2xsZWN0aW9uIG1ldGhvZHMgb24ge3suVHlwZX19Lgp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUNvbGxlY3Rpb24gaW50ZXJmYWNlIHsKCXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNpemVyCnt7LSBpZiAuU3RyaW5nZXJ9fQoJe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TWtTdHJpbmdlcgp7ey0gZW5kfX0KCgkvLyBJc1NlcXVlbmNlIHJldHVybnMgdHJ1ZSBmb3IgbGlzdHMgYW5kIHF1ZXVlcy4KCUlzU2VxdWVuY2UoKSBib29sCgoJLy8gSXNTZXQgcmV0dXJucyBmYWxzZSBmb3IgbGlzdHMgYW5kIHF1ZXVlcy4KCUlzU2V0KCkgYm9vbAp7ey0gaWYgLlRvTGlzdH19CgoJLy8gVG9MaXN0IHJldHVybnMgYSBzaGFsbG93IGNvcHkgYXMgYSBsaXN0LgoJVG9MaXN0KCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QKe3stIGVuZH19Cnt7LSBpZiAuVG9TZXR9fQoKCS8vIFRvU2V0IHJldHVybnMgYSBzaGFsbG93IGNvcHkgYXMgYSBzZXQuCglUb1NldCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQKe3stIGVuZH19CgoJLy8gVG9TbGljZSByZXR1cm5zIGEgc2hhbGxvdyBjb3B5IGFzIGEgcGxhaW4gc2xpY2UuCglUb1NsaWNlKCkgW117ey5UeXBlfX0KCgkvLyBUb0ludGVyZmFjZVNsaWNlIHJldHVybnMgYSBzaGFsbG93IGNvcHkgYXMgYSBzbGljZSBvZiBhcmJpdHJhcnkgdHlwZS4KCVRvSW50ZXJmYWNlU2xpY2UoKSBbXWludGVyZmFjZXt9CgoJLy8gRXhpc3RzIHZlcmlmaWVzIHRoYXQgb25lIG9yIG1vcmUgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgoJRXhpc3RzKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIGJvb2wKCgkvLyBGb3JhbGwgdmVyaWZpZXMgdGhhdCBhbGwgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgoJRm9yYWxsKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIGJvb2wKCgkvLyBGb3JlYWNoIGl0ZXJhdGVzIG92ZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiBhbmQgZXhlY3V0ZXMgdGhlIGZ1bmN0aW9uIGYgYWdhaW5zdCBlYWNoIGVsZW1lbnQuCglGb3JlYWNoKGYgZnVuYyh7ey5UeXBlfX0pKQoKCS8vIEZpbmQgcmV0dXJucyB0aGUgZmlyc3Qge3suVHlwZX19IHRoYXQgcmV0dXJucyB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCgkvLyBGYWxzZSBpcyByZXR1cm5lZCBpZiBub25lIG1hdGNoLgoJRmluZChwIGZ1bmMoe3suVHlwZX19KSBib29sKSAoe3suVHlwZX19LCBib29sKQp7ey0gcmFuZ2UgLk1hcFRvfX0KCgkvLyBNYXBUb3t7LlV9fSByZXR1cm5zIGEgbmV3IFtde3sufX0gYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCBmdW5jdGlvbiBmLgoJLy8gVGhlIHJlc3VsdGluZyBzbGljZSBpcyB0aGUgc2FtZSBzaXplIGFzIHRoZSBjb2xsZWN0aW9uLiBUaGUgY29sbGVjdGlvbiBpcyBub3QgbW9kaWZpZWQuCglNYXBUb3t7LlV9fShmIGZ1bmMoe3skLlR5cGV9fSkge3sufX0pIFtde3sufX0Ke3stIGVuZH19Cnt7LSByYW5nZSAuTWFwVG99fQoKCS8vIEZsYXRNYXB7ey5VfX0gcmV0dXJucyBhIG5ldyBbXXt7Ln19IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggZnVuY3Rpb24gZgoJLy8gdGhhdCByZXR1cm5zIHplcm8gb3IgbW9yZSBpdGVtcyBpbiBhIHNsaWNlLiBUaGUgcmVzdWx0aW5nIGxpc3QgbWF5IGhhdmUgYSBkaWZmZXJlbnQgc2l6ZSB0byB0aGUKCS8vIGNvbGxlY3Rpb24uIFRoZSBjb2xsZWN0aW9uIGlzIG5vdCBtb2RpZmllZC4KCUZsYXRNYXBUb3t7LlV9fShmIGZ1bmMoe3skLlR5cGV9fSkgW117ey59fSkgW117ey59fQp7ey0gZW5kfX0KCgkvLyBTZW5kIHJldHVybnMgYSBjaGFubmVsIHRoYXQgd2lsbCBzZW5kIGFsbCB0aGUgZWxlbWVudHMgaW4gb3JkZXIuIENhbiBiZSB1c2VkIHdpdGggdGhlIHBsdW1iaW5nIGNvZGUsIGZvciBleGFtcGxlLgoJLy8gQSBnb3JvdXRpbmUgaXMgY3JlYXRlZCB0byBzZW5kIHRoZSBlbGVtZW50czsgdGhpcyBvbmx5IHRlcm1pbmF0ZXMgd2hlbiBhbGwgdGhlIGVsZW1lbnRzIGhhdmUgYmVlbiBjb25zdW1lZAoJU2VuZCgpIDwtY2hhbiB7ey5UeXBlfX0KCgkvLyBDb3VudEJ5IGdpdmVzIHRoZSBudW1iZXIgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiB0aGF0IHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCglDb3VudEJ5KHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIGludAp7ey0gaWYgLkNvbXBhcmFibGV9fQoKCS8vIENvbnRhaW5zIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGl0ZW0gaXMgYWxyZWFkeSBpbiB0aGUgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRydWUgaWYgc28uCglDb250YWlucyh2IHt7LlR5cGV9fSkgYm9vbAoKCS8vIENvbnRhaW5zQWxsIGRldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gaXRlbXMgYXJlIGFsbCBpbiB0aGUgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRydWUgaWYgc28uCglDb250YWluc0FsbCh2IC4uLnt7LlR5cGV9fSkgYm9vbAp7ey0gZW5kfX0KCgkvLyBDbGVhciB0aGUgZW50aXJlIGNvbGxlY3Rpb24uCglDbGVhcigpCgoJLy8gQWRkIGFkZHMgaXRlbXMgdG8gdGhlIGN1cnJlbnQgY29sbGVjdGlvbi4KCUFkZChtb3JlIC4uLnt7LlR5cGV9fSkKe3stIGlmIC5PcmRlcmVkfX0KCgkvLyBNaW4gcmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZSBvZiBhbGwgdGhlIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgoJTWluKCkge3suVHlwZS5OYW1lfX0KCgkvLyBNYXggcmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZSBvZiBhbGwgdGhlIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgoJTWF4KCkge3suVHlwZS5OYW1lfX0Ke3stIGVuZH19CgoJLy8gTWluQnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUNvbGxlY3Rpb24gY29udGFpbmluZyB0aGUgbWluaW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cwoJLy8gdXNpbmcgYSBwYXNzZWQgZnVuYyBkZWZpbmluZyDigJhsZXNz4oCZLiBJbiB0aGUgY2FzZSBvZiBtdWx0aXBsZSBpdGVtcyBiZWluZyBlcXVhbGx5IG1pbmltYWwsIHRoZSBmaXJzdCBzdWNoCgkvLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgoJTWluQnkobGVzcyBmdW5jKHt7LlR5cGV9fSwge3suVHlwZX19KSBib29sKSB7ey5UeXBlfX0KCgkvLyBNYXhCeSByZXR1cm5zIGFuIGVsZW1lbnQgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19Q29sbGVjdGlvbiBjb250YWluaW5nIHRoZSBtYXhpbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCgkvLyB1c2luZyBhIHBhc3NlZCBmdW5jIGRlZmluaW5nIOKAmGxlc3PigJkuIEluIHRoZSBjYXNlIG9mIG11bHRpcGxlIGl0ZW1zIGJlaW5nIGVxdWFsbHkgbWF4aW1hbCwgdGhlIGZpcnN0IHN1Y2gKCS8vIGVsZW1lbnQgaXMgcmV0dXJuZWQuIFBhbmljcyBpZiB0aGVyZSBhcmUgbm8gZWxlbWVudHMuCglNYXhCeShsZXNzIGZ1bmMoe3suVHlwZX19LCB7ey5UeXBlfX0pIGJvb2wpIHt7LlR5cGV9fQp7ey0gaWYgLk51bWVyaWN9fQoKCS8vIFN1bSByZXR1cm5zIHRoZSBzdW0gb2YgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgY29sbGVjdGlvbi4KCVN1bSgpIHt7LlR5cGUuTmFtZX19Cnt7LSBlbmR9fQp9Cg==\"")
		packr.PackJSONBytes("builtin", "threadsafe/list.tpl", "\"Ly8gQW4gZW5jYXBzdWxhdGVkIFtde3suVHlwZX19LgovLyBUaHJlYWQtc2FmZS4KLy8KLy8gR2VuZXJhdGVkIGZyb20ge3suVGVtcGxhdGVGaWxlfX0gd2l0aCBUeXBlPXt7LlR5cGV9fQovLyBvcHRpb25zOiBDb21wYXJhYmxlOnt7LkNvbXBhcmFibGV9fSBOdW1lcmljOnt7Lk51bWVyaWN9fSBPcmRlcmVkOnt7Lk9yZGVyZWR9fSBTdHJpbmdlcjp7ey5TdHJpbmdlcn19Ci8vIEdvYkVuY29kZTp7ey5Hb2JFbmNvZGV9fSBNdXRhYmxlOmFsd2F5cyBUb0xpc3Q6YWx3YXlzIFRvU2V0Ont7LlRvU2V0fX0gTWFwVG86e3suTWFwVG99fQovLyBieSBydW50ZW1wbGF0ZSB7ey5BcHBWZXJzaW9ufX0KLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qb2hhbmJyYW5kaG9yc3QvcnVudGVtcGxhdGUvYmxvYi9tYXN0ZXIvQlVJTFRJTi5tZAoKcGFja2FnZSB7ey5QYWNrYWdlfX0KCmltcG9ydCAoCnt7LSBpZiBvciAuU3RyaW5nZXIgLkdvYkVuY29kZX19CgkiYnl0ZXMiCnt7LSBlbmR9fQp7ey0gaWYgLkdvYkVuY29kZX19CgkiZW5jb2RpbmcvZ29iIgp7ey0gZW5kfX0Ke3stIGlmIC5TdHJpbmdlcn19CgkiZW5jb2RpbmcvanNvbiIKCSJmbXQiCnt7LSBlbmR9fQoJIm1hdGgvcmFuZCIKCSJzb3J0IgoJInN5bmMiCnt7LSBpZiAuSGFzSW1wb3J0fX0KCXt7LkltcG9ydH19Cnt7LSBlbmR9fQopCgovLyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGNvbnRhaW5zIGEgc2xpY2Ugb2YgdHlwZSB7ey5UeXBlfX0uCi8vIEl0IGVuY2Fwc3VsYXRlcyB0aGUgc2xpY2UgYW5kIHByb3ZpZGVzIG1ldGhvZHMgdG8gYWNjZXNzIG9yIG11dGF0ZSBpdC4KLy8KLy8gTGlzdCB2YWx1ZXMgZm9sbG93IGEgc2ltaWxhciBwYXR0ZXJuIHRvIFNjYWxhIExpc3RzIGFuZCBMaW5lYXJTZXFzIGluIHBhcnRpY3VsYXIuCi8vIEZvciBjb21wYXJpc29uIHdpdGggU2NhbGEsIHNlZSBlLmcuIGh0dHA6Ly93d3cuc2NhbGEtbGFuZy5vcmcvYXBpLzIuMTEuNy8jc2NhbGEuY29sbGVjdGlvbi5MaW5lYXJTZXEKdHlwZSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHN0cnVjdCB7CglzICpzeW5jLlJXTXV0ZXgKCW0gW117ey5UeXBlfX0KfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBtYWtlcyBhbiBlbXB0eSBsaXN0IHdpdGggYm90aCBsZW5ndGggYW5kIGNhcGFjaXR5IGluaXRpYWxpc2VkLgpmdW5jIE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KGxlbmd0aCwgY2FwYWNpdHkgaW50KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXR1cm4gJnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3R7CgkJczogJnN5bmMuUldNdXRleHt9LAoJCW06IG1ha2UoW117ey5UeXBlfX0sIGxlbmd0aCwgY2FwYWNpdHkpLAoJfQp9CgovLyBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGNvbnN0cnVjdHMgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBzdXBwbGllZCB2YWx1ZXMsIGlmIGFueS4KZnVuYyBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KHZhbHVlcyAuLi57ey5UeXBlfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWxpc3QgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QobGVuKHZhbHVlcyksIGxlbih2YWx1ZXMpKQoJY29weShsaXN0Lm0sIHZhbHVlcykKCXJldHVybiBsaXN0Cn0KCi8vIENvbnZlcnR7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGNvbnN0cnVjdHMgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBzdXBwbGllZCB2YWx1ZXMsIGlmIGFueS4KLy8gVGhlIHJldHVybmVkIGJvb2xlYW4gd2lsbCBiZSBmYWxzZSBpZiBhbnkgb2YgdGhlIHZhbHVlcyBjb3VsZCBub3QgYmUgY29udmVydGVkIGNvcnJlY3RseS4KLy8gVGhlIHJldHVybmVkIGxpc3Qgd2lsbCBjb250YWluIGFsbCB0aGUgdmFsdWVzIHRoYXQgd2VyZSBjb3JyZWN0bHkgY29udmVydGVkLgpmdW5jIENvbnZlcnR7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKCp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0LCBib29sKSB7CglsaXN0IDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIGxlbih2YWx1ZXMpKQoKCWZvciBfLCBpIDo9IHJhbmdlIHZhbHVlcyB7CgkJc3dpdGNoIGogOj0gaS4odHlwZSkgewp7ey0gaWYgLk51bWVyaWN9fQoJCWNhc2UgaW50OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgKmludDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSBpbnQ4OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgKmludDg6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgaW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqaW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgaW50MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqaW50MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgaW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqaW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgdWludDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlICp1aW50OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlIHVpbnQ4OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgKnVpbnQ4OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlIHVpbnQxNjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlICp1aW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgdWludDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgKnVpbnQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSB1aW50NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqdWludDY0OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCB7ey5UeXBlLkFtcH19aykKCQljYXNlIGZsb2F0MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSAqZmxvYXQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwge3suVHlwZS5BbXB9fWspCgkJY2FzZSBmbG9hdDY0OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQoJCWNhc2UgKmZsb2F0NjQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHt7LlR5cGUuQW1wfX1rKQp7ey0gZWxzZX19CgkJe3stIGlmIC5UeXBlLklzUHRyfX0KCQljYXNlIHt7LlR5cGUuTmFtZX19OgoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCAmaikKCQljYXNlICp7ey5UeXBlLk5hbWV9fToKCQkJbGlzdC5tID0gYXBwZW5kKGxpc3QubSwgaikKCQl7ey0gZWxzZX19CgkJY2FzZSB7ey5UeXBlfX06CgkJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIGopCgkJY2FzZSAqe3suVHlwZX19OgoJCQlsaXN0Lm0gPSBhcHBlbmQobGlzdC5tLCAqaikKCQl7ey0gZW5kfX0Ke3stIGVuZH19CgkJfQoJfQoKCXJldHVybiBsaXN0LCBsZW4obGlzdC5tKSA9PSBsZW4odmFsdWVzKQp9CgovLyBCdWlsZHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3RGcm9tQ2hhbiBjb25zdHJ1Y3RzIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgZnJvbSBhIGNoYW5uZWwgdGhhdCBzdXBwbGllcwovLyBhIHNlcXVlbmNlIG9mIHZhbHVlcyB1bnRpbCBpdCBpcyBjbG9zZWQuIFRoZSBmdW5jdGlvbiBkb2Vzbid0IHJldHVybiB1bnRpbCB0aGVuLgpmdW5jIEJ1aWxke3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdEZyb21DaGFuKHNvdXJjZSA8LWNoYW4ge3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglsaXN0IDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIDApCglmb3IgdiA6PSByYW5nZSBzb3VyY2UgewoJCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIHYpCgl9CglyZXR1cm4gbGlzdAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIElzU2VxdWVuY2UgcmV0dXJucyB0cnVlIGZvciBsaXN0cyBhbmQgcXVldWVzLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBJc1NlcXVlbmNlKCkgYm9vbCB7CglyZXR1cm4gdHJ1ZQp9CgovLyBJc1NldCByZXR1cm5zIGZhbHNlIGZvciBsaXN0cyBvciBxdWV1ZXMuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIElzU2V0KCkgYm9vbCB7CglyZXR1cm4gZmFsc2UKfQoKLy8gc2xpY2UgcmV0dXJucyB0aGUgaW50ZXJuYWwgZWxlbWVudHMgb2YgdGhlIGN1cnJlbnQgbGlzdC4gVGhpcyBpcyBhIHNlYW0gZm9yIHRlc3RpbmcgZXRjLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBzbGljZSgpIFtde3suVHlwZX19IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CglyZXR1cm4gbGlzdC5tCn0KCi8vIFRvTGlzdCByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgbGlzdCBhcyBhIGxpc3QsIHdoaWNoIGlzIGFuIGlkZW50aXR5IG9wZXJhdGlvbiBpbiB0aGlzIGNhc2UuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFRvTGlzdCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCXJldHVybiBsaXN0Cn0Ke3stIGlmIC5Ub1NldH19CgovLyBUb1NldCByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgbGlzdCBhcyBhIHNldC4gVGhlIHJldHVybmVkIHNldCBpcyBhIHNoYWxsb3cKLy8gY29weTsgdGhlIGxpc3QgaXMgbm90IGFsdGVyZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFRvU2V0KCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJcmV0dXJuIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldChsaXN0Lm0uLi4pCn0Ke3stIGVuZH19CgovLyBUb1NsaWNlIHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBjdXJyZW50IGxpc3QgYXMgYSBzbGljZS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgVG9TbGljZSgpIFtde3suVHlwZX19IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJbGlzdC5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCglzIDo9IG1ha2UoW117ey5UeXBlfX0sIGxlbihsaXN0Lm0pLCBsZW4obGlzdC5tKSkKCWNvcHkocywgbGlzdC5tKQoJcmV0dXJuIHMKfQoKLy8gVG9JbnRlcmZhY2VTbGljZSByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgY3VycmVudCBsaXN0IGFzIGEgc2xpY2Ugb2YgYXJiaXRyYXJ5IHR5cGUuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFRvSW50ZXJmYWNlU2xpY2UoKSBbXWludGVyZmFjZXt9IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJbGlzdC5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCglzIDo9IG1ha2UoW11pbnRlcmZhY2V7fSwgMCwgbGVuKGxpc3QubSkpCglmb3IgXywgdiA6PSByYW5nZSBsaXN0Lm0gewoJCXMgPSBhcHBlbmQocywgdikKCX0KCXJldHVybiBzCn0KCi8vIENsb25lIHJldHVybnMgYSBzaGFsbG93IGNvcHkgb2YgdGhlIGxpc3QuIEl0IGRvZXMgbm90IGNsb25lIHRoZSB1bmRlcmx5aW5nIGVsZW1lbnRzLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBDbG9uZSgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJbGlzdC5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCglyZXR1cm4gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdChsaXN0Lm0uLi4pCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gR2V0IGdldHMgdGhlIHNwZWNpZmllZCBlbGVtZW50IGluIHRoZSBsaXN0LgovLyBQYW5pY3MgaWYgdGhlIGluZGV4IGlzIG91dCBvZiByYW5nZSBvciB0aGUgbGlzdCBpcyBuaWwuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEdldChpIGludCkge3suVHlwZX19IHsKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJcmV0dXJuIGxpc3QubVtpXQp9CgovLyBIZWFkIGdldHMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGxpc3QuIEhlYWQgcGx1cyBUYWlsIGluY2x1ZGUgdGhlIHdob2xlIGxpc3QuIEhlYWQgaXMgdGhlIG9wcG9zaXRlIG9mIExhc3QuCi8vIFBhbmljcyBpZiBsaXN0IGlzIGVtcHR5IG9yIG5pbC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgSGVhZCgpIHt7LlR5cGV9fSB7CglsaXN0LnMuUkxvY2soKQoJZGVmZXIgbGlzdC5zLlJVbmxvY2soKQoKCXJldHVybiBsaXN0Lm1bMF0KfQoKLy8gSGVhZE9wdGlvbiBnZXRzIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBsaXN0LCBpZiBwb3NzaWJsZS4KLy8gT3RoZXJ3aXNlIHJldHVybnMge3tpZiAuVHlwZS5Jc1B0cn19bmlse3tlbHNlfX10aGUgemVybyB2YWx1ZXt7ZW5kfX0uCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEhlYWRPcHRpb24oKSB7ey5UeXBlfX0gewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiB7ey5UeXBlLlplcm99fQoJfQoKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJaWYgbGVuKGxpc3QubSkgPT0gMCB7CgkJcmV0dXJuIHt7LlR5cGUuWmVyb319Cgl9CglyZXR1cm4gbGlzdC5tWzBdCn0KCi8vIExhc3QgZ2V0cyB0aGUgbGFzdCBlbGVtZW50IGluIHRoZSBsaXN0LiBJbml0IHBsdXMgTGFzdCBpbmNsdWRlIHRoZSB3aG9sZSBsaXN0LiBMYXN0IGlzIHRoZSBvcHBvc2l0ZSBvZiBIZWFkLgovLyBQYW5pY3MgaWYgbGlzdCBpcyBlbXB0eSBvciBuaWwuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIExhc3QoKSB7ey5UeXBlfX0gewoJbGlzdC5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCglyZXR1cm4gbGlzdC5tW2xlbihsaXN0Lm0pLTFdCn0KCi8vIExhc3RPcHRpb24gZ2V0cyB0aGUgbGFzdCBlbGVtZW50IGluIHRoZSBsaXN0LCBpZiBwb3NzaWJsZS4KLy8gT3RoZXJ3aXNlIHJldHVybnMge3tpZiAuVHlwZS5Jc1B0cn19bmlse3tlbHNlfX10aGUgemVybyB2YWx1ZXt7ZW5kfX0uCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIExhc3RPcHRpb24oKSB7ey5UeXBlfX0gewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiB7ey5UeXBlLlplcm99fQoJfQoKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJaWYgbGVuKGxpc3QubSkgPT0gMCB7CgkJcmV0dXJuIHt7LlR5cGUuWmVyb319Cgl9CglyZXR1cm4gbGlzdC5tW2xlbihsaXN0Lm0pLTFdCn0KCi8vIFRhaWwgZ2V0cyBldmVyeXRoaW5nIGV4Y2VwdCB0aGUgaGVhZC4gSGVhZCBwbHVzIFRhaWwgaW5jbHVkZSB0aGUgd2hvbGUgbGlzdC4gVGFpbCBpcyB0aGUgb3Bwb3NpdGUgb2YgSW5pdC4KLy8gUGFuaWNzIGlmIGxpc3QgaXMgZW1wdHkgb3IgbmlsLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUYWlsKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJbGlzdC5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCXJlc3VsdC5tID0gbGlzdC5tWzE6XQoJcmV0dXJuIHJlc3VsdAp9CgovLyBJbml0IGdldHMgZXZlcnl0aGluZyBleGNlcHQgdGhlIGxhc3QuIEluaXQgcGx1cyBMYXN0IGluY2x1ZGUgdGhlIHdob2xlIGxpc3QuIEluaXQgaXMgdGhlIG9wcG9zaXRlIG9mIFRhaWwuCi8vIFBhbmljcyBpZiBsaXN0IGlzIGVtcHR5IG9yIG5pbC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgSW5pdCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJcmVzdWx0IDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIDApCglyZXN1bHQubSA9IGxpc3QubVs6bGVuKGxpc3QubSktMV0KCXJldHVybiByZXN1bHQKfQoKLy8gSXNFbXB0eSB0ZXN0cyB3aGV0aGVyIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgaXMgZW1wdHkuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIElzRW1wdHkoKSBib29sIHsKCXJldHVybiBsaXN0LlNpemUoKSA9PSAwCn0KCi8vIE5vbkVtcHR5IHRlc3RzIHdoZXRoZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBpcyBlbXB0eS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTm9uRW1wdHkoKSBib29sIHsKCXJldHVybiBsaXN0LlNpemUoKSA+IDAKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBTaXplIHJldHVybnMgdGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgbGlzdCAtIGFuIGFsaWFzIG9mIExlbigpLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTaXplKCkgaW50IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gMAoJfQoKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJcmV0dXJuIGxlbihsaXN0Lm0pCn0KCi8vIExlbiByZXR1cm5zIHRoZSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIGxpc3QgLSBhbiBhbGlhcyBvZiBTaXplKCkuCi8vIFRoaXMgaXMgb25lIG9mIHRoZSB0aHJlZSBtZXRob2RzIGluIHRoZSBzdGFuZGFyZCBzb3J0LkludGVyZmFjZS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTGVuKCkgaW50IHsKCXJldHVybiBsaXN0LlNpemUoKQp9CgovLyBTd2FwIGV4Y2hhbmdlcyB0d28gZWxlbWVudHMsIHdoaWNoIGlzIG5lY2Vzc2FyeSBkdXJpbmcgc29ydGluZyBldGMuCi8vIFRoaXMgaXMgb25lIG9mIHRoZSB0aHJlZSBtZXRob2RzIGluIHRoZSBzdGFuZGFyZCBzb3J0LkludGVyZmFjZS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU3dhcChpLCBqIGludCkgewoJbGlzdC5zLkxvY2soKQoJZGVmZXIgbGlzdC5zLlVubG9jaygpCgoJbGlzdC5tW2ldLCBsaXN0Lm1bal0gPSBsaXN0Lm1bal0sIGxpc3QubVtpXQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0Ke3stIGlmIC5Db21wYXJhYmxlfX0KCi8vIENvbnRhaW5zIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGl0ZW0gaXMgYWxyZWFkeSBpbiB0aGUgbGlzdCwgcmV0dXJuaW5nIHRydWUgaWYgc28uCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIENvbnRhaW5zKHYge3suVHlwZX19KSBib29sIHsKCXJldHVybiBsaXN0LkV4aXN0cyhmdW5jKHgge3suVHlwZX19KSBib29sIHsKCQlyZXR1cm4ge3suVHlwZS5TdGFyfX12ID09IHt7LlR5cGUuU3Rhcn19eAoJfSkKfQoKLy8gQ29udGFpbnNBbGwgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBnaXZlbiBpdGVtcyBhcmUgYWxsIGluIHRoZSBsaXN0LCByZXR1cm5pbmcgdHJ1ZSBpZiBzby4KLy8gVGhpcyBpcyBwb3RlbnRpYWxseSBhIHNsb3cgbWV0aG9kIGFuZCBzaG91bGQgb25seSBiZSB1c2VkIHJhcmVseS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgQ29udGFpbnNBbGwoaSAuLi57ey5UeXBlfX0pIGJvb2wgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBsZW4oaSkgPT0gMAoJfQoKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgaSB7CgkJaWYgIWxpc3QuQ29udGFpbnModikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9Cnt7LSBlbmR9fQoKLy8gRXhpc3RzIHZlcmlmaWVzIHRoYXQgb25lIG9yIG1vcmUgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBFeGlzdHMocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJbGlzdC5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCglmb3IgXywgdiA6PSByYW5nZSBsaXN0Lm0gewoJCWlmIHAodikgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCX0KCXJldHVybiBmYWxzZQp9CgovLyBGb3JhbGwgdmVyaWZpZXMgdGhhdCBhbGwgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBGb3JhbGwocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIHRydWUKCX0KCglsaXN0LnMuUkxvY2soKQoJZGVmZXIgbGlzdC5zLlJVbmxvY2soKQoKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJaWYgIXAodikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9CgovLyBGb3JlYWNoIGl0ZXJhdGVzIG92ZXIge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBhbmQgZXhlY3V0ZXMgZnVuY3Rpb24gZiBhZ2FpbnN0IGVhY2ggZWxlbWVudC4KLy8gVGhlIGZ1bmN0aW9uIGNhbiBzYWZlbHkgYWx0ZXIgdGhlIHZhbHVlcyB2aWEgc2lkZS1lZmZlY3RzLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBGb3JlYWNoKGYgZnVuYyh7ey5UeXBlfX0pKSB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuCgl9CgoJbGlzdC5zLkxvY2soKQoJZGVmZXIgbGlzdC5zLlVubG9jaygpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlmKHYpCgl9Cn0KCi8vIFNlbmQgcmV0dXJucyBhIGNoYW5uZWwgdGhhdCB3aWxsIHNlbmQgYWxsIHRoZSBlbGVtZW50cyBpbiBvcmRlci4KLy8gQSBnb3JvdXRpbmUgaXMgY3JlYXRlZCB0byBzZW5kIHRoZSBlbGVtZW50czsgdGhpcyBvbmx5IHRlcm1pbmF0ZXMgd2hlbiBhbGwgdGhlIGVsZW1lbnRzCi8vIGhhdmUgYmVlbiBjb25zdW1lZC4gVGhlIGNoYW5uZWwgd2lsbCBiZSBjbG9zZWQgd2hlbiBhbGwgdGhlIGVsZW1lbnRzIGhhdmUgYmVlbiBzZW50LgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTZW5kKCkgPC1jaGFuIHt7LlR5cGV9fSB7CgljaCA6PSBtYWtlKGNoYW4ge3suVHlwZX19KQoJZ28gZnVuYygpIHsKCQlpZiBsaXN0ICE9IG5pbCB7CgkJCWxpc3Qucy5STG9jaygpCgkJCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCgkJCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJCQljaCA8LSB2CgkJCX0KCQl9CgkJY2xvc2UoY2gpCgl9KCkKCXJldHVybiBjaAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFJldmVyc2UgcmV0dXJucyBhIGNvcHkgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB3aXRoIGFsbCBlbGVtZW50cyBpbiB0aGUgcmV2ZXJzZSBvcmRlci4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBSZXZlcnNlKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglsaXN0LnMuTG9jaygpCglkZWZlciBsaXN0LnMuVW5sb2NrKCkKCgluIDo9IGxlbihsaXN0Lm0pCglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QobiwgbikKCWxhc3QgOj0gbiAtIDEKCWZvciBpLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJcmVzdWx0Lm1bbGFzdC1pXSA9IHYKCX0KCXJldHVybiByZXN1bHQKfQoKLy8gRG9SZXZlcnNlIGFsdGVycyBhIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3Qgd2l0aCBhbGwgZWxlbWVudHMgaW4gdGhlIHJldmVyc2Ugb3JkZXIuCi8vIFVubGlrZSBSZXZlcnNlLCBpdCBkb2VzIG5vdCBhbGxvY2F0ZSBuZXcgbWVtb3J5LgovLwovLyBUaGUgbGlzdCBpcyBtb2RpZmllZCBhbmQgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERvUmV2ZXJzZSgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJbGlzdC5zLkxvY2soKQoJZGVmZXIgbGlzdC5zLlVubG9jaygpCgoJbWlkIDo9IChsZW4obGlzdC5tKSArIDEpIC8gMgoJbGFzdCA6PSBsZW4obGlzdC5tKSAtIDEKCWZvciBpIDo9IDA7IGkgPCBtaWQ7IGkrKyB7CgkJciA6PSBsYXN0IC0gaQoJCWlmIGkgIT0gciB7CgkJCWxpc3QubVtpXSwgbGlzdC5tW3JdID0gbGlzdC5tW3JdLCBsaXN0Lm1baV0KCQl9Cgl9CglyZXR1cm4gbGlzdAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFNodWZmbGUgcmV0dXJucyBhIHNodWZmbGVkIGNvcHkgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCwgdXNpbmcgYSB2ZXJzaW9uIG9mIHRoZSBGaXNoZXItWWF0ZXMgc2h1ZmZsZS4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTaHVmZmxlKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXR1cm4gbGlzdC5DbG9uZSgpLmRvU2h1ZmZsZSgpCn0KCi8vIERvU2h1ZmZsZSByZXR1cm5zIGEgc2h1ZmZsZWQge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCwgdXNpbmcgYSB2ZXJzaW9uIG9mIHRoZSBGaXNoZXItWWF0ZXMgc2h1ZmZsZS4KLy8KLy8gVGhlIGxpc3QgaXMgbW9kaWZpZWQgYW5kIHRoZSBtb2RpZmllZCBsaXN0IGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBEb1NodWZmbGUoKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWxpc3Qucy5Mb2NrKCkKCWRlZmVyIGxpc3Qucy5VbmxvY2soKQoJcmV0dXJuIGxpc3QuZG9TaHVmZmxlKCkKfQoKZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgZG9TaHVmZmxlKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJbiA6PSBsZW4obGlzdC5tKQoJZm9yIGkgOj0gMDsgaSA8IG47IGkrKyB7CgkJciA6PSBpICsgcmFuZC5JbnRuKG4taSkKCQlsaXN0Lm1baV0sIGxpc3QubVtyXSA9IGxpc3QubVtyXSwgbGlzdC5tW2ldCgl9CglyZXR1cm4gbGlzdAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIENsZWFyIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgQ2xlYXIoKSB7CglpZiBsaXN0ICE9IG5pbCB7CgkJbGlzdC5zLkxvY2soKQoJCWRlZmVyIGxpc3Qucy5VbmxvY2soKQoJCWxpc3QubSA9IGxpc3QubVs6XQoJfQp9CgovLyBBZGQgYWRkcyBpdGVtcyB0byB0aGUgY3VycmVudCBsaXN0LiBUaGlzIGlzIGEgc3lub255bSBmb3IgQXBwZW5kLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBBZGQobW9yZSAuLi57ey5UeXBlfX0pIHsKCWxpc3QuQXBwZW5kKG1vcmUuLi4pCn0KCi8vIEFwcGVuZCBhZGRzIGl0ZW1zIHRvIHRoZSBjdXJyZW50IGxpc3QuCi8vIElmIHRoZSBsaXN0IGlzIG5pbCwgYSBuZXcgbGlzdCBpcyBhbGxvY2F0ZWQgYW5kIHJldHVybmVkLiBPdGhlcndpc2UgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEFwcGVuZChtb3JlIC4uLnt7LlR5cGV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCWlmIGxlbihtb3JlKSA9PSAwIHsKCQkJcmV0dXJuIG5pbAoJCX0KCQlsaXN0ID0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKG1vcmUpKQoJfQoKCWxpc3Qucy5Mb2NrKCkKCWRlZmVyIGxpc3Qucy5VbmxvY2soKQoJcmV0dXJuIGxpc3QuZG9BcHBlbmQobW9yZS4uLikKfQoKZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgZG9BcHBlbmQobW9yZSAuLi57ey5UeXBlfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWxpc3QubSA9IGFwcGVuZChsaXN0Lm0sIG1vcmUuLi4pCglyZXR1cm4gbGlzdAp9CgovLyBEb0luc2VydEF0IG1vZGlmaWVzIGEge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBieSBpbnNlcnRpbmcgZWxlbWVudHMgYXQgYSBnaXZlbiBpbmRleC4KLy8gVGhpcyBpcyBhIGdlbmVyYWxpc2VkIHZlcnNpb24gb2YgQXBwZW5kLgovLwovLyBJZiB0aGUgbGlzdCBpcyBuaWwsIGEgbmV3IGxpc3QgaXMgYWxsb2NhdGVkIGFuZCByZXR1cm5lZC4gT3RoZXJ3aXNlIHRoZSBtb2RpZmllZCBsaXN0IGlzIHJldHVybmVkLgovLyBQYW5pY3MgaWYgdGhlIGluZGV4IGlzIG91dCBvZiByYW5nZS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRG9JbnNlcnRBdChpbmRleCBpbnQsIG1vcmUgLi4ue3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJaWYgbGVuKG1vcmUpID09IDAgewoJCQlyZXR1cm4gbmlsCgkJfQoJCWxpc3QgPSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCBsZW4obW9yZSkpCgkJcmV0dXJuIGxpc3QuZG9JbnNlcnRBdChpbmRleCwgbW9yZS4uLikKCX0KCglsaXN0LnMuTG9jaygpCglkZWZlciBsaXN0LnMuVW5sb2NrKCkKCXJldHVybiBsaXN0LmRvSW5zZXJ0QXQoaW5kZXgsIG1vcmUuLi4pCn0KCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIGRvSW5zZXJ0QXQoaW5kZXggaW50LCBtb3JlIC4uLnt7LlR5cGV9fSkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGVuKG1vcmUpID09IDAgewoJCXJldHVybiBsaXN0Cgl9CgoJaWYgaW5kZXggPT0gbGVuKGxpc3QubSkgewoJCS8vIGFwcGVuZGluZyBpcyBhbiBlYXN5IHNwZWNpYWwgY2FzZQoJCXJldHVybiBsaXN0LmRvQXBwZW5kKG1vcmUuLi4pCgl9CgoJbmV3bGlzdCA6PSBtYWtlKFtde3suVHlwZX19LCAwLCBsZW4obGlzdC5tKStsZW4obW9yZSkpCgoJaWYgaW5kZXggIT0gMCB7CgkJbmV3bGlzdCA9IGFwcGVuZChuZXdsaXN0LCBsaXN0Lm1bOmluZGV4XS4uLikKCX0KCgluZXdsaXN0ID0gYXBwZW5kKG5ld2xpc3QsIG1vcmUuLi4pCgoJbmV3bGlzdCA9IGFwcGVuZChuZXdsaXN0LCBsaXN0Lm1baW5kZXg6XS4uLikKCglsaXN0Lm0gPSBuZXdsaXN0CglyZXR1cm4gbGlzdAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIERvRGVsZXRlRmlyc3QgbW9kaWZpZXMgYSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGJ5IGRlbGV0aW5nIG4gZWxlbWVudHMgZnJvbSB0aGUgc3RhcnQgb2YKLy8gdGhlIGxpc3QuCi8vCi8vIElmIHRoZSBsaXN0IGlzIG5pbCwgYSBuZXcgbGlzdCBpcyBhbGxvY2F0ZWQgYW5kIHJldHVybmVkLiBPdGhlcndpc2UgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCi8vIFBhbmljcyBpZiBuIGlzIGxhcmdlIGVub3VnaCB0byB0YWtlIHRoZSBpbmRleCBvdXQgb2YgcmFuZ2UuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERvRGVsZXRlRmlyc3QobiBpbnQpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWxpc3Qucy5Mb2NrKCkKCWRlZmVyIGxpc3Qucy5VbmxvY2soKQoJcmV0dXJuIGxpc3QuZG9EZWxldGVBdCgwLCBuKQp9CgovLyBEb0RlbGV0ZUxhc3QgbW9kaWZpZXMgYSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGJ5IGRlbGV0aW5nIG4gZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mCi8vIHRoZSBsaXN0LgovLwovLyBUaGUgbGlzdCBpcyBtb2RpZmllZCBhbmQgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCi8vIFBhbmljcyBpZiBuIGlzIGxhcmdlIGVub3VnaCB0byB0YWtlIHRoZSBpbmRleCBvdXQgb2YgcmFuZ2UuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERvRGVsZXRlTGFzdChuIGludCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJbGlzdC5zLkxvY2soKQoJZGVmZXIgbGlzdC5zLlVubG9jaygpCglyZXR1cm4gbGlzdC5kb0RlbGV0ZUF0KGxlbihsaXN0Lm0pLW4sIG4pCn0KCi8vIERvRGVsZXRlQXQgbW9kaWZpZXMgYSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGJ5IGRlbGV0aW5nIG4gZWxlbWVudHMgZnJvbSBhIGdpdmVuIGluZGV4LgovLwovLyBUaGUgbGlzdCBpcyBtb2RpZmllZCBhbmQgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCi8vIFBhbmljcyBpZiB0aGUgaW5kZXggaXMgb3V0IG9mIHJhbmdlIG9yIG4gaXMgbGFyZ2UgZW5vdWdoIHRvIHRha2UgdGhlIGluZGV4IG91dCBvZiByYW5nZS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgRG9EZWxldGVBdChpbmRleCwgbiBpbnQpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWxpc3Qucy5Mb2NrKCkKCWRlZmVyIGxpc3Qucy5VbmxvY2soKQoJcmV0dXJuIGxpc3QuZG9EZWxldGVBdChpbmRleCwgbikKfQoKZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgZG9EZWxldGVBdChpbmRleCwgbiBpbnQpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIG4gPT0gMCB7CgkJcmV0dXJuIGxpc3QKCX0KCgluZXdsaXN0IDo9IG1ha2UoW117ey5UeXBlfX0sIDAsIGxlbihsaXN0Lm0pLW4pCgoJaWYgaW5kZXggIT0gMCB7CgkJbmV3bGlzdCA9IGFwcGVuZChuZXdsaXN0LCBsaXN0Lm1bOmluZGV4XS4uLikKCX0KCglpbmRleCArPSBuCgoJaWYgaW5kZXggIT0gbGVuKGxpc3QubSkgewoJCW5ld2xpc3QgPSBhcHBlbmQobmV3bGlzdCwgbGlzdC5tW2luZGV4Ol0uLi4pCgl9CgoJbGlzdC5tID0gbmV3bGlzdAoJcmV0dXJuIGxpc3QKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBEb0tlZXBXaGVyZSBtb2RpZmllcyBhIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgYnkgcmV0YWluaW5nIG9ubHkgdGhvc2UgZWxlbWVudHMgdGhhdCBtYXRjaAovLyB0aGUgcHJlZGljYXRlIHAuIFRoaXMgaXMgdmVyeSBzaW1pbGFyIHRvIEZpbHRlciBidXQgYWx0ZXJzIHRoZSBsaXN0IGluIHBsYWNlLgovLwovLyBUaGUgbGlzdCBpcyBtb2RpZmllZCBhbmQgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIERvS2VlcFdoZXJlKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJbGlzdC5zLkxvY2soKQoJZGVmZXIgbGlzdC5zLlVubG9jaygpCglyZXR1cm4gbGlzdC5kb0tlZXBXaGVyZShwKQp9CgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBkb0tlZXBXaGVyZShwIGZ1bmMoe3suVHlwZX19KSBib29sKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglyZXN1bHQgOj0gbWFrZShbXXt7LlR5cGV9fSwgMCwgbGVuKGxpc3QubSkpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBwKHYpIHsKCQkJcmVzdWx0ID0gYXBwZW5kKHJlc3VsdCwgdikKCQl9Cgl9CgoJbGlzdC5tID0gcmVzdWx0CglyZXR1cm4gbGlzdAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFRha2UgcmV0dXJucyBhIHNsaWNlIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29udGFpbmluZyB0aGUgbGVhZGluZyBuIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgbGlzdC4KLy8gSWYgbiBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNpemUgb2YgdGhlIGxpc3QsIHRoZSB3aG9sZSBvcmlnaW5hbCBsaXN0IGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUYWtlKG4gaW50KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJaWYgbiA+PSBsZW4obGlzdC5tKSB7CgkJcmV0dXJuIGxpc3QKCX0KCglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCXJlc3VsdC5tID0gbGlzdC5tWzA6bl0KCXJldHVybiByZXN1bHQKfQoKLy8gRHJvcCByZXR1cm5zIGEgc2xpY2Ugb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB3aXRob3V0IHRoZSBsZWFkaW5nIG4gZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBsaXN0LgovLyBJZiBuIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgc2l6ZSBvZiB0aGUgbGlzdCwgYW4gZW1wdHkgbGlzdCBpcyByZXR1cm5lZC4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBEcm9wKG4gaW50KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB8fCBuID09IDAgewoJCXJldHVybiBsaXN0Cgl9CgoJbGlzdC5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCglpZiBuID49IGxlbihsaXN0Lm0pIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIDApCglyZXN1bHQubSA9IGxpc3QubVtuOl0KCXJldHVybiByZXN1bHQKfQoKLy8gVGFrZUxhc3QgcmV0dXJucyBhIHNsaWNlIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29udGFpbmluZyB0aGUgdHJhaWxpbmcgbiBlbGVtZW50cyBvZiB0aGUgc291cmNlIGxpc3QuCi8vIElmIG4gaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzaXplIG9mIHRoZSBsaXN0LCB0aGUgd2hvbGUgb3JpZ2luYWwgbGlzdCBpcyByZXR1cm5lZC4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBUYWtlTGFzdChuIGludCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglsaXN0LnMuUkxvY2soKQoJZGVmZXIgbGlzdC5zLlJVbmxvY2soKQoKCWwgOj0gbGVuKGxpc3QubSkKCWlmIG4gPj0gbCB7CgkJcmV0dXJuIGxpc3QKCX0KCglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCXJlc3VsdC5tID0gbGlzdC5tW2wtbjpdCglyZXR1cm4gcmVzdWx0Cn0KCi8vIERyb3BMYXN0IHJldHVybnMgYSBzbGljZSBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHdpdGhvdXQgdGhlIHRyYWlsaW5nIG4gZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBsaXN0LgovLyBJZiBuIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgc2l6ZSBvZiB0aGUgbGlzdCwgYW4gZW1wdHkgbGlzdCBpcyByZXR1cm5lZC4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBEcm9wTGFzdChuIGludCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgfHwgbiA9PSAwIHsKCQlyZXR1cm4gbGlzdAoJfQoKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJbCA6PSBsZW4obGlzdC5tKQoJaWYgbiA+PSBsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IE1ha2V7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KDAsIDApCglyZXN1bHQubSA9IGxpc3QubVs6bC1uXQoJcmV0dXJuIHJlc3VsdAp9CgovLyBUYWtlV2hpbGUgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGNvbnRhaW5pbmcgdGhlIGxlYWRpbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBsaXN0LiBXaGlsc3QgdGhlCi8vIHByZWRpY2F0ZSBwIHJldHVybnMgdHJ1ZSwgZWxlbWVudHMgYXJlIGFkZGVkIHRvIHRoZSByZXN1bHQuIE9uY2UgcHJlZGljYXRlIHAgcmV0dXJucyBmYWxzZSwgYWxsIHJlbWFpbmluZwovLyBlbGVtZW50cyBhcmUgZXhjbHVkZWQuCi8vCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBtb2RpZmllZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgVGFrZVdoaWxlKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJbGlzdC5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgMCkKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJaWYgcCh2KSB7CgkJCXJlc3VsdC5tID0gYXBwZW5kKHJlc3VsdC5tLCB2KQoJCX0gZWxzZSB7CgkJCXJldHVybiByZXN1bHQKCQl9Cgl9CglyZXR1cm4gcmVzdWx0Cn0KCi8vIERyb3BXaGlsZSByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29udGFpbmluZyB0aGUgdHJhaWxpbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBsaXN0LiBXaGlsc3QgdGhlCi8vIHByZWRpY2F0ZSBwIHJldHVybnMgdHJ1ZSwgZWxlbWVudHMgYXJlIGV4Y2x1ZGVkIGZyb20gdGhlIHJlc3VsdC4gT25jZSBwcmVkaWNhdGUgcCByZXR1cm5zIGZhbHNlLCBhbGwgcmVtYWluaW5nCi8vIGVsZW1lbnRzIGFyZSBhZGRlZC4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBEcm9wV2hpbGUocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglsaXN0LnMuUkxvY2soKQoJZGVmZXIgbGlzdC5zLlJVbmxvY2soKQoKCXJlc3VsdCA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCAwKQoJYWRkaW5nIDo9IGZhbHNlCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBhZGRpbmcgfHwgIXAodikgewoJCQlhZGRpbmcgPSB0cnVlCgkJCXJlc3VsdC5tID0gYXBwZW5kKHJlc3VsdC5tLCB2KQoJCX0KCX0KCglyZXR1cm4gcmVzdWx0Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gRmluZCByZXR1cm5zIHRoZSBmaXJzdCB7ey5UeXBlLk5hbWV9fSB0aGF0IHJldHVybnMgdHJ1ZSBmb3IgcHJlZGljYXRlIHAuCi8vIEZhbHNlIGlzIHJldHVybmVkIGlmIG5vbmUgbWF0Y2guCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIEZpbmQocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKHt7LlR5cGV9fSwgYm9vbCkgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiB7ey5UeXBlLlplcm99fSwgZmFsc2UKCX0KCglsaXN0LnMuUkxvY2soKQoJZGVmZXIgbGlzdC5zLlJVbmxvY2soKQoKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJaWYgcCh2KSB7CgkJCXJldHVybiB2LCB0cnVlCgkJfQoJfQp7ey0gaWYgLlR5cGUuSXNQdHJ9fQoKCXJldHVybiBuaWwsIGZhbHNlCnt7LSBlbHNlfX0KCgl2YXIgZW1wdHkge3suVHlwZX19CglyZXR1cm4gZW1wdHksIGZhbHNlCnt7LSBlbmR9fQp9CgovLyBGaWx0ZXIgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHdob3NlIGVsZW1lbnRzIHJldHVybiB0cnVlIGZvciBwcmVkaWNhdGUgcC4KLy8KLy8gVGhlIG9yaWdpbmFsIGxpc3QgaXMgbm90IG1vZGlmaWVkLiBTZWUgYWxzbyBEb0tlZXBXaGVyZSAod2hpY2ggZG9lcyBtb2RpZnkgdGhlIG9yaWdpbmFsIGxpc3QpLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBGaWx0ZXIocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglsaXN0LnMuUkxvY2soKQoJZGVmZXIgbGlzdC5zLlJVbmxvY2soKQoKCXJlc3VsdCA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCBsZW4obGlzdC5tKSkKCglmb3IgXywgdiA6PSByYW5nZSBsaXN0Lm0gewoJCWlmIHAodikgewoJCQlyZXN1bHQubSA9IGFwcGVuZChyZXN1bHQubSwgdikKCQl9Cgl9CgoJcmV0dXJuIHJlc3VsdAp9CgovLyBQYXJ0aXRpb24gcmV0dXJucyB0d28gbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3RzIHdob3NlIGVsZW1lbnRzIHJldHVybiB0cnVlIG9yIGZhbHNlIGZvciB0aGUgcHJlZGljYXRlLCBwLgovLyBUaGUgZmlyc3QgcmVzdWx0IGNvbnNpc3RzIG9mIGFsbCBlbGVtZW50cyB0aGF0IHNhdGlzZnkgdGhlIHByZWRpY2F0ZSBhbmQgdGhlIHNlY29uZCByZXN1bHQgY29uc2lzdHMgb2YKLy8gYWxsIGVsZW1lbnRzIHRoYXQgZG9uJ3QuIFRoZSByZWxhdGl2ZSBvcmRlciBvZiB0aGUgZWxlbWVudHMgaW4gdGhlIHJlc3VsdHMgaXMgdGhlIHNhbWUgYXMgaW4gdGhlCi8vIG9yaWdpbmFsIGxpc3QuCi8vCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBtb2RpZmllZApmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBQYXJ0aXRpb24ocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKCp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0LCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwsIG5pbAoJfQoKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJbWF0Y2hpbmcgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKGxpc3QubSkpCglvdGhlcnMgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKGxpc3QubSkpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBwKHYpIHsKCQkJbWF0Y2hpbmcubSA9IGFwcGVuZChtYXRjaGluZy5tLCB2KQoJCX0gZWxzZSB7CgkJCW90aGVycy5tID0gYXBwZW5kKG90aGVycy5tLCB2KQoJCX0KCX0KCglyZXR1cm4gbWF0Y2hpbmcsIG90aGVycwp9CgovLyBNYXAgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggZnVuY3Rpb24gZi4KLy8gVGhlIHJlc3VsdGluZyBsaXN0IGlzIHRoZSBzYW1lIHNpemUgYXMgdGhlIG9yaWdpbmFsIGxpc3QuCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBNYXAoZiBmdW5jKHt7LlR5cGV9fSkge3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdChsZW4obGlzdC5tKSwgbGVuKGxpc3QubSkpCglsaXN0LnMuUkxvY2soKQoJZGVmZXIgbGlzdC5zLlJVbmxvY2soKQoKCWZvciBpLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJcmVzdWx0Lm1baV0gPSBmKHYpCgl9CgoJcmV0dXJuIHJlc3VsdAp9Cnt7LSByYW5nZSAuTWFwVG99fQoKLy8gTWFwVG97ey5VfX0gcmV0dXJucyBhIG5ldyBbXXt7Ln19IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggZnVuY3Rpb24gZi4KLy8gVGhlIHJlc3VsdGluZyBzbGljZSBpcyB0aGUgc2FtZSBzaXplIGFzIHRoZSBsaXN0LgovLyBUaGUgbGlzdCBpcyBub3QgbW9kaWZpZWQuCi8vCi8vIFRoaXMgaXMgYSBkb21haW4tdG8tcmFuZ2UgbWFwcGluZyBmdW5jdGlvbi4gRm9yIGJlc3Bva2UgdHJhbnNmb3JtYXRpb25zIHRvIG90aGVyIHR5cGVzLCBjb3B5IGFuZCBtb2RpZnkKLy8gdGhpcyBtZXRob2QgYXBwcm9wcmlhdGVseS4KZnVuYyAobGlzdCAqe3skLlByZWZpeC5VfX17eyQuVHlwZS5VfX1MaXN0KSBNYXBUb3t7LlV9fShmIGZ1bmMoe3skLlR5cGV9fSkge3sufX0pIFtde3sufX0gewoJaWYgbGlzdCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gbWFrZShbXXt7Ln19LCBsZW4obGlzdC5tKSkKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJZm9yIGksIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlyZXN1bHRbaV0gPSBmKHYpCgl9CgoJcmV0dXJuIHJlc3VsdAp9Cnt7LSBlbmR9fQoKLy8gRmxhdE1hcCByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCBmdW5jdGlvbiBmIHRoYXQKLy8gcmV0dXJucyB6ZXJvIG9yIG1vcmUgaXRlbXMgaW4gYSBzbGljZS4gVGhlIHJlc3VsdGluZyBsaXN0IG1heSBoYXZlIGEgZGlmZmVyZW50IHNpemUgdG8gdGhlIG9yaWdpbmFsIGxpc3QuCi8vIFRoZSBvcmlnaW5hbCBsaXN0IGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBGbGF0TWFwKGYgZnVuYyh7ey5UeXBlfX0pIFtde3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCgwLCBsZW4obGlzdC5tKSkKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlyZXN1bHQubSA9IGFwcGVuZChyZXN1bHQubSwgZih2KS4uLikKCX0KCglyZXR1cm4gcmVzdWx0Cn0Ke3stIHJhbmdlIC5NYXBUb319CgovLyBGbGF0TWFwVG97ey5VfX0gcmV0dXJucyBhIG5ldyBbXXt7Ln19IGJ5IHRyYW5zZm9ybWluZyBldmVyeSBlbGVtZW50IHdpdGggZnVuY3Rpb24gZiB0aGF0Ci8vIHJldHVybnMgemVybyBvciBtb3JlIGl0ZW1zIGluIGEgc2xpY2UuIFRoZSByZXN1bHRpbmcgc2xpY2UgbWF5IGhhdmUgYSBkaWZmZXJlbnQgc2l6ZSB0byB0aGUgbGlzdC4KLy8gVGhlIGxpc3QgaXMgbm90IG1vZGlmaWVkLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKGxpc3QgKnt7JC5QcmVmaXguVX19e3skLlR5cGUuVX19TGlzdCkgRmxhdE1hcFRve3suVX19KGYgZnVuYyh7eyQuVHlwZX19KSBbXXt7Ln19KSBbXXt7Ln19IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IG1ha2UoW117ey59fSwgMCwgbGVuKGxpc3QubSkpCglsaXN0LnMuUkxvY2soKQoJZGVmZXIgbGlzdC5zLlJVbmxvY2soKQoKCWZvciBfLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJcmVzdWx0ID0gYXBwZW5kKHJlc3VsdCwgZih2KS4uLikKCX0KCglyZXR1cm4gcmVzdWx0Cn0Ke3stIGVuZH19CgovLyBDb3VudEJ5IGdpdmVzIHRoZSBudW1iZXIgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB0aGF0IHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIENvdW50QnkocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKHJlc3VsdCBpbnQpIHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gMAoJfQoKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBwKHYpIHsKCQkJcmVzdWx0KysKCQl9Cgl9CglyZXR1cm4KfQoKLy8gTWluQnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgY29udGFpbmluZyB0aGUgbWluaW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cwovLyB1c2luZyBhIHBhc3NlZCBmdW5jIGRlZmluaW5nIOKAmGxlc3PigJkuIEluIHRoZSBjYXNlIG9mIG11bHRpcGxlIGl0ZW1zIGJlaW5nIGVxdWFsbHkgbWluaW1hbCwgdGhlIGZpcnN0IHN1Y2gKLy8gZWxlbWVudCBpcyByZXR1cm5lZC4gUGFuaWNzIGlmIHRoZXJlIGFyZSBubyBlbGVtZW50cy4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTWluQnkobGVzcyBmdW5jKHt7LlR5cGV9fSwge3suVHlwZX19KSBib29sKSB7ey5UeXBlfX0gewoJbGlzdC5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCglsIDo9IGxlbihsaXN0Lm0pCglpZiBsID09IDAgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtaW5pbXVtIG9mIGFuIGVtcHR5IGxpc3QuIikKCX0KCgltIDo9IDAKCWZvciBpIDo9IDE7IGkgPCBsOyBpKysgewoJCWlmIGxlc3MobGlzdC5tW2ldLCBsaXN0Lm1bbV0pIHsKCQkJbSA9IGkKCQl9Cgl9CgoJcmV0dXJuIGxpc3QubVttXQp9CgovLyBNYXhCeSByZXR1cm5zIGFuIGVsZW1lbnQgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBjb250YWluaW5nIHRoZSBtYXhpbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCi8vIHVzaW5nIGEgcGFzc2VkIGZ1bmMgZGVmaW5pbmcg4oCYbGVzc+KAmS4gSW4gdGhlIGNhc2Ugb2YgbXVsdGlwbGUgaXRlbXMgYmVpbmcgZXF1YWxseSBtYXhpbWFsLCB0aGUgZmlyc3Qgc3VjaAovLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBNYXhCeShsZXNzIGZ1bmMoe3suVHlwZX19LCB7ey5UeXBlfX0pIGJvb2wpIHt7LlR5cGV9fSB7CglsaXN0LnMuUkxvY2soKQoJZGVmZXIgbGlzdC5zLlJVbmxvY2soKQoKCWwgOj0gbGVuKGxpc3QubSkKCWlmIGwgPT0gMCB7CgkJcGFuaWMoIkNhbm5vdCBkZXRlcm1pbmUgdGhlIG1heGltdW0gb2YgYW4gZW1wdHkgbGlzdC4iKQoJfQoKCW0gOj0gMAoJZm9yIGkgOj0gMTsgaSA8IGw7IGkrKyB7CgkJaWYgbGVzcyhsaXN0Lm1bbV0sIGxpc3QubVtpXSkgewoJCQltID0gaQoJCX0KCX0KCglyZXR1cm4gbGlzdC5tW21dCn0KCi8vIERpc3RpbmN0QnkgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHdob3NlIGVsZW1lbnRzIGFyZSB1bmlxdWUsIHdoZXJlIGVxdWFsaXR5IGlzIGRlZmluZWQgYnkgdGhlIGVxdWFsIGZ1bmN0aW9uLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBEaXN0aW5jdEJ5KGVxdWFsIGZ1bmMoe3suVHlwZX19LCB7ey5UeXBlfX0pIGJvb2wpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJbGlzdC5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCglyZXN1bHQgOj0gTWFrZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QoMCwgbGVuKGxpc3QubSkpCk91dGVyOgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlmb3IgXywgciA6PSByYW5nZSByZXN1bHQubSB7CgkJCWlmIGVxdWFsKHYsIHIpIHsKCQkJCWNvbnRpbnVlIE91dGVyCgkJCX0KCQl9CgkJcmVzdWx0Lm0gPSBhcHBlbmQocmVzdWx0Lm0sIHYpCgl9CglyZXR1cm4gcmVzdWx0Cn0KCi8vIEluZGV4V2hlcmUgZmluZHMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBlbGVtZW50IHNhdGlzZnlpbmcgcHJlZGljYXRlIHAuIElmIG5vbmUgZXhpc3RzLCAtMSBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgSW5kZXhXaGVyZShwIGZ1bmMoe3suVHlwZX19KSBib29sKSBpbnQgewoJcmV0dXJuIGxpc3QuSW5kZXhXaGVyZTIocCwgMCkKfQoKLy8gSW5kZXhXaGVyZTIgZmluZHMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBlbGVtZW50IHNhdGlzZnlpbmcgcHJlZGljYXRlIHAgYXQgb3IgYWZ0ZXIgc29tZSBzdGFydCBpbmRleC4KLy8gSWYgbm9uZSBleGlzdHMsIC0xIGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBJbmRleFdoZXJlMihwIGZ1bmMoe3suVHlwZX19KSBib29sLCBmcm9tIGludCkgaW50IHsKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJZm9yIGksIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQlpZiBpID49IGZyb20gJiYgcCh2KSB7CgkJCXJldHVybiBpCgkJfQoJfQoJcmV0dXJuIC0xCn0KCi8vIExhc3RJbmRleFdoZXJlIGZpbmRzIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IHNhdGlzZnlpbmcgcHJlZGljYXRlIHAuCi8vIElmIG5vbmUgZXhpc3RzLCAtMSBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTGFzdEluZGV4V2hlcmUocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgaW50IHsKCXJldHVybiBsaXN0Lkxhc3RJbmRleFdoZXJlMihwLCAtMSkKfQoKLy8gTGFzdEluZGV4V2hlcmUyIGZpbmRzIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IHNhdGlzZnlpbmcgcHJlZGljYXRlIHAgYXQgb3IgYmVmb3JlIHNvbWUgc3RhcnQgaW5kZXguCi8vIElmIG5vbmUgZXhpc3RzLCAtMSBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTGFzdEluZGV4V2hlcmUyKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wsIGJlZm9yZSBpbnQpIGludCB7CglsaXN0LnMuUkxvY2soKQoJZGVmZXIgbGlzdC5zLlJVbmxvY2soKQoKCWlmIGJlZm9yZSA8IDAgewoJCWJlZm9yZSA9IGxlbihsaXN0Lm0pCgl9Cglmb3IgaSA6PSBsZW4obGlzdC5tKSAtIDE7IGkgPj0gMDsgaS0tIHsKCQl2IDo9IGxpc3QubVtpXQoJCWlmIGkgPD0gYmVmb3JlICYmIHAodikgewoJCQlyZXR1cm4gaQoJCX0KCX0KCXJldHVybiAtMQp9Cnt7LSBpZiAuQ29tcGFyYWJsZX19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gVGhlc2UgbWV0aG9kcyBhcmUgaW5jbHVkZWQgd2hlbiB7ey5UeXBlLk5hbWV9fSBpcyBjb21wYXJhYmxlLgoKLy8gRXF1YWxzIGRldGVybWluZXMgaWYgdHdvIGxpc3RzIGFyZSBlcXVhbCB0byBlYWNoIG90aGVyLgovLyBJZiB0aGV5IGJvdGggYXJlIHRoZSBzYW1lIHNpemUgYW5kIGhhdmUgdGhlIHNhbWUgaXRlbXMgaW4gdGhlIHNhbWUgb3JkZXIsIHRoZXkgYXJlIGNvbnNpZGVyZWQgZXF1YWwuCi8vIE9yZGVyIG9mIGl0ZW1zIGlzIG5vdCByZWxldmVudCBmb3Igc2V0cyB0byBiZSBlcXVhbC4KLy8gTmlsIGxpc3RzIGFyZSBjb25zaWRlcmVkIHRvIGJlIGVtcHR5LgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBFcXVhbHMob3RoZXIgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIGJvb2wgewoJaWYgbGlzdCA9PSBuaWwgewoJCWlmIG90aGVyID09IG5pbCB7CgkJCXJldHVybiB0cnVlCgkJfQoJCW90aGVyLnMuUkxvY2soKQoJCWRlZmVyIG90aGVyLnMuUlVubG9jaygpCgkJcmV0dXJuIGxlbihvdGhlci5tKSA9PSAwCgl9CgoJaWYgb3RoZXIgPT0gbmlsIHsKCQlsaXN0LnMuUkxvY2soKQoJCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCQlyZXR1cm4gbGVuKGxpc3QubSkgPT0gMAoJfQoKCWxpc3Qucy5STG9jaygpCglvdGhlci5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCWRlZmVyIG90aGVyLnMuUlVubG9jaygpCgoJaWYgbGVuKGxpc3QubSkgIT0gbGVuKG90aGVyLm0pIHsKCQlyZXR1cm4gZmFsc2UKCX0KCglmb3IgaSwgdiA6PSByYW5nZSBsaXN0Lm0gewoJCWlmIHYgIT0gb3RoZXIubVtpXSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCglyZXR1cm4gdHJ1ZQp9Cnt7LSBlbmR9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgp0eXBlIHNvcnRhYmxle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCBzdHJ1Y3QgewoJbGVzcyBmdW5jKGksIGoge3suVHlwZX19KSBib29sCgltIFtde3suVHlwZX19Cn0KCmZ1bmMgKHNsIHNvcnRhYmxle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTGVzcyhpLCBqIGludCkgYm9vbCB7CglyZXR1cm4gc2wubGVzcyhzbC5tW2ldLCBzbC5tW2pdKQp9CgpmdW5jIChzbCBzb3J0YWJsZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIExlbigpIGludCB7CglyZXR1cm4gbGVuKHNsLm0pCn0KCmZ1bmMgKHNsIHNvcnRhYmxle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU3dhcChpLCBqIGludCkgewoJc2wubVtpXSwgc2wubVtqXSA9IHNsLm1bal0sIHNsLm1baV0KfQoKLy8gU29ydEJ5IGFsdGVycyB0aGUgbGlzdCBzbyB0aGF0IHRoZSBlbGVtZW50cyBhcmUgc29ydGVkIGJ5IGEgc3BlY2lmaWVkIG9yZGVyaW5nLgovLyBTb3J0aW5nIGhhcHBlbnMgaW4tcGxhY2U7IHRoZSBtb2RpZmllZCBsaXN0IGlzIHJldHVybmVkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTb3J0QnkobGVzcyBmdW5jKGksIGoge3suVHlwZX19KSBib29sKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWxpc3Qucy5Mb2NrKCkKCWRlZmVyIGxpc3Qucy5VbmxvY2soKQoKCXNvcnQuU29ydChzb3J0YWJsZXt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3R7bGVzcywgbGlzdC5tfSkKCXJldHVybiBsaXN0Cn0KCi8vIFN0YWJsZVNvcnRCeSBhbHRlcnMgdGhlIGxpc3Qgc28gdGhhdCB0aGUgZWxlbWVudHMgYXJlIHNvcnRlZCBieSBhIHNwZWNpZmllZCBvcmRlcmluZy4KLy8gU29ydGluZyBoYXBwZW5zIGluLXBsYWNlOyB0aGUgbW9kaWZpZWQgbGlzdCBpcyByZXR1cm5lZC4KLy8gVGhlIGFsZ29yaXRobSBrZWVwcyB0aGUgb3JpZ2luYWwgb3JkZXIgb2YgZXF1YWwgZWxlbWVudHMuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFN0YWJsZVNvcnRCeShsZXNzIGZ1bmMoaSwgaiB7ey5UeXBlfX0pIGJvb2wpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJbGlzdC5zLkxvY2soKQoJZGVmZXIgbGlzdC5zLlVubG9jaygpCgoJc29ydC5TdGFibGUoc29ydGFibGV7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0e2xlc3MsIGxpc3QubX0pCglyZXR1cm4gbGlzdAp9Cnt7LSBpZiAuT3JkZXJlZH19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gVGhlc2UgbWV0aG9kcyBhcmUgaW5jbHVkZWQgd2hlbiB7ey5UeXBlLk5hbWV9fSBpcyBvcmRlcmVkLgoKLy8gU29ydGVkIGFsdGVycyB0aGUgbGlzdCBzbyB0aGF0IHRoZSBlbGVtZW50cyBhcmUgc29ydGVkIGJ5IHRoZWlyIG5hdHVyYWwgb3JkZXJpbmcuCi8vIFNvcnRpbmcgaGFwcGVucyBpbi1wbGFjZTsgdGhlIG1vZGlmaWVkIGxpc3QgaXMgcmV0dXJuZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFNvcnRlZCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCXJldHVybiBsaXN0LlNvcnRCeShmdW5jKGEsIGIge3suVHlwZX19KSBib29sIHsKCQlyZXR1cm4ge3suVHlwZS5TdGFyfX1hIDwge3suVHlwZS5TdGFyfX1iCgl9KQp9CgovLyBTdGFibGVTb3J0ZWQgYWx0ZXJzIHRoZSBsaXN0IHNvIHRoYXQgdGhlIGVsZW1lbnRzIGFyZSBzb3J0ZWQgYnkgdGhlaXIgbmF0dXJhbCBvcmRlcmluZy4KLy8gU29ydGluZyBoYXBwZW5zIGluLXBsYWNlOyB0aGUgbW9kaWZpZWQgbGlzdCBpcyByZXR1cm5lZC4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU3RhYmxlU29ydGVkKCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QgewoJcmV0dXJuIGxpc3QuU3RhYmxlU29ydEJ5KGZ1bmMoYSwgYiB7ey5UeXBlfX0pIGJvb2wgewoJCXJldHVybiB7ey5UeXBlLlN0YXJ9fWEgPCB7ey5UeXBlLlN0YXJ9fWIKCX0pCn0KCi8vIE1pbiByZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIG1pbmltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMuCi8vIFBhbmljcyBpZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTWluKCkge3suVHlwZS5OYW1lfX0gewoJbGlzdC5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCglsIDo9IGxlbihsaXN0Lm0pCglpZiBsID09IDAgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtaW5pbXVtIG9mIGFuIGVtcHR5IGxpc3QuIikKCX0KCgl2IDo9IGxpc3QubVswXQoJbSA6PSB7ey5UeXBlLlN0YXJ9fXYKCWZvciBpIDo9IDE7IGkgPCBsOyBpKysgewoJCXYgOj0gbGlzdC5tW2ldCgkJaWYge3suVHlwZS5TdGFyfX12IDwgbSB7CgkJCW0gPSB7ey5UeXBlLlN0YXJ9fXYKCQl9Cgl9CglyZXR1cm4gbQp9CgovLyBNYXggcmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBjb250YWluaW5nIHRoZSBtYXhpbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzLgovLyBQYW5pY3MgaWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIE1heCgpIChyZXN1bHQge3suVHlwZS5OYW1lfX0pIHsKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJbCA6PSBsZW4obGlzdC5tKQoJaWYgbCA9PSAwIHsKCQlwYW5pYygiQ2Fubm90IGRldGVybWluZSB0aGUgbWF4aW11bSBvZiBhbiBlbXB0eSBsaXN0LiIpCgl9CgoJdiA6PSBsaXN0Lm1bMF0KCW0gOj0ge3suVHlwZS5TdGFyfX12Cglmb3IgaSA6PSAxOyBpIDwgbDsgaSsrIHsKCQl2IDo9IGxpc3QubVtpXQoJCWlmIHt7LlR5cGUuU3Rhcn19diA+IG0gewoJCQltID0ge3suVHlwZS5TdGFyfX12CgkJfQoJfQoJcmV0dXJuIG0KfQp7ey0gZW5kfX0Ke3stIGlmIC5OdW1lcmljfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBUaGVzZSBtZXRob2RzIGFyZSBpbmNsdWRlZCB3aGVuIHt7LlR5cGUuTmFtZX19IGlzIG51bWVyaWMuCgovLyBTdW0gcmV0dXJucyB0aGUgc3VtIG9mIGFsbCB0aGUgZWxlbWVudHMgaW4gdGhlIGxpc3QuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIFN1bSgpIHt7LlR5cGUuTmFtZX19IHsKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJc3VtIDo9IHt7LlR5cGUuTmFtZX19KDApCglmb3IgXywgdiA6PSByYW5nZSBsaXN0Lm0gewoJCXN1bSA9IHN1bSArIHt7LlR5cGUuU3Rhcn19dgoJfQoJcmV0dXJuIHN1bQp9Cnt7LSBlbmR9fQp7ey0gaWYgLlN0cmluZ2VyfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gU3RyaW5nTGlzdCBnZXRzIGEgbGlzdCBvZiBzdHJpbmdzIHRoYXQgZGVwaWN0cyBhbGwgdGhlIGVsZW1lbnRzLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBTdHJpbmdMaXN0KCkgW11zdHJpbmcgewp7ey0gaWYgZXEgLlR5cGUuU3RyaW5nICJzdHJpbmcifX0KCXJldHVybiBsaXN0LlRvU2xpY2UoKQp7ey0gZWxzZX19CglpZiBsaXN0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJc3RyaW5ncyA6PSBtYWtlKFtdc3RyaW5nLCBsZW4obGlzdC5tKSkKCWZvciBpLCB2IDo9IHJhbmdlIGxpc3QubSB7CgkJc3RyaW5nc1tpXSA9IGZtdC5TcHJpbnRmKCIldiIsIHYpCgl9CglyZXR1cm4gc3RyaW5ncwp7ey0gZW5kfX0KfQoKLy8gU3RyaW5nIGltcGxlbWVudHMgdGhlIFN0cmluZ2VyIGludGVyZmFjZSB0byByZW5kZXIgdGhlIGxpc3QgYXMgYSBjb21tYS1zZXBhcmF0ZWQgc3RyaW5nIGVuY2xvc2VkIGluIHNxdWFyZSBicmFja2V0cy4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgU3RyaW5nKCkgc3RyaW5nIHsKCXJldHVybiBsaXN0Lk1rU3RyaW5nMygiWyIsICIsICIsICJdIikKfQoKLy8gTWtTdHJpbmcgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcgdXNpbmcgYSBzdXBwbGllZCBzZXBhcmF0b3IuIE5vIGVuY2xvc2luZyBtYXJrcyBhcmUgYWRkZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZyB7CglyZXR1cm4gbGlzdC5Na1N0cmluZzMoIiIsIHNlcCwgIiIpCn0KCi8vIE1rU3RyaW5nMyBjb25jYXRlbmF0ZXMgdGhlIHZhbHVlcyBhcyBhIHN0cmluZywgdXNpbmcgdGhlIHByZWZpeCwgc2VwYXJhdG9yIGFuZCBzdWZmaXggc3VwcGxpZWQuCmZ1bmMgKGxpc3QgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nIHsKCWlmIGxpc3QgPT0gbmlsIHsKCQlyZXR1cm4gIiIKCX0KCglyZXR1cm4gbGlzdC5ta1N0cmluZzNCeXRlcyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyKS5TdHJpbmcoKQp9CgpmdW5jIChsaXN0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3QpIG1rU3RyaW5nM0J5dGVzKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSAqYnl0ZXMuQnVmZmVyIHsKCWIgOj0gJmJ5dGVzLkJ1ZmZlcnt9CgliLldyaXRlU3RyaW5nKGJlZm9yZSkKCXNlcCA6PSAiIgoKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgbGlzdC5tIHsKCQliLldyaXRlU3RyaW5nKHNlcCkKCQliLldyaXRlU3RyaW5nKGZtdC5TcHJpbnRmKCIldiIsIHYpKQoJCXNlcCA9IGJldHdlZW4KCX0KCWIuV3JpdGVTdHJpbmcoYWZ0ZXIpCglyZXR1cm4gYgp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFVubWFyc2hhbEpTT04gaW1wbGVtZW50cyBKU09OIGRlY29kaW5nIGZvciB0aGlzIGxpc3QgdHlwZS4KZnVuYyAobGlzdCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IgewoJbGlzdC5zLkxvY2soKQoJZGVmZXIgbGlzdC5zLlVubG9jaygpCgoJcmV0dXJuIGpzb24uVW5tYXJzaGFsKGIsICZsaXN0Lm0pCn0KCi8vIE1hcnNoYWxKU09OIGltcGxlbWVudHMgSlNPTiBlbmNvZGluZyBmb3IgdGhpcyBsaXN0IHR5cGUuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikgewoJbGlzdC5zLlJMb2NrKCkKCWRlZmVyIGxpc3Qucy5SVW5sb2NrKCkKCglidWYsIGVyciA6PSBqc29uLk1hcnNoYWwobGlzdC5tKQoJcmV0dXJuIGJ1ZiwgZXJyCn0Ke3stIGVuZH19Cnt7LSBpZiAuR29iRW5jb2RlfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gR29iRGVjb2RlIGltcGxlbWVudHMgJ2dvYicgZGVjb2RpbmcgZm9yIHRoaXMgbGlzdCB0eXBlLgovLyBZb3UgbXVzdCByZWdpc3RlciB7ey5UeXBlLk5hbWV9fSB3aXRoIHRoZSAnZ29iJyBwYWNrYWdlIGJlZm9yZSB0aGlzIG1ldGhvZCBpcyB1c2VkLgpmdW5jIChsaXN0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0KSBHb2JEZWNvZGUoYiBbXWJ5dGUpIGVycm9yIHsKCWxpc3Qucy5Mb2NrKCkKCWRlZmVyIGxpc3Qucy5VbmxvY2soKQoKCWJ1ZiA6PSBieXRlcy5OZXdCdWZmZXIoYikKCXJldHVybiBnb2IuTmV3RGVjb2RlcihidWYpLkRlY29kZSgmbGlzdC5tKQp9CgovLyBHb2JFbmNvZGUgaW1wbGVtZW50cyAnZ29iJyBlbmNvZGluZyBmb3IgdGhpcyBsaXN0IHR5cGUuCi8vIFlvdSBtdXN0IHJlZ2lzdGVyIHt7LlR5cGUuTmFtZX19IHdpdGggdGhlICdnb2InIHBhY2thZ2UgYmVmb3JlIHRoaXMgbWV0aG9kIGlzIHVzZWQuCmZ1bmMgKGxpc3Qge3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCkgR29iRW5jb2RlKCkgKFtdYnl0ZSwgZXJyb3IpIHsKCWxpc3Qucy5STG9jaygpCglkZWZlciBsaXN0LnMuUlVubG9jaygpCgoJYnVmIDo9ICZieXRlcy5CdWZmZXJ7fQoJZXJyIDo9IGdvYi5OZXdFbmNvZGVyKGJ1ZikuRW5jb2RlKGxpc3QubSkKCXJldHVybiBidWYuQnl0ZXMoKSwgZXJyCn0Ke3stIGVuZH19Cg==\"")
		packr.PackJSONBytes("builtin", "threadsafe/map.tpl", "\"Ly8gQW4gZW5jYXBzdWxhdGVkIG1hcFt7ey5LZXkuTmFtZX19XXt7LlR5cGV9fS4KLy97e2lmIC5LZXkuSXNQdHJ9fSBOb3RlIHRoYXQgdGhlIGFwaSB1c2VzIHt7LktleX19IGJ1dCB0aGUgbWFwIHVzZXMge3suS2V5Lk5hbWV9fSBrZXlzLnt7ZW5kfX0KLy8gVGhyZWFkLXNhZmUuCi8vCi8vIEdlbmVyYXRlZCBmcm9tIHt7LlRlbXBsYXRlRmlsZX19IHdpdGggS2V5PXt7LktleX19IFR5cGU9e3suVHlwZX19Ci8vIG9wdGlvbnM6IENvbXBhcmFibGU6e3suQ29tcGFyYWJsZX19IFN0cmluZ2VyOnt7LlN0cmluZ2VyfX0gS2V5TGlzdDp7ey5LZXlMaXN0fX0gVmFsdWVMaXN0Ont7LlZhbHVlTGlzdH19IE11dGFibGU6YWx3YXlzCi8vIGJ5IHJ1bnRlbXBsYXRlIHt7LkFwcFZlcnNpb259fQovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pvaGFuYnJhbmRob3JzdC9ydW50ZW1wbGF0ZS9ibG9iL21hc3Rlci9CVUlMVElOLm1kCgpwYWNrYWdlIHt7LlBhY2thZ2V9fQoKaW1wb3J0ICgKe3stIGlmIG9yIC5TdHJpbmdlciAuR29iRW5jb2RlfX0KCSJieXRlcyIKe3stIGVuZH19Cnt7LSBpZiAuR29iRW5jb2RlfX0KCSJlbmNvZGluZy9nb2IiCnt7LSBlbmR9fQp7ey0gaWYgYW5kIC5TdHJpbmdlciAoZXEgLktleS5TdHJpbmcgInN0cmluZyIpfX0KCSJlbmNvZGluZy9qc29uIgp7ey0gZW5kfX0KCSJmbXQiCgkic3luYyIKe3stIGlmIC5IYXNJbXBvcnR9fQoJe3suSW1wb3J0fX0Ke3tlbmR9fQopCgovLyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwIGlzIHRoZSBwcmltYXJ5IHR5cGUgdGhhdCByZXByZXNlbnRzIGEgdGhyZWFkLXNhZmUgbWFwCnR5cGUge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCBzdHJ1Y3QgewoJcyAqc3luYy5SV011dGV4CgltIG1hcFt7ey5LZXkuTmFtZX19XXt7LlR5cGV9fQp9CgovLyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUgcmVwcmVzZW50cyBhIGtleS92YWx1ZSBwYWlyLgp0eXBlIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZSBzdHJ1Y3QgewoJS2V5IHt7LktleX19CglWYWwge3suVHlwZX19Cn0KCi8vIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgY2FuIGJlIHVzZWQgYXMgYSBidWlsZGVyIGZvciB1bm1vZGlmaWFibGUgbWFwcy4KdHlwZSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzIFtde3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlCgovLyBBcHBlbmQxIGFkZHMgb25lIGl0ZW0uCmZ1bmMgKHRzIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMpIEFwcGVuZDEoayB7ey5LZXl9fSwgdiB7ey5UeXBlfX0pIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgewoJcmV0dXJuIGFwcGVuZCh0cywge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle2ssIHZ9KQp9CgovLyBBcHBlbmQyIGFkZHMgdHdvIGl0ZW1zLgpmdW5jICh0cyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzKSBBcHBlbmQyKGsxIHt7LktleX19LCB2MSB7ey5UeXBlfX0sIGsyIHt7LktleX19LCB2MiB7ey5UeXBlfX0pIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgewoJcmV0dXJuIGFwcGVuZCh0cywge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle2sxLCB2MX0sIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXtrMiwgdjJ9KQp9CgovLyBBcHBlbmQzIGFkZHMgdGhyZWUgaXRlbXMuCmZ1bmMgKHRzIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMpIEFwcGVuZDMoazEge3suS2V5fX0sIHYxIHt7LlR5cGV9fSwgazIge3suS2V5fX0sIHYyIHt7LlR5cGV9fSwgazMge3suS2V5fX0sIHYzIHt7LlR5cGV9fSkge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlcyB7CglyZXR1cm4gYXBwZW5kKHRzLCB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGV7azEsIHYxfSwge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle2syLCB2Mn0sIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXtrMywgdjN9KQp9CgovLyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19WmlwIGlzIHVzZWQgd2l0aCB0aGUgVmFsdWVzIG1ldGhvZCB0byB6aXAgKGkuZS4gaW50ZXJsZWF2ZSkgYSBzbGljZSBvZgovLyBrZXlzIHdpdGggYSBzbGljZSBvZiB2YWx1ZXMuIFRoZXNlIGNhbiB0aGVuIGJlIHBhc3NlZCBpbiB0byB0aGUgTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcAovLyBjb25zdHJ1Y3RvciBmdW5jdGlvbi4KZnVuYyB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19WmlwKGtleXMgLi4ue3suS2V5fX0pIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMgewoJdHMgOj0gbWFrZSh7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzLCBsZW4oa2V5cykpCglmb3IgaSwgayA6PSByYW5nZSBrZXlzIHsKCQl0c1tpXS5LZXkgPSBrCgl9CglyZXR1cm4gdHMKfQoKLy8gVmFsdWVzIHNldHMgdGhlIHZhbHVlcyBpbiBhIHR1cGxlIHNsaWNlLiBVc2UgdGhpcyB3aXRoIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1aaXAuCmZ1bmMgKHRzIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMpIFZhbHVlcyh2YWx1ZXMgLi4ue3suVHlwZX19KSB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGVzIHsKCWlmIGxlbih0cykgIT0gbGVuKHZhbHVlcykgewoJCXBhbmljKGZtdC5FcnJvcmYoIk1pc21hdGNoZWQgJWQga2V5cyBhbmQgJWQgdmFsdWVzIiwgbGVuKHRzKSwgbGVuKHZhbHVlcykpKQoJfQoJZm9yIGksIHYgOj0gcmFuZ2UgdmFsdWVzIHsKCQl0c1tpXS5WYWwgPSB2Cgl9CglyZXR1cm4gdHMKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpmdW5jIG5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCB7CglyZXR1cm4gJnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXB7CgkJczogJnN5bmMuUldNdXRleHt9LAoJCW06IG1ha2UobWFwW3t7LktleS5OYW1lfX1de3suVHlwZX19KSwKCX0KfQoKLy8gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcDEgY3JlYXRlcyBhbmQgcmV0dXJucyBhIHJlZmVyZW5jZSB0byBhIG1hcCBjb250YWluaW5nIG9uZSBpdGVtLgpmdW5jIE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAxKGsge3suS2V5fX0sIHYge3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCB7CgltbSA6PSBuZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKCkKCW1tLm1be3suS2V5LlN0YXJ9fWtdID0gdgoJcmV0dXJuIG1tCn0KCi8vIE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAgY3JlYXRlcyBhbmQgcmV0dXJucyBhIHJlZmVyZW5jZSB0byBhIG1hcCwgb3B0aW9uYWxseSBjb250YWluaW5nIHNvbWUgaXRlbXMuCmZ1bmMgTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcChrdiAuLi57ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUpICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwIHsKCW1tIDo9IG5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKQoJZm9yIF8sIHQgOj0gcmFuZ2Uga3YgewoJCW1tLm1be3suS2V5LlN0YXJ9fXQuS2V5XSA9IHQuVmFsCgl9CglyZXR1cm4gbW0KfQoKLy8gS2V5cyByZXR1cm5zIHRoZSBrZXlzIG9mIHRoZSBjdXJyZW50IG1hcCBhcyBhIHNsaWNlLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgS2V5cygpIHt7aWYgLktleUxpc3R9fXt7LktleUxpc3R9fXt7ZWxzZX19W117ey5LZXl9fXt7ZW5kfX0gewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJbW0ucy5STG9jaygpCglkZWZlciBtbS5zLlJVbmxvY2soKQoKCXMgOj0gbWFrZSh7e2lmIC5LZXlMaXN0fX17ey5LZXlMaXN0fX17e2Vsc2V9fVtde3suS2V5fX17e2VuZH19LCAwLCBsZW4obW0ubSkpCglmb3IgayA6PSByYW5nZSBtbS5tIHsKCQlzID0gYXBwZW5kKHMsIHt7LktleS5BbXB9fWspCgl9CgoJcmV0dXJuIHMKfQoKLy8gVmFsdWVzIHJldHVybnMgdGhlIHZhbHVlcyBvZiB0aGUgY3VycmVudCBtYXAgYXMgYSBzbGljZS4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIFZhbHVlcygpIHt7aWYgLlZhbHVlTGlzdH19e3suVmFsdWVMaXN0fX17e2Vsc2V9fVtde3suVHlwZX19e3tlbmR9fSB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCgltbS5zLlJMb2NrKCkKCWRlZmVyIG1tLnMuUlVubG9jaygpCgoJcyA6PSBtYWtlKHt7aWYgLlZhbHVlTGlzdH19e3suVmFsdWVMaXN0fX17e2Vsc2V9fVtde3suVHlwZX19e3tlbmR9fSwgMCwgbGVuKG1tLm0pKQoJZm9yIF8sIHYgOj0gcmFuZ2UgbW0ubSB7CgkJcyA9IGFwcGVuZChzLCB2KQoJfQoKCXJldHVybiBzCn0KCi8vIHNsaWNlIHJldHVybnMgdGhlIGludGVybmFsIGVsZW1lbnRzIG9mIHRoZSBtYXAuIFRoaXMgaXMgYSBzZWFtIGZvciB0ZXN0aW5nIGV0Yy4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIHNsaWNlKCkgW117ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGUgewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcyA6PSBtYWtlKFtde3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlLCAwLCBsZW4obW0ubSkpCglmb3IgaywgdiA6PSByYW5nZSBtbS5tIHsKCQlzID0gYXBwZW5kKHMsIHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXsoe3suS2V5LkFtcH19ayksIHZ9KQoJfQoKCXJldHVybiBzCn0KCi8vIFRvU2xpY2UgcmV0dXJucyB0aGUga2V5L3ZhbHVlIHBhaXJzIGFzIGEgc2xpY2UKZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIFRvU2xpY2UoKSBbXXt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZSB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCgltbS5zLlJMb2NrKCkKCWRlZmVyIG1tLnMuUlVubG9jaygpCgoJcmV0dXJuIG1tLnNsaWNlKCkKfQoKLy8gR2V0IHJldHVybnMgb25lIG9mIHRoZSBpdGVtcyBpbiB0aGUgbWFwLCBpZiBwcmVzZW50LgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgR2V0KGsge3suS2V5fX0pICh7ey5UeXBlfX0sIGJvb2wpIHsKCW1tLnMuUkxvY2soKQoJZGVmZXIgbW0ucy5SVW5sb2NrKCkKCgl2LCBmb3VuZCA6PSBtbS5tW3t7LktleS5TdGFyfX1rXQoJcmV0dXJuIHYsIGZvdW5kCn0KCi8vIFB1dCBhZGRzIGFuIGl0ZW0gdG8gdGhlIGN1cnJlbnQgbWFwLCByZXBsYWNpbmcgYW55IHByaW9yIHZhbHVlLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgUHV0KGsge3suS2V5fX0sIHYge3suVHlwZX19KSBib29sIHsKCW1tLnMuTG9jaygpCglkZWZlciBtbS5zLlVubG9jaygpCgoJXywgZm91bmQgOj0gbW0ubVt7ey5LZXkuU3Rhcn19a10KCW1tLm1be3suS2V5LlN0YXJ9fWtdID0gdgoJcmV0dXJuICFmb3VuZCAvL0ZhbHNlIGlmIGl0IGV4aXN0ZWQgYWxyZWFkeQp9CgovLyBDb250YWluc0tleSBkZXRlcm1pbmVzIGlmIGEgZ2l2ZW4gaXRlbSBpcyBhbHJlYWR5IGluIHRoZSBtYXAuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBDb250YWluc0tleShrIHt7LktleX19KSBib29sIHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJbW0ucy5STG9jaygpCglkZWZlciBtbS5zLlJVbmxvY2soKQoKCV8sIGZvdW5kIDo9IG1tLm1be3suS2V5LlN0YXJ9fWtdCglyZXR1cm4gZm91bmQKfQoKLy8gQ29udGFpbnNBbGxLZXlzIGRldGVybWluZXMgaWYgdGhlIGdpdmVuIGl0ZW1zIGFyZSBhbGwgaW4gdGhlIG1hcC4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIENvbnRhaW5zQWxsS2V5cyhrayAuLi57ey5LZXl9fSkgYm9vbCB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBsZW4oa2spID09IDAKCX0KCgltbS5zLlJMb2NrKCkKCWRlZmVyIG1tLnMuUlVubG9jaygpCgoJZm9yIF8sIGsgOj0gcmFuZ2Uga2sgewoJCWlmICFtbS5Db250YWluc0tleShrKSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0KCi8vIENsZWFyIGNsZWFycyB0aGUgZW50aXJlIG1hcC4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIENsZWFyKCkgewoJaWYgbW0gIT0gbmlsIHsKCQltbS5zLkxvY2soKQoJCWRlZmVyIG1tLnMuVW5sb2NrKCkKCgkJbW0ubSA9IG1ha2UobWFwW3t7LktleS5OYW1lfX1de3suVHlwZX19KQoJfQp9CgovLyBSZW1vdmUgYSBzaW5nbGUgaXRlbSBmcm9tIHRoZSBtYXAuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBSZW1vdmUoayB7ey5LZXl9fSkgewoJaWYgbW0gIT0gbmlsIHsKCQltbS5zLkxvY2soKQoJCWRlZmVyIG1tLnMuVW5sb2NrKCkKCgkJZGVsZXRlKG1tLm0sIHt7LktleS5TdGFyfX1rKQoJfQp9CgovLyBQb3AgcmVtb3ZlcyBhIHNpbmdsZSBpdGVtIGZyb20gdGhlIG1hcCwgcmV0dXJuaW5nIHRoZSB2YWx1ZSBwcmVzZW50IHByaW9yIHRvIHJlbW92YWwuCi8vIFRoZSBib29sZWFuIHJlc3VsdCBpcyB0cnVlIG9ubHkgaWYgdGhlIGtleSBoYWQgYmVlbiBwcmVzZW50LgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgUG9wKGsge3suS2V5fX0pICh7ey5UeXBlfX0sIGJvb2wpIHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIHt7LlR5cGUuWmVyb319LCBmYWxzZQoJfQoKCW1tLnMuTG9jaygpCglkZWZlciBtbS5zLlVubG9jaygpCgoJdiwgZm91bmQgOj0gbW0ubVt7ey5LZXkuU3Rhcn19a10KCWRlbGV0ZShtbS5tLCB7ey5LZXkuU3Rhcn19aykKCXJldHVybiB2LCBmb3VuZAp9CgovLyBTaXplIHJldHVybnMgaG93IG1hbnkgaXRlbXMgYXJlIGN1cnJlbnRseSBpbiB0aGUgbWFwLiBUaGlzIGlzIGEgc3lub255bSBmb3IgTGVuLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgU2l6ZSgpIGludCB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiAwCgl9CgoJbW0ucy5STG9jaygpCglkZWZlciBtbS5zLlJVbmxvY2soKQoKCXJldHVybiBsZW4obW0ubSkKfQoKLy8gSXNFbXB0eSByZXR1cm5zIHRydWUgaWYgdGhlIG1hcCBpcyBlbXB0eS4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIElzRW1wdHkoKSBib29sIHsKCXJldHVybiBtbS5TaXplKCkgPT0gMAp9CgovLyBOb25FbXB0eSByZXR1cm5zIHRydWUgaWYgdGhlIG1hcCBpcyBub3QgZW1wdHkuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBOb25FbXB0eSgpIGJvb2wgewoJcmV0dXJuIG1tLlNpemUoKSA+IDAKfQoKLy8gRHJvcFdoZXJlIGFwcGxpZXMgYSBwcmVkaWNhdGUgZnVuY3Rpb24gdG8gZXZlcnkgZWxlbWVudCBpbiB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyB0cnVlLAovLyB0aGUgZWxlbWVudCBpcyBkcm9wcGVkIGZyb20gdGhlIG1hcC4KLy8gVGhpcyBpcyBzaW1pbGFyIHRvIEZpbHRlciBleGNlcHQgdGhhdCB0aGUgbWFwIGlzIG1vZGlmaWVkLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgRHJvcFdoZXJlKGZuIGZ1bmMoe3suS2V5fX0sIHt7LlR5cGV9fSkgYm9vbCkge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlcyB7CgltbS5zLlJMb2NrKCkKCWRlZmVyIG1tLnMuUlVubG9jaygpCgoJcmVtb3ZlZCA6PSBtYWtlKHt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1UdXBsZXMsIDApCglmb3IgaywgdiA6PSByYW5nZSBtbS5tIHsKCQlpZiBmbih7ey5LZXkuQW1wfX1rLCB2KSB7CgkJCXJlbW92ZWQgPSBhcHBlbmQocmVtb3ZlZCwge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxleyh7ey5LZXkuQW1wfX1rKSwgdn0pCgkJCWRlbGV0ZShtbS5tLCBrKQoJCX0KCX0KCXJldHVybiByZW1vdmVkCn0KCi8vIEZvcmVhY2ggYXBwbGllcyB0aGUgZnVuY3Rpb24gZiB0byBldmVyeSBlbGVtZW50IGluIHRoZSBtYXAuCi8vIFRoZSBmdW5jdGlvbiBjYW4gc2FmZWx5IGFsdGVyIHRoZSB2YWx1ZXMgdmlhIHNpZGUtZWZmZWN0cy4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEZvcmVhY2goZiBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pKSB7CglpZiBtbSAhPSBuaWwgewoJCW1tLnMuTG9jaygpCgkJZGVmZXIgbW0ucy5VbmxvY2soKQoKCQlmb3IgaywgdiA6PSByYW5nZSBtbS5tIHsKCQkJZih7ey5LZXkuQW1wfX1rLCB2KQoJCX0KCX0KfQoKLy8gRm9yYWxsIGFwcGxpZXMgdGhlIHByZWRpY2F0ZSBwIHRvIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hcC4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgZmFsc2UsCi8vIHRoZSBpdGVyYXRpb24gdGVybWluYXRlcyBlYXJseS4gVGhlIHJldHVybmVkIHZhbHVlIGlzIHRydWUgaWYgYWxsIGVsZW1lbnRzIHdlcmUgdmlzaXRlZCwKLy8gb3IgZmFsc2UgaWYgYW4gZWFybHkgcmV0dXJuIG9jY3VycmVkLgovLwovLyBOb3RlIHRoYXQgdGhpcyBtZXRob2QgY2FuIGFsc28gYmUgdXNlZCBzaW1wbHkgYXMgYSB3YXkgdG8gdmlzaXQgZXZlcnkgZWxlbWVudCB1c2luZyBhIGZ1bmN0aW9uCi8vIHdpdGggc29tZSBzaWRlLWVmZmVjdHM7IHN1Y2ggYSBmdW5jdGlvbiBtdXN0IGFsd2F5cyByZXR1cm4gdHJ1ZS4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEZvcmFsbChwIGZ1bmMoe3suS2V5fX0sIHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiB0cnVlCgl9CgoJbW0ucy5STG9jaygpCglkZWZlciBtbS5zLlJVbmxvY2soKQoKCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCWlmICFwKHt7LktleS5BbXB9fWssIHYpIHsKCQkJcmV0dXJuIGZhbHNlCgkJfQoJfQoKCXJldHVybiB0cnVlCn0KCi8vIEV4aXN0cyBhcHBsaWVzIHRoZSBwcmVkaWNhdGUgcCB0byBldmVyeSBlbGVtZW50IGluIHRoZSBtYXAuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRydWUsCi8vIHRoZSBpdGVyYXRpb24gdGVybWluYXRlcyBlYXJseS4gVGhlIHJldHVybmVkIHZhbHVlIGlzIHRydWUgaWYgYW4gZWFybHkgcmV0dXJuIG9jY3VycmVkLgovLyBvciBmYWxzZSBpZiBhbGwgZWxlbWVudHMgd2VyZSB2aXNpdGVkIHdpdGhvdXQgZmluZGluZyBhIG1hdGNoLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgRXhpc3RzKHAgZnVuYyh7ey5LZXl9fSwge3suVHlwZX19KSBib29sKSBib29sIHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJbW0ucy5STG9jaygpCglkZWZlciBtbS5zLlJVbmxvY2soKQoKCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCWlmIHAoe3suS2V5LkFtcH19aywgdikgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCX0KCglyZXR1cm4gZmFsc2UKfQoKLy8gRmluZCByZXR1cm5zIHRoZSBmaXJzdCB7ey5UeXBlfX0gdGhhdCByZXR1cm5zIHRydWUgZm9yIHRoZSBwcmVkaWNhdGUgcC4KLy8gRmFsc2UgaXMgcmV0dXJuZWQgaWYgbm9uZSBtYXRjaC4KLy8gVGhlIG9yaWdpbmFsIG1hcCBpcyBub3QgbW9kaWZpZWQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBGaW5kKHAgZnVuYyh7ey5LZXl9fSwge3suVHlwZX19KSBib29sKSAoe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlLCBib29sKSB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGV7fSwgZmFsc2UKCX0KCgltbS5zLlJMb2NrKCkKCWRlZmVyIG1tLnMuUlVubG9jaygpCgoJZm9yIGssIHYgOj0gcmFuZ2UgbW0ubSB7CgkJaWYgcCh7ey5LZXkuQW1wfX1rLCB2KSB7CgkJCXJldHVybiB7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19VHVwbGV7KHt7LktleS5BbXB9fWspLCB2fSwgdHJ1ZQoJCX0KCX0KCglyZXR1cm4ge3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxle30sIGZhbHNlCn0KCi8vIEZpbHRlciBhcHBsaWVzIHRoZSBwcmVkaWNhdGUgcCB0byBldmVyeSBlbGVtZW50IGluIHRoZSBtYXAgYW5kIHJldHVybnMgYSBjb3BpZWQgbWFwIGNvbnRhaW5pbmcKLy8gb25seSB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIHRoZSBwcmVkaWNhdGUgcmV0dXJuZWQgdHJ1ZS4KLy8gVGhlIG9yaWdpbmFsIG1hcCBpcyBub3QgbW9kaWZpZWQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBGaWx0ZXIocCBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pIGJvb2wpICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwIHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBOZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKCkKCW1tLnMuUkxvY2soKQoJZGVmZXIgbW0ucy5SVW5sb2NrKCkKCglmb3IgaywgdiA6PSByYW5nZSBtbS5tIHsKCQlpZiBwKHt7LktleS5BbXB9fWssIHYpIHsKCQkJcmVzdWx0Lm1ba10gPSB2CgkJfQoJfQoKCXJldHVybiByZXN1bHQKfQoKLy8gUGFydGl0aW9uIGFwcGxpZXMgdGhlIHByZWRpY2F0ZSBwIHRvIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hcC4gSXQgZGl2aWRlcyB0aGUgbWFwIGludG8gdHdvIGNvcGllZCBtYXBzLAovLyB0aGUgZmlyc3QgY29udGFpbmluZyBhbGwgdGhlIGVsZW1lbnRzIGZvciB3aGljaCB0aGUgcHJlZGljYXRlIHJldHVybmVkIHRydWUsIGFuZCB0aGUgc2Vjb25kIGNvbnRhaW5pbmcgYWxsCi8vIHRoZSBvdGhlcnMuCi8vIFRoZSBvcmlnaW5hbCBtYXAgaXMgbm90IG1vZGlmaWVkLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgUGFydGl0aW9uKHAgZnVuYyh7ey5LZXl9fSwge3suVHlwZX19KSBib29sKSAobWF0Y2hpbmcgKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAsIG90aGVycyAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gbmlsLCBuaWwKCX0KCgltYXRjaGluZyA9IE5ld3t7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXAoKQoJb3RoZXJzID0gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCgpCgltbS5zLlJMb2NrKCkKCWRlZmVyIG1tLnMuUlVubG9jaygpCgoJZm9yIGssIHYgOj0gcmFuZ2UgbW0ubSB7CgkJaWYgcCh7ey5LZXkuQW1wfX1rLCB2KSB7CgkJCW1hdGNoaW5nLm1ba10gPSB2CgkJfSBlbHNlIHsKCQkJb3RoZXJzLm1ba10gPSB2CgkJfQoJfQoJcmV0dXJuCn0KCi8vIE1hcCByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fU1hcCBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIHRoZSBmdW5jdGlvbiBmLgovLyBUaGUgb3JpZ2luYWwgbWFwIGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgTWFwKGYgZnVuYyh7ey5LZXl9fSwge3suVHlwZX19KSAoe3suS2V5fX0sIHt7LlR5cGV9fSkpICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwIHsKCWlmIG1tID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBOZXd7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKCkKCW1tLnMuUkxvY2soKQoJZGVmZXIgbW0ucy5SVW5sb2NrKCkKCglmb3IgazEsIHYxIDo9IHJhbmdlIG1tLm0gewoJCWsyLCB2MiA6PSBmKHt7LktleS5BbXB9fWsxLCB2MSkKCQlyZXN1bHQubVt7ey5LZXkuU3Rhcn19azJdID0gdjIKCX0KCglyZXR1cm4gcmVzdWx0Cn0KCi8vIEZsYXRNYXAgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1NYXAgYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCB0aGUgZnVuY3Rpb24gZiB0aGF0Ci8vIHJldHVybnMgemVybyBvciBtb3JlIGl0ZW1zIGluIGEgc2xpY2UuIFRoZSByZXN1bHRpbmcgbWFwIG1heSBoYXZlIGEgZGlmZmVyZW50IHNpemUgdG8gdGhlIG9yaWdpbmFsIG1hcC4KLy8gVGhlIG9yaWdpbmFsIG1hcCBpcyBub3QgbW9kaWZpZWQuCi8vCi8vIFRoaXMgaXMgYSBkb21haW4tdG8tcmFuZ2UgbWFwcGluZyBmdW5jdGlvbi4gRm9yIGJlc3Bva2UgdHJhbnNmb3JtYXRpb25zIHRvIG90aGVyIHR5cGVzLCBjb3B5IGFuZCBtb2RpZnkKLy8gdGhpcyBtZXRob2QgYXBwcm9wcmlhdGVseS4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIEZsYXRNYXAoZiBmdW5jKHt7LktleX19LCB7ey5UeXBlfX0pIFtde3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fVR1cGxlKSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCgpCgltbS5zLlJMb2NrKCkKCWRlZmVyIG1tLnMuUlVubG9jaygpCgoJZm9yIGsxLCB2MSA6PSByYW5nZSBtbS5tIHsKCQl0cyA6PSBmKHt7LktleS5BbXB9fWsxLCB2MSkKCQlmb3IgXywgdCA6PSByYW5nZSB0cyB7CgkJCXJlc3VsdC5tW3t7LktleS5TdGFyfX10LktleV0gPSB0LlZhbAoJCX0KCX0KCglyZXR1cm4gcmVzdWx0Cn0Ke3stIGlmIC5Db21wYXJhYmxlfX0KCi8vIEVxdWFscyBkZXRlcm1pbmVzIGlmIHR3byBtYXBzIGFyZSBlcXVhbCB0byBlYWNoIG90aGVyLgovLyBJZiB0aGV5IGJvdGggYXJlIHRoZSBzYW1lIHNpemUgYW5kIGhhdmUgdGhlIHNhbWUgaXRlbXMgdGhleSBhcmUgY29uc2lkZXJlZCBlcXVhbC4KLy8gT3JkZXIgb2YgaXRlbXMgaXMgbm90IHJlbGV2ZW50IGZvciBtYXBzIHRvIGJlIGVxdWFsLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgRXF1YWxzKG90aGVyICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBib29sIHsKCWlmIG1tID09IG5pbCB8fCBvdGhlciA9PSBuaWwgewoJCXJldHVybiBtbS5Jc0VtcHR5KCkgJiYgb3RoZXIuSXNFbXB0eSgpCgl9CgoJbW0ucy5STG9jaygpCglvdGhlci5zLlJMb2NrKCkKCWRlZmVyIG1tLnMuUlVubG9jaygpCglkZWZlciBvdGhlci5zLlJVbmxvY2soKQoKCWlmIG1tLlNpemUoKSAhPSBvdGhlci5TaXplKCkgewoJCXJldHVybiBmYWxzZQoJfQoJZm9yIGssIHYxIDo9IHJhbmdlIG1tLm0gewoJCXYyLCBmb3VuZCA6PSBvdGhlci5tW2tdCgkJaWYgIWZvdW5kIHx8IHt7LlR5cGUuU3Rhcn19djEgIT0ge3suVHlwZS5TdGFyfX12MiB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0Ke3stIGVuZH19CgovLyBDbG9uZSByZXR1cm5zIGEgc2hhbGxvdyBjb3B5IG9mIHRoZSBtYXAuIEl0IGRvZXMgbm90IGNsb25lIHRoZSB1bmRlcmx5aW5nIGVsZW1lbnRzLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgQ2xvbmUoKSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCB7CglpZiBtbSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gTmV3e3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCgpCgltbS5zLlJMb2NrKCkKCWRlZmVyIG1tLnMuUlVubG9jaygpCgoJZm9yIGssIHYgOj0gcmFuZ2UgbW0ubSB7CgkJcmVzdWx0Lm1ba10gPSB2Cgl9CglyZXR1cm4gcmVzdWx0Cn0Ke3stIGlmIC5TdHJpbmdlcn19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBTdHJpbmcoKSBzdHJpbmcgewoJcmV0dXJuIG1tLk1rU3RyaW5nMygiWyIsICIsICIsICJdIikKfQoKLy8gaW1wbGVtZW50cyBlbmNvZGluZy5NYXJzaGFsZXIgaW50ZXJmYWNlIHsKLy9mdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikgewovLwlyZXR1cm4gbW0ubWtTdHJpbmczQnl0ZXMoIntcIiIsICJcIiwgXCIiLCAiXCJ9IikuQnl0ZXMoKSwgbmlsCi8vfQoKLy8gTWtTdHJpbmcgY29uY2F0ZW5hdGVzIHRoZSBtYXAga2V5L3ZhbHVlcyBhcyBhIHN0cmluZyB1c2luZyBhIHN1cHBsaWVkIHNlcGFyYXRvci4gTm8gZW5jbG9zaW5nIG1hcmtzIGFyZSBhZGRlZC4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZyB7CglyZXR1cm4gbW0uTWtTdHJpbmczKCIiLCBzZXAsICIiKQp9CgovLyBNa1N0cmluZzMgY29uY2F0ZW5hdGVzIHRoZSBtYXAga2V5L3ZhbHVlcyBhcyBhIHN0cmluZywgdXNpbmcgdGhlIHByZWZpeCwgc2VwYXJhdG9yIGFuZCBzdWZmaXggc3VwcGxpZWQuCnt7LSBpZiAuSGFzS2V5U2xpY2V9fQovLyBUaGUgbWFwIGVudHJpZXMgYXJlIHNvcnRlZCBieSB0aGVpciBrZXlzLnt7LSBlbmR9fQpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcgewoJaWYgbW0gPT0gbmlsIHsKCQlyZXR1cm4gIiIKCX0KCXJldHVybiBtbS5ta1N0cmluZzNCeXRlcyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyKS5TdHJpbmcoKQp9CgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgbWtTdHJpbmczQnl0ZXMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpICpieXRlcy5CdWZmZXIgewoJYiA6PSAmYnl0ZXMuQnVmZmVye30KCWIuV3JpdGVTdHJpbmcoYmVmb3JlKQoJc2VwIDo9ICIiCgltbS5zLlJMb2NrKCkKCWRlZmVyIG1tLnMuUlVubG9jaygpCnt7aWYgLkhhc0tleUxpc3R9fQoJa2V5cyA6PSBtYWtlKHt7LktleUxpc3R9fSwgMCwgbGVuKG1tLm0pKQoJZm9yIGssIF8gOj0gcmFuZ2UgbW0ubSB7CgkJa2V5cyAgPSBhcHBlbmQoa2V5cywgaykKCX0KCWtleXMuU29ydGVkKCkKCglmb3IgXywgayA6PSByYW5nZSBrZXlzIHsKCQl2IDo9IG1tLm1ba10KCQliLldyaXRlU3RyaW5nKHNlcCkKCQliLldyaXRlU3RyaW5nKGZtdC5TcHJpbnRmKCIldjoldiIsIGssIHYpKQoJCXNlcCA9IGJldHdlZW4KCX0Ke3tlbHNlfX0KCWZvciBrLCB2IDo9IHJhbmdlIG1tLm0gewoJCWIuV3JpdGVTdHJpbmcoc2VwKQoJCWIuV3JpdGVTdHJpbmcoZm10LlNwcmludGYoIiV2OiV2IiwgaywgdikpCgkJc2VwID0gYmV0d2VlbgoJfQp7e2VuZH19CgliLldyaXRlU3RyaW5nKGFmdGVyKQoJcmV0dXJuIGIKfQp7ey0gaWYgZXEgLktleS5TdHJpbmcgInN0cmluZyJ9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBVbm1hcnNoYWxKU09OIGltcGxlbWVudHMgSlNPTiBkZWNvZGluZyBmb3IgdGhpcyBtYXAgdHlwZS4KZnVuYyAobW0gKnt7LlByZWZpeC5VfX17ey5LZXkuVX19e3suVHlwZS5VfX1NYXApIFVubWFyc2hhbEpTT04oYiBbXWJ5dGUpIGVycm9yIHsKCW1tLnMuTG9jaygpCglkZWZlciBtbS5zLlVubG9jaygpCgoJYnVmIDo9IGJ5dGVzLk5ld0J1ZmZlcihiKQoJcmV0dXJuIGpzb24uTmV3RGVjb2RlcihidWYpLkRlY29kZSgmbW0ubSkKfQoKLy8gTWFyc2hhbEpTT04gaW1wbGVtZW50cyBKU09OIGVuY29kaW5nIGZvciB0aGlzIG1hcCB0eXBlLgpmdW5jIChtbSAqe3suUHJlZml4LlV9fXt7LktleS5VfX17ey5UeXBlLlV9fU1hcCkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikgewoJbW0ucy5STG9jaygpCglkZWZlciBtbS5zLlJVbmxvY2soKQoKCXJldHVybiBqc29uLk1hcnNoYWwobW0ubSkKfQp7ey0gZW5kfX0Ke3stIGVuZH19Cnt7LSBpZiAuR29iRW5jb2RlfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gR29iRGVjb2RlIGltcGxlbWVudHMgJ2dvYicgZGVjb2RpbmcgZm9yIHRoaXMgbWFwIHR5cGUuCi8vIFlvdSBtdXN0IHJlZ2lzdGVyIHt7LlR5cGUuTmFtZX19IHdpdGggdGhlICdnb2InIHBhY2thZ2UgYmVmb3JlIHRoaXMgbWV0aG9kIGlzIHVzZWQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBHb2JEZWNvZGUoYiBbXWJ5dGUpIGVycm9yIHsKCW1tLnMuTG9jaygpCglkZWZlciBtbS5zLlVubG9jaygpCgoJYnVmIDo9IGJ5dGVzLk5ld0J1ZmZlcihiKQoJcmV0dXJuIGdvYi5OZXdEZWNvZGVyKGJ1ZikuRGVjb2RlKCZtbS5tKQp9CgovLyBHb2JFbmNvZGUgaW1wbGVtZW50cyAnZ29iJyBlbmNvZGluZyBmb3IgdGhpcyBsaXN0IHR5cGUuCi8vIFlvdSBtdXN0IHJlZ2lzdGVyIHt7LlR5cGUuTmFtZX19IHdpdGggdGhlICdnb2InIHBhY2thZ2UgYmVmb3JlIHRoaXMgbWV0aG9kIGlzIHVzZWQuCmZ1bmMgKG1tICp7ey5QcmVmaXguVX19e3suS2V5LlV9fXt7LlR5cGUuVX19TWFwKSBHb2JFbmNvZGUoKSAoW11ieXRlLCBlcnJvcikgewoJbW0ucy5STG9jaygpCglkZWZlciBtbS5zLlJVbmxvY2soKQoKCWJ1ZiA6PSAmYnl0ZXMuQnVmZmVye30KCWVyciA6PSBnb2IuTmV3RW5jb2RlcihidWYpLkVuY29kZShtbS5tKQoJcmV0dXJuIGJ1Zi5CeXRlcygpLCBlcnIKfQp7ey0gZW5kfX0K\"")
		packr.PackJSONBytes("builtin", "threadsafe/queue.tpl", "\"Ly8gQSBxdWV1ZSBvciBmaWZvIHRoYXQgaG9sZHMge3suVHlwZX19LCBpbXBsZW1lbnRlZCB2aWEgYSByaW5nIGJ1ZmZlci4gVW5saWtlIHRoZSBsaXN0IGNvbGxlY3Rpb25zLCB0aGVzZQovLyBoYXZlIGEgZml4ZWQgc2l6ZSAoYWx0aG91Z2ggdGhpcyBjYW4gYmUgY2hhbmdlZCB3aGVuIG5lZWRlZCkuIEZvciBtdXRhYmxlIGNvbGxlY3Rpb24gdGhhdCBuZWVkIGZyZXF1ZW50Ci8vIGFwcGVuZGluZywgdGhlIGZpeGVkIHNpemUgaXMgYSBiZW5lZml0IGJlY2F1c2UgdGhlIG1lbW9yeSBmb290cHJpbnQgaXMgY29uc3RyYWluZWQuIEhvd2V2ZXIsIHRoaXMgaXMKLy8gbm90IHVzYWJsZSB1bmxlc3MgdGhlIHJhdGUgb2YgcmVtb3ZpbmcgaXRlbXMgZnJvbSB0aGUgcXVldWUgaXMsIG92ZXIgdGltZSwgdGhlIHNhbWUgYXMgdGhlIHJhdGUgb2YgYWRkaXRpb24uCi8vIEZvciBzaW1pbGFyIHJlYXNvbnMsIHRoZXJlIGlzIG5vIGltbXV0YWJsZSB2YXJpYW50IG9mIGEgcXVldWUuCi8vCi8vIFRoZSBxdWV1ZSBwcm92aWRlcyBhIG1ldGhvZCB0byBzb3J0IGl0cyBlbGVtZW50cy4KLy8KLy8gVGhyZWFkLXNhZmUuCi8vCi8vIEdlbmVyYXRlZCBmcm9tIHt7LlRlbXBsYXRlRmlsZX19IHdpdGggVHlwZT17ey5UeXBlfX0KLy8gb3B0aW9uczogQ29tcGFyYWJsZTp7ey5Db21wYXJhYmxlfX0gTnVtZXJpYzp7ey5OdW1lcmljfX0gT3JkZXJlZDp7ey5PcmRlcmVkfX0gU29ydGVkOnt7LlNvcnRlZH19IFN0cmluZ2VyOnt7LlN0cmluZ2VyfX0KLy8gVG9MaXN0Ont7LlRvTGlzdH19IFRvU2V0Ont7LlRvU2V0fX0KLy8gYnkgcnVudGVtcGxhdGUge3suQXBwVmVyc2lvbn19Ci8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vam9oYW5icmFuZGhvcnN0L3J1bnRlbXBsYXRlL2Jsb2IvbWFzdGVyL0JVSUxUSU4ubWQKCnBhY2thZ2Uge3suUGFja2FnZX19CgppbXBvcnQgKAp7ey0gaWYgb3IgLlN0cmluZ2VyIC5Hb2JFbmNvZGV9fQoJImJ5dGVzIgp7ey0gZW5kfX0Ke3stIGlmIC5TdHJpbmdlcn19CgkiZW5jb2RpbmcvanNvbiIKCSJmbXQiCnt7LSBlbmR9fQoJInNvcnQiCgkic3luYyIKe3stIGlmIC5IYXNJbXBvcnR9fQoJe3suSW1wb3J0fX0Ke3stIGVuZH19CikKCi8vIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIGlzIGEgcmluZyBidWZmZXIgY29udGFpbmluZyBhIHNsaWNlIG9mIHR5cGUge3suVHlwZX19LiBJdCBpcyBvcHRpbWlzZWQKLy8gZm9yIEZJRk8gb3BlcmF0aW9ucy4KdHlwZSB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSBzdHJ1Y3QgewoJbSAgICAgICAgIFtde3suVHlwZX19CglyZWFkICAgICAgaW50Cgl3cml0ZSAgICAgaW50CglsZW5ndGggICAgaW50CgljYXBhY2l0eSAgaW50CglvdmVyd3JpdGUgYm9vbAoJbGVzcyAgICAgIGZ1bmMoaSwgaiB7ey5UeXBlfX0pIGJvb2wKCXMgICAgICAgICAqc3luYy5SV011dGV4Cn0KCi8vIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHJldHVybnMgYSBuZXcgcXVldWUgb2Yge3suVHlwZX19LiBUaGUgYmVoYXZpb3VyIHdoZW4gYWRkaW5nCi8vIHRvIHRoZSBxdWV1ZSBkZXBlbmRzIG9uIG92ZXJ3cml0ZS4gSWYgdHJ1ZSwgdGhlIHB1c2ggb3BlcmF0aW9uIG92ZXJ3cml0ZXMgb2xkZXN0IHZhbHVlcyB1cCB0bwovLyB0aGUgc3BhY2UgYXZhaWxhYmxlLCB3aGVuIHRoZSBxdWV1ZSBpcyBmdWxsLiBPdGhlcndpc2UsIGl0IHJlZnVzZXMgdG8gb3ZlcmZpbGwgdGhlIHF1ZXVlLgpmdW5jIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKGNhcGFjaXR5IGludCwgb3ZlcndyaXRlIGJvb2wpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSB7CglyZXR1cm4gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U29ydGVkUXVldWUoY2FwYWNpdHksIG92ZXJ3cml0ZSwgbmlsKQp9CgovLyBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Tb3J0ZWRRdWV1ZSByZXR1cm5zIGEgbmV3IHF1ZXVlIG9mIHt7LlR5cGV9fS4gVGhlIGJlaGF2aW91ciB3aGVuIGFkZGluZwovLyB0byB0aGUgcXVldWUgZGVwZW5kcyBvbiBvdmVyd3JpdGUuIElmIHRydWUsIHRoZSBwdXNoIG9wZXJhdGlvbiBvdmVyd3JpdGVzIG9sZGVzdCB2YWx1ZXMgdXAgdG8KLy8gdGhlIHNwYWNlIGF2YWlsYWJsZSwgd2hlbiB0aGUgcXVldWUgaXMgZnVsbC4gT3RoZXJ3aXNlLCBpdCByZWZ1c2VzIHRvIG92ZXJmaWxsIHRoZSBxdWV1ZS4KLy8gSWYgdGhlICdsZXNzJyBjb21wYXJpc29uIGZ1bmN0aW9uIGlzIG5vdCBuaWwsIGVsZW1lbnRzIGNhbiBiZSBlYXNpbHkgc29ydGVkLgpmdW5jIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNvcnRlZFF1ZXVlKGNhcGFjaXR5IGludCwgb3ZlcndyaXRlIGJvb2wsIGxlc3MgZnVuYyhpLCBqIHt7LlR5cGV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHsKCXJldHVybiAme3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWV7CgkJbTogICAgICAgICBtYWtlKFtde3suVHlwZX19LCBjYXBhY2l0eSksCgkJcmVhZDogICAgICAwLAoJCXdyaXRlOiAgICAgMCwKCQlsZW5ndGg6ICAgIDAsCgkJY2FwYWNpdHk6ICBjYXBhY2l0eSwKCQlvdmVyd3JpdGU6IG92ZXJ3cml0ZSwKCQlsZXNzOiAgICAgIGxlc3MsCgkJczogICAgICAgICAmc3luYy5SV011dGV4e30sCgl9Cn0KCi8vIEJ1aWxke3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWVGcm9tQ2hhbiBjb25zdHJ1Y3RzIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIGZyb20gYSBjaGFubmVsIHRoYXQgc3VwcGxpZXMKLy8gYSBzZXF1ZW5jZSBvZiB2YWx1ZXMgdW50aWwgaXQgaXMgY2xvc2VkLiBUaGUgZnVuY3Rpb24gZG9lc24ndCByZXR1cm4gdW50aWwgdGhlbi4KZnVuYyBCdWlsZHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlRnJvbUNoYW4oc291cmNlIDwtY2hhbiB7ey5UeXBlfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSB7CglxdWV1ZSA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSgwLCBmYWxzZSkKCWZvciB2IDo9IHJhbmdlIHNvdXJjZSB7CgkJcXVldWUubSA9IGFwcGVuZChxdWV1ZS5tLCB2KQoJfQoJcXVldWUubGVuZ3RoID0gbGVuKHF1ZXVlLm0pCglxdWV1ZS5jYXBhY2l0eSA9IGNhcChxdWV1ZS5tKQoJcmV0dXJuIHF1ZXVlCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gUmVhbGxvY2F0ZSBhZGp1c3RzIHRoZSBhbGxvY2F0ZWQgY2FwYWNpdHkgb2YgdGhlIHF1ZXVlIGFuZCBhbGxvd3MgdGhlIG92ZXJ3cml0aW5nIGJlaGF2aW91ciB0byBiZSBjaGFuZ2VkLgovLwovLyBJZiB0aGUgbmV3IHF1ZXVlIGNhcGFjaXR5IGlzIGRpZmZlcmVudCB0byB0aGUgY3VycmVudCBjYXBhY2l0eSwgdGhlIHF1ZXVlIGlzIHJlLWFsbG9jYXRlZCB0byB0aGUgbmV3Ci8vIGNhcGFjaXR5LiBJZiB0aGlzIGlzIGxlc3MgdGhhbiB0aGUgY3VycmVudCBudW1iZXIgb2YgZWxlbWVudHMsIHRoZSBvbGRlc3QgaXRlbXMgaW4gdGhlIHF1ZXVlIGFyZQovLyBkaXNjYXJkZWQgc28gdGhhdCB0aGUgcmVtYWluaW5nIGRhdGEgY2FuIGZpdCBpbiB0aGUgbmV3IHNwYWNlIGF2YWlsYWJsZS4KLy8KLy8gSWYgdGhlIG5ldyBxdWV1ZSBjYXBhY2l0eSBpcyB0aGUgc2FtZSBhcyB0aGUgY3VycmVudCBjYXBhY2l0eSwgdGhlIHF1ZXVlIGlzIG5vdCBhbHRlcmVkIGV4Y2VwdCBmb3IgYWRvcHRpbmcKLy8gdGhlIG5ldyBvdmVyd3JpdGUgZmxhZydzIHZhbHVlLiBUaGVyZWZvcmUgdGhpcyBpcyB0aGUgbWVhbnMgdG8gY2hhbmdlIHRoZSBvdmVyd3JpdGluZyBiZWhhdmlvdXIuCi8vCi8vIFJlYWxsb2NhdGUgYWRqdXN0cyB0aGUgc3RvcmFnZSBzcGFjZSBidXQgZG9lcyBub3QgY2xvbmUgdGhlIHVuZGVybHlpbmcgZWxlbWVudHMuCi8vCi8vIFRoZSBxdWV1ZSBtdXN0IG5vdCBiZSBuaWwuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgUmVhbGxvY2F0ZShjYXBhY2l0eSBpbnQsIG92ZXJ3cml0ZSBib29sKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgewoJaWYgY2FwYWNpdHkgPCAxIHsKCQlwYW5pYygiY2FwYWNpdHkgbXVzdCBiZSBhdCBsZWFzdCAxIikKCX0KCglxdWV1ZS5zLkxvY2soKQoJZGVmZXIgcXVldWUucy5VbmxvY2soKQoJcmV0dXJuIHF1ZXVlLmRvUmVhbGxvY2F0ZShjYXBhY2l0eSwgb3ZlcndyaXRlKQp9CgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIGRvUmVhbGxvY2F0ZShjYXBhY2l0eSBpbnQsIG92ZXJ3cml0ZSBib29sKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgewoJcXVldWUub3ZlcndyaXRlID0gb3ZlcndyaXRlCgoJaWYgY2FwYWNpdHkgPCBxdWV1ZS5sZW5ndGggewoJCS8vIGV4aXN0aW5nIGRhdGEgaXMgdG9vIGJpZyBhbmQgaGFzIHRvIGJlIHRyaW1tZWQgdG8gZml0CgkJbiA6PSBxdWV1ZS5sZW5ndGggLSBjYXBhY2l0eQoJCXF1ZXVlLnJlYWQgPSAocXVldWUucmVhZCArIG4pICUgcXVldWUuY2FwYWNpdHkKCQlxdWV1ZS5sZW5ndGggLT0gbgoJfQoKCWlmIGNhcGFjaXR5ICE9IHF1ZXVlLmNhcGFjaXR5IHsKCQlvbGRMZW5ndGggOj0gcXVldWUubGVuZ3RoCgkJcXVldWUubSA9IHF1ZXVlLnRvU2xpY2UobWFrZShbXXt7LlR5cGV9fSwgY2FwYWNpdHkpKQoJCWlmIG9sZExlbmd0aCA+IGxlbihxdWV1ZS5tKSB7CgkJCW9sZExlbmd0aCA9IGxlbihxdWV1ZS5tKQoJCX0KCQlxdWV1ZS5yZWFkID0gMAoJCXF1ZXVlLndyaXRlID0gb2xkTGVuZ3RoCgkJcXVldWUubGVuZ3RoID0gb2xkTGVuZ3RoCgkJcXVldWUuY2FwYWNpdHkgPSBjYXBhY2l0eQoJfQoKCXJldHVybiBxdWV1ZQp9CgovLyBTcGFjZSByZXR1cm5zIHRoZSBzcGFjZSBhdmFpbGFibGUgaW4gdGhlIHF1ZXVlLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFNwYWNlKCkgaW50IHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIDAKCX0KCXF1ZXVlLnMuUkxvY2soKQoJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCXJldHVybiBxdWV1ZS5jYXBhY2l0eSAtIHF1ZXVlLmxlbmd0aAp9CgovLyBDYXAgZ2V0cyB0aGUgY2FwYWNpdHkgb2YgdGhpcyBxdWV1ZS4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBDYXAoKSBpbnQgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gMAoJfQoJcmV0dXJuIHF1ZXVlLmNhcGFjaXR5Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gSXNTZXF1ZW5jZSByZXR1cm5zIHRydWUgZm9yIG9yZGVyZWQgbGlzdHMgYW5kIHF1ZXVlcy4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBJc1NlcXVlbmNlKCkgYm9vbCB7CglyZXR1cm4gdHJ1ZQp9CgovLyBJc1NldCByZXR1cm5zIGZhbHNlIGZvciBsaXN0cyBvciBxdWV1ZXMuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgSXNTZXQoKSBib29sIHsKCXJldHVybiBmYWxzZQp9Cgp7ey0gaWYgLlRvTGlzdH19CgovLyBUb0xpc3QgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgdGhlIHF1ZXVlIGFzIGEgbGlzdC4gVGhlIHJldHVybmVkIGxpc3QgaXMgYSBzaGFsbG93Ci8vIGNvcHk7IHRoZSBxdWV1ZSBpcyBub3QgYWx0ZXJlZC4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBUb0xpc3QoKSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdCB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglxdWV1ZS5zLlJMb2NrKCkKCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCgoJbGlzdCA6PSBNYWtle3suUHJlZml4LlV9fXt7LlR5cGUuVX19TGlzdChxdWV1ZS5sZW5ndGgsIHF1ZXVlLmxlbmd0aCkKCXF1ZXVlLnRvU2xpY2UobGlzdC5tKQoJcmV0dXJuIGxpc3QKfQp7ey0gZW5kfX0Ke3stIGlmIC5Ub1NldH19CgovLyBUb1NldCByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgcXVldWUgYXMgYSBzZXQuIFRoZSByZXR1cm5lZCBzZXQgaXMgYSBzaGFsbG93Ci8vIGNvcHk7IHRoZSBxdWV1ZSBpcyBub3QgYWx0ZXJlZC4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBUb1NldCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcXVldWUucy5STG9jaygpCglkZWZlciBxdWV1ZS5zLlJVbmxvY2soKQoKCXNsaWNlIDo9IHF1ZXVlLnRvU2xpY2UobWFrZShbXXt7LlR5cGV9fSwgcXVldWUubGVuZ3RoKSkKCXJldHVybiBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoc2xpY2UuLi4pCn0Ke3stIGVuZH19CgovLyBUb1NsaWNlIHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBxdWV1ZSBhcyBhIHNsaWNlLiBUaGUgcXVldWUgaXMgbm90IGFsdGVyZWQuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgVG9TbGljZSgpIFtde3suVHlwZX19IHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXF1ZXVlLnMuUkxvY2soKQoJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCglyZXR1cm4gcXVldWUudG9TbGljZShtYWtlKFtde3suVHlwZX19LCBxdWV1ZS5sZW5ndGgpKQp9CgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIHRvU2xpY2UocyBbXXt7LlR5cGV9fSkgW117ey5UeXBlfX0gewoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWNvcHkocywgZnJvbnQpCglpZiBsZW4oYmFjaykgPiAwICYmIGxlbihzKSA+PSBsZW4oZnJvbnQpIHsKCQljb3B5KHNbbGVuKGZyb250KTpdLCBiYWNrKQoJfQoJcmV0dXJuIHMKfQoKLy8gVG9JbnRlcmZhY2VTbGljZSByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgcXVldWUgYXMgYSBzbGljZSBvZiBhcmJpdHJhcnkgdHlwZS4KLy8gVGhlIHF1ZXVlIGlzIG5vdCBhbHRlcmVkLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFRvSW50ZXJmYWNlU2xpY2UoKSBbXWludGVyZmFjZXt9IHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXF1ZXVlLnMuUkxvY2soKQoJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCglmcm9udCwgYmFjayA6PSBxdWV1ZS5mcm9udEFuZEJhY2soKQoJcyA6PSBtYWtlKFtdaW50ZXJmYWNle30sIDAsIHF1ZXVlLmxlbmd0aCkKCWZvciBfLCB2IDo9IHJhbmdlIGZyb250IHsKCQlzID0gYXBwZW5kKHMsIHYpCgl9CgoJZm9yIF8sIHYgOj0gcmFuZ2UgYmFjayB7CgkJcyA9IGFwcGVuZChzLCB2KQoJfQoKCXJldHVybiBzCn0KCi8vIENsb25lIHJldHVybnMgYSBzaGFsbG93IGNvcHkgb2YgdGhlIHF1ZXVlLiBJdCBkb2VzIG5vdCBjbG9uZSB0aGUgdW5kZXJseWluZyBlbGVtZW50cy4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBDbG9uZSgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglxdWV1ZS5zLlJMb2NrKCkKCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCgoJYnVmZmVyIDo9IHF1ZXVlLnRvU2xpY2UobWFrZShbXXt7LlR5cGV9fSwgcXVldWUuY2FwYWNpdHkpKQoJcmV0dXJuIHF1ZXVlLmRvQ2xvbmUoYnVmZmVyWzpxdWV1ZS5sZW5ndGhdKQp9CgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIGRvQ2xvbmUoYnVmZmVyIFtde3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgewoJdyA6PSAwCglpZiBsZW4oYnVmZmVyKSA8IGNhcChidWZmZXIpIHsKCQl3ID0gbGVuKGJ1ZmZlcikKCX0KCXJldHVybiAme3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWV7CgkJbTogICAgICAgICBidWZmZXIsCgkJcmVhZDogICAgICAwLAoJCXdyaXRlOiAgICAgdywKCQlsZW5ndGg6ICAgIGxlbihidWZmZXIpLAoJCWNhcGFjaXR5OiAgY2FwKGJ1ZmZlciksCgkJb3ZlcndyaXRlOiBxdWV1ZS5vdmVyd3JpdGUsCgkJbGVzczogICAgICBxdWV1ZS5sZXNzLAoJCXM6ICAgICAgICAgJnN5bmMuUldNdXRleHt9LAoJfQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEdldCBnZXRzIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBpbiB0aGUgcXVldWUuCi8vIFBhbmljcyBpZiB0aGUgaW5kZXggaXMgb3V0IG9mIHJhbmdlIG9yIHRoZSBxdWV1ZSBpcyBuaWwuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgR2V0KGkgaW50KSB7ey5UeXBlfX0gewoJcXVldWUucy5STG9jaygpCglkZWZlciBxdWV1ZS5zLlJVbmxvY2soKQoKCXJpIDo9IChxdWV1ZS5yZWFkICsgaSkgJSBxdWV1ZS5jYXBhY2l0eQoJcmV0dXJuIHF1ZXVlLm1bcmldCn0KCi8vIEhlYWQgZ2V0cyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgcXVldWUuIEhlYWQgaXMgdGhlIG9wcG9zaXRlIG9mIExhc3QuCi8vIFBhbmljcyBpZiBxdWV1ZSBpcyBlbXB0eSBvciBuaWwuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgSGVhZCgpIHt7LlR5cGV9fSB7CglxdWV1ZS5zLlJMb2NrKCkKCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCgoJcmV0dXJuIHF1ZXVlLm1bcXVldWUucmVhZF0KfQoKCi8vIEhlYWRPcHRpb24gcmV0dXJucyB0aGUgb2xkZXN0IGl0ZW0gaW4gdGhlIHF1ZXVlIHdpdGhvdXQgcmVtb3ZpbmcgaXQuIElmIHRoZSBxdWV1ZQovLyBpcyBuaWwgb3IgZW1wdHksIGl0IHJldHVybnMge3tpZiAuVHlwZS5Jc1B0cn19bmlse3tlbHNlfX10aGUgemVybyB2YWx1ZXt7ZW5kfX0gaW5zdGVhZC4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBIZWFkT3B0aW9uKCkge3suVHlwZX19IHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIHt7LlR5cGUuWmVyb319Cgl9CgoJcXVldWUucy5STG9jaygpCglkZWZlciBxdWV1ZS5zLlJVbmxvY2soKQoKCWlmIHF1ZXVlLmxlbmd0aCA9PSAwIHsKCQlyZXR1cm4ge3suVHlwZS5aZXJvfX0KCX0KCglyZXR1cm4gcXVldWUubVtxdWV1ZS5yZWFkXQp9CgovLyBMYXN0IGdldHMgdGhlIHRoZSBuZXdlc3QgaXRlbSBpbiB0aGUgcXVldWUgKGkuZS4gbGFzdCBlbGVtZW50IHB1c2hlZCkgd2l0aG91dCByZW1vdmluZyBpdC4KLy8gTGFzdCBpcyB0aGUgb3Bwb3NpdGUgb2YgSGVhZC4KLy8gUGFuaWNzIGlmIHF1ZXVlIGlzIGVtcHR5IG9yIG5pbC4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBMYXN0KCkge3suVHlwZX19IHsKCXF1ZXVlLnMuUkxvY2soKQoJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCglpIDo9IHF1ZXVlLndyaXRlIC0gMQoJaWYgaSA8IDAgewoJCWkgPSBxdWV1ZS5jYXBhY2l0eSAtIDEKCX0KCglyZXR1cm4gcXVldWUubVtpXQp9CgovLyBMYXN0T3B0aW9uIHJldHVybnMgdGhlIG5ld2VzdCBpdGVtIGluIHRoZSBxdWV1ZSB3aXRob3V0IHJlbW92aW5nIGl0LiBJZiB0aGUgcXVldWUKLy8gaXMgbmlsIGVtcHR5LCBpdCByZXR1cm5zIHt7aWYgLlR5cGUuSXNQdHJ9fW5pbHt7ZWxzZX19dGhlIHplcm8gdmFsdWV7e2VuZH19IGluc3RlYWQuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgTGFzdE9wdGlvbigpIHt7LlR5cGV9fSB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiB7ey5UeXBlLlplcm99fQoJfQoKCXF1ZXVlLnMuUkxvY2soKQoJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCglpZiBxdWV1ZS5sZW5ndGggPT0gMCB7CgkJcmV0dXJuIHt7LlR5cGUuWmVyb319Cgl9CgoJaSA6PSBxdWV1ZS53cml0ZSAtIDEKCWlmIGkgPCAwIHsKCQlpID0gcXVldWUuY2FwYWNpdHkgLSAxCgl9CgoJcmV0dXJuIHF1ZXVlLm1baV0KfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBJc092ZXJ3cml0aW5nIHJldHVybnMgdHJ1ZSBpZiB0aGUgcXVldWUgaXMgb3ZlcndyaXRpbmcsIGZhbHNlIGlmIHJlZnVzaW5nLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIElzT3ZlcndyaXRpbmcoKSBib29sIHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIGZhbHNlCgl9CglxdWV1ZS5zLlJMb2NrKCkKCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCglyZXR1cm4gcXVldWUub3ZlcndyaXRlCn0KCi8vIElzRnVsbCByZXR1cm5zIHRydWUgaWYgdGhlIHF1ZXVlIGlzIGZ1bGwuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgSXNGdWxsKCkgYm9vbCB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBmYWxzZQoJfQoJcXVldWUucy5STG9jaygpCglkZWZlciBxdWV1ZS5zLlJVbmxvY2soKQoJcmV0dXJuIHF1ZXVlLmxlbmd0aCA9PSBxdWV1ZS5jYXBhY2l0eQp9CgovLyBJc0VtcHR5IHJldHVybnMgdHJ1ZSBpZiB0aGUgcXVldWUgaXMgZW1wdHkuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgSXNFbXB0eSgpIGJvb2wgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gdHJ1ZQoJfQoJcXVldWUucy5STG9jaygpCglkZWZlciBxdWV1ZS5zLlJVbmxvY2soKQoJcmV0dXJuIHF1ZXVlLmxlbmd0aCA9PSAwCn0KCi8vIE5vbkVtcHR5IHJldHVybnMgdHJ1ZSBpZiB0aGUgcXVldWUgaXMgbm90IGVtcHR5LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIE5vbkVtcHR5KCkgYm9vbCB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBmYWxzZQoJfQoJcXVldWUucy5STG9jaygpCglkZWZlciBxdWV1ZS5zLlJVbmxvY2soKQoJcmV0dXJuIHF1ZXVlLmxlbmd0aCA+IDAKfQoKLy8gU2l6ZSBnZXRzIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgY3VycmVudGx5IGluIHRoaXMgcXVldWUuIFRoaXMgaXMgYW4gYWxpYXMgZm9yIExlbi4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBTaXplKCkgaW50IHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIDAKCX0KCXF1ZXVlLnMuUkxvY2soKQoJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCXJldHVybiBxdWV1ZS5sZW5ndGgKfQoKLy8gTGVuIGdldHMgdGhlIGN1cnJlbnQgbGVuZ3RoIG9mIHRoaXMgcXVldWUuIFRoaXMgaXMgYW4gYWxpYXMgZm9yIFNpemUuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgTGVuKCkgaW50IHsKCXJldHVybiBxdWV1ZS5TaXplKCkKfQoKLy8gU3dhcCBzd2FwcyB0aGUgZWxlbWVudHMgd2l0aCBpbmRleGVzIGkgYW5kIGouCi8vIFRoZSBxdWV1ZSBtdXN0IG5vdCBiZSBlbXB0eS4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBTd2FwKGksIGogaW50KSB7CglyaSA6PSAocXVldWUucmVhZCArIGkpICUgcXVldWUuY2FwYWNpdHkKCXJqIDo9IChxdWV1ZS5yZWFkICsgaikgJSBxdWV1ZS5jYXBhY2l0eQoJcXVldWUubVtyaV0sIHF1ZXVlLm1bcmpdID0gcXVldWUubVtyal0sIHF1ZXVlLm1bcmldCn0KCi8vIExlc3MgcmVwb3J0cyB3aGV0aGVyIHRoZSBlbGVtZW50IHdpdGggaW5kZXggaSBzaG91bGQgc29ydCBiZWZvcmUgdGhlIGVsZW1lbnQgd2l0aCBpbmRleCBqLgovLyBUaGUgcXVldWUgbXVzdCBoYXZlIGJlZW4gY3JlYXRlZCB3aXRoIGEgbm9uLW5pbCAnbGVzcycgY29tcGFyaXNvbiBmdW5jdGlvbiBhbmQgaXQgbXVzdCBub3QKLy8gYmUgZW1wdHkuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgTGVzcyhpLCBqIGludCkgYm9vbCB7CglyaSA6PSAocXVldWUucmVhZCArIGkpICUgcXVldWUuY2FwYWNpdHkKCXJqIDo9IChxdWV1ZS5yZWFkICsgaikgJSBxdWV1ZS5jYXBhY2l0eQoJcmV0dXJuIHF1ZXVlLmxlc3MocXVldWUubVtyaV0sIHF1ZXVlLm1bcmpdKQp9CgovLyBTb3J0IHNvcnRzIHRoZSBxdWV1ZSB1c2luZyB0aGUgJ2xlc3MnIGNvbXBhcmlzb24gZnVuY3Rpb24sIHdoaWNoIG11c3Qgbm90IGJlIG5pbC4KLy8gVGhpcyBmdW5jdGlvbiB3aWxsIHBhbmljIGlmIHRoZSBjb2xsZWN0aW9uIHdhcyBjcmVhdGVkIHdpdGggYSBuaWwgJ2xlc3MnIGZ1bmN0aW9uCi8vIChzZWUgTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U29ydGVkUXVldWUpLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFNvcnQoKSB7Cglzb3J0LlNvcnQocXVldWUpCn0KCi8vIFN0YWJsZVNvcnQgc29ydHMgdGhlIHF1ZXVlIHVzaW5nIHRoZSAnbGVzcycgY29tcGFyaXNvbiBmdW5jdGlvbiwgd2hpY2ggbXVzdCBub3QgYmUgbmlsLgovLyBUaGUgcmVzdWx0IGlzIHN0YWJsZSBzbyB0aGF0IHJlcGVhdGVkIGNhbGxzIHdpbGwgbm90IGFyYml0cmFyaWx5IHN3YXAgZXF1YWwgaXRlbXMuCi8vIFRoaXMgZnVuY3Rpb24gd2lsbCBwYW5pYyBpZiB0aGUgY29sbGVjdGlvbiB3YXMgY3JlYXRlZCB3aXRoIGEgbmlsICdsZXNzJyBmdW5jdGlvbgovLyAoc2VlIE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNvcnRlZFF1ZXVlKS4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBTdGFibGVTb3J0KCkgewoJc29ydC5TdGFibGUocXVldWUpCn0KCi8vIGZyb250QW5kQmFjayBnZXRzIHRoZSBmcm9udCBhbmQgYmFjayBwb3J0aW9ucyBvZiB0aGUgcXVldWUuIFRoZSBmcm9udCBwb3J0aW9uIHN0YXJ0cwovLyBmcm9tIHRoZSByZWFkIGluZGV4LiBUaGUgYmFjayBwb3J0aW9uIGVuZHMgYXQgdGhlIHdyaXRlIGluZGV4LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIGZyb250QW5kQmFjaygpIChbXXt7LlR5cGV9fSwgW117ey5UeXBlfX0pIHsKCWlmIHF1ZXVlID09IG5pbCB8fCBxdWV1ZS5sZW5ndGggPT0gMCB7CgkJcmV0dXJuIG5pbCwgbmlsCgl9CglpZiBxdWV1ZS53cml0ZSA+IHF1ZXVlLnJlYWQgewoJCXJldHVybiBxdWV1ZS5tW3F1ZXVlLnJlYWQ6cXVldWUud3JpdGVdLCBuaWwKCX0KCXJldHVybiBxdWV1ZS5tW3F1ZXVlLnJlYWQ6XSwgcXVldWUubVs6cXVldWUud3JpdGVdCn0KCi8vIGluZGV4ZXMgZ2V0cyB0aGUgaW5kZXhlcyBmb3IgdGhlIGZyb250IGFuZCBiYWNrIHBvcnRpb25zIG9mIHRoZSBxdWV1ZS4gVGhlIGZyb250Ci8vIHBvcnRpb24gc3RhcnRzIGZyb20gdGhlIHJlYWQgaW5kZXguIFRoZSBiYWNrIHBvcnRpb24gZW5kcyBhdCB0aGUgd3JpdGUgaW5kZXguCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgaW5kZXhlcygpIFtdaW50IHsKCWlmIHF1ZXVlID09IG5pbCB8fCBxdWV1ZS5sZW5ndGggPT0gMCB7CgkJcmV0dXJuIG5pbAoJfQoJaWYgcXVldWUud3JpdGUgPiBxdWV1ZS5yZWFkIHsKCQlyZXR1cm4gW11pbnR7cXVldWUucmVhZCwgcXVldWUud3JpdGV9Cgl9CglyZXR1cm4gW11pbnR7cXVldWUucmVhZCwgcXVldWUuY2FwYWNpdHksIDAsIHF1ZXVlLndyaXRlfQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIENsZWFyIHRoZSBlbnRpcmUgcXVldWUuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgQ2xlYXIoKSB7CglpZiBxdWV1ZSAhPSBuaWwgewoJCXF1ZXVlLnMuTG9jaygpCgkJZGVmZXIgcXVldWUucy5VbmxvY2soKQoJCXF1ZXVlLnJlYWQgPSAwCgkJcXVldWUud3JpdGUgPSAwCgkJcXVldWUubGVuZ3RoID0gMAoJfQp9CgovLyBBZGQgYWRkcyBpdGVtcyB0byB0aGUgcXVldWUuIFRoaXMgaXMgYSBzeW5vbnltIGZvciBQdXNoLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIEFkZChtb3JlIC4uLnt7LlR5cGV9fSkgewoJcXVldWUuUHVzaChtb3JlLi4uKQp9CgovLyBQdXNoIGFwcGVuZHMgaXRlbXMgdG8gdGhlIGVuZCBvZiB0aGUgcXVldWUuIElmIHRoZSBxdWV1ZSBkb2VzIG5vdCBoYXZlIGVub3VnaCBzcGFjZSwKLy8gbW9yZSB3aWxsIGJlIGFsbG9jYXRlZDogaG93IHRoaXMgaGFwcGVucyBkZXBlbmRzIG9uIHRoZSBvdmVyd3JpdGluZyBtb2RlLgovLwovLyBXaGVuIG92ZXJ3cml0aW5nLCB0aGUgb2xkZXN0IGl0ZW1zIGFyZSBvdmVyd3JpdHRlbiB3aXRoIHRoZSBuZXcgZGF0YTsgaXQgZXhwYW5kcyB0aGUgcXVldWUKLy8gb25seSBpZiB0aGVyZSBpcyBzdGlsbCBub3QgZW5vdWdoIHNwYWNlLgovLwovLyBPdGhlcndpc2UsIHRoZSBxdWV1ZSBtaWdodCBiZSByZWFsbG9jYXRlZCBpZiBuZWNlc3NhcnksIGVuc3VyaW5nIHRoYXQgYWxsIHRoZSBkYXRhIGlzIHB1c2hlZAovLyB3aXRob3V0IGFueSBvbGRlciBpdGVtcyBiZWluZyBhZmZlY3RlZC4KLy8KLy8gVGhlIG1vZGlmaWVkIHF1ZXVlIGlzIHJldHVybmVkLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFB1c2goaXRlbXMgLi4ue3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgewoJcXVldWUucy5Mb2NrKCkKCWRlZmVyIHF1ZXVlLnMuVW5sb2NrKCkKCgluIDo9IHF1ZXVlLmNhcGFjaXR5CglpZiBxdWV1ZS5vdmVyd3JpdGUgJiYgbGVuKGl0ZW1zKSA+IHF1ZXVlLmNhcGFjaXR5IHsKCQluID0gbGVuKGl0ZW1zKQoJCS8vIG5vIHJvdW5kaW5nIGluIHRoaXMgY2FzZSBiZWNhdXNlIHRoZSBvbGQgaXRlbXMgYXJlIGV4cGVjdGVkIHRvIGJlIG92ZXJ3cml0dGVuCgoJfSBlbHNlIGlmICFxdWV1ZS5vdmVyd3JpdGUgJiYgbGVuKGl0ZW1zKSA+IChxdWV1ZS5jYXBhY2l0eSAtIHF1ZXVlLmxlbmd0aCkgewoJCW4gPSBsZW4oaXRlbXMpICsgcXVldWUubGVuZ3RoCgkJLy8gcm91bmRlZCB1cCB0byBtdWx0aXBsZSBvZiAxMjggdG8gcmVkdWNlIHJlcGVhdGVkIHJlYWxsb2NhdGlvbgoJCW4gPSAoKG4gKyAxMjcpIC8gMTI4KSAqIDEyOAoJfQoKCWlmIG4gPiBxdWV1ZS5jYXBhY2l0eSB7CgkJcXVldWUgPSBxdWV1ZS5kb1JlYWxsb2NhdGUobiwgcXVldWUub3ZlcndyaXRlKQoJfQoKCW92ZXJmbG93IDo9IHF1ZXVlLmRvUHVzaChpdGVtcy4uLikKCglpZiBsZW4ob3ZlcmZsb3cpID4gMCB7CgkJcGFuaWMobGVuKG92ZXJmbG93KSkKCX0KCglyZXR1cm4gcXVldWUKfQoKLy8gT2ZmZXIgYXBwZW5kcyBhcyBtYW55IGl0ZW1zIHRvIHRoZSBlbmQgb2YgdGhlIHF1ZXVlIGFzIGl0IGNhbi4KLy8gSWYgdGhlIHF1ZXVlIGlzIGFscmVhZHkgZnVsbCwgd2hhdCBoYXBwZW5zIGRlcGVuZHMgb24gd2hldGhlciB0aGUgcXVldWUgaXMgY29uZmlndXJlZAovLyB0byBvdmVyd3JpdGUuIElmIGl0IGlzLCB0aGUgb2xkZXN0IGl0ZW1zIHdpbGwgYmUgb3ZlcndyaXR0ZW4uIE90aGVyd2lzZSwgaXQgd2lsbCBiZQovLyBmaWxsZWQgdG8gY2FwYWNpdHkgYW5kIGFueSB1bndyaXR0ZW4gaXRlbXMgYXJlIHJldHVybmVkLgovLwovLyBJZiB0aGUgY2FwYWNpdHkgaXMgdG9vIHNtYWxsIGZvciB0aGUgbnVtYmVyIG9mIGl0ZW1zLCB0aGUgZXhjZXNzIGl0ZW1zIGFyZSByZXR1cm5lZC4KLy8gVGhlIHF1ZXVlIGNhcGFjaXR5IGlzIG5ldmVyIGFsdGVyZWQuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgT2ZmZXIoaXRlbXMgLi4ue3suVHlwZX19KSBbXXt7LlR5cGV9fSB7CglxdWV1ZS5zLkxvY2soKQoJZGVmZXIgcXVldWUucy5VbmxvY2soKQoJcmV0dXJuIHF1ZXVlLmRvUHVzaChpdGVtcy4uLikKfQoKZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBkb1B1c2goaXRlbXMgLi4ue3suVHlwZX19KSBbXXt7LlR5cGV9fSB7CgluIDo9IGxlbihpdGVtcykKCglzcGFjZSA6PSBxdWV1ZS5jYXBhY2l0eSAtIHF1ZXVlLmxlbmd0aAoJb3ZlcndyaXR0ZW4gOj0gbiAtIHNwYWNlCgoJaWYgcXVldWUub3ZlcndyaXRlIHsKCQlzcGFjZSA9IHF1ZXVlLmNhcGFjaXR5Cgl9CgoJaWYgc3BhY2UgPCBuIHsKCQkvLyB0aGVyZSBpcyB0b28gbGl0dGxlIHNwYWNlOyByZWplY3Qgc3VycGx1cyBlbGVtZW50cwoJCXN1cnBsdXMgOj0gaXRlbXNbc3BhY2U6XQoJCXF1ZXVlLmRvUHVzaChpdGVtc1s6c3BhY2VdLi4uKQoJCXJldHVybiBzdXJwbHVzCgl9CgoJaWYgbiA8PSBxdWV1ZS5jYXBhY2l0eSAtIHF1ZXVlLndyaXRlIHsKCQkvLyBlYXN5IGNhc2U6IGVub3VnaCBzcGFjZSBhdCBlbmQgZm9yIGFsbCBpdGVtcwoJCWNvcHkocXVldWUubVtxdWV1ZS53cml0ZTpdLCBpdGVtcykKCQlxdWV1ZS53cml0ZSA9IChxdWV1ZS53cml0ZSArIG4pICUgcXVldWUuY2FwYWNpdHkKCQlxdWV1ZS5sZW5ndGggKz0gbgoJCXJldHVybiBuaWwKCX0KCgkvLyBub3QgeWV0IGZ1bGwKCWVuZCA6PSBxdWV1ZS5jYXBhY2l0eSAtIHF1ZXVlLndyaXRlCgljb3B5KHF1ZXVlLm1bcXVldWUud3JpdGU6XSwgaXRlbXNbOmVuZF0pCgljb3B5KHF1ZXVlLm0sIGl0ZW1zW2VuZDpdKQoJcXVldWUud3JpdGUgPSBuIC0gZW5kCglxdWV1ZS5sZW5ndGggKz0gbgoJaWYgcXVldWUubGVuZ3RoID4gcXVldWUuY2FwYWNpdHkgewoJCXF1ZXVlLmxlbmd0aCA9IHF1ZXVlLmNhcGFjaXR5Cgl9CglpZiBvdmVyd3JpdHRlbiA+IDAgewoJCXF1ZXVlLnJlYWQgPSAocXVldWUucmVhZCArIG92ZXJ3cml0dGVuKSAlIHF1ZXVlLmNhcGFjaXR5Cgl9CglyZXR1cm4gbmlsCn0KCi8vIFBvcDEgcmVtb3ZlcyBhbmQgcmV0dXJucyB0aGUgb2xkZXN0IGl0ZW0gZnJvbSB0aGUgcXVldWUuIElmIHRoZSBxdWV1ZSBpcwovLyBlbXB0eSwgaXQgcmV0dXJucyB7e2lmIC5UeXBlLklzUHRyfX1uaWx7e2Vsc2V9fXRoZSB6ZXJvIHZhbHVle3tlbmR9fSBpbnN0ZWFkLgovLyBUaGUgYm9vbGVhbiBpcyB0cnVlIG9ubHkgaWYgdGhlIGVsZW1lbnQgd2FzIGF2YWlsYWJsZS4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBQb3AxKCkgKHt7LlR5cGV9fSwgYm9vbCkgewoJcXVldWUucy5Mb2NrKCkKCWRlZmVyIHF1ZXVlLnMuVW5sb2NrKCkKCglpZiBxdWV1ZS5sZW5ndGggPT0gMCB7CgkJcmV0dXJuIHt7LlR5cGUuWmVyb319LCBmYWxzZQoJfQoKCXYgOj0gcXVldWUubVtxdWV1ZS5yZWFkXQoJcXVldWUucmVhZCA9IChxdWV1ZS5yZWFkICsgMSkgJSBxdWV1ZS5jYXBhY2l0eQoJcXVldWUubGVuZ3RoLS0KCglyZXR1cm4gdiwgdHJ1ZQp9CgovLyBQb3AgcmVtb3ZlcyBhbmQgcmV0dXJucyB0aGUgb2xkZXN0IGl0ZW1zIGZyb20gdGhlIHF1ZXVlLiBJZiB0aGUgcXVldWUgaXMKLy8gZW1wdHksIGl0IHJldHVybnMgYSBuaWwgc2xpY2UuIElmIG4gaXMgbGFyZ2VyIHRoYW4gdGhlIGN1cnJlbnQgcXVldWUgbGVuZ3RoLAovLyBpdCByZXR1cm5zIGFsbCB0aGUgYXZhaWxhYmxlIGVsZW1lbnRzLCBzbyBpbiB0aGlzIGNhc2UgdGhlIHJldHVybmVkIHNsaWNlCi8vIHdpbGwgYmUgc2hvcnRlciB0aGFuIG4uCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgUG9wKG4gaW50KSBbXXt7LlR5cGV9fSB7CglxdWV1ZS5zLkxvY2soKQoJZGVmZXIgcXVldWUucy5VbmxvY2soKQoJcmV0dXJuIHF1ZXVlLmRvUG9wKG4pCn0KCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgZG9Qb3AobiBpbnQpIFtde3suVHlwZX19IHsKCWlmIHF1ZXVlLmxlbmd0aCA9PSAwIHsKCQlyZXR1cm4gbmlsCgl9CgoJaWYgbiA+IHF1ZXVlLmxlbmd0aCB7CgkJbiA9IHF1ZXVlLmxlbmd0aAoJfQoKCXMgOj0gbWFrZShbXXt7LlR5cGV9fSwgbikKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCgkvLyBub3RlIHRoZSBsZW5ndGggY29waWVkIGlzIHdoaWNoZXZlciBpcyBzaG9ydGVyCgljb3B5KHMsIGZyb250KQoJaWYgbiA+IGxlbihmcm9udCkgewoJCWNvcHkoc1tsZW4oZnJvbnQpOl0sIGJhY2spCgl9CgoJcXVldWUucmVhZCA9IChxdWV1ZS5yZWFkICsgbikgJSBxdWV1ZS5jYXBhY2l0eQoJcXVldWUubGVuZ3RoIC09IG4KCglyZXR1cm4gcwp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0Ke3stIGlmIC5Db21wYXJhYmxlfX0KCi8vIENvbnRhaW5zIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGl0ZW0gaXMgYWxyZWFkeSBpbiB0aGUgcXVldWUsIHJldHVybmluZyB0cnVlIGlmIHNvLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIENvbnRhaW5zKHYge3suVHlwZX19KSBib29sIHsKCXJldHVybiBxdWV1ZS5FeGlzdHMoZnVuYyh4IHt7LlR5cGV9fSkgYm9vbCB7CgkJcmV0dXJuIHt7LlR5cGUuU3Rhcn19eCA9PSB7ey5UeXBlLlN0YXJ9fXYKCX0pCn0KCi8vIENvbnRhaW5zQWxsIGRldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gaXRlbXMgYXJlIGFsbCBpbiB0aGUgcXVldWUsIHJldHVybmluZyB0cnVlIGlmIHNvLgovLyBUaGlzIGlzIHBvdGVudGlhbGx5IGEgc2xvdyBtZXRob2QgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgcmFyZWx5LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIENvbnRhaW5zQWxsKGkgLi4ue3suVHlwZX19KSBib29sIHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIGxlbihpKSA9PSAwCgl9CgoJcXVldWUucy5STG9jaygpCglkZWZlciBxdWV1ZS5zLlJVbmxvY2soKQoKCWZvciBfLCB2IDo9IHJhbmdlIGkgewoJCWlmICFxdWV1ZS5Db250YWlucyh2KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0Ke3stIGVuZH19CgovLyBFeGlzdHMgdmVyaWZpZXMgdGhhdCBvbmUgb3IgbW9yZSBlbGVtZW50cyBvZiB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgovLyBUaGUgZnVuY3Rpb24gc2hvdWxkIG5vdCBhbHRlciB0aGUgdmFsdWVzIHZpYSBzaWRlLWVmZmVjdHMuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgRXhpc3RzKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIGJvb2wgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gZmFsc2UKCX0KCglxdWV1ZS5zLlJMb2NrKCkKCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCgoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWZvciBfLCB2IDo9IHJhbmdlIGZyb250IHsKCQlpZiBwKHYpIHsKCQkJcmV0dXJuIHRydWUKCQl9Cgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlpZiBwKHYpIHsKCQkJcmV0dXJuIHRydWUKCQl9Cgl9CglyZXR1cm4gZmFsc2UKfQoKLy8gRm9yYWxsIHZlcmlmaWVzIHRoYXQgYWxsIGVsZW1lbnRzIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCi8vIFRoZSBmdW5jdGlvbiBzaG91bGQgbm90IGFsdGVyIHRoZSB2YWx1ZXMgdmlhIHNpZGUtZWZmZWN0cy4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBGb3JhbGwocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiB0cnVlCgl9CgoJcXVldWUucy5STG9jaygpCglkZWZlciBxdWV1ZS5zLlJVbmxvY2soKQoKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJaWYgIXAodikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlpZiAhcCh2KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCXJldHVybiB0cnVlCn0KCi8vIEZvcmVhY2ggaXRlcmF0ZXMgb3ZlciB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSBhbmQgZXhlY3V0ZXMgZnVuY3Rpb24gZiBhZ2FpbnN0IGVhY2ggZWxlbWVudC4KLy8gVGhlIGZ1bmN0aW9uIGNhbiBzYWZlbHkgYWx0ZXIgdGhlIHZhbHVlcyB2aWEgc2lkZS1lZmZlY3RzLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIEZvcmVhY2goZiBmdW5jKHt7LlR5cGV9fSkpIHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuCgl9CgoJcXVldWUucy5Mb2NrKCkKCWRlZmVyIHF1ZXVlLnMuVW5sb2NrKCkKCglmcm9udCwgYmFjayA6PSBxdWV1ZS5mcm9udEFuZEJhY2soKQoJZm9yIF8sIHYgOj0gcmFuZ2UgZnJvbnQgewoJCWYodikKCX0KCWZvciBfLCB2IDo9IHJhbmdlIGJhY2sgewoJCWYodikKCX0KfQoKLy8gU2VuZCByZXR1cm5zIGEgY2hhbm5lbCB0aGF0IHdpbGwgc2VuZCBhbGwgdGhlIGVsZW1lbnRzIGluIG9yZGVyLgovLyBBIGdvcm91dGluZSBpcyBjcmVhdGVkIHRvIHNlbmQgdGhlIGVsZW1lbnRzOyB0aGlzIG9ubHkgdGVybWluYXRlcyB3aGVuIGFsbCB0aGUgZWxlbWVudHMKLy8gaGF2ZSBiZWVuIGNvbnN1bWVkLiBUaGUgY2hhbm5lbCB3aWxsIGJlIGNsb3NlZCB3aGVuIGFsbCB0aGUgZWxlbWVudHMgaGF2ZSBiZWVuIHNlbnQuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgU2VuZCgpIDwtY2hhbiB7ey5UeXBlfX0gewoJY2ggOj0gbWFrZShjaGFuIHt7LlR5cGV9fSkKCWdvIGZ1bmMoKSB7CgkJaWYgcXVldWUgIT0gbmlsIHsKCQkJcXVldWUucy5STG9jaygpCgkJCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCgoJCQlmcm9udCwgYmFjayA6PSBxdWV1ZS5mcm9udEFuZEJhY2soKQoJCQlmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJCQljaCA8LSB2CgkJCX0KCQkJZm9yIF8sIHYgOj0gcmFuZ2UgYmFjayB7CgkJCQljaCA8LSB2CgkJCX0KCQl9CgkJY2xvc2UoY2gpCgl9KCkKCXJldHVybiBjaAp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIERvS2VlcFdoZXJlIG1vZGlmaWVzIGEge3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgYnkgcmV0YWluaW5nIG9ubHkgdGhvc2UgZWxlbWVudHMgdGhhdCBtYXRjaAovLyB0aGUgcHJlZGljYXRlIHAuIFRoaXMgaXMgdmVyeSBzaW1pbGFyIHRvIEZpbHRlciBidXQgYWx0ZXJzIHRoZSBxdWV1ZSBpbiBwbGFjZS4KLy8KLy8gVGhlIHF1ZXVlIGlzIG1vZGlmaWVkIGFuZCB0aGUgbW9kaWZpZWQgcXVldWUgaXMgcmV0dXJuZWQuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgRG9LZWVwV2hlcmUocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXF1ZXVlLnMuTG9jaygpCglkZWZlciBxdWV1ZS5zLlVubG9jaygpCglpZiBxdWV1ZS5sZW5ndGggPT0gMCB7CgkJcmV0dXJuIHF1ZXVlCgl9CgoJcmV0dXJuIHF1ZXVlLmRvS2VlcFdoZXJlKHApCn0KCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgZG9LZWVwV2hlcmUocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHsKCWxhc3QgOj0gcXVldWUuY2FwYWNpdHkKCglpZiBxdWV1ZS53cml0ZSA+IHF1ZXVlLnJlYWQgewoJCS8vIG9ubHkgbmVlZCB0byBwcm9jZXNzIHRoZSBmcm9udCBvZiB0aGUgcXVldWUKCQlsYXN0ID0gcXVldWUud3JpdGUKCX0KCglyIDo9IHF1ZXVlLnJlYWQKCXcgOj0gcgoJbiA6PSAwCgoJLy8gMXN0IGxvb3A6IGZyb250IG9mIHF1ZXVlIChmcm9tIHF1ZXVlLnJlYWQpCglmb3IgciA8IGxhc3QgewoJCWlmIHAocXVldWUubVtyXSkgewoJCQlpZiB3ICE9IHIgewoJCQkJcXVldWUubVt3XSA9IHF1ZXVlLm1bcl0KCQkJfQoJCQl3KysKCQkJbisrCgkJfQoJCXIrKwoJfQoKCXcgPSB3ICUgcXVldWUuY2FwYWNpdHkKCglpZiBxdWV1ZS53cml0ZSA+IHF1ZXVlLnJlYWQgewoJCS8vIG9ubHkgbmVlZGVkIHRvIHByb2Nlc3MgdGhlIGZyb250IG9mIHRoZSBxdWV1ZQoJCXF1ZXVlLndyaXRlID0gdwoJCXF1ZXVlLmxlbmd0aCA9IG4KCQlyZXR1cm4gcXVldWUKCX0KCgkvLyAybmQgbG9vcDogYmFjayBvZiBxdWV1ZSAoZnJvbSAwIHRvIHF1ZXVlLndyaXRlKQoJciA9IDAKCWZvciByIDwgcXVldWUud3JpdGUgewoJCWlmIHAocXVldWUubVtyXSkgewoJCQlpZiB3ICE9IHIgewoJCQkJcXVldWUubVt3XSA9IHF1ZXVlLm1bcl0KCQkJfQoJCQl3ID0gKHcgKyAxKSAlIHF1ZXVlLmNhcGFjaXR5CgkJCW4rKwoJCX0KCQlyKysKCX0KCglxdWV1ZS53cml0ZSA9IHcKCXF1ZXVlLmxlbmd0aCA9IG4KCglyZXR1cm4gcXVldWUKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBGaW5kIHJldHVybnMgdGhlIGZpcnN0IHt7LlR5cGV9fSB0aGF0IHJldHVybnMgdHJ1ZSBmb3IgcHJlZGljYXRlIHAuCi8vIEZhbHNlIGlzIHJldHVybmVkIGlmIG5vbmUgbWF0Y2guCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgRmluZChwIGZ1bmMoe3suVHlwZX19KSBib29sKSAoe3suVHlwZX19LCBib29sKSB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiB7ey5UeXBlLlplcm99fSwgZmFsc2UKCX0KCglxdWV1ZS5zLlJMb2NrKCkKCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCgoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWZvciBfLCB2IDo9IHJhbmdlIGZyb250IHsKCQlpZiBwKHYpIHsKCQkJcmV0dXJuIHYsIHRydWUKCQl9Cgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlpZiBwKHYpIHsKCQkJcmV0dXJuIHYsIHRydWUKCQl9Cgl9Cnt7LSBpZiAuVHlwZUlzUHRyfX0KCglyZXR1cm4gbmlsLCBmYWxzZQp7ey0gZWxzZX19CgoJdmFyIGVtcHR5IHt7LlR5cGV9fQoJcmV0dXJuIGVtcHR5LCBmYWxzZQp7ey0gZW5kfX0KfQoKLy8gRmlsdGVyIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgd2hvc2UgZWxlbWVudHMgcmV0dXJuIHRydWUgZm9yIHByZWRpY2F0ZSBwLgovLwovLyBUaGUgb3JpZ2luYWwgcXVldWUgaXMgbm90IG1vZGlmaWVkLiBTZWUgYWxzbyBEb0tlZXBXaGVyZSAod2hpY2ggZG9lcyBtb2RpZnkgdGhlIG9yaWdpbmFsIHF1ZXVlKS4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBGaWx0ZXIocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXF1ZXVlLnMuUkxvY2soKQoJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCglyZXN1bHQgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U29ydGVkUXVldWUocXVldWUubGVuZ3RoLCBxdWV1ZS5vdmVyd3JpdGUsIHF1ZXVlLmxlc3MpCglpIDo9IDAKCglmcm9udCwgYmFjayA6PSBxdWV1ZS5mcm9udEFuZEJhY2soKQoJZm9yIF8sIHYgOj0gcmFuZ2UgZnJvbnQgewoJCWlmIHAodikgewoJCQlyZXN1bHQubVtpXSA9IHYKCQkJaSsrCgkJfQoJfQoJZm9yIF8sIHYgOj0gcmFuZ2UgYmFjayB7CgkJaWYgcCh2KSB7CgkJCXJlc3VsdC5tW2ldID0gdgoJCQlpKysKCQl9Cgl9CglyZXN1bHQubGVuZ3RoID0gaQoJcmVzdWx0LndyaXRlID0gaQoKCXJldHVybiByZXN1bHQKfQoKLy8gUGFydGl0aW9uIHJldHVybnMgdHdvIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZXMgd2hvc2UgZWxlbWVudHMgcmV0dXJuIHRydWUgb3IgZmFsc2UgZm9yIHRoZSBwcmVkaWNhdGUsIHAuCi8vIFRoZSBmaXJzdCByZXN1bHQgY29uc2lzdHMgb2YgYWxsIGVsZW1lbnRzIHRoYXQgc2F0aXNmeSB0aGUgcHJlZGljYXRlIGFuZCB0aGUgc2Vjb25kIHJlc3VsdCBjb25zaXN0cyBvZgovLyBhbGwgZWxlbWVudHMgdGhhdCBkb24ndC4gVGhlIHJlbGF0aXZlIG9yZGVyIG9mIHRoZSBlbGVtZW50cyBpbiB0aGUgcmVzdWx0cyBpcyB0aGUgc2FtZSBhcyBpbiB0aGUKLy8gb3JpZ2luYWwgcXVldWUuCi8vCi8vIFRoZSBvcmlnaW5hbCBxdWV1ZSBpcyBub3QgbW9kaWZpZWQKZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBQYXJ0aXRpb24ocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKCp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSwgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBuaWwsIG5pbAoJfQoKCXF1ZXVlLnMuUkxvY2soKQoJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCgltYXRjaGluZyA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Tb3J0ZWRRdWV1ZShxdWV1ZS5sZW5ndGgsIHF1ZXVlLm92ZXJ3cml0ZSwgcXVldWUubGVzcykKCW90aGVycyA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1Tb3J0ZWRRdWV1ZShxdWV1ZS5sZW5ndGgsIHF1ZXVlLm92ZXJ3cml0ZSwgcXVldWUubGVzcykKCW0sIG8gOj0gMCwgMAoKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJaWYgcCh2KSB7CgkJCW1hdGNoaW5nLm1bbV0gPSB2CgkJCW0rKwoJCX0gZWxzZSB7CgkJCW90aGVycy5tW29dID0gdgoJCQlvKysKCQl9Cgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlpZiBwKHYpIHsKCQkJbWF0Y2hpbmcubVttXSA9IHYKCQkJbSsrCgkJfSBlbHNlIHsKCQkJb3RoZXJzLm1bb10gPSB2CgkJCW8rKwoJCX0KCX0KCW1hdGNoaW5nLmxlbmd0aCA9IG0KCW1hdGNoaW5nLndyaXRlID0gbQoJb3RoZXJzLmxlbmd0aCA9IG8KCW90aGVycy53cml0ZSA9IG8KCglyZXR1cm4gbWF0Y2hpbmcsIG90aGVycwp9CgovLyBNYXAgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIGZ1bmN0aW9uIGYuCi8vIFRoZSByZXN1bHRpbmcgcXVldWUgaXMgdGhlIHNhbWUgc2l6ZSBhcyB0aGUgb3JpZ2luYWwgcXVldWUuCi8vIFRoZSBvcmlnaW5hbCBxdWV1ZSBpcyBub3QgbW9kaWZpZWQuCi8vCi8vIFRoaXMgaXMgYSBkb21haW4tdG8tcmFuZ2UgbWFwcGluZyBmdW5jdGlvbi4gRm9yIGJlc3Bva2UgdHJhbnNmb3JtYXRpb25zIHRvIG90aGVyIHR5cGVzLCBjb3B5IGFuZCBtb2RpZnkKLy8gdGhpcyBtZXRob2QgYXBwcm9wcmlhdGVseS4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBNYXAoZiBmdW5jKHt7LlR5cGV9fSkge3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcXVldWUucy5STG9jaygpCglkZWZlciBxdWV1ZS5zLlJVbmxvY2soKQoKCXNsaWNlIDo9IG1ha2UoW117ey5UeXBlfX0sIHF1ZXVlLmxlbmd0aCkKCWkgOj0gMAoKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJc2xpY2VbaV0gPSBmKHYpCgkJaSsrCgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlzbGljZVtpXSA9IGYodikKCQlpKysKCX0KCglyZXR1cm4gcXVldWUuZG9DbG9uZShzbGljZSkKfQp7ey0gcmFuZ2UgLk1hcFRvfX0KCi8vIE1hcFRve3suVX19IHJldHVybnMgYSBuZXcgW117ey59fSBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIGZ1bmN0aW9uIGYuCi8vIFRoZSByZXN1bHRpbmcgc2xpY2UgaXMgdGhlIHNhbWUgc2l6ZSBhcyB0aGUgcXVldWUuCi8vIFRoZSBxdWV1ZSBpcyBub3QgbW9kaWZpZWQuCi8vCi8vIFRoaXMgaXMgYSBkb21haW4tdG8tcmFuZ2UgbWFwcGluZyBmdW5jdGlvbi4gRm9yIGJlc3Bva2UgdHJhbnNmb3JtYXRpb25zIHRvIG90aGVyIHR5cGVzLCBjb3B5IGFuZCBtb2RpZnkKLy8gdGhpcyBtZXRob2QgYXBwcm9wcmlhdGVseS4KZnVuYyAocXVldWUgKnt7JC5QcmVmaXguVX19e3skLlR5cGUuVX19UXVldWUpIE1hcFRve3suVX19KGYgZnVuYyh7eyQuVHlwZX19KSB7ey59fSkgW117ey59fSB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gbWFrZShbXXt7Ln19LCAwLCBxdWV1ZS5sZW5ndGgpCglxdWV1ZS5zLlJMb2NrKCkKCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCgoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWZvciBfLCB2IDo9IHJhbmdlIGZyb250IHsKCQlyZXN1bHQgPSBhcHBlbmQocmVzdWx0LCBmKHYpKQoJfQoJZm9yIF8sIHYgOj0gcmFuZ2UgYmFjayB7CgkJcmVzdWx0ID0gYXBwZW5kKHJlc3VsdCwgZih2KSkKCX0KCglyZXR1cm4gcmVzdWx0Cn0Ke3stIGVuZH19CgovLyBGbGF0TWFwIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCBmdW5jdGlvbiBmIHRoYXQKLy8gcmV0dXJucyB6ZXJvIG9yIG1vcmUgaXRlbXMgaW4gYSBzbGljZS4gVGhlIHJlc3VsdGluZyBxdWV1ZSBtYXkgaGF2ZSBhIGRpZmZlcmVudCBzaXplIHRvIHRoZSBvcmlnaW5hbCBxdWV1ZS4KLy8gVGhlIG9yaWdpbmFsIHF1ZXVlIGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIEZsYXRNYXAoZiBmdW5jKHt7LlR5cGV9fSkgW117ey5UeXBlfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSB7CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglzbGljZSA6PSBtYWtlKFtde3suVHlwZX19LCAwLCBxdWV1ZS5sZW5ndGgpCgoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWZvciBfLCB2IDo9IHJhbmdlIGZyb250IHsKCQlzbGljZSA9IGFwcGVuZChzbGljZSwgZih2KS4uLikKCX0KCWZvciBfLCB2IDo9IHJhbmdlIGJhY2sgewoJCXNsaWNlID0gYXBwZW5kKHNsaWNlLCBmKHYpLi4uKQoJfQoKCXJldHVybiBxdWV1ZS5kb0Nsb25lKHNsaWNlKQp9Cnt7LSByYW5nZSAuTWFwVG99fQoKLy8gRmxhdE1hcFRve3suVX19IHJldHVybnMgYSBuZXcgW117ey59fSBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIGZ1bmN0aW9uIGYgdGhhdAovLyByZXR1cm5zIHplcm8gb3IgbW9yZSBpdGVtcyBpbiBhIHNsaWNlLiBUaGUgcmVzdWx0aW5nIHNsaWNlIG1heSBoYXZlIGEgZGlmZmVyZW50IHNpemUgdG8gdGhlIHF1ZXVlLgovLyBUaGUgcXVldWUgaXMgbm90IG1vZGlmaWVkLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKHF1ZXVlICp7eyQuUHJlZml4LlV9fXt7JC5UeXBlLlV9fVF1ZXVlKSBGbGF0TWFwVG97ey5VfX0oZiBmdW5jKHt7JC5UeXBlfX0pIFtde3sufX0pIFtde3sufX0gewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IG1ha2UoW117ey59fSwgMCwgMzIpCglxdWV1ZS5zLlJMb2NrKCkKCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCgoJZm9yIF8sIHYgOj0gcmFuZ2UgcXVldWUubSB7CgkJcmVzdWx0ID0gYXBwZW5kKHJlc3VsdCwgZih2KS4uLikKCX0KCglyZXR1cm4gcmVzdWx0Cn0Ke3stIGVuZH19CgovLyBDb3VudEJ5IGdpdmVzIHRoZSBudW1iZXIgZWxlbWVudHMgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgdGhhdCByZXR1cm4gdHJ1ZSBmb3IgdGhlIHByZWRpY2F0ZSBwLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIENvdW50QnkocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKHJlc3VsdCBpbnQpIHsKCWlmIHF1ZXVlID09IG5pbCB7CgkJcmV0dXJuIDAKCX0KCglxdWV1ZS5zLlJMb2NrKCkKCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCgoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWZvciBfLCB2IDo9IHJhbmdlIGZyb250IHsKCQlpZiBwKHYpIHsKCQkJcmVzdWx0KysKCQl9Cgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlpZiBwKHYpIHsKCQkJcmVzdWx0KysKCQl9Cgl9CglyZXR1cm4KfQoKLy8gTWluQnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlIGNvbnRhaW5pbmcgdGhlIG1pbmltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMKLy8gdXNpbmcgYSBwYXNzZWQgZnVuYyBkZWZpbmluZyDigJhsZXNz4oCZLiBJbiB0aGUgY2FzZSBvZiBtdWx0aXBsZSBpdGVtcyBiZWluZyBlcXVhbGx5IG1pbmltYWwsIHRoZSBmaXJzdCBzdWNoCi8vIGVsZW1lbnQgaXMgcmV0dXJuZWQuIFBhbmljcyBpZiB0aGVyZSBhcmUgbm8gZWxlbWVudHMuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgTWluQnkobGVzcyBmdW5jKHt7LlR5cGV9fSwge3suVHlwZX19KSBib29sKSB7ey5UeXBlfX0gewoJcXVldWUucy5STG9jaygpCglkZWZlciBxdWV1ZS5zLlJVbmxvY2soKQoKCWlmIHF1ZXVlLmxlbmd0aCA9PSAwIHsKCQlwYW5pYygiQ2Fubm90IGRldGVybWluZSB0aGUgbWluaW11bSBvZiBhbiBlbXB0eSBxdWV1ZS4iKQoJfQoKCWluZGV4ZXMgOj0gcXVldWUuaW5kZXhlcygpCgltIDo9IGluZGV4ZXNbMF0KCWZvciBsZW4oaW5kZXhlcykgPiAxIHsKCQlmIDo9IGluZGV4ZXNbMF0KCQlmb3IgaSA6PSBmOyBpIDwgaW5kZXhlc1sxXTsgaSsrIHsKCQkJaWYgaSAhPSBtIHsKCQkJCWlmIGxlc3MocXVldWUubVtpXSwgcXVldWUubVttXSkgewoJCQkJCW0gPSBpCgkJCQl9CgkJCX0KCQl9CgkJaW5kZXhlcyA9IGluZGV4ZXNbMjpdCgl9CglyZXR1cm4gcXVldWUubVttXQp9CgovLyBNYXhCeSByZXR1cm5zIGFuIGVsZW1lbnQgb2Yge3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUgY29udGFpbmluZyB0aGUgbWF4aW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cwovLyB1c2luZyBhIHBhc3NlZCBmdW5jIGRlZmluaW5nIOKAmGxlc3PigJkuIEluIHRoZSBjYXNlIG9mIG11bHRpcGxlIGl0ZW1zIGJlaW5nIGVxdWFsbHkgbWF4aW1hbCwgdGhlIGZpcnN0IHN1Y2gKLy8gZWxlbWVudCBpcyByZXR1cm5lZC4gUGFuaWNzIGlmIHRoZXJlIGFyZSBubyBlbGVtZW50cy4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBNYXhCeShsZXNzIGZ1bmMoe3suVHlwZX19LCB7ey5UeXBlfX0pIGJvb2wpIHt7LlR5cGV9fSB7CglxdWV1ZS5zLlJMb2NrKCkKCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCgoJaWYgcXVldWUubGVuZ3RoID09IDAgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtYXhpbXVtIG9mIGFuIGVtcHR5IHF1ZXVlLiIpCgl9CgoJaW5kZXhlcyA6PSBxdWV1ZS5pbmRleGVzKCkKCW0gOj0gaW5kZXhlc1swXQoJZm9yIGxlbihpbmRleGVzKSA+IDEgewoJCWYgOj0gaW5kZXhlc1swXQoJCWZvciBpIDo9IGY7IGkgPCBpbmRleGVzWzFdOyBpKysgewoJCQlpZiBpICE9IG0gewoJCQkJaWYgbGVzcyhxdWV1ZS5tW21dLCBxdWV1ZS5tW2ldKSB7CgkJCQkJbSA9IGkKCQkJCX0KCQkJfQoJCX0KCQlpbmRleGVzID0gaW5kZXhlc1syOl0KCX0KCXJldHVybiBxdWV1ZS5tW21dCn0Ke3stIGlmIC5Db21wYXJhYmxlfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBUaGVzZSBtZXRob2RzIGFyZSBpbmNsdWRlZCB3aGVuIHt7LlR5cGUuTmFtZX19IGlzIGNvbXBhcmFibGUuCgovLyBFcXVhbHMgZGV0ZXJtaW5lcyBpZiB0d28gcXVldWVzIGFyZSBlcXVhbCB0byBlYWNoIG90aGVyLgovLyBJZiB0aGV5IGJvdGggYXJlIHRoZSBzYW1lIHNpemUgYW5kIGhhdmUgdGhlIHNhbWUgaXRlbXMgdGhleSBhcmUgY29uc2lkZXJlZCBlcXVhbC4KLy8gT3JkZXIgb2YgaXRlbXMgaXMgbm90IHJlbGV2ZW50IGZvciBzZXRzIHRvIGJlIGVxdWFsLgovLyBOaWwgcXVldWVzIGFyZSBjb25zaWRlcmVkIHRvIGJlIGVtcHR5LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIEVxdWFscyhvdGhlciAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIGJvb2wgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlpZiBvdGhlciA9PSBuaWwgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCQlvdGhlci5zLlJMb2NrKCkKCQlkZWZlciBvdGhlci5zLlJVbmxvY2soKQoJCXJldHVybiBvdGhlci5sZW5ndGggPT0gMAoJfQoKCWlmIG90aGVyID09IG5pbCB7CgkJcXVldWUucy5STG9jaygpCgkJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCQlyZXR1cm4gcXVldWUubGVuZ3RoID09IDAKCX0KCglxdWV1ZS5zLlJMb2NrKCkKCW90aGVyLnMuUkxvY2soKQoJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCWRlZmVyIG90aGVyLnMuUlVubG9jaygpCgoJaWYgcXVldWUubGVuZ3RoICE9IG90aGVyLmxlbmd0aCB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJZm9yIGkgOj0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrIHsKCQlxaSA6PSAocXVldWUucmVhZCArIGkpICUgcXVldWUuY2FwYWNpdHkKCQlvaSA6PSAob3RoZXIucmVhZCArIGkpICUgcXVldWUuY2FwYWNpdHkKCQlpZiBxdWV1ZS5tW3FpXSAhPSBvdGhlci5tW29pXSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCglyZXR1cm4gdHJ1ZQp9Cnt7LSBlbmR9fQp7ey0gaWYgLk9yZGVyZWR9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIFRoZXNlIG1ldGhvZHMgYXJlIGluY2x1ZGVkIHdoZW4ge3suVHlwZS5OYW1lfX0gaXMgb3JkZXJlZC4KCi8vIE1pbiByZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIG1pbmltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMuCi8vIFBhbmljcyBpZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBNaW4oKSB7ey5UeXBlLk5hbWV9fSB7CglxdWV1ZS5zLlJMb2NrKCkKCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCgoJaWYgcXVldWUubGVuZ3RoID09IDAgewoJCXBhbmljKCJDYW5ub3QgZGV0ZXJtaW5lIHRoZSBtaW5pbXVtIG9mIGFuIGVtcHR5IHF1ZXVlLiIpCgl9CgoJeiA6PSBxdWV1ZS5tW3F1ZXVlLnJlYWRdCgltIDo9IHt7LlR5cGUuU3Rhcn19egoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWZvciBfLCB2IDo9IHJhbmdlIGZyb250IHsKCQlpZiB7ey5UeXBlLlN0YXJ9fXYgPCBtIHsKCQkJbSA9IHt7LlR5cGUuU3Rhcn19dgoJCX0KCX0KCWZvciBfLCB2IDo9IHJhbmdlIGJhY2sgewoJCWlmIHt7LlR5cGUuU3Rhcn19diA8IG0gewoJCQltID0ge3suVHlwZS5TdGFyfX12CgkJfQoJfQoJcmV0dXJuIG0KfQoKLy8gTWF4IHJldHVybnMgdGhlIGZpcnN0IGVsZW1lbnQgY29udGFpbmluZyB0aGUgbWF4aW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cy4KLy8gUGFuaWNzIGlmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5LgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIE1heCgpIChyZXN1bHQge3suVHlwZS5OYW1lfX0pIHsKCXF1ZXVlLnMuUkxvY2soKQoJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCglpZiBxdWV1ZS5sZW5ndGggPT0gMCB7CgkJcGFuaWMoIkNhbm5vdCBkZXRlcm1pbmUgdGhlIG1heGltdW0gb2YgYW4gZW1wdHkgcXVldWUuIikKCX0KCgl6IDo9IHF1ZXVlLm1bcXVldWUucmVhZF0KCW0gOj0ge3suVHlwZS5TdGFyfX16Cglmcm9udCwgYmFjayA6PSBxdWV1ZS5mcm9udEFuZEJhY2soKQoJZm9yIF8sIHYgOj0gcmFuZ2UgZnJvbnQgewoJCWlmIHt7LlR5cGUuU3Rhcn19diA+IG0gewoJCQltID0ge3suVHlwZS5TdGFyfX12CgkJfQoJfQoJZm9yIF8sIHYgOj0gcmFuZ2UgYmFjayB7CgkJaWYge3suVHlwZS5TdGFyfX12ID4gbSB7CgkJCW0gPSB7ey5UeXBlLlN0YXJ9fXYKCQl9Cgl9CglyZXR1cm4gbQp9Cnt7LSBlbmR9fQp7ey0gaWYgLk51bWVyaWN9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIFRoZXNlIG1ldGhvZHMgYXJlIGluY2x1ZGVkIHdoZW4ge3suVHlwZS5OYW1lfX0gaXMgbnVtZXJpYy4KCi8vIFN1bSByZXR1cm5zIHRoZSBzdW0gb2YgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgcXVldWUuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgU3VtKCkge3suVHlwZS5OYW1lfX0gewoJcXVldWUucy5STG9jaygpCglkZWZlciBxdWV1ZS5zLlJVbmxvY2soKQoKCXN1bSA6PSB7ey5UeXBlLk5hbWV9fSgwKQoJZnJvbnQsIGJhY2sgOj0gcXVldWUuZnJvbnRBbmRCYWNrKCkKCWZvciBfLCB2IDo9IHJhbmdlIGZyb250IHsKCQlzdW0gPSBzdW0gKyB7ey5UeXBlLlN0YXJ9fXYKCX0KCWZvciBfLCB2IDo9IHJhbmdlIGJhY2sgewoJCXN1bSA9IHN1bSArIHt7LlR5cGUuU3Rhcn19dgoJfQoJcmV0dXJuIHN1bQp9Cnt7LSBlbmR9fQp7ey0gaWYgLlN0cmluZ2VyfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gU3RyaW5nTGlzdCBnZXRzIGEgbGlzdCBvZiBzdHJpbmdzIHRoYXQgZGVwaWN0cyBhbGwgdGhlIGVsZW1lbnRzLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFN0cmluZ0xpc3QoKSBbXXN0cmluZyB7Cnt7LSBpZiBlcSAuVHlwZS5TdHJpbmcgInN0cmluZyJ9fQoJcmV0dXJuIHF1ZXVlLlRvU2xpY2UoKQp7ey0gZWxzZX19CglpZiBxdWV1ZSA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglxdWV1ZS5zLlJMb2NrKCkKCWRlZmVyIHF1ZXVlLnMuUlVubG9jaygpCgoJc3RyaW5ncyA6PSBtYWtlKFtdc3RyaW5nLCBxdWV1ZS5sZW5ndGgpCglpIDo9IDAKCWZyb250LCBiYWNrIDo9IHF1ZXVlLmZyb250QW5kQmFjaygpCglmb3IgXywgdiA6PSByYW5nZSBmcm9udCB7CgkJc3RyaW5nc1tpXSA9IGZtdC5TcHJpbnRmKCIldiIsIHYpCgkJaSsrCgl9Cglmb3IgXywgdiA6PSByYW5nZSBiYWNrIHsKCQlzdHJpbmdzW2ldID0gZm10LlNwcmludGYoIiV2IiwgdikKCQlpKysKCX0KCXJldHVybiBzdHJpbmdzCnt7LSBlbmR9fQp9CgovLyBTdHJpbmcgaW1wbGVtZW50cyB0aGUgU3RyaW5nZXIgaW50ZXJmYWNlIHRvIHJlbmRlciB0aGUgcXVldWUgYXMgYSBjb21tYS1zZXBhcmF0ZWQgc3RyaW5nIGVuY2xvc2VkIGluIHNxdWFyZSBicmFja2V0cy4KZnVuYyAocXVldWUgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVF1ZXVlKSBTdHJpbmcoKSBzdHJpbmcgewoJcmV0dXJuIHF1ZXVlLk1rU3RyaW5nMygiWyIsICIsICIsICJdIikKfQoKLy8gTWtTdHJpbmcgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcgdXNpbmcgYSBzdXBwbGllZCBzZXBhcmF0b3IuIE5vIGVuY2xvc2luZyBtYXJrcyBhcmUgYWRkZWQuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgTWtTdHJpbmcoc2VwIHN0cmluZykgc3RyaW5nIHsKCXJldHVybiBxdWV1ZS5Na1N0cmluZzMoIiIsIHNlcCwgIiIpCn0KCi8vIE1rU3RyaW5nMyBjb25jYXRlbmF0ZXMgdGhlIHZhbHVlcyBhcyBhIHN0cmluZywgdXNpbmcgdGhlIHByZWZpeCwgc2VwYXJhdG9yIGFuZCBzdWZmaXggc3VwcGxpZWQuCmZ1bmMgKHF1ZXVlICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1RdWV1ZSkgTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcgewoJaWYgcXVldWUgPT0gbmlsIHsKCQlyZXR1cm4gIiIKCX0KCglyZXR1cm4gcXVldWUubWtTdHJpbmczQnl0ZXMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlcikuU3RyaW5nKCkKfQoKZnVuYyAocXVldWUge3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIG1rU3RyaW5nM0J5dGVzKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSAqYnl0ZXMuQnVmZmVyIHsKCWIgOj0gJmJ5dGVzLkJ1ZmZlcnt9CgliLldyaXRlU3RyaW5nKGJlZm9yZSkKCXNlcCA6PSAiIgoKCXF1ZXVlLnMuUkxvY2soKQoJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCglmcm9udCwgYmFjayA6PSBxdWV1ZS5mcm9udEFuZEJhY2soKQoJZm9yIF8sIHYgOj0gcmFuZ2UgZnJvbnQgewoJCWIuV3JpdGVTdHJpbmcoc2VwKQoJCWIuV3JpdGVTdHJpbmcoZm10LlNwcmludGYoIiV2IiwgdikpCgkJc2VwID0gYmV0d2VlbgoJfQoJZm9yIF8sIHYgOj0gcmFuZ2UgYmFjayB7CgkJYi5Xcml0ZVN0cmluZyhzZXApCgkJYi5Xcml0ZVN0cmluZyhmbXQuU3ByaW50ZigiJXYiLCB2KSkKCQlzZXAgPSBiZXR3ZWVuCgl9CgliLldyaXRlU3RyaW5nKGFmdGVyKQoJcmV0dXJuIGIKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBVbm1hcnNoYWxKU09OIGltcGxlbWVudHMgSlNPTiBkZWNvZGluZyBmb3IgdGhpcyBxdWV1ZSB0eXBlLgpmdW5jIChxdWV1ZSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIFVubWFyc2hhbEpTT04oYiBbXWJ5dGUpIGVycm9yIHsKCXF1ZXVlLnMuTG9jaygpCglkZWZlciBxdWV1ZS5zLlVubG9jaygpCgoJcmV0dXJuIGpzb24uVW5tYXJzaGFsKGIsICZxdWV1ZS5tKQp9CgovLyBNYXJzaGFsSlNPTiBpbXBsZW1lbnRzIEpTT04gZW5jb2RpbmcgZm9yIHRoaXMgcXVldWUgdHlwZS4KZnVuYyAocXVldWUge3suUHJlZml4LlV9fXt7LlR5cGUuVX19UXVldWUpIE1hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpIHsKCXF1ZXVlLnMuUkxvY2soKQoJZGVmZXIgcXVldWUucy5SVW5sb2NrKCkKCglidWYsIGVyciA6PSBqc29uLk1hcnNoYWwocXVldWUubSkKCXJldHVybiBidWYsIGVycgp9Cnt7LSBlbmR9fQo=\"")
		packr.PackJSONBytes("builtin", "threadsafe/set.tpl", "\"Ly8gQW4gZW5jYXBzdWxhdGVkIG1hcFt7ey5UeXBlfX1dc3RydWN0e30gdXNlZCBhcyBhIHNldC4KLy97e2lmIC5UeXBlLklzUHRyfX0gTm90ZSB0aGF0IHRoZSBhcGkgdXNlcyB7ey5UeXBlfX0gYnV0IHRoZSBzZXQgdXNlcyB7ey5LZXkuTmFtZX19IGtleXMue3tlbmR9fQovLyBUaHJlYWQtc2FmZS4KLy8KLy8gR2VuZXJhdGVkIGZyb20ge3suVGVtcGxhdGVGaWxlfX0gd2l0aCBUeXBlPXt7LlR5cGV9fQovLyBvcHRpb25zOiBDb21wYXJhYmxlOmFsd2F5cyBOdW1lcmljOnt7Lk51bWVyaWN9fSBPcmRlcmVkOnt7Lk9yZGVyZWR9fSBTdHJpbmdlcjp7ey5TdHJpbmdlcn19IFRvTGlzdDp7ey5Ub0xpc3R9fQovLyBieSBydW50ZW1wbGF0ZSB7ey5BcHBWZXJzaW9ufX0KLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qb2hhbmJyYW5kaG9yc3QvcnVudGVtcGxhdGUvYmxvYi9tYXN0ZXIvQlVJTFRJTi5tZAoKcGFja2FnZSB7ey5QYWNrYWdlfX0KCmltcG9ydCAoCnt7LSBpZiBvciAuU3RyaW5nZXIgLkdvYkVuY29kZX19CgkiYnl0ZXMiCnt7LSBlbmR9fQp7ey0gaWYgLkdvYkVuY29kZX19CgkiZW5jb2RpbmcvZ29iIgp7ey0gZW5kfX0Ke3stIGlmIC5TdHJpbmdlcn19CgkiZW5jb2RpbmcvanNvbiIKCSJmbXQiCnt7LSBlbmR9fQoJInN5bmMiCnt7LSBpZiAuSGFzSW1wb3J0fX0KCXt7LkltcG9ydH19Cnt7ZW5kfX0KKQoKLy8ge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IGlzIHRoZSBwcmltYXJ5IHR5cGUgdGhhdCByZXByZXNlbnRzIGEgc2V0Lgp0eXBlIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBzdHJ1Y3QgewoJcyAqc3luYy5SV011dGV4CgltIG1hcFt7ey5UeXBlLk5hbWV9fV1zdHJ1Y3R7fQp9CgovLyBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgY3JlYXRlcyBhbmQgcmV0dXJucyBhIHJlZmVyZW5jZSB0byBhbiBlbXB0eSBzZXQuCmZ1bmMgTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KHZhbHVlcyAuLi57ey5UeXBlfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJc2V0IDo9ICZ7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXR7CgkJczogJnN5bmMuUldNdXRleHt9LAoJCW06IG1ha2UobWFwW3t7LlR5cGUuTmFtZX19XXN0cnVjdHt9KSwKCX0KCWZvciBfLCBpIDo9IHJhbmdlIHZhbHVlcyB7CgkJc2V0Lm1be3suVHlwZS5TdGFyfX1pXSA9IHN0cnVjdHt9e30KCX0KCXJldHVybiBzZXQKfQoKLy8gQ29udmVydHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBjb25zdHJ1Y3RzIGEgbmV3IHNldCBjb250YWluaW5nIHRoZSBzdXBwbGllZCB2YWx1ZXMsIGlmIGFueS4KLy8gVGhlIHJldHVybmVkIGJvb2xlYW4gd2lsbCBiZSBmYWxzZSBpZiBhbnkgb2YgdGhlIHZhbHVlcyBjb3VsZCBub3QgYmUgY29udmVydGVkIGNvcnJlY3RseS4KLy8gVGhlIHJldHVybmVkIHNldCB3aWxsIGNvbnRhaW4gYWxsIHRoZSB2YWx1ZXMgdGhhdCB3ZXJlIGNvcnJlY3RseSBjb252ZXJ0ZWQuCmZ1bmMgQ29udmVydHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCh2YWx1ZXMgLi4uaW50ZXJmYWNle30pICgqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0LCBib29sKSB7CglzZXQgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KCkKCglmb3IgXywgaSA6PSByYW5nZSB2YWx1ZXMgewoJCXN3aXRjaCBqIDo9IGkuKHR5cGUpIHsKe3stIGlmIC5OdW1lcmljfX0KCQljYXNlIGludDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlICppbnQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgaW50ODoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlICppbnQ4OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlIGludDE2OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKmludDE2OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlIGludDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKmludDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlIGludDY0OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKmludDY0OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlIHVpbnQ6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqdWludDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSB1aW50ODoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlICp1aW50ODoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSB1aW50MTY6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSAqdWludDE2OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlIHVpbnQzMjoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlICp1aW50MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgdWludDY0OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKnVpbnQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fSgqaikKCQkJc2V0Lm1ba10gPSBzdHJ1Y3R7fXt9CgkJY2FzZSBmbG9hdDMyOgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KGopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgKmZsb2F0MzI6CgkJCWsgOj0ge3suVHlwZS5OYW1lfX0oKmopCgkJCXNldC5tW2tdID0gc3RydWN0e317fQoJCWNhc2UgZmxvYXQ2NDoKCQkJayA6PSB7ey5UeXBlLk5hbWV9fShqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30KCQljYXNlICpmbG9hdDY0OgoJCQlrIDo9IHt7LlR5cGUuTmFtZX19KCpqKQoJCQlzZXQubVtrXSA9IHN0cnVjdHt9e30Ke3stIGVsc2V9fQoJCWNhc2Uge3suVHlwZS5OYW1lfX06CgkJCXNldC5tW2pdID0gc3RydWN0e317fQoJCWNhc2UgKnt7LlR5cGUuTmFtZX19OgoJCQlzZXQubVsqal0gPSBzdHJ1Y3R7fXt9Cnt7LSBlbmR9fQoJCX0KCX0KCglyZXR1cm4gc2V0LCBsZW4oc2V0Lm0pID09IGxlbih2YWx1ZXMpCn0KCi8vIEJ1aWxke3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0RnJvbUNoYW4gY29uc3RydWN0cyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgZnJvbSBhIGNoYW5uZWwgdGhhdCBzdXBwbGllcwovLyBhIHNlcXVlbmNlIG9mIHZhbHVlcyB1bnRpbCBpdCBpcyBjbG9zZWQuIFRoZSBmdW5jdGlvbiBkb2Vzbid0IHJldHVybiB1bnRpbCB0aGVuLgpmdW5jIEJ1aWxke3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0RnJvbUNoYW4oc291cmNlIDwtY2hhbiB7ey5UeXBlfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJc2V0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCglmb3IgdiA6PSByYW5nZSBzb3VyY2UgewoJCXNldC5tW3t7LlR5cGUuU3Rhcn19dl0gPSBzdHJ1Y3R7fXt9Cgl9CglyZXR1cm4gc2V0Cn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gSXNTZXF1ZW5jZSByZXR1cm5zIHRydWUgZm9yIGxpc3RzIGFuZCBxdWV1ZXMuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBJc1NlcXVlbmNlKCkgYm9vbCB7CglyZXR1cm4gZmFsc2UKfQoKLy8gSXNTZXQgcmV0dXJucyBmYWxzZSBmb3IgbGlzdHMgb3IgcXVldWVzLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgSXNTZXQoKSBib29sIHsKCXJldHVybiB0cnVlCn0Ke3stIGlmIC5Ub0xpc3R9fQoKLy8gVG9MaXN0IHJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBzZXQgYXMgYSBsaXN0LiBUaGUgcmV0dXJuZWQgbGlzdCBpcyBhIHNoYWxsb3cKLy8gY29weTsgdGhlIHNldCBpcyBub3QgYWx0ZXJlZC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFRvTGlzdCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1MaXN0IHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglzZXQucy5STG9jaygpCglkZWZlciBzZXQucy5SVW5sb2NrKCkKCglyZXR1cm4gJnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fUxpc3R7CgkJczogJnN5bmMuUldNdXRleHt9LAoJCW06IHNldC5zbGljZSgpLAoJfQp9Cnt7LSBlbmR9fQoKLy8gVG9TZXQgcmV0dXJucyB0aGUgc2V0OyB0aGlzIGlzIGFuIGlkZW50aXR5IG9wZXJhdGlvbiBpbiB0aGlzIGNhc2UuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBUb1NldCgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJcmV0dXJuIHNldAp9CgovLyBzbGljZSByZXR1cm5zIHRoZSBpbnRlcm5hbCBlbGVtZW50cyBvZiB0aGUgY3VycmVudCBzZXQuIFRoaXMgaXMgYSBzZWFtIGZvciB0ZXN0aW5nIGV0Yy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIHNsaWNlKCkgW117ey5UeXBlfX0gewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXMgOj0gbWFrZShbXXt7LlR5cGV9fSwgMCwgbGVuKHNldC5tKSkKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlzID0gYXBwZW5kKHMsIHt7LlR5cGUuQW1wfX12KQoJfQoJcmV0dXJuIHMKfQoKLy8gVG9TbGljZSByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgY3VycmVudCBzZXQgYXMgYSBzbGljZS4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFRvU2xpY2UoKSBbXXt7LlR5cGV9fSB7CglzZXQucy5STG9jaygpCglkZWZlciBzZXQucy5SVW5sb2NrKCkKCglyZXR1cm4gc2V0LnNsaWNlKCkKfQoKLy8gVG9JbnRlcmZhY2VTbGljZSByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgY3VycmVudCBzZXQgYXMgYSBzbGljZSBvZiBhcmJpdHJhcnkgdHlwZS4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFRvSW50ZXJmYWNlU2xpY2UoKSBbXWludGVyZmFjZXt9IHsKCXNldC5zLlJMb2NrKCkKCWRlZmVyIHNldC5zLlJVbmxvY2soKQoKCXMgOj0gbWFrZShbXWludGVyZmFjZXt9LCAwLCBsZW4oc2V0Lm0pKQoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCXMgPSBhcHBlbmQocywgdikKCX0KCXJldHVybiBzCn0KCi8vIENsb25lIHJldHVybnMgYSBzaGFsbG93IGNvcHkgb2YgdGhlIHNldC4gSXQgZG9lcyBub3QgY2xvbmUgdGhlIHVuZGVybHlpbmcgZWxlbWVudHMuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBDbG9uZSgpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCWNsb25lZFNldCA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoKCXNldC5zLlJMb2NrKCkKCWRlZmVyIHNldC5zLlJVbmxvY2soKQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQljbG9uZWRTZXQuZG9BZGQodikKCX0KCXJldHVybiBjbG9uZWRTZXQKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBJc0VtcHR5IHJldHVybnMgdHJ1ZSBpZiB0aGUgc2V0IGlzIGVtcHR5LgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgSXNFbXB0eSgpIGJvb2wgewoJcmV0dXJuIHNldC5TaXplKCkgPT0gMAp9CgovLyBOb25FbXB0eSByZXR1cm5zIHRydWUgaWYgdGhlIHNldCBpcyBub3QgZW1wdHkuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBOb25FbXB0eSgpIGJvb2wgewoJcmV0dXJuIHNldC5TaXplKCkgPiAwCn0KCi8vIFNpemUgcmV0dXJucyBob3cgbWFueSBpdGVtcyBhcmUgY3VycmVudGx5IGluIHRoZSBzZXQuIFRoaXMgaXMgYSBzeW5vbnltIGZvciBDYXJkaW5hbGl0eS4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFNpemUoKSBpbnQgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIDAKCX0KCglzZXQucy5STG9jaygpCglkZWZlciBzZXQucy5SVW5sb2NrKCkKCglyZXR1cm4gbGVuKHNldC5tKQp9CgovLyBDYXJkaW5hbGl0eSByZXR1cm5zIGhvdyBtYW55IGl0ZW1zIGFyZSBjdXJyZW50bHkgaW4gdGhlIHNldC4gVGhpcyBpcyBhIHN5bm9ueW0gZm9yIFNpemUuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBDYXJkaW5hbGl0eSgpIGludCB7CglyZXR1cm4gc2V0LlNpemUoKQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIEFkZCBhZGRzIGl0ZW1zIHRvIHRoZSBjdXJyZW50IHNldC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEFkZChtb3JlIC4uLnt7LlR5cGV9fSkgewoJc2V0LnMuTG9jaygpCglkZWZlciBzZXQucy5VbmxvY2soKQoKCWZvciBfLCB2IDo9IHJhbmdlIG1vcmUgewoJCXNldC5kb0FkZCh7ey5UeXBlLlN0YXJ9fXYpCgl9Cn0KCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBkb0FkZChpIHt7LlR5cGUuTmFtZX19KSB7CglzZXQubVtpXSA9IHN0cnVjdHt9e30KfQoKLy8gQ29udGFpbnMgZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gaXRlbSBpcyBhbHJlYWR5IGluIHRoZSBzZXQsIHJldHVybmluZyB0cnVlIGlmIHNvLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgQ29udGFpbnMoaSB7ey5UeXBlfX0pIGJvb2wgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJc2V0LnMuUkxvY2soKQoJZGVmZXIgc2V0LnMuUlVubG9jaygpCgoJXywgZm91bmQgOj0gc2V0Lm1be3suVHlwZS5TdGFyfX1pXQoJcmV0dXJuIGZvdW5kCn0KCi8vIENvbnRhaW5zQWxsIGRldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gaXRlbXMgYXJlIGFsbCBpbiB0aGUgc2V0LCByZXR1cm5pbmcgdHJ1ZSBpZiBzby4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIENvbnRhaW5zQWxsKGkgLi4ue3suVHlwZX19KSBib29sIHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBmYWxzZQoJfQoKCXNldC5zLlJMb2NrKCkKCWRlZmVyIHNldC5zLlJVbmxvY2soKQoKCWZvciBfLCB2IDo9IHJhbmdlIGkgewoJCWlmICFzZXQuQ29udGFpbnModikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIElzU3Vic2V0IGRldGVybWluZXMgd2hldGhlciBldmVyeSBpdGVtIGluIHRoZSBvdGhlciBzZXQgaXMgaW4gdGhpcyBzZXQsIHJldHVybmluZyB0cnVlIGlmIHNvLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgSXNTdWJzZXQob3RoZXIgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgYm9vbCB7CglpZiBzZXQuSXNFbXB0eSgpIHsKCQlyZXR1cm4gIW90aGVyLklzRW1wdHkoKQoJfQoKCWlmIG90aGVyLklzRW1wdHkoKSB7CgkJcmV0dXJuIGZhbHNlCgl9CgoJc2V0LnMuUkxvY2soKQoJb3RoZXIucy5STG9jaygpCglkZWZlciBzZXQucy5SVW5sb2NrKCkKCWRlZmVyIG90aGVyLnMuUlVubG9jaygpCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWlmICFvdGhlci5Db250YWlucyh7ey5UeXBlLkFtcH19dikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9CgovLyBJc1N1cGVyc2V0IGRldGVybWluZXMgd2hldGhlciBldmVyeSBpdGVtIG9mIHRoaXMgc2V0IGlzIGluIHRoZSBvdGhlciBzZXQsIHJldHVybmluZyB0cnVlIGlmIHNvLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgSXNTdXBlcnNldChvdGhlciAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBib29sIHsKCXJldHVybiBvdGhlci5Jc1N1YnNldChzZXQpCn0KCi8vIFVuaW9uIHJldHVybnMgYSBuZXcgc2V0IHdpdGggYWxsIGl0ZW1zIGluIGJvdGggc2V0cy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFVuaW9uKG90aGVyICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG90aGVyCgl9CgoJaWYgb3RoZXIgPT0gbmlsIHsKCQlyZXR1cm4gc2V0Cgl9CgoJdW5pb25lZFNldCA6PSBzZXQuQ2xvbmUoKQoKCW90aGVyLnMuUkxvY2soKQoJZGVmZXIgb3RoZXIucy5SVW5sb2NrKCkKCglmb3IgdiA6PSByYW5nZSBvdGhlci5tIHsKCQl1bmlvbmVkU2V0LmRvQWRkKHYpCgl9CgoJcmV0dXJuIHVuaW9uZWRTZXQKfQoKLy8gSW50ZXJzZWN0IHJldHVybnMgYSBuZXcgc2V0IHdpdGggaXRlbXMgdGhhdCBleGlzdCBvbmx5IGluIGJvdGggc2V0cy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEludGVyc2VjdChvdGhlciAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHsKCWlmIHNldCA9PSBuaWwgfHwgb3RoZXIgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJaW50ZXJzZWN0aW9uIDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCgoJc2V0LnMuUkxvY2soKQoJb3RoZXIucy5STG9jaygpCglkZWZlciBzZXQucy5SVW5sb2NrKCkKCWRlZmVyIG90aGVyLnMuUlVubG9jaygpCgoJLy8gbG9vcCBvdmVyIHNtYWxsZXIgc2V0CglpZiBzZXQuU2l6ZSgpIDwgb3RoZXIuU2l6ZSgpIHsKCQlmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJCWlmIG90aGVyLkNvbnRhaW5zKHt7LlR5cGUuQW1wfX12KSB7CgkJCQlpbnRlcnNlY3Rpb24uZG9BZGQodikKCQkJfQoJCX0KCX0gZWxzZSB7CgkJZm9yIHYgOj0gcmFuZ2Ugb3RoZXIubSB7CgkJCWlmIHNldC5Db250YWlucyh7ey5UeXBlLkFtcH19dikgewoJCQkJaW50ZXJzZWN0aW9uLmRvQWRkKHYpCgkJCX0KCQl9Cgl9CgoJcmV0dXJuIGludGVyc2VjdGlvbgp9CgovLyBEaWZmZXJlbmNlIHJldHVybnMgYSBuZXcgc2V0IHdpdGggaXRlbXMgaW4gdGhlIGN1cnJlbnQgc2V0IGJ1dCBub3QgaW4gdGhlIG90aGVyIHNldApmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgRGlmZmVyZW5jZShvdGhlciAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglpZiBvdGhlciA9PSBuaWwgewoJCXJldHVybiBzZXQKCX0KCglkaWZmZXJlbmNlZFNldCA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoKCXNldC5zLlJMb2NrKCkKCW90aGVyLnMuUkxvY2soKQoJZGVmZXIgc2V0LnMuUlVubG9jaygpCglkZWZlciBvdGhlci5zLlJVbmxvY2soKQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlpZiAhb3RoZXIuQ29udGFpbnMoe3suVHlwZS5BbXB9fXYpIHsKCQkJZGlmZmVyZW5jZWRTZXQuZG9BZGQodikKCQl9Cgl9CgoJcmV0dXJuIGRpZmZlcmVuY2VkU2V0Cn0KCi8vIFN5bW1ldHJpY0RpZmZlcmVuY2UgcmV0dXJucyBhIG5ldyBzZXQgd2l0aCBpdGVtcyBpbiB0aGUgY3VycmVudCBzZXQgb3IgdGhlIG90aGVyIHNldCBidXQgbm90IGluIGJvdGguCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBTeW1tZXRyaWNEaWZmZXJlbmNlKG90aGVyICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJYURpZmYgOj0gc2V0LkRpZmZlcmVuY2Uob3RoZXIpCgliRGlmZiA6PSBvdGhlci5EaWZmZXJlbmNlKHNldCkKCXJldHVybiBhRGlmZi5VbmlvbihiRGlmZikKfQoKLy8gQ2xlYXIgdGhlIGVudGlyZSBzZXQuIEF0ZXJ3YXJkcywgaXQgd2lsbCBiZSBhbiBlbXB0eSBzZXQuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBDbGVhcigpIHsKCWlmIHNldCAhPSBuaWwgewoJCXNldC5zLkxvY2soKQoJCWRlZmVyIHNldC5zLlVubG9jaygpCgoJCXNldC5tID0gbWFrZShtYXBbe3suVHlwZS5OYW1lfX1dc3RydWN0e30pCgl9Cn0KCi8vIFJlbW92ZSBhIHNpbmdsZSBpdGVtIGZyb20gdGhlIHNldC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFJlbW92ZShpIHt7LlR5cGV9fSkgewoJc2V0LnMuTG9jaygpCglkZWZlciBzZXQucy5VbmxvY2soKQoKCWRlbGV0ZShzZXQubSwge3suVHlwZS5TdGFyfX1pKQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFNlbmQgcmV0dXJucyBhIGNoYW5uZWwgdGhhdCB3aWxsIHNlbmQgYWxsIHRoZSBlbGVtZW50cyBpbiBvcmRlci4KLy8gQSBnb3JvdXRpbmUgaXMgY3JlYXRlZCB0byBzZW5kIHRoZSBlbGVtZW50czsgdGhpcyBvbmx5IHRlcm1pbmF0ZXMgd2hlbiBhbGwgdGhlIGVsZW1lbnRzIGhhdmUgYmVlbiBjb25zdW1lZApmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgU2VuZCgpIDwtY2hhbiB7ey5UeXBlfX0gewoJY2ggOj0gbWFrZShjaGFuIHt7LlR5cGV9fSkKCWdvIGZ1bmMoKSB7CgkJaWYgc2V0ICE9IG5pbCB7CgkJCXNldC5zLlJMb2NrKCkKCQkJZGVmZXIgc2V0LnMuUlVubG9jaygpCgoJCQlmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJCQljaCA8LSB7ey5UeXBlLkFtcH19dgoJCQl9CgkJfQoJCWNsb3NlKGNoKQoJfSgpCgoJcmV0dXJuIGNoCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gRm9yYWxsIGFwcGxpZXMgYSBwcmVkaWNhdGUgZnVuY3Rpb24gcCB0byBldmVyeSBlbGVtZW50IGluIHRoZSBzZXQuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGZhbHNlLAovLyB0aGUgaXRlcmF0aW9uIHRlcm1pbmF0ZXMgZWFybHkuIFRoZSByZXR1cm5lZCB2YWx1ZSBpcyB0cnVlIGlmIGFsbCBlbGVtZW50cyB3ZXJlIHZpc2l0ZWQsCi8vIG9yIGZhbHNlIGlmIGFuIGVhcmx5IHJldHVybiBvY2N1cnJlZC4KLy8KLy8gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGNhbiBhbHNvIGJlIHVzZWQgc2ltcGx5IGFzIGEgd2F5IHRvIHZpc2l0IGV2ZXJ5IGVsZW1lbnQgdXNpbmcgYSBmdW5jdGlvbgovLyB3aXRoIHNvbWUgc2lkZS1lZmZlY3RzOyBzdWNoIGEgZnVuY3Rpb24gbXVzdCBhbHdheXMgcmV0dXJuIHRydWUuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBGb3JhbGwocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gdHJ1ZQoJfQoKCXNldC5zLlJMb2NrKCkKCWRlZmVyIHNldC5zLlJVbmxvY2soKQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlpZiAhcCh7ey5UeXBlLkFtcH19dikgewoJCQlyZXR1cm4gZmFsc2UKCQl9Cgl9CglyZXR1cm4gdHJ1ZQp9CgovLyBFeGlzdHMgYXBwbGllcyBhIHByZWRpY2F0ZSBwIHRvIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIHNldC4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSwKLy8gdGhlIGl0ZXJhdGlvbiB0ZXJtaW5hdGVzIGVhcmx5LiBUaGUgcmV0dXJuZWQgdmFsdWUgaXMgdHJ1ZSBpZiBhbiBlYXJseSByZXR1cm4gb2NjdXJyZWQuCi8vIG9yIGZhbHNlIGlmIGFsbCBlbGVtZW50cyB3ZXJlIHZpc2l0ZWQgd2l0aG91dCBmaW5kaW5nIGEgbWF0Y2guCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBFeGlzdHMocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgYm9vbCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gZmFsc2UKCX0KCglzZXQucy5STG9jaygpCglkZWZlciBzZXQucy5SVW5sb2NrKCkKCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgcCh7ey5UeXBlLkFtcH19dikgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCX0KCXJldHVybiBmYWxzZQp9CgovLyBGb3JlYWNoIGl0ZXJhdGVzIG92ZXIgdGhlIHNldCBhbmQgZXhlY3V0ZXMgdGhlIGZ1bmN0aW9uIGYgYWdhaW5zdCBlYWNoIGVsZW1lbnQuCi8vIFRoZSBmdW5jdGlvbiBjYW4gc2FmZWx5IGFsdGVyIHRoZSB2YWx1ZXMgdmlhIHNpZGUtZWZmZWN0cy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEZvcmVhY2goZiBmdW5jKHt7LlR5cGV9fSkpIHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybgoJfQoKCXNldC5zLkxvY2soKQoJZGVmZXIgc2V0LnMuVW5sb2NrKCkKCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJZih7ey5UeXBlLkFtcH19dikKCX0KfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBGaW5kIHJldHVybnMgdGhlIGZpcnN0IHt7LlR5cGUuTmFtZX19IHRoYXQgcmV0dXJucyB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuIElmIHRoZXJlIGFyZSBtYW55IG1hdGNoZXMKLy8gb25lIGlzIGFyYnRyYXJpbHkgY2hvc2VuLiBGYWxzZSBpcyByZXR1cm5lZCBpZiBub25lIG1hdGNoLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgRmluZChwIGZ1bmMoe3suVHlwZX19KSBib29sKSAoe3suVHlwZX19LCBib29sKSB7CglzZXQucy5STG9jaygpCglkZWZlciBzZXQucy5SVW5sb2NrKCkKCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgcCh7ey5UeXBlLkFtcH19dikgewoJCQlyZXR1cm4ge3suVHlwZS5BbXB9fXYsIHRydWUKCQl9Cgl9Cnt7LSBpZiAuVHlwZS5Jc1B0cn19CgoJcmV0dXJuIG5pbCwgZmFsc2UKe3stIGVsc2V9fQoKCXZhciBlbXB0eSB7ey5UeXBlLk5hbWV9fQoJcmV0dXJuIGVtcHR5LCBmYWxzZQp7ey0gZW5kfX0KfQoKLy8gRmlsdGVyIHJldHVybnMgYSBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHdob3NlIGVsZW1lbnRzIHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCi8vCi8vIFRoZSBvcmlnaW5hbCBzZXQgaXMgbm90IG1vZGlmaWVkCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBGaWx0ZXIocCBmdW5jKHt7LlR5cGV9fSkgYm9vbCkgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCglzZXQucy5STG9jaygpCglkZWZlciBzZXQucy5SVW5sb2NrKCkKCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgcCh7ey5UeXBlLkFtcH19dikgewoJCQlyZXN1bHQuZG9BZGQodikKCQl9Cgl9CglyZXR1cm4gcmVzdWx0Cn0KCi8vIFBhcnRpdGlvbiByZXR1cm5zIHR3byBuZXcge3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0cyB3aG9zZSBlbGVtZW50cyByZXR1cm4gdHJ1ZSBvciBmYWxzZSBmb3IgdGhlIHByZWRpY2F0ZSwgcC4KLy8gVGhlIGZpcnN0IHJlc3VsdCBjb25zaXN0cyBvZiBhbGwgZWxlbWVudHMgdGhhdCBzYXRpc2Z5IHRoZSBwcmVkaWNhdGUgYW5kIHRoZSBzZWNvbmQgcmVzdWx0IGNvbnNpc3RzIG9mCi8vIGFsbCBlbGVtZW50cyB0aGF0IGRvbid0LiBUaGUgcmVsYXRpdmUgb3JkZXIgb2YgdGhlIGVsZW1lbnRzIGluIHRoZSByZXN1bHRzIGlzIHRoZSBzYW1lIGFzIGluIHRoZQovLyBvcmlnaW5hbCBsaXN0LgovLwovLyBUaGUgb3JpZ2luYWwgc2V0IGlzIG5vdCBtb2RpZmllZApmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgUGFydGl0aW9uKHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpICgqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0LCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gbmlsLCBuaWwKCX0KCgltYXRjaGluZyA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoJb3RoZXJzIDo9IE5ld3t7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCgpCglzZXQucy5STG9jaygpCglkZWZlciBzZXQucy5SVW5sb2NrKCkKCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgcCh7ey5UeXBlLkFtcH19dikgewoJCQltYXRjaGluZy5kb0FkZCh2KQoJCX0gZWxzZSB7CgkJCW90aGVycy5kb0FkZCh2KQoJCX0KCX0KCXJldHVybiBtYXRjaGluZywgb3RoZXJzCn0KCi8vIE1hcCByZXR1cm5zIGEgbmV3IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIGEgZnVuY3Rpb24gZi4KLy8gVGhlIG9yaWdpbmFsIHNldCBpcyBub3QgbW9kaWZpZWQuCi8vCi8vIFRoaXMgaXMgYSBkb21haW4tdG8tcmFuZ2UgbWFwcGluZyBmdW5jdGlvbi4gRm9yIGJlc3Bva2UgdHJhbnNmb3JtYXRpb25zIHRvIG90aGVyIHR5cGVzLCBjb3B5IGFuZCBtb2RpZnkKLy8gdGhpcyBtZXRob2QgYXBwcm9wcmlhdGVseS4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1hcChmIGZ1bmMoe3suVHlwZX19KSB7ey5UeXBlfX0pICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBOZXd7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQoKQoJc2V0LnMuUkxvY2soKQoJZGVmZXIgc2V0LnMuUlVubG9jaygpCgoJZm9yIHYgOj0gcmFuZ2Ugc2V0Lm0gewoJCWsgOj0gZih7ey5UeXBlLkFtcH19dikKCQlyZXN1bHQubVt7ey5UeXBlLlN0YXJ9fWtdID0gc3RydWN0e317fQoJfQoKCXJldHVybiByZXN1bHQKfQp7ey0gcmFuZ2UgLk1hcFRvfX0KCi8vIE1hcFRve3suVX19IHJldHVybnMgYSBuZXcgW117ey59fSBieSB0cmFuc2Zvcm1pbmcgZXZlcnkgZWxlbWVudCB3aXRoIGZ1bmN0aW9uIGYuCi8vIFRoZSByZXN1bHRpbmcgc2xpY2UgaXMgdGhlIHNhbWUgc2l6ZSBhcyB0aGUgc2V0LgovLyBUaGUgc2V0IGlzIG5vdCBtb2RpZmllZC4KLy8KLy8gVGhpcyBpcyBhIGRvbWFpbi10by1yYW5nZSBtYXBwaW5nIGZ1bmN0aW9uLiBGb3IgYmVzcG9rZSB0cmFuc2Zvcm1hdGlvbnMgdG8gb3RoZXIgdHlwZXMsIGNvcHkgYW5kIG1vZGlmeQovLyB0aGlzIG1ldGhvZCBhcHByb3ByaWF0ZWx5LgpmdW5jIChzZXQgKnt7JC5QcmVmaXguVX19e3skLlR5cGUuVX19U2V0KSBNYXBUb3t7LlV9fShmIGZ1bmMoe3skLlR5cGV9fSkge3sufX0pIFtde3sufX0gewoJaWYgc2V0ID09IG5pbCB7CgkJcmV0dXJuIG5pbAoJfQoKCXJlc3VsdCA6PSBtYWtlKFtde3sufX0sIDAsIGxlbihzZXQubSkpCglzZXQucy5STG9jaygpCglkZWZlciBzZXQucy5SVW5sb2NrKCkKCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJcmVzdWx0ID0gYXBwZW5kKHJlc3VsdCwgZih7eyQuVHlwZS5BbXB9fXYpKQoJfQoKCXJldHVybiByZXN1bHQKfQp7ey0gZW5kfX0KCi8vIEZsYXRNYXAgcmV0dXJucyBhIG5ldyB7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQgYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCBhIGZ1bmN0aW9uIGYgdGhhdAovLyByZXR1cm5zIHplcm8gb3IgbW9yZSBpdGVtcyBpbiBhIHNsaWNlLiBUaGUgcmVzdWx0aW5nIHNldCBtYXkgaGF2ZSBhIGRpZmZlcmVudCBzaXplIHRvIHRoZSBvcmlnaW5hbCBzZXQuCi8vIFRoZSBvcmlnaW5hbCBzZXQgaXMgbm90IG1vZGlmaWVkLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBGbGF0TWFwKGYgZnVuYyh7ey5UeXBlfX0pIFtde3suVHlwZX19KSAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0IHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBuaWwKCX0KCglyZXN1bHQgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KCkKCXNldC5zLlJMb2NrKCkKCWRlZmVyIHNldC5zLlJVbmxvY2soKQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlmb3IgXywgeCA6PSByYW5nZSBmKHt7LlR5cGUuQW1wfX12KSB7CgkJCXJlc3VsdC5tW3t7LlR5cGUuU3Rhcn19eF0gPSBzdHJ1Y3R7fXt9CgkJfQoJfQoKCXJldHVybiByZXN1bHQKfQp7ey0gcmFuZ2UgLk1hcFRvfX0KCi8vIEZsYXRNYXBUb3t7LlV9fSByZXR1cm5zIGEgbmV3IFtde3sufX0gYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IGVsZW1lbnQgd2l0aCBmdW5jdGlvbiBmIHRoYXQKLy8gcmV0dXJucyB6ZXJvIG9yIG1vcmUgaXRlbXMgaW4gYSBzbGljZS4gVGhlIHJlc3VsdGluZyBzbGljZSBtYXkgaGF2ZSBhIGRpZmZlcmVudCBzaXplIHRvIHRoZSBzZXQuCi8vIFRoZSBzZXQgaXMgbm90IG1vZGlmaWVkLgovLwovLyBUaGlzIGlzIGEgZG9tYWluLXRvLXJhbmdlIG1hcHBpbmcgZnVuY3Rpb24uIEZvciBiZXNwb2tlIHRyYW5zZm9ybWF0aW9ucyB0byBvdGhlciB0eXBlcywgY29weSBhbmQgbW9kaWZ5Ci8vIHRoaXMgbWV0aG9kIGFwcHJvcHJpYXRlbHkuCmZ1bmMgKHNldCAqe3skLlByZWZpeC5VfX17eyQuVHlwZS5VfX1TZXQpIEZsYXRNYXBUb3t7LlV9fShmIGZ1bmMoe3skLlR5cGV9fSkgW117ey59fSkgW117ey59fSB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJcmVzdWx0IDo9IG1ha2UoW117ey59fSwgMCwgbGVuKHNldC5tKSkKCXNldC5zLlJMb2NrKCkKCWRlZmVyIHNldC5zLlJVbmxvY2soKQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlyZXN1bHQgPSBhcHBlbmQocmVzdWx0LCBmKHt7JC5UeXBlLkFtcH19dikuLi4pCgl9CgoJcmV0dXJuIHJlc3VsdAp9Cnt7LSBlbmR9fQoKLy8gQ291bnRCeSBnaXZlcyB0aGUgbnVtYmVyIGVsZW1lbnRzIG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCB0aGF0IHJldHVybiB0cnVlIGZvciB0aGUgcHJlZGljYXRlIHAuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBDb3VudEJ5KHAgZnVuYyh7ey5UeXBlfX0pIGJvb2wpIChyZXN1bHQgaW50KSB7CglzZXQucy5STG9jaygpCglkZWZlciBzZXQucy5SVW5sb2NrKCkKCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgcCh7ey5UeXBlLkFtcH19dikgewoJCQlyZXN1bHQrKwoJCX0KCX0KCXJldHVybgp9Cnt7LSBpZiAuT3JkZXJlZH19CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gVGhlc2UgbWV0aG9kcyBhcmUgaW5jbHVkZWQgd2hlbiB7ey5UeXBlLk5hbWV9fSBpcyBvcmRlcmVkLgoKLy8gTWluIHJldHVybnMgdGhlIGZpcnN0IGVsZW1lbnQgY29udGFpbmluZyB0aGUgbWluaW11bSB2YWx1ZSwgd2hlbiBjb21wYXJlZCB0byBvdGhlciBlbGVtZW50cy4KLy8gUGFuaWNzIGlmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5LgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgTWluKCkge3suVHlwZS5OYW1lfX0gewoJc2V0LnMuUkxvY2soKQoJZGVmZXIgc2V0LnMuUlVubG9jaygpCgoJdmFyIG0ge3suVHlwZS5OYW1lfX0KCWZpcnN0IDo9IHRydWUKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlpZiBmaXJzdCB7CgkJCW0gPSB2CgkJCWZpcnN0ID0gZmFsc2UKCQl9IGVsc2UgaWYgdiA8IG0gewoJCQltID0gdgoJCX0KCX0KCXJldHVybiBtCn0KCi8vIE1heCByZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIG1heGltdW0gdmFsdWUsIHdoZW4gY29tcGFyZWQgdG8gb3RoZXIgZWxlbWVudHMuCi8vIFBhbmljcyBpZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIE1heCgpIChyZXN1bHQge3suVHlwZS5OYW1lfX0pIHsKCXNldC5zLlJMb2NrKCkKCWRlZmVyIHNldC5zLlJVbmxvY2soKQoKCXZhciBtIHt7LlR5cGUuTmFtZX19CglmaXJzdCA6PSB0cnVlCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgZmlyc3QgewoJCQltID0gdgoJCQlmaXJzdCA9IGZhbHNlCgkJfSBlbHNlIGlmIHYgPiBtIHsKCQkJbSA9IHYKCQl9Cgl9CglyZXR1cm4gbQp9Cnt7LSBlbmR9fQoKLy8gTWluQnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBjb250YWluaW5nIHRoZSBtaW5pbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCi8vIHVzaW5nIGEgcGFzc2VkIGZ1bmMgZGVmaW5pbmcg4oCYbGVzc+KAmS4gSW4gdGhlIGNhc2Ugb2YgbXVsdGlwbGUgaXRlbXMgYmVpbmcgZXF1YWxseSBtaW5pbWFsLCB0aGUgZmlyc3Qgc3VjaAovLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgTWluQnkobGVzcyBmdW5jKHt7LlR5cGV9fSwge3suVHlwZX19KSBib29sKSB7ey5UeXBlfX0gewoJaWYgc2V0LklzRW1wdHkoKSB7CgkJcGFuaWMoIkNhbm5vdCBkZXRlcm1pbmUgdGhlIG1pbmltdW0gb2YgYW4gZW1wdHkgc2V0LiIpCgl9CgoJc2V0LnMuUkxvY2soKQoJZGVmZXIgc2V0LnMuUlVubG9jaygpCgoJdmFyIG0ge3suVHlwZS5OYW1lfX0KCWZpcnN0IDo9IHRydWUKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlpZiBmaXJzdCB7CgkJCW0gPSB2CgkJCWZpcnN0ID0gZmFsc2UKCQl9IGVsc2UgaWYgbGVzcyh7ey5UeXBlLkFtcH19diwge3suVHlwZS5BbXB9fW0pIHsKCQkJbSA9IHYKCQl9Cgl9CglyZXR1cm4ge3suVHlwZS5BbXB9fW0KfQoKLy8gTWF4QnkgcmV0dXJucyBhbiBlbGVtZW50IG9mIHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCBjb250YWluaW5nIHRoZSBtYXhpbXVtIHZhbHVlLCB3aGVuIGNvbXBhcmVkIHRvIG90aGVyIGVsZW1lbnRzCi8vIHVzaW5nIGEgcGFzc2VkIGZ1bmMgZGVmaW5pbmcg4oCYbGVzc+KAmS4gSW4gdGhlIGNhc2Ugb2YgbXVsdGlwbGUgaXRlbXMgYmVpbmcgZXF1YWxseSBtYXhpbWFsLCB0aGUgZmlyc3Qgc3VjaAovLyBlbGVtZW50IGlzIHJldHVybmVkLiBQYW5pY3MgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgTWF4QnkobGVzcyBmdW5jKHt7LlR5cGV9fSwge3suVHlwZX19KSBib29sKSB7ey5UeXBlfX0gewoJaWYgc2V0LklzRW1wdHkoKSB7CgkJcGFuaWMoIkNhbm5vdCBkZXRlcm1pbmUgdGhlIG1pbmltdW0gb2YgYW4gZW1wdHkgc2V0LiIpCgl9CgoJc2V0LnMuUkxvY2soKQoJZGVmZXIgc2V0LnMuUlVubG9jaygpCgoJdmFyIG0ge3suVHlwZS5OYW1lfX0KCWZpcnN0IDo9IHRydWUKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlpZiBmaXJzdCB7CgkJCW0gPSB2CgkJCWZpcnN0ID0gZmFsc2UKCQl9IGVsc2UgaWYgbGVzcyh7ey5UeXBlLkFtcH19bSwge3suVHlwZS5BbXB9fXYpIHsKCQkJbSA9IHYKCQl9Cgl9CglyZXR1cm4ge3suVHlwZS5BbXB9fW0KfQp7ey0gaWYgLk51bWVyaWN9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIFRoZXNlIG1ldGhvZHMgYXJlIGluY2x1ZGVkIHdoZW4ge3suVHlwZS5OYW1lfX0gaXMgbnVtZXJpYy4KCi8vIFN1bSByZXR1cm5zIHRoZSBzdW0gb2YgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgc2V0LgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgU3VtKCkge3suVHlwZS5OYW1lfX0gewoJc2V0LnMuUkxvY2soKQoJZGVmZXIgc2V0LnMuUlVubG9jaygpCgoJc3VtIDo9IHt7LlR5cGUuTmFtZX19KDApCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJc3VtID0gc3VtICsgdgoJfQoJcmV0dXJuIHN1bQp9Cnt7LSBlbmR9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBFcXVhbHMgZGV0ZXJtaW5lcyB3aGV0aGVyIHR3byBzZXRzIGFyZSBlcXVhbCB0byBlYWNoIG90aGVyLCByZXR1cm5pbmcgdHJ1ZSBpZiBzby4KLy8gSWYgdGhleSBib3RoIGFyZSB0aGUgc2FtZSBzaXplIGFuZCBoYXZlIHRoZSBzYW1lIGl0ZW1zIHRoZXkgYXJlIGNvbnNpZGVyZWQgZXF1YWwuCi8vIE9yZGVyIG9mIGl0ZW1zIGlzIG5vdCByZWxldmVudCBmb3Igc2V0cyB0byBiZSBlcXVhbC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIEVxdWFscyhvdGhlciAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBib29sIHsKCWlmIHNldCA9PSBuaWwgewoJCXJldHVybiBvdGhlciA9PSBuaWwgfHwgb3RoZXIuSXNFbXB0eSgpCgl9CgoJaWYgb3RoZXIgPT0gbmlsIHsKCQlyZXR1cm4gc2V0LklzRW1wdHkoKQoJfQoKCXNldC5zLlJMb2NrKCkKCW90aGVyLnMuUkxvY2soKQoJZGVmZXIgc2V0LnMuUlVubG9jaygpCglkZWZlciBvdGhlci5zLlJVbmxvY2soKQoKCWlmIHNldC5TaXplKCkgIT0gb3RoZXIuU2l6ZSgpIHsKCQlyZXR1cm4gZmFsc2UKCX0KCglmb3IgdiA6PSByYW5nZSBzZXQubSB7CgkJaWYgIW90aGVyLkNvbnRhaW5zKHt7LlR5cGUuQW1wfX12KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCX0KCglyZXR1cm4gdHJ1ZQp9Cnt7LSBpZiAuU3RyaW5nZXJ9fQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBTdHJpbmdTZXQgZ2V0cyBhIGxpc3Qgb2Ygc3RyaW5ncyB0aGF0IGRlcGljdHMgYWxsIHRoZSBlbGVtZW50cy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFN0cmluZ0xpc3QoKSBbXXN0cmluZyB7CglzZXQucy5STG9jaygpCglkZWZlciBzZXQucy5SVW5sb2NrKCkKCglzdHJpbmdzIDo9IG1ha2UoW11zdHJpbmcsIGxlbihzZXQubSkpCglpIDo9IDAKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlzdHJpbmdzW2ldID0gZm10LlNwcmludGYoIiV2IiwgdikKCQlpKysKCX0KCXJldHVybiBzdHJpbmdzCn0KCi8vIFN0cmluZyBpbXBsZW1lbnRzIHRoZSBTdHJpbmdlciBpbnRlcmZhY2UgdG8gcmVuZGVyIHRoZSBzZXQgYXMgYSBjb21tYS1zZXBhcmF0ZWQgc3RyaW5nIGVuY2xvc2VkIGluIHNxdWFyZSBicmFja2V0cy4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFN0cmluZygpIHN0cmluZyB7CglyZXR1cm4gc2V0Lk1rU3RyaW5nMygiWyIsICIsICIsICJdIikKfQoKLy8gTWtTdHJpbmcgY29uY2F0ZW5hdGVzIHRoZSB2YWx1ZXMgYXMgYSBzdHJpbmcgdXNpbmcgYSBzdXBwbGllZCBzZXBhcmF0b3IuIE5vIGVuY2xvc2luZyBtYXJrcyBhcmUgYWRkZWQuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcgewoJcmV0dXJuIHNldC5Na1N0cmluZzMoIiIsIHNlcCwgIiIpCn0KCi8vIE1rU3RyaW5nMyBjb25jYXRlbmF0ZXMgdGhlIHZhbHVlcyBhcyBhIHN0cmluZywgdXNpbmcgdGhlIHByZWZpeCwgc2VwYXJhdG9yIGFuZCBzdWZmaXggc3VwcGxpZWQuCmZ1bmMgKHNldCAqe3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KSBNa1N0cmluZzMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpIHN0cmluZyB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gIiIKCX0KCXJldHVybiBzZXQubWtTdHJpbmczQnl0ZXMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlcikuU3RyaW5nKCkKfQoKZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIG1rU3RyaW5nM0J5dGVzKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSAqYnl0ZXMuQnVmZmVyIHsKCWIgOj0gJmJ5dGVzLkJ1ZmZlcnt9CgliLldyaXRlU3RyaW5nKGJlZm9yZSkKCXNlcCA6PSAiIgoKCXNldC5zLlJMb2NrKCkKCWRlZmVyIHNldC5zLlJVbmxvY2soKQoKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQliLldyaXRlU3RyaW5nKHNlcCkKCQliLldyaXRlU3RyaW5nKGZtdC5TcHJpbnRmKCIldiIsIHYpKQoJCXNlcCA9IGJldHdlZW4KCX0KCWIuV3JpdGVTdHJpbmcoYWZ0ZXIpCglyZXR1cm4gYgp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi8vIFVubWFyc2hhbEpTT04gaW1wbGVtZW50cyBKU09OIGRlY29kaW5nIGZvciB0aGlzIHNldCB0eXBlLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IgewoJc2V0LnMuTG9jaygpCglkZWZlciBzZXQucy5VbmxvY2soKQoKCXZhbHVlcyA6PSBtYWtlKFtde3suVHlwZX19LCAwKQoJZXJyIDo9IGpzb24uVW5tYXJzaGFsKGIsICZ2YWx1ZXMpCglpZiBlcnIgIT0gbmlsIHsKCQlyZXR1cm4gZXJyCgl9CgoJczIgOj0gTmV3e3suUHJlZml4LlV9fXt7LlR5cGUuVX19U2V0KHZhbHVlcy4uLikKCSpzZXQgPSAqczIKCXJldHVybiBuaWwKfQoKLy8gTWFyc2hhbEpTT04gaW1wbGVtZW50cyBKU09OIGVuY29kaW5nIGZvciB0aGlzIHNldCB0eXBlLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikgewoJc2V0LnMuUkxvY2soKQoJZGVmZXIgc2V0LnMuUlVubG9jaygpCgoJYnVmLCBlcnIgOj0ganNvbi5NYXJzaGFsKHNldC5Ub1NsaWNlKCkpCglyZXR1cm4gYnVmLCBlcnIKfQoKLy8gU3RyaW5nTWFwIHJlbmRlcnMgdGhlIHNldCBhcyBhIG1hcCBvZiBzdHJpbmdzLiBUaGUgdmFsdWUgb2YgZWFjaCBpdGVtIGluIHRoZSBzZXQgYmVjb21lcyBzdHJpbmdpZmllZCBhcyBhIGtleSBpbiB0aGUKLy8gcmVzdWx0aW5nIG1hcC4KZnVuYyAoc2V0ICp7ey5QcmVmaXguVX19e3suVHlwZS5VfX1TZXQpIFN0cmluZ01hcCgpIG1hcFtzdHJpbmddYm9vbCB7CglpZiBzZXQgPT0gbmlsIHsKCQlyZXR1cm4gbmlsCgl9CgoJc3RyaW5ncyA6PSBtYWtlKG1hcFtzdHJpbmddYm9vbCkKCWZvciB2IDo9IHJhbmdlIHNldC5tIHsKCQlzdHJpbmdzW2ZtdC5TcHJpbnRmKCIldiIsIHYpXSA9IHRydWUKCX0KCXJldHVybiBzdHJpbmdzCn0Ke3stIGVuZH19Cnt7LSBpZiAuR29iRW5jb2RlfX0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gR29iRGVjb2RlIGltcGxlbWVudHMgJ2dvYicgZGVjb2RpbmcgZm9yIHRoaXMgc2V0IHR5cGUuCi8vIFlvdSBtdXN0IHJlZ2lzdGVyIHt7LlR5cGV9fSB3aXRoIHRoZSAnZ29iJyBwYWNrYWdlIGJlZm9yZSB0aGlzIG1ldGhvZCBpcyB1c2VkLgpmdW5jIChzZXQgKnt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgR29iRGVjb2RlKGIgW11ieXRlKSBlcnJvciB7CglzZXQucy5Mb2NrKCkKCWRlZmVyIHNldC5zLlVubG9jaygpCgoJYnVmIDo9IGJ5dGVzLk5ld0J1ZmZlcihiKQoJcmV0dXJuIGdvYi5OZXdEZWNvZGVyKGJ1ZikuRGVjb2RlKCZzZXQubSkKfQoKLy8gR29iRW5jb2RlIGltcGxlbWVudHMgJ2dvYicgZW5jb2RpbmcgZm9yIHRoaXMgbGlzdCB0eXBlLgovLyBZb3UgbXVzdCByZWdpc3RlciB7ey5UeXBlfX0gd2l0aCB0aGUgJ2dvYicgcGFja2FnZSBiZWZvcmUgdGhpcyBtZXRob2QgaXMgdXNlZC4KZnVuYyAoc2V0IHt7LlByZWZpeC5VfX17ey5UeXBlLlV9fVNldCkgR29iRW5jb2RlKCkgKFtdYnl0ZSwgZXJyb3IpIHsKCXNldC5zLlJMb2NrKCkKCWRlZmVyIHNldC5zLlJVbmxvY2soKQoKCWJ1ZiA6PSAmYnl0ZXMuQnVmZmVye30KCWVyciA6PSBnb2IuTmV3RW5jb2RlcihidWYpLkVuY29kZShzZXQubSkKCXJldHVybiBidWYuQnl0ZXMoKSwgZXJyCn0Ke3stIGVuZH19Cg==\"")
		packr.PackJSONBytes("builtin", "threadsafe-list-api.txt", "\"ZnVuYyBNYWtlVHlwZUxpc3QobGVuZ3RoLCBjYXBhY2l0eSBpbnQpICpUeXBlTGlzdApmdW5jIE5ld1R5cGVMaXN0KHZhbHVlcyAuLi5UeXBlKSAqVHlwZUxpc3QKZnVuYyBDb252ZXJ0VHlwZUxpc3QodmFsdWVzIC4uLmludGVyZmFjZXt9KSAoKlR5cGVMaXN0LCBib29sKQpmdW5jIEJ1aWxkVHlwZUxpc3RGcm9tQ2hhbihzb3VyY2UgPC1jaGFuIFR5cGUpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgSXNTZXF1ZW5jZSgpIGJvb2wKZnVuYyAobGlzdCAqVHlwZUxpc3QpIElzU2V0KCkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgVG9MaXN0KCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBUb1NldCgpICpUeXBlU2V0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBUb1NsaWNlKCkgW11UeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBUb0ludGVyZmFjZVNsaWNlKCkgW11pbnRlcmZhY2V7fQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgQ2xvbmUoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEdldChpIGludCkgVHlwZQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgSGVhZCgpIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEhlYWRPcHRpb24oKSBUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBMYXN0KCkgVHlwZQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgTGFzdE9wdGlvbigpIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFRhaWwoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEluaXQoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIElzRW1wdHkoKSBib29sCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBOb25FbXB0eSgpIGJvb2wKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFNpemUoKSBpbnQKZnVuYyAobGlzdCAqVHlwZUxpc3QpIExlbigpIGludApmdW5jIChsaXN0ICpUeXBlTGlzdCkgU3dhcChpLCBqIGludCkKZnVuYyAobGlzdCAqVHlwZUxpc3QpIENvbnRhaW5zKHYgVHlwZSkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgQ29udGFpbnNBbGwoaSAuLi5UeXBlKSBib29sCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBFeGlzdHMocCBmdW5jKFR5cGUpIGJvb2wpIGJvb2wKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEZvcmFsbChwIGZ1bmMoVHlwZSkgYm9vbCkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRm9yZWFjaChmIGZ1bmMoVHlwZSkpCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTZW5kKCkgPC1jaGFuIFR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFJldmVyc2UoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIERvUmV2ZXJzZSgpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgU2h1ZmZsZSgpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRG9TaHVmZmxlKCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBDbGVhcigpCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBBZGQobW9yZSAuLi5UeXBlKQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgQXBwZW5kKG1vcmUgLi4uVHlwZSkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBEb0luc2VydEF0KGluZGV4IGludCwgbW9yZSAuLi5UeXBlKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIERvRGVsZXRlRmlyc3QobiBpbnQpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRG9EZWxldGVMYXN0KG4gaW50KSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIERvRGVsZXRlQXQoaW5kZXgsIG4gaW50KSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIERvS2VlcFdoZXJlKHAgZnVuYyhUeXBlKSBib29sKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFRha2UobiBpbnQpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRHJvcChuIGludCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBUYWtlTGFzdChuIGludCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBEcm9wTGFzdChuIGludCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBUYWtlV2hpbGUocCBmdW5jKFR5cGUpIGJvb2wpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRHJvcFdoaWxlKHAgZnVuYyhUeXBlKSBib29sKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEZpbmQocCBmdW5jKFR5cGUpIGJvb2wpIChUeXBlLCBib29sKQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgRmlsdGVyKHAgZnVuYyhUeXBlKSBib29sKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFBhcnRpdGlvbihwIGZ1bmMoVHlwZSkgYm9vbCkgKCpUeXBlTGlzdCwgKlR5cGVMaXN0KQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgTWFwKGYgZnVuYyhUeXBlKSBUeXBlKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEZsYXRNYXAoZiBmdW5jKFR5cGUpIFtdVHlwZSkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBDb3VudEJ5KHAgZnVuYyhUeXBlKSBib29sKSAocmVzdWx0IGludCkKZnVuYyAobGlzdCAqVHlwZUxpc3QpIE1pbkJ5KGxlc3MgZnVuYyhUeXBlLCBUeXBlKSBib29sKSBUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBNYXhCeShsZXNzIGZ1bmMoVHlwZSwgVHlwZSkgYm9vbCkgVHlwZQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgRGlzdGluY3RCeShlcXVhbCBmdW5jKFR5cGUsIFR5cGUpIGJvb2wpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgSW5kZXhXaGVyZShwIGZ1bmMoVHlwZSkgYm9vbCkgaW50CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBJbmRleFdoZXJlMihwIGZ1bmMoVHlwZSkgYm9vbCwgZnJvbSBpbnQpIGludApmdW5jIChsaXN0ICpUeXBlTGlzdCkgTGFzdEluZGV4V2hlcmUocCBmdW5jKFR5cGUpIGJvb2wpIGludApmdW5jIChsaXN0ICpUeXBlTGlzdCkgTGFzdEluZGV4V2hlcmUyKHAgZnVuYyhUeXBlKSBib29sLCBiZWZvcmUgaW50KSBpbnQKZnVuYyAoc2wgc29ydGFibGVUeXBlTGlzdCkgTGVzcyhpLCBqIGludCkgYm9vbApmdW5jIChzbCBzb3J0YWJsZVR5cGVMaXN0KSBMZW4oKSBpbnQKZnVuYyAoc2wgc29ydGFibGVUeXBlTGlzdCkgU3dhcChpLCBqIGludCkKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFNvcnRCeShsZXNzIGZ1bmMoaSwgaiBUeXBlKSBib29sKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFN0YWJsZVNvcnRCeShsZXNzIGZ1bmMoaSwgaiBUeXBlKSBib29sKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFNvcnRlZCgpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgU3RhYmxlU29ydGVkKCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBNaW4oKSBUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBNYXgoKSAocmVzdWx0IFR5cGUpCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTdW0oKSBUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTdHJpbmdMaXN0KCkgW11zdHJpbmcKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFN0cmluZygpIHN0cmluZwpmdW5jIChsaXN0ICpUeXBlTGlzdCkgTWtTdHJpbmcoc2VwIHN0cmluZykgc3RyaW5nCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBNa1N0cmluZzMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpIHN0cmluZwpmdW5jIChsaXN0ICpUeXBlTGlzdCkgVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IKZnVuYyAobGlzdCBUeXBlTGlzdCkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEdvYkRlY29kZShiIFtdYnl0ZSkgZXJyb3IKZnVuYyAobGlzdCBUeXBlTGlzdCkgR29iRW5jb2RlKCkgKFtdYnl0ZSwgZXJyb3IpCg==\"")
		packr.PackJSONBytes("builtin", "threadsafe-map-api.txt", "\"ZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMShrIEtleSwgdiBUeXBlKSBLZXlUeXBlVHVwbGVzCmZ1bmMgKHRzIEtleVR5cGVUdXBsZXMpIEFwcGVuZDIoazEgS2V5LCB2MSBUeXBlLCBrMiBLZXksIHYyIFR5cGUpIEtleVR5cGVUdXBsZXMKZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMyhrMSBLZXksIHYxIFR5cGUsIGsyIEtleSwgdjIgVHlwZSwgazMgS2V5LCB2MyBUeXBlKSBLZXlUeXBlVHVwbGVzCmZ1bmMgS2V5VHlwZVppcChrZXlzIC4uLktleSkgS2V5VHlwZVR1cGxlcwpmdW5jICh0cyBLZXlUeXBlVHVwbGVzKSBWYWx1ZXModmFsdWVzIC4uLlR5cGUpIEtleVR5cGVUdXBsZXMKZnVuYyBOZXdLZXlUeXBlTWFwMShrIEtleSwgdiBUeXBlKSAqS2V5VHlwZU1hcApmdW5jIE5ld0tleVR5cGVNYXAoa3YgLi4uS2V5VHlwZVR1cGxlKSAqS2V5VHlwZU1hcApmdW5jIChtbSAqS2V5VHlwZU1hcCkgS2V5cygpIFtdS2V5CmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBWYWx1ZXMoKSBbXVR5cGUKZnVuYyAobW0gKktleVR5cGVNYXApIFRvU2xpY2UoKSBbXUtleVR5cGVUdXBsZQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgR2V0KGsgS2V5KSAoVHlwZSwgYm9vbCkKZnVuYyAobW0gKktleVR5cGVNYXApIFB1dChrIEtleSwgdiBUeXBlKSBib29sCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBDb250YWluc0tleShrIEtleSkgYm9vbApmdW5jIChtbSAqS2V5VHlwZU1hcCkgQ29udGFpbnNBbGxLZXlzKGtrIC4uLktleSkgYm9vbApmdW5jIChtbSAqS2V5VHlwZU1hcCkgQ2xlYXIoKQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgUmVtb3ZlKGsgS2V5KQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgUG9wKGsgS2V5KSAoVHlwZSwgYm9vbCkKZnVuYyAobW0gKktleVR5cGVNYXApIFNpemUoKSBpbnQKZnVuYyAobW0gKktleVR5cGVNYXApIElzRW1wdHkoKSBib29sCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBOb25FbXB0eSgpIGJvb2wKZnVuYyAobW0gKktleVR5cGVNYXApIERyb3BXaGVyZShmbiBmdW5jKEtleSwgVHlwZSkgYm9vbCkgS2V5VHlwZVR1cGxlcwpmdW5jIChtbSAqS2V5VHlwZU1hcCkgRm9yZWFjaChmIGZ1bmMoS2V5LCBUeXBlKSkKZnVuYyAobW0gKktleVR5cGVNYXApIEZvcmFsbChwIGZ1bmMoS2V5LCBUeXBlKSBib29sKSBib29sCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBFeGlzdHMocCBmdW5jKEtleSwgVHlwZSkgYm9vbCkgYm9vbApmdW5jIChtbSAqS2V5VHlwZU1hcCkgRmluZChwIGZ1bmMoS2V5LCBUeXBlKSBib29sKSAoS2V5VHlwZVR1cGxlLCBib29sKQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgRmlsdGVyKHAgZnVuYyhLZXksIFR5cGUpIGJvb2wpICpLZXlUeXBlTWFwCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBQYXJ0aXRpb24ocCBmdW5jKEtleSwgVHlwZSkgYm9vbCkgKG1hdGNoaW5nICpLZXlUeXBlTWFwLCBvdGhlcnMgKktleVR5cGVNYXApCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBNYXAoZiBmdW5jKEtleSwgVHlwZSkgKEtleSwgVHlwZSkpICpLZXlUeXBlTWFwCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBGbGF0TWFwKGYgZnVuYyhLZXksIFR5cGUpIFtdS2V5VHlwZVR1cGxlKSAqS2V5VHlwZU1hcApmdW5jIChtbSAqS2V5VHlwZU1hcCkgQ2xvbmUoKSAqS2V5VHlwZU1hcApmdW5jIChtbSAqS2V5VHlwZU1hcCkgU3RyaW5nKCkgc3RyaW5nCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcKZnVuYyAobW0gKktleVR5cGVNYXApIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBVbm1hcnNoYWxKU09OKGIgW11ieXRlKSBlcnJvcgpmdW5jIChtbSAqS2V5VHlwZU1hcCkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikKZnVuYyAobW0gKktleVR5cGVNYXApIEdvYkRlY29kZShiIFtdYnl0ZSkgZXJyb3IKZnVuYyAobW0gKktleVR5cGVNYXApIEdvYkVuY29kZSgpIChbXWJ5dGUsIGVycm9yKQo=\"")
		packr.PackJSONBytes("builtin", "threadsafe-plist-api.txt", "\"ZnVuYyBNYWtlVHlwZUxpc3QobGVuZ3RoLCBjYXBhY2l0eSBpbnQpICpUeXBlTGlzdApmdW5jIE5ld1R5cGVMaXN0KHZhbHVlcyAuLi4qVHlwZSkgKlR5cGVMaXN0CmZ1bmMgQ29udmVydFR5cGVMaXN0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKCpUeXBlTGlzdCwgYm9vbCkKZnVuYyBCdWlsZFR5cGVMaXN0RnJvbUNoYW4oc291cmNlIDwtY2hhbiAqVHlwZSkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBJc1NlcXVlbmNlKCkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgSXNTZXQoKSBib29sCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBUb0xpc3QoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFRvU2V0KCkgKlR5cGVTZXQKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFRvU2xpY2UoKSBbXSpUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBUb0ludGVyZmFjZVNsaWNlKCkgW11pbnRlcmZhY2V7fQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgQ2xvbmUoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEdldChpIGludCkgKlR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEhlYWQoKSAqVHlwZQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgSGVhZE9wdGlvbigpICpUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBMYXN0KCkgKlR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIExhc3RPcHRpb24oKSAqVHlwZQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgVGFpbCgpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgSW5pdCgpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgSXNFbXB0eSgpIGJvb2wKZnVuYyAobGlzdCAqVHlwZUxpc3QpIE5vbkVtcHR5KCkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgU2l6ZSgpIGludApmdW5jIChsaXN0ICpUeXBlTGlzdCkgTGVuKCkgaW50CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTd2FwKGksIGogaW50KQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgQ29udGFpbnModiAqVHlwZSkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgQ29udGFpbnNBbGwoaSAuLi4qVHlwZSkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRXhpc3RzKHAgZnVuYygqVHlwZSkgYm9vbCkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRm9yYWxsKHAgZnVuYygqVHlwZSkgYm9vbCkgYm9vbApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRm9yZWFjaChmIGZ1bmMoKlR5cGUpKQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgU2VuZCgpIDwtY2hhbiAqVHlwZQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgUmV2ZXJzZSgpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRG9SZXZlcnNlKCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTaHVmZmxlKCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBEb1NodWZmbGUoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIENsZWFyKCkKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEFkZChtb3JlIC4uLipUeXBlKQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgQXBwZW5kKG1vcmUgLi4uKlR5cGUpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRG9JbnNlcnRBdChpbmRleCBpbnQsIG1vcmUgLi4uKlR5cGUpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRG9EZWxldGVGaXJzdChuIGludCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBEb0RlbGV0ZUxhc3QobiBpbnQpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRG9EZWxldGVBdChpbmRleCwgbiBpbnQpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRG9LZWVwV2hlcmUocCBmdW5jKCpUeXBlKSBib29sKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFRha2UobiBpbnQpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRHJvcChuIGludCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBUYWtlTGFzdChuIGludCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBEcm9wTGFzdChuIGludCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBUYWtlV2hpbGUocCBmdW5jKCpUeXBlKSBib29sKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIERyb3BXaGlsZShwIGZ1bmMoKlR5cGUpIGJvb2wpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRmluZChwIGZ1bmMoKlR5cGUpIGJvb2wpICgqVHlwZSwgYm9vbCkKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEZpbHRlcihwIGZ1bmMoKlR5cGUpIGJvb2wpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgUGFydGl0aW9uKHAgZnVuYygqVHlwZSkgYm9vbCkgKCpUeXBlTGlzdCwgKlR5cGVMaXN0KQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgTWFwKGYgZnVuYygqVHlwZSkgKlR5cGUpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgRmxhdE1hcChmIGZ1bmMoKlR5cGUpIFtdKlR5cGUpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgQ291bnRCeShwIGZ1bmMoKlR5cGUpIGJvb2wpIChyZXN1bHQgaW50KQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgTWluQnkobGVzcyBmdW5jKCpUeXBlLCAqVHlwZSkgYm9vbCkgKlR5cGUKZnVuYyAobGlzdCAqVHlwZUxpc3QpIE1heEJ5KGxlc3MgZnVuYygqVHlwZSwgKlR5cGUpIGJvb2wpICpUeXBlCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBEaXN0aW5jdEJ5KGVxdWFsIGZ1bmMoKlR5cGUsICpUeXBlKSBib29sKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEluZGV4V2hlcmUocCBmdW5jKCpUeXBlKSBib29sKSBpbnQKZnVuYyAobGlzdCAqVHlwZUxpc3QpIEluZGV4V2hlcmUyKHAgZnVuYygqVHlwZSkgYm9vbCwgZnJvbSBpbnQpIGludApmdW5jIChsaXN0ICpUeXBlTGlzdCkgTGFzdEluZGV4V2hlcmUocCBmdW5jKCpUeXBlKSBib29sKSBpbnQKZnVuYyAobGlzdCAqVHlwZUxpc3QpIExhc3RJbmRleFdoZXJlMihwIGZ1bmMoKlR5cGUpIGJvb2wsIGJlZm9yZSBpbnQpIGludApmdW5jIChzbCBzb3J0YWJsZVR5cGVMaXN0KSBMZXNzKGksIGogaW50KSBib29sCmZ1bmMgKHNsIHNvcnRhYmxlVHlwZUxpc3QpIExlbigpIGludApmdW5jIChzbCBzb3J0YWJsZVR5cGVMaXN0KSBTd2FwKGksIGogaW50KQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgU29ydEJ5KGxlc3MgZnVuYyhpLCBqICpUeXBlKSBib29sKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFN0YWJsZVNvcnRCeShsZXNzIGZ1bmMoaSwgaiAqVHlwZSkgYm9vbCkgKlR5cGVMaXN0CmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTb3J0ZWQoKSAqVHlwZUxpc3QKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFN0YWJsZVNvcnRlZCgpICpUeXBlTGlzdApmdW5jIChsaXN0ICpUeXBlTGlzdCkgTWluKCkgVHlwZQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgTWF4KCkgKHJlc3VsdCBUeXBlKQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgU3VtKCkgVHlwZQpmdW5jIChsaXN0ICpUeXBlTGlzdCkgU3RyaW5nTGlzdCgpIFtdc3RyaW5nCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBTdHJpbmcoKSBzdHJpbmcKZnVuYyAobGlzdCAqVHlwZUxpc3QpIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZwpmdW5jIChsaXN0ICpUeXBlTGlzdCkgTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcKZnVuYyAobGlzdCAqVHlwZUxpc3QpIFVubWFyc2hhbEpTT04oYiBbXWJ5dGUpIGVycm9yCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIE1hcnNoYWxKU09OKCkgKFtdYnl0ZSwgZXJyb3IpCmZ1bmMgKGxpc3QgKlR5cGVMaXN0KSBHb2JEZWNvZGUoYiBbXWJ5dGUpIGVycm9yCmZ1bmMgKGxpc3QgVHlwZUxpc3QpIEdvYkVuY29kZSgpIChbXWJ5dGUsIGVycm9yKQo=\"")
		packr.PackJSONBytes("builtin", "threadsafe-pmap-api.txt", "\"ZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMShrICpLZXksIHYgKlR5cGUpIEtleVR5cGVUdXBsZXMKZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMihrMSAqS2V5LCB2MSAqVHlwZSwgazIgKktleSwgdjIgKlR5cGUpIEtleVR5cGVUdXBsZXMKZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgQXBwZW5kMyhrMSAqS2V5LCB2MSAqVHlwZSwgazIgKktleSwgdjIgKlR5cGUsIGszICpLZXksIHYzICpUeXBlKSBLZXlUeXBlVHVwbGVzCmZ1bmMgS2V5VHlwZVppcChrZXlzIC4uLipLZXkpIEtleVR5cGVUdXBsZXMKZnVuYyAodHMgS2V5VHlwZVR1cGxlcykgVmFsdWVzKHZhbHVlcyAuLi4qVHlwZSkgS2V5VHlwZVR1cGxlcwpmdW5jIE5ld0tleVR5cGVNYXAxKGsgKktleSwgdiAqVHlwZSkgKktleVR5cGVNYXAKZnVuYyBOZXdLZXlUeXBlTWFwKGt2IC4uLktleVR5cGVUdXBsZSkgKktleVR5cGVNYXAKZnVuYyAobW0gKktleVR5cGVNYXApIEtleXMoKSBbXSpLZXkKZnVuYyAobW0gKktleVR5cGVNYXApIFZhbHVlcygpIFtdKlR5cGUKZnVuYyAobW0gKktleVR5cGVNYXApIFRvU2xpY2UoKSBbXUtleVR5cGVUdXBsZQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgR2V0KGsgKktleSkgKCpUeXBlLCBib29sKQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgUHV0KGsgKktleSwgdiAqVHlwZSkgYm9vbApmdW5jIChtbSAqS2V5VHlwZU1hcCkgQ29udGFpbnNLZXkoayAqS2V5KSBib29sCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBDb250YWluc0FsbEtleXMoa2sgLi4uKktleSkgYm9vbApmdW5jIChtbSAqS2V5VHlwZU1hcCkgQ2xlYXIoKQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgUmVtb3ZlKGsgKktleSkKZnVuYyAobW0gKktleVR5cGVNYXApIFBvcChrICpLZXkpICgqVHlwZSwgYm9vbCkKZnVuYyAobW0gKktleVR5cGVNYXApIFNpemUoKSBpbnQKZnVuYyAobW0gKktleVR5cGVNYXApIElzRW1wdHkoKSBib29sCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBOb25FbXB0eSgpIGJvb2wKZnVuYyAobW0gKktleVR5cGVNYXApIERyb3BXaGVyZShmbiBmdW5jKCpLZXksICpUeXBlKSBib29sKSBLZXlUeXBlVHVwbGVzCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBGb3JlYWNoKGYgZnVuYygqS2V5LCAqVHlwZSkpCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBGb3JhbGwocCBmdW5jKCpLZXksICpUeXBlKSBib29sKSBib29sCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBFeGlzdHMocCBmdW5jKCpLZXksICpUeXBlKSBib29sKSBib29sCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBGaW5kKHAgZnVuYygqS2V5LCAqVHlwZSkgYm9vbCkgKEtleVR5cGVUdXBsZSwgYm9vbCkKZnVuYyAobW0gKktleVR5cGVNYXApIEZpbHRlcihwIGZ1bmMoKktleSwgKlR5cGUpIGJvb2wpICpLZXlUeXBlTWFwCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBQYXJ0aXRpb24ocCBmdW5jKCpLZXksICpUeXBlKSBib29sKSAobWF0Y2hpbmcgKktleVR5cGVNYXAsIG90aGVycyAqS2V5VHlwZU1hcCkKZnVuYyAobW0gKktleVR5cGVNYXApIE1hcChmIGZ1bmMoKktleSwgKlR5cGUpICgqS2V5LCAqVHlwZSkpICpLZXlUeXBlTWFwCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBGbGF0TWFwKGYgZnVuYygqS2V5LCAqVHlwZSkgW11LZXlUeXBlVHVwbGUpICpLZXlUeXBlTWFwCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBDbG9uZSgpICpLZXlUeXBlTWFwCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBTdHJpbmcoKSBzdHJpbmcKZnVuYyAobW0gKktleVR5cGVNYXApIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZwpmdW5jIChtbSAqS2V5VHlwZU1hcCkgTWtTdHJpbmczKGJlZm9yZSwgYmV0d2VlbiwgYWZ0ZXIgc3RyaW5nKSBzdHJpbmcKZnVuYyAobW0gKktleVR5cGVNYXApIFVubWFyc2hhbEpTT04oYiBbXWJ5dGUpIGVycm9yCmZ1bmMgKG1tICpLZXlUeXBlTWFwKSBNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKQpmdW5jIChtbSAqS2V5VHlwZU1hcCkgR29iRGVjb2RlKGIgW11ieXRlKSBlcnJvcgpmdW5jIChtbSAqS2V5VHlwZU1hcCkgR29iRW5jb2RlKCkgKFtdYnl0ZSwgZXJyb3IpCg==\"")
		packr.PackJSONBytes("builtin", "threadsafe-pqueue-api.txt", "\"ZnVuYyBOZXdUeXBlUXVldWUoY2FwYWNpdHkgaW50LCBvdmVyd3JpdGUgYm9vbCkgKlR5cGVRdWV1ZQpmdW5jIE5ld1R5cGVTb3J0ZWRRdWV1ZShjYXBhY2l0eSBpbnQsIG92ZXJ3cml0ZSBib29sLCBsZXNzIGZ1bmMoaSwgaiAqVHlwZSkgYm9vbCkgKlR5cGVRdWV1ZQpmdW5jIEJ1aWxkVHlwZVF1ZXVlRnJvbUNoYW4oc291cmNlIDwtY2hhbiAqVHlwZSkgKlR5cGVRdWV1ZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBSZWFsbG9jYXRlKGNhcGFjaXR5IGludCwgb3ZlcndyaXRlIGJvb2wpICpUeXBlUXVldWUKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgU3BhY2UoKSBpbnQKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgQ2FwKCkgaW50CmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIElzU2VxdWVuY2UoKSBib29sCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIElzU2V0KCkgYm9vbApmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBUb0xpc3QoKSAqVHlwZUxpc3QKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgVG9TZXQoKSAqVHlwZVNldApmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBUb1NsaWNlKCkgW10qVHlwZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBUb0ludGVyZmFjZVNsaWNlKCkgW11pbnRlcmZhY2V7fQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBDbG9uZSgpICpUeXBlUXVldWUKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgR2V0KGkgaW50KSAqVHlwZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBIZWFkKCkgKlR5cGUKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgSGVhZE9wdGlvbigpICpUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIExhc3QoKSAqVHlwZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBMYXN0T3B0aW9uKCkgKlR5cGUKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgSXNPdmVyd3JpdGluZygpIGJvb2wKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgSXNGdWxsKCkgYm9vbApmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBJc0VtcHR5KCkgYm9vbApmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBOb25FbXB0eSgpIGJvb2wKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgU2l6ZSgpIGludApmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBMZW4oKSBpbnQKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgU3dhcChpLCBqIGludCkKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgTGVzcyhpLCBqIGludCkgYm9vbApmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBTb3J0KCkKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgU3RhYmxlU29ydCgpCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIENsZWFyKCkKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgQWRkKG1vcmUgLi4uKlR5cGUpCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFB1c2goaXRlbXMgLi4uKlR5cGUpICpUeXBlUXVldWUKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgT2ZmZXIoaXRlbXMgLi4uKlR5cGUpIFtdKlR5cGUKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgUG9wMSgpICgqVHlwZSwgYm9vbCkKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgUG9wKG4gaW50KSBbXSpUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIENvbnRhaW5zKHYgKlR5cGUpIGJvb2wKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgQ29udGFpbnNBbGwoaSAuLi4qVHlwZSkgYm9vbApmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBFeGlzdHMocCBmdW5jKCpUeXBlKSBib29sKSBib29sCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIEZvcmFsbChwIGZ1bmMoKlR5cGUpIGJvb2wpIGJvb2wKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgRm9yZWFjaChmIGZ1bmMoKlR5cGUpKQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBTZW5kKCkgPC1jaGFuICpUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIERvS2VlcFdoZXJlKHAgZnVuYygqVHlwZSkgYm9vbCkgKlR5cGVRdWV1ZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBGaW5kKHAgZnVuYygqVHlwZSkgYm9vbCkgKCpUeXBlLCBib29sKQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBGaWx0ZXIocCBmdW5jKCpUeXBlKSBib29sKSAqVHlwZVF1ZXVlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFBhcnRpdGlvbihwIGZ1bmMoKlR5cGUpIGJvb2wpICgqVHlwZVF1ZXVlLCAqVHlwZVF1ZXVlKQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBNYXAoZiBmdW5jKCpUeXBlKSAqVHlwZSkgKlR5cGVRdWV1ZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBGbGF0TWFwKGYgZnVuYygqVHlwZSkgW10qVHlwZSkgKlR5cGVRdWV1ZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBDb3VudEJ5KHAgZnVuYygqVHlwZSkgYm9vbCkgKHJlc3VsdCBpbnQpCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIE1pbkJ5KGxlc3MgZnVuYygqVHlwZSwgKlR5cGUpIGJvb2wpICpUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIE1heEJ5KGxlc3MgZnVuYygqVHlwZSwgKlR5cGUpIGJvb2wpICpUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIE1pbigpIFR5cGUKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgTWF4KCkgKHJlc3VsdCBUeXBlKQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBTdW0oKSBUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFN0cmluZ0xpc3QoKSBbXXN0cmluZwpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBTdHJpbmcoKSBzdHJpbmcKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgTWtTdHJpbmcoc2VwIHN0cmluZykgc3RyaW5nCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFVubWFyc2hhbEpTT04oYiBbXWJ5dGUpIGVycm9yCmZ1bmMgKHF1ZXVlIFR5cGVRdWV1ZSkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikK\"")
		packr.PackJSONBytes("builtin", "threadsafe-pset-api.txt", "\"ZnVuYyBOZXdUeXBlU2V0KHZhbHVlcyAuLi4qVHlwZSkgKlR5cGVTZXQKZnVuYyBDb252ZXJ0VHlwZVNldCh2YWx1ZXMgLi4uaW50ZXJmYWNle30pICgqVHlwZVNldCwgYm9vbCkKZnVuYyBCdWlsZFR5cGVTZXRGcm9tQ2hhbihzb3VyY2UgPC1jaGFuICpUeXBlKSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIElzU2VxdWVuY2UoKSBib29sCmZ1bmMgKHNldCAqVHlwZVNldCkgSXNTZXQoKSBib29sCmZ1bmMgKHNldCAqVHlwZVNldCkgVG9MaXN0KCkgKlR5cGVMaXN0CmZ1bmMgKHNldCAqVHlwZVNldCkgVG9TZXQoKSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIFRvU2xpY2UoKSBbXSpUeXBlCmZ1bmMgKHNldCAqVHlwZVNldCkgVG9JbnRlcmZhY2VTbGljZSgpIFtdaW50ZXJmYWNle30KZnVuYyAoc2V0ICpUeXBlU2V0KSBDbG9uZSgpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgSXNFbXB0eSgpIGJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBOb25FbXB0eSgpIGJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBTaXplKCkgaW50CmZ1bmMgKHNldCAqVHlwZVNldCkgQ2FyZGluYWxpdHkoKSBpbnQKZnVuYyAoc2V0ICpUeXBlU2V0KSBBZGQobW9yZSAuLi4qVHlwZSkKZnVuYyAoc2V0ICpUeXBlU2V0KSBDb250YWlucyhpICpUeXBlKSBib29sCmZ1bmMgKHNldCAqVHlwZVNldCkgQ29udGFpbnNBbGwoaSAuLi4qVHlwZSkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIFVuaW9uKG90aGVyICpUeXBlU2V0KSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIEludGVyc2VjdChvdGhlciAqVHlwZVNldCkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBEaWZmZXJlbmNlKG90aGVyICpUeXBlU2V0KSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIFN5bW1ldHJpY0RpZmZlcmVuY2Uob3RoZXIgKlR5cGVTZXQpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgQ2xlYXIoKQpmdW5jIChzZXQgKlR5cGVTZXQpIFJlbW92ZShpICpUeXBlKQpmdW5jIChzZXQgKlR5cGVTZXQpIFNlbmQoKSA8LWNoYW4gKlR5cGUKZnVuYyAoc2V0ICpUeXBlU2V0KSBGb3JhbGwocCBmdW5jKCpUeXBlKSBib29sKSBib29sCmZ1bmMgKHNldCAqVHlwZVNldCkgRXhpc3RzKHAgZnVuYygqVHlwZSkgYm9vbCkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIEZvcmVhY2goZiBmdW5jKCpUeXBlKSkKZnVuYyAoc2V0ICpUeXBlU2V0KSBGaW5kKHAgZnVuYygqVHlwZSkgYm9vbCkgKCpUeXBlLCBib29sKQpmdW5jIChzZXQgKlR5cGVTZXQpIEZpbHRlcihwIGZ1bmMoKlR5cGUpIGJvb2wpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgUGFydGl0aW9uKHAgZnVuYygqVHlwZSkgYm9vbCkgKCpUeXBlU2V0LCAqVHlwZVNldCkKZnVuYyAoc2V0ICpUeXBlU2V0KSBNYXAoZiBmdW5jKCpUeXBlKSAqVHlwZSkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBGbGF0TWFwKGYgZnVuYygqVHlwZSkgW10qVHlwZSkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBDb3VudEJ5KHAgZnVuYygqVHlwZSkgYm9vbCkgKHJlc3VsdCBpbnQpCmZ1bmMgKHNldCAqVHlwZVNldCkgTWluKCkgVHlwZQpmdW5jIChzZXQgKlR5cGVTZXQpIE1heCgpIChyZXN1bHQgVHlwZSkKZnVuYyAoc2V0ICpUeXBlU2V0KSBNaW5CeShsZXNzIGZ1bmMoKlR5cGUsICpUeXBlKSBib29sKSAqVHlwZQpmdW5jIChzZXQgKlR5cGVTZXQpIE1heEJ5KGxlc3MgZnVuYygqVHlwZSwgKlR5cGUpIGJvb2wpICpUeXBlCmZ1bmMgKHNldCAqVHlwZVNldCkgU3VtKCkgVHlwZQpmdW5jIChzZXQgKlR5cGVTZXQpIFN0cmluZ0xpc3QoKSBbXXN0cmluZwpmdW5jIChzZXQgKlR5cGVTZXQpIFN0cmluZygpIHN0cmluZwpmdW5jIChzZXQgKlR5cGVTZXQpIE1rU3RyaW5nKHNlcCBzdHJpbmcpIHN0cmluZwpmdW5jIChzZXQgKlR5cGVTZXQpIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nCmZ1bmMgKHNldCAqVHlwZVNldCkgVW5tYXJzaGFsSlNPTihiIFtdYnl0ZSkgZXJyb3IKZnVuYyAoc2V0ICpUeXBlU2V0KSBNYXJzaGFsSlNPTigpIChbXWJ5dGUsIGVycm9yKQpmdW5jIChzZXQgKlR5cGVTZXQpIFN0cmluZ01hcCgpIG1hcFtzdHJpbmddYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIEdvYkRlY29kZShiIFtdYnl0ZSkgZXJyb3IKZnVuYyAoc2V0IFR5cGVTZXQpIEdvYkVuY29kZSgpIChbXWJ5dGUsIGVycm9yKQo=\"")
		packr.PackJSONBytes("builtin", "threadsafe-queue-api.txt", "\"ZnVuYyBOZXdUeXBlUXVldWUoY2FwYWNpdHkgaW50LCBvdmVyd3JpdGUgYm9vbCkgKlR5cGVRdWV1ZQpmdW5jIE5ld1R5cGVTb3J0ZWRRdWV1ZShjYXBhY2l0eSBpbnQsIG92ZXJ3cml0ZSBib29sLCBsZXNzIGZ1bmMoaSwgaiBUeXBlKSBib29sKSAqVHlwZVF1ZXVlCmZ1bmMgQnVpbGRUeXBlUXVldWVGcm9tQ2hhbihzb3VyY2UgPC1jaGFuIFR5cGUpICpUeXBlUXVldWUKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgUmVhbGxvY2F0ZShjYXBhY2l0eSBpbnQsIG92ZXJ3cml0ZSBib29sKSAqVHlwZVF1ZXVlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFNwYWNlKCkgaW50CmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIENhcCgpIGludApmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBJc1NlcXVlbmNlKCkgYm9vbApmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBJc1NldCgpIGJvb2wKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgVG9MaXN0KCkgKlR5cGVMaXN0CmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFRvU2V0KCkgKlR5cGVTZXQKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgVG9TbGljZSgpIFtdVHlwZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBUb0ludGVyZmFjZVNsaWNlKCkgW11pbnRlcmZhY2V7fQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBDbG9uZSgpICpUeXBlUXVldWUKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgR2V0KGkgaW50KSBUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIEhlYWQoKSBUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIEhlYWRPcHRpb24oKSBUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIExhc3QoKSBUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIExhc3RPcHRpb24oKSBUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIElzT3ZlcndyaXRpbmcoKSBib29sCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIElzRnVsbCgpIGJvb2wKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgSXNFbXB0eSgpIGJvb2wKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgTm9uRW1wdHkoKSBib29sCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFNpemUoKSBpbnQKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgTGVuKCkgaW50CmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFN3YXAoaSwgaiBpbnQpCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIExlc3MoaSwgaiBpbnQpIGJvb2wKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgU29ydCgpCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFN0YWJsZVNvcnQoKQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBDbGVhcigpCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIEFkZChtb3JlIC4uLlR5cGUpCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFB1c2goaXRlbXMgLi4uVHlwZSkgKlR5cGVRdWV1ZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBPZmZlcihpdGVtcyAuLi5UeXBlKSBbXVR5cGUKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgUG9wMSgpIChUeXBlLCBib29sKQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBQb3AobiBpbnQpIFtdVHlwZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBDb250YWlucyh2IFR5cGUpIGJvb2wKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgQ29udGFpbnNBbGwoaSAuLi5UeXBlKSBib29sCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIEV4aXN0cyhwIGZ1bmMoVHlwZSkgYm9vbCkgYm9vbApmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBGb3JhbGwocCBmdW5jKFR5cGUpIGJvb2wpIGJvb2wKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgRm9yZWFjaChmIGZ1bmMoVHlwZSkpCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFNlbmQoKSA8LWNoYW4gVHlwZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBEb0tlZXBXaGVyZShwIGZ1bmMoVHlwZSkgYm9vbCkgKlR5cGVRdWV1ZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBGaW5kKHAgZnVuYyhUeXBlKSBib29sKSAoVHlwZSwgYm9vbCkKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgRmlsdGVyKHAgZnVuYyhUeXBlKSBib29sKSAqVHlwZVF1ZXVlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFBhcnRpdGlvbihwIGZ1bmMoVHlwZSkgYm9vbCkgKCpUeXBlUXVldWUsICpUeXBlUXVldWUpCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIE1hcChmIGZ1bmMoVHlwZSkgVHlwZSkgKlR5cGVRdWV1ZQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBGbGF0TWFwKGYgZnVuYyhUeXBlKSBbXVR5cGUpICpUeXBlUXVldWUKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgQ291bnRCeShwIGZ1bmMoVHlwZSkgYm9vbCkgKHJlc3VsdCBpbnQpCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIE1pbkJ5KGxlc3MgZnVuYyhUeXBlLCBUeXBlKSBib29sKSBUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIE1heEJ5KGxlc3MgZnVuYyhUeXBlLCBUeXBlKSBib29sKSBUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIE1pbigpIFR5cGUKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgTWF4KCkgKHJlc3VsdCBUeXBlKQpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBTdW0oKSBUeXBlCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFN0cmluZ0xpc3QoKSBbXXN0cmluZwpmdW5jIChxdWV1ZSAqVHlwZVF1ZXVlKSBTdHJpbmcoKSBzdHJpbmcKZnVuYyAocXVldWUgKlR5cGVRdWV1ZSkgTWtTdHJpbmcoc2VwIHN0cmluZykgc3RyaW5nCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIE1rU3RyaW5nMyhiZWZvcmUsIGJldHdlZW4sIGFmdGVyIHN0cmluZykgc3RyaW5nCmZ1bmMgKHF1ZXVlICpUeXBlUXVldWUpIFVubWFyc2hhbEpTT04oYiBbXWJ5dGUpIGVycm9yCmZ1bmMgKHF1ZXVlIFR5cGVRdWV1ZSkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikK\"")
		packr.PackJSONBytes("builtin", "threadsafe-set-api.txt", "\"ZnVuYyBOZXdUeXBlU2V0KHZhbHVlcyAuLi5UeXBlKSAqVHlwZVNldApmdW5jIENvbnZlcnRUeXBlU2V0KHZhbHVlcyAuLi5pbnRlcmZhY2V7fSkgKCpUeXBlU2V0LCBib29sKQpmdW5jIEJ1aWxkVHlwZVNldEZyb21DaGFuKHNvdXJjZSA8LWNoYW4gVHlwZSkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBJc1NlcXVlbmNlKCkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIElzU2V0KCkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIFRvTGlzdCgpICpUeXBlTGlzdApmdW5jIChzZXQgKlR5cGVTZXQpIFRvU2V0KCkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBUb1NsaWNlKCkgW11UeXBlCmZ1bmMgKHNldCAqVHlwZVNldCkgVG9JbnRlcmZhY2VTbGljZSgpIFtdaW50ZXJmYWNle30KZnVuYyAoc2V0ICpUeXBlU2V0KSBDbG9uZSgpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgSXNFbXB0eSgpIGJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBOb25FbXB0eSgpIGJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBTaXplKCkgaW50CmZ1bmMgKHNldCAqVHlwZVNldCkgQ2FyZGluYWxpdHkoKSBpbnQKZnVuYyAoc2V0ICpUeXBlU2V0KSBBZGQobW9yZSAuLi5UeXBlKQpmdW5jIChzZXQgKlR5cGVTZXQpIENvbnRhaW5zKGkgVHlwZSkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIENvbnRhaW5zQWxsKGkgLi4uVHlwZSkgYm9vbApmdW5jIChzZXQgKlR5cGVTZXQpIFVuaW9uKG90aGVyICpUeXBlU2V0KSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIEludGVyc2VjdChvdGhlciAqVHlwZVNldCkgKlR5cGVTZXQKZnVuYyAoc2V0ICpUeXBlU2V0KSBEaWZmZXJlbmNlKG90aGVyICpUeXBlU2V0KSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIFN5bW1ldHJpY0RpZmZlcmVuY2Uob3RoZXIgKlR5cGVTZXQpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgQ2xlYXIoKQpmdW5jIChzZXQgKlR5cGVTZXQpIFJlbW92ZShpIFR5cGUpCmZ1bmMgKHNldCAqVHlwZVNldCkgU2VuZCgpIDwtY2hhbiBUeXBlCmZ1bmMgKHNldCAqVHlwZVNldCkgRm9yYWxsKHAgZnVuYyhUeXBlKSBib29sKSBib29sCmZ1bmMgKHNldCAqVHlwZVNldCkgRXhpc3RzKHAgZnVuYyhUeXBlKSBib29sKSBib29sCmZ1bmMgKHNldCAqVHlwZVNldCkgRm9yZWFjaChmIGZ1bmMoVHlwZSkpCmZ1bmMgKHNldCAqVHlwZVNldCkgRmluZChwIGZ1bmMoVHlwZSkgYm9vbCkgKFR5cGUsIGJvb2wpCmZ1bmMgKHNldCAqVHlwZVNldCkgRmlsdGVyKHAgZnVuYyhUeXBlKSBib29sKSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIFBhcnRpdGlvbihwIGZ1bmMoVHlwZSkgYm9vbCkgKCpUeXBlU2V0LCAqVHlwZVNldCkKZnVuYyAoc2V0ICpUeXBlU2V0KSBNYXAoZiBmdW5jKFR5cGUpIFR5cGUpICpUeXBlU2V0CmZ1bmMgKHNldCAqVHlwZVNldCkgRmxhdE1hcChmIGZ1bmMoVHlwZSkgW11UeXBlKSAqVHlwZVNldApmdW5jIChzZXQgKlR5cGVTZXQpIENvdW50QnkocCBmdW5jKFR5cGUpIGJvb2wpIChyZXN1bHQgaW50KQpmdW5jIChzZXQgKlR5cGVTZXQpIE1pbigpIFR5cGUKZnVuYyAoc2V0ICpUeXBlU2V0KSBNYXgoKSAocmVzdWx0IFR5cGUpCmZ1bmMgKHNldCAqVHlwZVNldCkgTWluQnkobGVzcyBmdW5jKFR5cGUsIFR5cGUpIGJvb2wpIFR5cGUKZnVuYyAoc2V0ICpUeXBlU2V0KSBNYXhCeShsZXNzIGZ1bmMoVHlwZSwgVHlwZSkgYm9vbCkgVHlwZQpmdW5jIChzZXQgKlR5cGVTZXQpIFN1bSgpIFR5cGUKZnVuYyAoc2V0ICpUeXBlU2V0KSBTdHJpbmdMaXN0KCkgW11zdHJpbmcKZnVuYyAoc2V0ICpUeXBlU2V0KSBTdHJpbmcoKSBzdHJpbmcKZnVuYyAoc2V0ICpUeXBlU2V0KSBNa1N0cmluZyhzZXAgc3RyaW5nKSBzdHJpbmcKZnVuYyAoc2V0ICpUeXBlU2V0KSBNa1N0cmluZzMoYmVmb3JlLCBiZXR3ZWVuLCBhZnRlciBzdHJpbmcpIHN0cmluZwpmdW5jIChzZXQgKlR5cGVTZXQpIFVubWFyc2hhbEpTT04oYiBbXWJ5dGUpIGVycm9yCmZ1bmMgKHNldCAqVHlwZVNldCkgTWFyc2hhbEpTT04oKSAoW11ieXRlLCBlcnJvcikKZnVuYyAoc2V0ICpUeXBlU2V0KSBTdHJpbmdNYXAoKSBtYXBbc3RyaW5nXWJvb2wKZnVuYyAoc2V0ICpUeXBlU2V0KSBHb2JEZWNvZGUoYiBbXWJ5dGUpIGVycm9yCmZ1bmMgKHNldCBUeXBlU2V0KSBHb2JFbmNvZGUoKSAoW11ieXRlLCBlcnJvcikK\"")
		packr.PackJSONBytes("builtin", "types/stringy.tpl", "\"Ly8gQSBkZXJpdmVkIHN0cmluZy1iYXNlZCB0eXBlIGNvbXBhdGlibGUgd2l0aCBtYXJzaGFsbGluZyBhbmQgZGF0YWJhc2UgQVBJcy4KLy8KLy8gR2VuZXJhdGVkIGZyb20ge3suVGVtcGxhdGVGaWxlfX0gd2l0aCBUeXBlPXt7LlR5cGUuTmFtZX19Ci8vIG9wdGlvbnM6IFNvcnRhYmxlU2xpY2U6e3suU29ydGFibGVTbGljZX19Ci8vIGJ5IHJ1bnRlbXBsYXRlIHt7LkFwcFZlcnNpb259fQovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pvaGFuYnJhbmRob3JzdC9ydW50ZW1wbGF0ZS9ibG9iL21hc3Rlci9CVUlMVElOLm1kCgpwYWNrYWdlIHt7LlBhY2thZ2V9fQoKaW1wb3J0ICgKCSJlcnJvcnMiCnt7LSBpZiAuU29ydGFibGVTbGljZX19Cgkic29ydCIKe3stIGVuZH19Cgkic3RyaW5ncyIKCSJkYXRhYmFzZS9zcWwvZHJpdmVyIgoJImZtdCIKKQoKLy8ge3suVHlwZS5OYW1lfX0gaXMgYSBzcGVjaWFsaXNlZCBraW5kIG9mIHN0cmluZy4KdHlwZSB7ey5UeXBlLk5hbWV9fSBzdHJpbmcKCi8vIFB0ciByZXR1cm5zIHRoZSBhZGRyZXNzIG9mIGEge3suVHlwZS5OYW1lfX0uCmZ1bmMgKHt7LlR5cGUuTH19IHt7LlR5cGUuTmFtZX19KSBQdHIoKSAqe3suVHlwZS5OYW1lfX0gewoJcmV0dXJuICZ7ey5UeXBlLkx9fQp9CgovLyBTdHJpbmcgY29udmVydHMgdG8gYSBzdHJpbmcgYW5kIGltcGxlbWVudHMgZm10LlN0cmluZ2VyLgpmdW5jICh7ey5UeXBlLkx9fSB7ey5UeXBlLk5hbWV9fSkgU3RyaW5nKCkgc3RyaW5nIHsKCXJldHVybiBzdHJpbmcoe3suVHlwZS5MfX0pCn0KCi8vIFRyaW1TcGFjZSByZW1vdmVzIHN1cnJvdW5kaW5nIHdoaXRlc3BhY2UuCmZ1bmMgKHt7LlR5cGUuTH19IHt7LlR5cGUuTmFtZX19KSBUcmltU3BhY2UoKSB7ey5UeXBlLk5hbWV9fSB7CglyZXR1cm4ge3suVHlwZS5OYW1lfX0oc3RyaW5ncy5UcmltU3BhY2Uoe3suVHlwZS5MfX0uU3RyaW5nKCkpKQp9CgovLyBUb0xvd2VyIGNvbnZlcnRzIHRoZSB2YWx1ZSB0byBsb3dlcmNhc2UuCmZ1bmMgKHt7LlR5cGUuTH19IHt7LlR5cGUuTmFtZX19KSBUb0xvd2VyKCkge3suVHlwZS5OYW1lfX0gewoJcmV0dXJuIHt7LlR5cGUuTmFtZX19KHN0cmluZ3MuVG9Mb3dlcihzdHJpbmcoe3suVHlwZS5MfX0pKSkKfQoKLy8gVG9VcHBlciBjb252ZXJ0cyB0aGUgdmFsdWUgdG8gdXBwZXJjYXNlLgpmdW5jICh7ey5UeXBlLkx9fSB7ey5UeXBlLk5hbWV9fSkgVG9VcHBlcigpIHt7LlR5cGUuTmFtZX19IHsKCXJldHVybiB7ey5UeXBlLk5hbWV9fShzdHJpbmdzLlRvVXBwZXIoc3RyaW5nKHt7LlR5cGUuTH19KSkpCn0KCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKLy8gU2NhbiBwYXJzZXMgc29tZSB2YWx1ZS4gSXQgaW1wbGVtZW50cyBzcWwuU2Nhbm5lciwKLy8gaHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9kYXRhYmFzZS9zcWwvI1NjYW5uZXIKZnVuYyAoe3suVHlwZS5MfX0gKnt7LlR5cGUuTmFtZX19KSBTY2FuKHZhbHVlIGludGVyZmFjZXt9KSBlcnJvciB7CglpZiB2YWx1ZSA9PSBuaWwgewoJCSp7ey5UeXBlLkx9fSA9IHt7LlR5cGUuTmFtZX19KCIiKQoJCXJldHVybiBuaWwKCX0KCglzd2l0Y2ggdmFsdWUuKHR5cGUpIHsKCWNhc2Ugc3RyaW5nOgoJCSp7ey5UeXBlLkx9fSA9IHt7LlR5cGUuTmFtZX19KHZhbHVlLihzdHJpbmcpKQoJY2FzZSBbXWJ5dGU6CgkJKnt7LlR5cGUuTH19ID0ge3suVHlwZS5OYW1lfX0oc3RyaW5nKHZhbHVlLihbXWJ5dGUpKSkKCWNhc2UgbmlsOgoJZGVmYXVsdDoKCQlyZXR1cm4gZXJyb3JzLk5ldyhmbXQuU3ByaW50Zigie3suVHlwZS5OYW1lfX0uU2NhbiglI3YpIiwgdmFsdWUpKQoJfQoJcmV0dXJuIG5pbAp9CgovLyBWYWx1ZSBjb252ZXJ0cyB0aGUgdmFsdWUgdG8gYSBzdHJpbmcuIEl0IGltcGxlbWVudHMgZHJpdmVyLlZhbHVlciwKLy8gaHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9kYXRhYmFzZS9zcWwvZHJpdmVyLyNWYWx1ZXIKZnVuYyAoe3suVHlwZS5MfX0ge3suVHlwZS5OYW1lfX0pIFZhbHVlKCkgKGRyaXZlci5WYWx1ZSwgZXJyb3IpIHsKCXJldHVybiBzdHJpbmcoe3suVHlwZS5MfX0pLCBuaWwKfQoKLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBNYXJzaGFsVGV4dCBjb252ZXJ0cyB2YWx1ZXMgdG8gYSBmb3JtIHN1aXRhYmxlIGZvciB0cmFuc21pc3Npb24gdmlhIEpTT04sIFhNTCBldGMuCi8vIGh0dHBzOi8vZ29sYW5nLm9yZy9wa2cvZW5jb2RpbmcvI1RleHRNYXJzaGFsZXIKZnVuYyAoe3suVHlwZS5MfX0ge3suVHlwZS5OYW1lfX0pIE1hcnNoYWxUZXh0KCkgKHRleHQgW11ieXRlLCBlcnIgZXJyb3IpIHsKCXJldHVybiBbXWJ5dGUoe3suVHlwZS5MfX0uU3RyaW5nKCkpLCBuaWwKfQoKLy8gVW5tYXJzaGFsVGV4dCBjb252ZXJ0cyB0cmFuc21pdHRlZCB2YWx1ZXMgdG8gb3JkaW5hcnkgdmFsdWVzLgovLyBodHRwczovL2dvbGFuZy5vcmcvcGtnL2VuY29kaW5nLyNUZXh0VW5tYXJzaGFsZXIKZnVuYyAoe3suVHlwZS5MfX0gKnt7LlR5cGUuTmFtZX19KSBVbm1hcnNoYWxUZXh0KHRleHQgW11ieXRlKSBlcnJvciB7CglyZXR1cm4ge3suVHlwZS5MfX0uU2Nhbih0ZXh0KQp9CgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0Ke3tpZiAuU29ydGFibGVTbGljZX19Ci8vIHt7LlR5cGUuVX19U2xpY2UgYXR0YWNoZXMgdGhlIG1ldGhvZHMgb2Ygc29ydC5JbnRlcmZhY2UgdG8gW117ey5UeXBlLk5hbWV9fSwgc29ydGluZyBpbiBpbmNyZWFzaW5nIG9yZGVyLgp0eXBlIHt7LlR5cGUuVX19U2xpY2UgW117ey5UeXBlLk5hbWV9fQoKZnVuYyAocCB7ey5UeXBlLlV9fVNsaWNlKSBMZW4oKSBpbnQgICAgICAgICAgIHsgcmV0dXJuIGxlbihwKSB9CmZ1bmMgKHAge3suVHlwZS5VfX1TbGljZSkgTGVzcyhpLCBqIGludCkgYm9vbCB7IHJldHVybiBwW2ldIDwgcFtqXSB9CmZ1bmMgKHAge3suVHlwZS5VfX1TbGljZSkgU3dhcChpLCBqIGludCkgICAgICB7IHBbaV0sIHBbal0gPSBwW2pdLCBwW2ldIH0KCi8vIFNvcnRlZE4gaXMgYSBjb252ZW5pZW5jZSBtZXRob2QuCmZ1bmMgKHAge3suVHlwZS5VfX1TbGljZSkgU29ydGVkKCkgeyBzb3J0LlNvcnQocCkgfQp7e2VuZH19Cg==\"")
}
